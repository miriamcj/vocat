<% content_for :content_header do %>
Manage Course Projects
<% end %>

<% content_for :content_header_links do %>
  <%= link_to 'New Project', new_course_manage_project_path(@course), :class => 'teal-plus-button' %>
<% end %>

<% content_for :content_intro do %>
  <p>
    The following table shows the projects that you have configured for this course. Click the links below
    to edit or delete existing projects. Click the "new project" button, above, to create a new project for the
    course.
  </p>
<% end %>

<% content_for :content_frames do %>
  <div class="table-wrapper">
    <table class="table">
      <thead>
      <tr>
        <th>Name</th>
        <th>Description</th>
        <th>Rubric</th>
        <th>Actions</th>
        <th>Sorting</th>
      </tr>
      </thead>
      <tbody>
      <% @projects.each_with_index do |project, index| %>
        <tr>
          <th>
            <%= link_to project.name, course_manage_project_path(@course, project), :class => "table--heading" %>
          </th>
          <td><%= project.description %></td>
          <td><%= project.rubric_name %></td>
          <td style="white-space: nowrap">
            <% if can? :update, project %>
              <strong><%= link_to 'Edit', edit_course_manage_project_path(@course, project) %></strong> /
            <% end %>
            <% if can? :destroy, project %>
              <strong><%= link_to 'Delete', course_manage_project_path(@course, project), method: :delete, data: { modalconfirm: 'Deleting this project will also delete submissions and evaluations associated with this project. This action is irreversible. Are you sure you want to do this?' } %></strong>
            <% end %>
          </td>
          <td class="centered sorting">
            <% if index == 0 %>
            <a style="visibility: hidden" class="teal-circle-arrow-up-button">&nbsp;</a>
            <% end %>
            <% if index > 0 %>
            <%= link_to 'up', position_course_manage_project_path(@course, project, {project: {listing_order_position: index - 1}}), method: :put, :class => 'teal-circle-arrow-up-button' %>
            <% end %>
            <% if index + 1 < @projects.length %>
            <%= link_to 'down', position_course_manage_project_path(@course, project, {project: {listing_order_position: index + 1}}), method: :put, :class => 'teal-circle-arrow-down-button' %>
            <% end %>
            <% if index == @projects.length - 1 %>
              <a style="visibility: hidden" class="teal-circle-arrow-down-button">&nbsp;</a>
            <% end %>
          </td>
        </tr>
      <% end %>
      </tbody>
    </table>
  </div>
  <%= paginate @projects %>
<% end %>








