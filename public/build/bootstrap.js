//     Underscore.js 1.4.4
//     http://underscorejs.org
//     (c) 2009-2013 Jeremy Ashkenas, DocumentCloud Inc.
//     Underscore may be freely distributed under the MIT license.

/*!
 * jQuery JavaScript Library v1.10.1
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-05-30T21:49Z
 */

/*!
 * Sizzle CSS Selector Engine v1.9.4-pre
 * http://sizzlejs.com/
 *
 * Copyright 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-05-27
 */

//     (c) 2010-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Backbone may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://backbonejs.org

// MarionetteJS (Backbone.Marionette)
// ----------------------------------
// v2.2.0
//
// Copyright (c)2014 Derick Bailey, Muted Solutions, LLC.
// Distributed under MIT license
//
// http://marionettejs.com

/*!
 * Includes BabySitter
 * https://github.com/marionettejs/backbone.babysitter/
 *
 * Includes Wreqr
 * https://github.com/marionettejs/backbone.wreqr/
 */

// Copyright (c)2014 Derick Bailey, Muted Solutions, LLC.

// Distributed under MIT license

/*

Copyright (C) 2011 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/

/**
 * @license Handlebars hbs 0.4.0 - Alex Sexton, but Handlebars has it's own licensing junk
 *
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/require-cs for details on the plugin this was based off of
 */

// Chosen, a Select Box Enhancer for jQuery and Prototype
// by Patrick Filler for Harvest, http://getharvest.com
//
// Version 1.0.0
// Full source at https://github.com/harvesthq/chosen
// Copyright (c) 2011 Harvest http://getharvest.com

/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.effect.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js, jquery.ui.menu.js, jquery.ui.position.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */

/*!
 * jQuery Color Animations v2.1.2
 * https://github.com/jquery/jquery-color
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Wed Jan 16 08:47:09 2013 -0600
 */

/*!
 *  dc 1.6.0-dev
 *  http://nickqizhu.github.io/dc.js/
 *  Copyright 2012 Nick Zhu and other contributors
 *
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */

/*
Sticky Elements Shortcut for jQuery Waypoints - v2.0.5
Copyright (c) 2011-2014 Caleb Troughton
Licensed under the MIT license.
https://github.com/imakewebthings/jquery-waypoints/blob/master/licenses.txt
*/

(function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){if(e instanceof x)return e;if(!(this instanceof x))return new x(e);this._wrapped=e};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.4.4";var T=x.each=x.forEach=function(e,t,r){if(e==null)return;if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(t.call(r,e[i],i,e)===n)return}else for(var o in e)if(x.has(e,o)&&t.call(r,e[o],o,e)===n)return};x.map=x.collect=function(e,t,n){var r=[];return e==null?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)});if(!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},x.filter=x.select=function(e,t,n){var r=[];return e==null?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return e==null?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return e==null?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n}),!!i)};x.contains=x.include=function(e,t){return e==null?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.where=function(e,t,n){return x.isEmpty(t)?n?null:[]:x[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},x.findWhere=function(e,t){return x.where(e,t,!0)},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-Infinity;var r={computed:-Infinity,value:-Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return Infinity;var r={computed:Infinity,value:Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r};var k=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,n){var r=k(t);return x.pluck(x.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index<t.index?-1:1}),"value")};var L=function(e,t,n,r){var i={},s=k(t||x.identity);return T(e,function(t,o){var u=s.call(n,t,o,e);r(i,u,t)}),i};x.groupBy=function(e,t,n){return L(e,t,n,function(e,t,n){(x.has(e,t)?e[t]:e[t]=[]).push(n)})},x.countBy=function(e,t,n){return L(e,t,n,function(e,t){x.has(e,t)||(e[t]=0),e[t]++})},x.sortedIndex=function(e,t,n,r){n=n==null?x.identity:k(n);var i=n.call(r,t),s=0,o=e.length;while(s<o){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return e==null?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return e==null?void 0:t!=null&&!n?u.call(e,0,t):e[0]},x.initial=function(e,t,n){return u.call(e,0,e.length-(t==null||n?1:t))},x.last=function(e,t,n){return e==null?void 0:t!=null&&!n?u.call(e,Math.max(e.length-t,0)):e[e.length-1]},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,t==null||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return T(e,function(e){x.isArray(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){if(t?!r||o[o.length-1]!==n:!x.contains(o,n))o.push(n),s.push(e[r])}),s},x.union=function(){return x.uniq(a.apply(r,arguments))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){var e=u.call(arguments),t=x.max(x.pluck(e,"length")),n=new Array(t);for(var r=0;r<t;r++)n[r]=x.pluck(e,""+r);return n},x.object=function(e,t){if(e==null)return{};var n={};for(var r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(e==null)return-1;var r=0,i=e.length;if(n){if(typeof n!="number")return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(e==null)return-1;var r=n!=null;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);var i=r?n:e.length;while(i--)if(e[i]===t)return i;return-1},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s},x.bind=function(e,t){if(e.bind===S&&S)return S.apply(e,u.call(arguments,1));var n=u.call(arguments,2);return function(){return e.apply(t,n.concat(u.call(arguments)))}},x.partial=function(e){var t=u.call(arguments,1);return function(){return e.apply(this,t.concat(u.call(arguments)))}},x.bindAll=function(e){var t=u.call(arguments,1);return t.length===0&&(t=x.functions(e)),T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t){var n,r,i,s,o=0,u=function(){o=new Date,i=null,s=e.apply(n,r)};return function(){var a=new Date,f=t-(a-o);return n=this,r=arguments,f<=0?(clearTimeout(i),i=null,o=a,s=e.apply(n,r)):i||(i=setTimeout(u,f)),s}},x.debounce=function(e,t,n){var r,i;return function(){var s=this,o=arguments,u=function(){r=null,n||(i=e.apply(s,o))},a=n&&!r;return clearTimeout(r),r=setTimeout(u,t),a&&(i=e.apply(s,o)),i}},x.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},x.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},x.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},x.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)x.has(e,n)&&(t[t.length]=n);return t},x.values=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push(e[n]);return t},x.pairs=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push([n,e[n]]);return t},x.invert=function(e){var t={};for(var n in e)x.has(e,n)&&(t[e[n]]=n);return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]==null&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var O=function(e,t,n,r){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var s=n.length;while(s--)if(n[s]==e)return r[s]==t;n.push(e),r.push(t);var o=0,u=!0;if(i=="[object Array]"){o=e.length,u=o==t.length;if(u)while(o--)if(!(u=O(e[o],t[o],n,r)))break}else{var a=e.constructor,l=t.constructor;if(a!==l&&!(x.isFunction(a)&&a instanceof a&&x.isFunction(l)&&l instanceof l))return!1;for(var c in e)if(x.has(e,c)){o++;if(!(u=x.has(t,c)&&O(e[c],t[c],n,r)))break}if(u){for(c in t)if(x.has(t,c)&&!(o--))break;u=!o}}return n.pop(),r.pop(),u};x.isEqual=function(e,t){return O(e,t,[],[])},x.isEmpty=function(e){if(e==null)return!0;if(x.isArray(e)||x.isString(e))return e.length===0;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&e.nodeType===1},x.isArray=w||function(e){return f.call(e)=="[object Array]"},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),typeof /./!="function"&&(x.isFunction=function(e){return typeof e=="function"}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||f.call(e)=="[object Boolean]"},x.isNull=function(e){return e===null},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.times=function(e,t,n){var r=Array(e);for(var i=0;i<e;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};M.unescape=x.invert(M.escape);var _={escape:new RegExp("["+x.keys(M.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(M.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return t==null?"":(""+t).replace(_[e],function(t){return M[e][t]})}}),x.result=function(e,t){if(e==null)return null;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),j.call(this,n.apply(x,e))}})};var D=0;x.uniqueId=function(e){var t=++D+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var P=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=new RegExp([(n.escape||P).source,(n.interpolate||P).source,(n.evaluate||P).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(B,function(e){return"\\"+H[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var j=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e=="shift"||e=="splice")&&n.length===0&&delete n[0],j.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return j.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),typeof define=="function"&&define.amd&&define("underscore",[],function(){return x})}).call(this),function(e,t){function H(e){var t=e.length,n=w.type(e);return w.isWindow(e)?!1:e.nodeType===1&&t?!0:n==="array"||n!=="function"&&(t===0||typeof t=="number"&&t>0&&t-1 in e)}function j(e){var t=B[e]={};return w.each(e.match(S)||[],function(e,n){t[n]=!0}),t}function q(e,n,r,i){if(!w.acceptData(e))return;var s,o,u=w.expando,a=e.nodeType,f=a?w.cache:e,l=a?e[u]:e[u]&&u;if((!l||!f[l]||!i&&!f[l].data)&&r===t&&typeof n=="string")return;l||(a?l=e[u]=c.pop()||w.guid++:l=u),f[l]||(f[l]=a?{}:{toJSON:w.noop});if(typeof n=="object"||typeof n=="function")i?f[l]=w.extend(f[l],n):f[l].data=w.extend(f[l].data,n);return o=f[l],i||(o.data||(o.data={}),o=o.data),r!==t&&(o[w.camelCase(n)]=r),typeof n=="string"?(s=o[n],s==null&&(s=o[w.camelCase(n)])):s=o,s}function R(e,t,n){if(!w.acceptData(e))return;var r,i,s=e.nodeType,o=s?w.cache:e,u=s?e[w.expando]:w.expando;if(!o[u])return;if(t){r=n?o[u]:o[u].data;if(r){w.isArray(t)?t=t.concat(w.map(t,w.camelCase)):t in r?t=[t]:(t=w.camelCase(t),t in r?t=[t]:t=t.split(" ")),i=t.length;while(i--)delete r[t[i]];if(n?!z(r):!w.isEmptyObject(r))return}}if(!n){delete o[u].data;if(!z(o[u]))return}s?w.cleanData([e],!0):w.support.deleteExpando||o!=o.window?delete o[u]:o[u]=null}function U(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(I,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:+r+""===r?+r:F.test(r)?w.parseJSON(r):r}catch(s){}w.data(e,n,r)}else r=t}return r}function z(e){var t;for(t in e){if(t==="data"&&w.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function it(){return!0}function st(){return!1}function ot(){try{return o.activeElement}catch(e){}}function ct(e,t){do e=e[t];while(e&&e.nodeType!==1);return e}function ht(e,t,n){if(w.isFunction(t))return w.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return w.grep(e,function(e){return e===t!==n});if(typeof t=="string"){if(ut.test(t))return w.filter(t,e,n);t=w.filter(t,e)}return w.grep(e,function(e){return w.inArray(e,t)>=0!==n})}function pt(e){var t=dt.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function Mt(e,t){return w.nodeName(e,"table")&&w.nodeName(t.nodeType===1?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function _t(e){return e.type=(w.find.attr(e,"type")!==null)+"/"+e.type,e}function Dt(e){var t=Ct.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Pt(e,t){var n,r=0;for(;(n=e[r])!=null;r++)w._data(n,"globalEval",!t||w._data(t[r],"globalEval"))}function Ht(e,t){if(t.nodeType!==1||!w.hasData(e))return;var n,r,i,s=w._data(e),o=w._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)w.event.add(t,n,u[n][r])}o.data&&(o.data=w.extend({},o.data))}function Bt(e,t){var n,r,i;if(t.nodeType!==1)return;n=t.nodeName.toLowerCase();if(!w.support.noCloneEvent&&t[w.expando]){i=w._data(t);for(r in i.events)w.removeEvent(t,r,i.handle);t.removeAttribute(w.expando)}if(n==="script"&&t.text!==e.text)_t(t).text=e.text,Dt(t);else if(n==="object")t.parentNode&&(t.outerHTML=e.outerHTML),w.support.html5Clone&&e.innerHTML&&!w.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML);else if(n==="input"&&xt.test(e.type))t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value);else if(n==="option")t.defaultSelected=t.selected=e.defaultSelected;else if(n==="input"||n==="textarea")t.defaultValue=e.defaultValue}function jt(e,n){var r,s,o=0,u=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==i?e.querySelectorAll(n||"*"):t;if(!u)for(u=[],r=e.childNodes||e;(s=r[o])!=null;o++)!n||w.nodeName(s,n)?u.push(s):w.merge(u,jt(s,n));return n===t||n&&w.nodeName(e,n)?w.merge([e],u):u}function Ft(e){xt.test(e.type)&&(e.defaultChecked=e.checked)}function tn(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=en.length;while(i--){t=en[i]+n;if(t in e)return t}return r}function nn(e,t){return e=t||e,w.css(e,"display")==="none"||!w.contains(e.ownerDocument,e)}function rn(e,t){var n,r,i,s=[],o=0,u=e.length;for(;o<u;o++){r=e[o];if(!r.style)continue;s[o]=w._data(r,"olddisplay"),n=r.style.display,t?(!s[o]&&n==="none"&&(r.style.display=""),r.style.display===""&&nn(r)&&(s[o]=w._data(r,"olddisplay",an(r.nodeName)))):s[o]||(i=nn(r),(n&&n!=="none"||!i)&&w._data(r,"olddisplay",i?n:w.css(r,"display")))}for(o=0;o<u;o++){r=e[o];if(!r.style)continue;if(!t||r.style.display==="none"||r.style.display==="")r.style.display=t?s[o]||"":"none"}return e}function sn(e,t,n){var r=$t.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function on(e,t,n,r,i){var s=n===(r?"border":"content")?4:t==="width"?1:0,o=0;for(;s<4;s+=2)n==="margin"&&(o+=w.css(e,n+Zt[s],!0,i)),r?(n==="content"&&(o-=w.css(e,"padding"+Zt[s],!0,i)),n!=="margin"&&(o-=w.css(e,"border"+Zt[s]+"Width",!0,i))):(o+=w.css(e,"padding"+Zt[s],!0,i),n!=="padding"&&(o+=w.css(e,"border"+Zt[s]+"Width",!0,i)));return o}function un(e,t,n){var r=!0,i=t==="width"?e.offsetWidth:e.offsetHeight,s=qt(e),o=w.support.boxSizing&&w.css(e,"boxSizing",!1,s)==="border-box";if(i<=0||i==null){i=Rt(e,t,s);if(i<0||i==null)i=e.style[t];if(Jt.test(i))return i;r=o&&(w.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+on(e,t,n||(o?"border":"content"),r,s)+"px"}function an(e){var t=o,n=Qt[e];if(!n){n=fn(e,t);if(n==="none"||!n)It=(It||w("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(It[0].contentWindow||It[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=fn(e,t),It.detach();Qt[e]=n}return n}function fn(e,t){var n=w(t.createElement(e)).appendTo(t.body),r=w.css(n[0],"display");return n.remove(),r}function vn(e,t,n,r){var i;if(w.isArray(t))w.each(t,function(t,i){n||cn.test(e)?r(e,i):vn(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&w.type(t)==="object")for(i in t)vn(e+"["+i+"]",t[i],n,r);else r(e,t)}function _n(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(S)||[];if(w.isFunction(n))while(r=s[i++])r[0]==="+"?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Dn(e,t,n,r){function o(u){var a;return i[u]=!0,w.each(e[u]||[],function(e,u){var f=u(t,n,r);if(typeof f=="string"&&!s&&!i[f])return t.dataTypes.unshift(f),o(f),!1;if(s)return!(a=f)}),a}var i={},s=e===An;return o(t.dataTypes[0])||!i["*"]&&o("*")}function Pn(e,n){var r,i,s=w.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((s[i]?e:r||(r={}))[i]=n[i]);return r&&w.extend(!0,e,r),e}function Hn(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes;while(f[0]==="*")f.shift(),s===t&&(s=e.mimeType||n.getResponseHeader("Content-Type"));if(s)for(u in a)if(a[u]&&a[u].test(s)){f.unshift(u);break}if(f[0]in r)o=f[0];else{for(u in r){if(!f[0]||e.converters[u+" "+f[0]]){o=u;break}i||(i=u)}o=o||i}if(o)return o!==f[0]&&f.unshift(o),r[o]}function Bn(e,t,n,r){var i,s,o,u,a,f={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)f[o.toLowerCase()]=e.converters[o];s=l.shift();while(s){e.responseFields[s]&&(n[e.responseFields[s]]=t),!a&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a=s,s=l.shift();if(s)if(s==="*")s=a;else if(a!=="*"&&a!==s){o=f[a+" "+s]||f["* "+s];if(!o)for(i in f){u=i.split(" ");if(u[1]===s){o=f[a+" "+u[0]]||f["* "+u[0]];if(o){o===!0?o=f[i]:f[i]!==!0&&(s=u[0],l.unshift(u[1]));break}}}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(c){return{state:"parsererror",error:o?c:"No conversion from "+a+" to "+s}}}}return{state:"success",data:t}}function zn(){try{return new e.XMLHttpRequest}catch(t){}}function Wn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function Yn(){return setTimeout(function(){Xn=t}),Xn=w.now()}function Zn(e,t,n){var r,i=(Gn[t]||[]).concat(Gn["*"]),s=0,o=i.length;for(;s<o;s++)if(r=i[s].call(n,t,e))return r}function er(e,t,n){var r,i,s=0,o=Qn.length,u=w.Deferred().always(function(){delete a.elem}),a=function(){if(i)return!1;var t=Xn||Yn(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,s=1-r,o=0,a=f.tweens.length;for(;o<a;o++)f.tweens[o].run(s);return u.notifyWith(e,[f,s,n]),s<1&&a?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:w.extend({},t),opts:w.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||Yn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=w.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(r),r},stop:function(t){var n=0,r=t?f.tweens.length:0;if(i)return this;i=!0;for(;n<r;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;tr(l,f.opts.specialEasing);for(;s<o;s++){r=Qn[s].call(f,e,l,f.opts);if(r)return r}return w.map(l,Zn,f),w.isFunction(f.opts.start)&&f.opts.start.call(e,f),w.fx.timer(w.extend(a,{elem:e,anim:f,queue:f.opts.queue})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function tr(e,t){var n,r,i,s,o;for(n in e){r=w.camelCase(n),i=t[r],s=e[n],w.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=w.cssHooks[r];if(o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}}function nr(e,t,n){var r,i,s,o,u,a,f=this,l={},c=e.style,h=e.nodeType&&nn(e),p=w._data(e,"fxshow");n.queue||(u=w._queueHooks(e,"fx"),u.unqueued==null&&(u.unqueued=0,a=u.empty.fire,u.empty.fire=function(){u.unqueued||a()}),u.unqueued++,f.always(function(){f.always(function(){u.unqueued--,w.queue(e,"fx").length||u.empty.fire()})})),e.nodeType===1&&("height"in t||"width"in t)&&(n.overflow=[c.overflow,c.overflowX,c.overflowY],w.css(e,"display")==="inline"&&w.css(e,"float")==="none"&&(!w.support.inlineBlockNeedsLayout||an(e.nodeName)==="inline"?c.display="inline-block":c.zoom=1)),n.overflow&&(c.overflow="hidden",w.support.shrinkWrapBlocks||f.always(function(){c.overflow=n.overflow[0],c.overflowX=n.overflow[1],c.overflowY=n.overflow[2]}));for(r in t){i=t[r];if($n.exec(i)){delete t[r],s=s||i==="toggle";if(i===(h?"hide":"show"))continue;l[r]=p&&p[r]||w.style(e,r)}}if(!w.isEmptyObject(l)){p?"hidden"in p&&(h=p.hidden):p=w._data(e,"fxshow",{}),s&&(p.hidden=!h),h?w(e).show():f.done(function(){w(e).hide()}),f.done(function(){var t;w._removeData(e,"fxshow");for(t in l)w.style(e,t,l[t])});for(r in l)o=Zn(h?p[r]:0,r,f),r in p||(p[r]=o.start,h&&(o.end=o.start,o.start=r==="width"||r==="height"?1:0))}}function rr(e,t,n,r,i){return new rr.prototype.init(e,t,n,r,i)}function ir(e,t){var n,r={height:e},i=0;t=t?1:0;for(;i<4;i+=2-t)n=Zt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function sr(e){return w.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n,r,i=typeof t,s=e.location,o=e.document,u=o.documentElement,a=e.jQuery,f=e.$,l={},c=[],h="1.10.1",p=c.concat,d=c.push,v=c.slice,m=c.indexOf,g=l.toString,y=l.hasOwnProperty,b=h.trim,w=function(e,t){return new w.fn.init(e,t,r)},E=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,S=/\S+/g,x=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,T=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,N=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,C=/^[\],:{}\s]*$/,k=/(?:^|:|,)(?:\s*\[)+/g,L=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,A=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,O=/^-ms-/,M=/-([\da-z])/gi,_=function(e,t){return t.toUpperCase()},D=function(e){if(o.addEventListener||e.type==="load"||o.readyState==="complete")P(),w.ready()},P=function(){o.addEventListener?(o.removeEventListener("DOMContentLoaded",D,!1),e.removeEventListener("load",D,!1)):(o.detachEvent("onreadystatechange",D),e.detachEvent("onload",D))};w.fn=w.prototype={jquery:h,constructor:w,init:function(e,n,r){var i,s;if(!e)return this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?i=[null,e,null]:i=T.exec(e);if(i&&(i[1]||!n)){if(i[1]){n=n instanceof w?n[0]:n,w.merge(this,w.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:o,!0));if(N.test(i[1])&&w.isPlainObject(n))for(i in n)w.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}s=o.getElementById(i[2]);if(s&&s.parentNode){if(s.id!==i[2])return r.find(e);this.length=1,this[0]=s}return this.context=o,this.selector=e,this}return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e)}return e.nodeType?(this.context=this[0]=e,this.length=1,this):w.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),w.makeArray(e,this))},selector:"",length:0,toArray:function(){return v.call(this)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e){var t=w.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return w.each(this,e,t)},ready:function(e){return w.ready.promise().done(e),this},slice:function(){return this.pushStack(v.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},map:function(e){return this.pushStack(w.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:d,sort:[].sort,splice:[].splice},w.fn.init.prototype=w.fn,w.extend=w.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;typeof u=="boolean"&&(l=u,u=arguments[1]||{},a=2),typeof u!="object"&&!w.isFunction(u)&&(u={}),f===a&&(u=this,--a);for(;a<f;a++)if((s=arguments[a])!=null)for(i in s){e=u[i],r=s[i];if(u===r)continue;l&&r&&(w.isPlainObject(r)||(n=w.isArray(r)))?(n?(n=!1,o=e&&w.isArray(e)?e:[]):o=e&&w.isPlainObject(e)?e:{},u[i]=w.extend(l,o,r)):r!==t&&(u[i]=r)}return u},w.extend({expando:"jQuery"+(h+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===w&&(e.$=f),t&&e.jQuery===w&&(e.jQuery=a),w},isReady:!1,readyWait:1,holdReady:function(e){e?w.readyWait++:w.ready(!0)},ready:function(e){if(e===!0?--w.readyWait:w.isReady)return;if(!o.body)return setTimeout(w.ready);w.isReady=!0;if(e!==!0&&--w.readyWait>0)return;n.resolveWith(o,[w]),w.fn.trigger&&w(o).trigger("ready").off("ready")},isFunction:function(e){return w.type(e)==="function"},isArray:Array.isArray||function(e){return w.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):typeof e=="object"||typeof e=="function"?l[g.call(e)]||"object":typeof e},isPlainObject:function(e){var n;if(!e||w.type(e)!=="object"||e.nodeType||w.isWindow(e))return!1;try{if(e.constructor&&!y.call(e,"constructor")&&!y.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(r){return!1}if(w.support.ownLast)for(n in e)return y.call(e,n);for(n in e);return n===t||y.call(e,n)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){if(!e||typeof e!="string")return null;typeof t=="boolean"&&(n=t,t=!1),t=t||o;var r=N.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=w.buildFragment([e],t,i),i&&w(i).remove(),w.merge([],r.childNodes))},parseJSON:function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(t===null)return t;if(typeof t=="string"){t=w.trim(t);if(t&&C.test(t.replace(L,"@").replace(A,"]").replace(k,"")))return(new Function("return "+t))()}w.error("Invalid JSON: "+t)},parseXML:function(n){var r,i;if(!n||typeof n!="string")return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&w.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&w.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(O,"ms-").replace(M,_)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,s=e.length,o=H(e);if(n)if(o)for(;i<s;i++){r=t.apply(e[i],n);if(r===!1)break}else for(i in e){r=t.apply(e[i],n);if(r===!1)break}else if(o)for(;i<s;i++){r=t.call(e[i],i,e[i]);if(r===!1)break}else for(i in e){r=t.call(e[i],i,e[i]);if(r===!1)break}return e},trim:b&&!b.call("﻿ ")?function(e){return e==null?"":b.call(e)}:function(e){return e==null?"":(e+"").replace(x,"")},makeArray:function(e,t){var n=t||[];return e!=null&&(H(Object(e))?w.merge(n,typeof e=="string"?[e]:e):d.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(m)return m.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if(typeof r=="number")for(;s<r;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;n=!!n;for(;s<o;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,t,n){var r,i=0,s=e.length,o=H(e),u=[];if(o)for(;i<s;i++)r=t(e[i],i,n),r!=null&&(u[u.length]=r);else for(i in e)r=t(e[i],i,n),r!=null&&(u[u.length]=r);return p.apply([],u)},guid:1,proxy:function(e,n){var r,i,s;return typeof n=="string"&&(s=e[n],n=e,e=s),w.isFunction(e)?(r=v.call(arguments,2),i=function(){return e.apply(n||this,r.concat(v.call(arguments)))},i.guid=e.guid=e.guid||w.guid++,i):t},access:function(e,n,r,i,s,o,u){var a=0,f=e.length,l=r==null;if(w.type(r)==="object"){s=!0;for(a in r)w.access(e,n,a,r[a],!0,o,u)}else if(i!==t){s=!0,w.isFunction(i)||(u=!0),l&&(u?(n.call(e,i),n=null):(l=n,n=function(e,t,n){return l.call(w(e),n)}));if(n)for(;a<f;a++)n(e[a],r,u?i:i.call(e[a],a,n(e[a],r)))}return s?e:l?n.call(e):f?n(e[0],r):o},now:function(){return(new Date).getTime()},swap:function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i}}),w.ready.promise=function(t){if(!n){n=w.Deferred();if(o.readyState==="complete")setTimeout(w.ready);else if(o.addEventListener)o.addEventListener("DOMContentLoaded",D,!1),e.addEventListener("load",D,!1);else{o.attachEvent("onreadystatechange",D),e.attachEvent("onload",D);var r=!1;try{r=e.frameElement==null&&o.documentElement}catch(i){}r&&r.doScroll&&function s(){if(!w.isReady){try{r.doScroll("left")}catch(e){return setTimeout(s,50)}P(),w.ready()}}()}}return n.promise(t)},w.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()}),r=w(o),function(e,t){function ot(e,t,n,i){var s,o,u,a,f,l,p,m,g,w;(t?t.ownerDocument||t:E)!==h&&c(t),t=t||h,n=n||[];if(!e||typeof e!="string")return n;if((a=t.nodeType)!==1&&a!==9)return[];if(d&&!i){if(s=Z.exec(e))if(u=s[1]){if(a===9){o=t.getElementById(u);if(!o||!o.parentNode)return n;if(o.id===u)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(u))&&y(t,o)&&o.id===u)return n.push(o),n}else{if(s[2])return H.apply(n,t.getElementsByTagName(e)),n;if((u=s[3])&&r.getElementsByClassName&&t.getElementsByClassName)return H.apply(n,t.getElementsByClassName(u)),n}if(r.qsa&&(!v||!v.test(e))){m=p=b,g=t,w=a===9&&e;if(a===1&&t.nodeName.toLowerCase()!=="object"){l=bt(e),(p=t.getAttribute("id"))?m=p.replace(nt,"\\$&"):t.setAttribute("id",m),m="[id='"+m+"'] ",f=l.length;while(f--)l[f]=m+wt(l[f]);g=$.test(e)&&t.parentNode||t,w=l.join(",")}if(w)try{return H.apply(n,g.querySelectorAll(w)),n}catch(S){}finally{p||t.removeAttribute("id")}}}return Lt(e.replace(W,"$1"),t,n,i)}function ut(e){return Y.test(e+"")}function at(){function t(n,r){return e.push(n+=" ")>s.cacheLength&&delete t[e.shift()],t[n]=r}var e=[];return t}function ft(e){return e[b]=!0,e}function lt(e){var t=h.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ct(e,t,n){e=e.split("|");var r,i=e.length,o=n?null:t;while(i--)if(!(r=s.attrHandle[e[i]])||r===t)s.attrHandle[e[i]]=o}function ht(e,t){var n=e.getAttributeNode(t);return n&&n.specified?n.value:e[t]===!0?t.toLowerCase():null}function pt(e,t){return e.getAttribute(t,t.toLowerCase()==="type"?1:2)}function dt(e){if(e.nodeName.toLowerCase()==="input")return e.defaultValue}function vt(e,t){var n=t&&e,r=n&&e.nodeType===1&&t.nodeType===1&&(~t.sourceIndex||O)-(~e.sourceIndex||O);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function mt(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function gt(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function yt(e){return ft(function(t){return t=+t,ft(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function bt(e,t){var n,r,i,o,u,a,f,l=N[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=s.preFilter;while(u){if(!n||(r=X.exec(u)))r&&(u=u.slice(r[0].length)||u),a.push(i=[]);n=!1;if(r=V.exec(u))n=r.shift(),i.push({value:n,type:r[0].replace(W," ")}),u=u.slice(n.length);for(o in s.filter)(r=G[o].exec(u))&&(!f[o]||(r=f[o](r)))&&(n=r.shift(),i.push({value:n,type:o,matches:r}),u=u.slice(n.length));if(!n)break}return t?u.length:u?ot.error(e):N(e,a).slice(0)}function wt(e){var t=0,n=e.length,r="";for(;t<n;t++)r+=e[t].value;return r}function Et(e,t,n){var r=t.dir,s=n&&r==="parentNode",o=x++;return t.first?function(t,n,i){while(t=t[r])if(t.nodeType===1||s)return e(t,n,i)}:function(t,n,u){var a,f,l,c=S+" "+o;if(u){while(t=t[r])if(t.nodeType===1||s)if(e(t,n,u))return!0}else while(t=t[r])if(t.nodeType===1||s){l=t[b]||(t[b]={});if((f=l[r])&&f[0]===c){if((a=f[1])===!0||a===i)return a===!0}else{f=l[r]=[c],f[1]=e(t,n,u)||i;if(f[1]===!0)return!0}}}}function St(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function xt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++)if(s=e[u])if(!n||n(s,r,i))o.push(s),f&&t.push(u);return o}function Tt(e,t,n,r,i,s){return r&&!r[b]&&(r=Tt(r)),i&&!i[b]&&(i=Tt(i,s)),ft(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||kt(t||"*",u.nodeType?[u]:u,[]),m=e&&(s||!t)?xt(v,h,e,u,a):v,g=n?i||(s?e:d||r)?[]:o:m;n&&n(m,g,u,a);if(r){f=xt(g,p),r(f,[],u,a),l=f.length;while(l--)if(c=f[l])g[p[l]]=!(m[p[l]]=c)}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?j.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=xt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):H.apply(o,g)})}function Nt(e){var t,n,r,i=e.length,o=s.relative[e[0].type],u=o||s.relative[" "],a=o?1:0,l=Et(function(e){return e===t},u,!0),c=Et(function(e){return j.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r))}];for(;a<i;a++)if(n=s.relative[e[a].type])h=[Et(St(h),n)];else{n=s.filter[e[a].type].apply(null,e[a].matches);if(n[b]){r=++a;for(;r<i;r++)if(s.relative[e[r].type])break;return Tt(a>1&&St(h),a>1&&wt(e.slice(0,a-1).concat({value:e[a-2].type===" "?"*":""})).replace(W,"$1"),n,a<r&&Nt(e.slice(a,r)),r<i&&Nt(e=e.slice(r)),r<i&&wt(e))}h.push(n)}return St(h)}function Ct(e,t){var n=0,r=t.length>0,o=e.length>0,u=function(u,a,l,c,p){var d,v,m,g=[],y=0,b="0",w=u&&[],E=p!=null,x=f,T=u||o&&s.find.TAG("*",p&&a.parentNode||a),N=S+=x==null?1:Math.random()||.1;E&&(f=a!==h&&a,i=n);for(;(d=T[b])!=null;b++){if(o&&d){v=0;while(m=e[v++])if(m(d,a,l)){c.push(d);break}E&&(S=N,i=++n)}r&&((d=!m&&d)&&y--,u&&w.push(d))}y+=b;if(r&&b!==y){v=0;while(m=t[v++])m(w,g,a,l);if(u){if(y>0)while(b--)!w[b]&&!g[b]&&(g[b]=D.call(c));g=xt(g)}H.apply(c,g),E&&!u&&g.length>0&&y+t.length>1&&ot.uniqueSort(c)}return E&&(S=N,f=x),w};return r?ft(u):u}function kt(e,t,n){var r=0,i=t.length;for(;r<i;r++)ot(e,t[r],n);return n}function Lt(e,t,n,i){var o,u,f,l,c,h=bt(e);if(!i&&h.length===1){u=h[0]=h[0].slice(0);if(u.length>2&&(f=u[0]).type==="ID"&&r.getById&&t.nodeType===9&&d&&s.relative[u[1].type]){t=(s.find.ID(f.matches[0].replace(rt,it),t)||[])[0];if(!t)return n;e=e.slice(u.shift().value.length)}o=G.needsContext.test(e)?0:u.length;while(o--){f=u[o];if(s.relative[l=f.type])break;if(c=s.find[l])if(i=c(f.matches[0].replace(rt,it),$.test(u[0].type)&&t.parentNode||t)){u.splice(o,1),e=i.length&&wt(u);if(!e)return H.apply(n,i),n;break}}}return a(e,h)(i,t,!d,n,$.test(e)),n}function At(){}var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b="sizzle"+ -(new Date),E=e.document,S=0,x=0,T=at(),N=at(),C=at(),k=!1,L=function(){return 0},A=typeof t,O=1<<31,M={}.hasOwnProperty,_=[],D=_.pop,P=_.push,H=_.push,B=_.slice,j=_.indexOf||function(e){var t=0,n=this.length;for(;t<n;t++)if(this[t]===e)return t;return-1},F="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",I="[\\x20\\t\\r\\n\\f]",q="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",R=q.replace("w","w#"),U="\\["+I+"*("+q+")"+I+"*(?:([*^$|!~]?=)"+I+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+R+")|)|)"+I+"*\\]",z=":("+q+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+U.replace(3,8)+")*)|.*)\\)|)",W=new RegExp("^"+I+"+|((?:^|[^\\\\])(?:\\\\.)*)"+I+"+$","g"),X=new RegExp("^"+I+"*,"+I+"*"),V=new RegExp("^"+I+"*([>+~]|"+I+")"+I+"*"),$=new RegExp(I+"*[+~]"),J=new RegExp("="+I+"*([^\\]'\"]*)"+I+"*\\]","g"),K=new RegExp(z),Q=new RegExp("^"+R+"$"),G={ID:new RegExp("^#("+q+")"),CLASS:new RegExp("^\\.("+q+")"),TAG:new RegExp("^("+q.replace("w","w*")+")"),ATTR:new RegExp("^"+U),PSEUDO:new RegExp("^"+z),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+I+"*(even|odd|(([+-]|)(\\d*)n|)"+I+"*(?:([+-]|)"+I+"*(\\d+)|))"+I+"*\\)|)","i"),bool:new RegExp("^(?:"+F+")$","i"),needsContext:new RegExp("^"+I+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+I+"*((?:-\\d)?\\d*)"+I+"*\\)|)(?=[^-]|$)","i")},Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,et=/^(?:input|select|textarea|button)$/i,tt=/^h\d$/i,nt=/'|\\/g,rt=new RegExp("\\\\([\\da-f]{1,6}"+I+"?|("+I+")|.)","ig"),it=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,r&1023|56320)};try{H.apply(_=B.call(E.childNodes),E.childNodes),_[E.childNodes.length].nodeType}catch(st){H={apply:_.length?function(e,t){P.apply(e,B.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}u=ot.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},r=ot.support={},c=ot.setDocument=function(e){var t=e?e.ownerDocument||e:E,n=t.parentWindow;if(t===h||t.nodeType!==9||!t.documentElement)return h;h=t,p=t.documentElement,d=!u(t),n&&n.frameElement&&n.attachEvent("onbeforeunload",function(){c()}),r.attributes=lt(function(e){return e.innerHTML="<a href='#'></a>",ct("type|href|height|width",pt,e.firstChild.getAttribute("href")==="#"),ct(F,ht,e.getAttribute("disabled")==null),e.className="i",!e.getAttribute("className")}),r.input=lt(function(e){return e.innerHTML="<input>",e.firstChild.setAttribute("value",""),e.firstChild.getAttribute("value")===""}),ct("value",dt,r.attributes&&r.input),r.getElementsByTagName=lt(function(e){return e.appendChild(t.createComment("")),!e.getElementsByTagName("*").length}),r.getElementsByClassName=lt(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",e.getElementsByClassName("i").length===2}),r.getById=lt(function(e){return p.appendChild(e).id=b,!t.getElementsByName||!t.getElementsByName(b).length}),r.getById?(s.find.ID=function(e,t){if(typeof t.getElementById!==A&&d){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},s.filter.ID=function(e){var t=e.replace(rt,it);return function(e){return e.getAttribute("id")===t}}):(delete s.find.ID,s.filter.ID=function(e){var t=e.replace(rt,it);return function(e){var n=typeof e.getAttributeNode!==A&&e.getAttributeNode("id");return n&&n.value===t}}),s.find.TAG=r.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==A)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if(e==="*"){while(n=s[i++])n.nodeType===1&&r.push(n);return r}return s},s.find.CLASS=r.getElementsByClassName&&function(e,t){if(typeof t.getElementsByClassName!==A&&d)return t.getElementsByClassName(e)},m=[],v=[];if(r.qsa=ut(t.querySelectorAll))lt(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||v.push("\\["+I+"*(?:value|"+F+")"),e.querySelectorAll(":checked").length||v.push(":checked")}),lt(function(e){var n=t.createElement("input");n.setAttribute("type","hidden"),e.appendChild(n).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&v.push("[*^$]="+I+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")});return(r.matchesSelector=ut(g=p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&lt(function(e){r.disconnectedMatch=g.call(e,"div"),g.call(e,"[s!='']:x"),m.push("!=",z)}),v=v.length&&new RegExp(v.join("|")),m=m.length&&new RegExp(m.join("|")),y=ut(p.contains)||p.compareDocumentPosition?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&r.nodeType===1&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&e.compareDocumentPosition(r)&16)}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},r.sortDetached=lt(function(e){return e.compareDocumentPosition(t.createElement("div"))&1}),L=p.compareDocumentPosition?function(e,n){if(e===n)return k=!0,0;var i=n.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(n);if(i)return i&1||!r.sortDetached&&n.compareDocumentPosition(e)===i?e===t||y(E,e)?-1:n===t||y(E,n)?1:l?j.call(l,e)-j.call(l,n):0:i&4?-1:1;return e.compareDocumentPosition?-1:1}:function(e,n){var r,i=0,s=e.parentNode,o=n.parentNode,u=[e],a=[n];if(e===n)return k=!0,0;if(!s||!o)return e===t?-1:n===t?1:s?-1:o?1:l?j.call(l,e)-j.call(l,n):0;if(s===o)return vt(e,n);r=e;while(r=r.parentNode)u.unshift(r);r=n;while(r=r.parentNode)a.unshift(r);while(u[i]===a[i])i++;return i?vt(u[i],a[i]):u[i]===E?-1:a[i]===E?1:0},t},ot.matches=function(e,t){return ot(e,null,null,t)},ot.matchesSelector=function(e,t){(e.ownerDocument||e)!==h&&c(e),t=t.replace(J,"='$1']");if(r.matchesSelector&&d&&(!m||!m.test(t))&&(!v||!v.test(t)))try{var n=g.call(e,t);if(n||r.disconnectedMatch||e.document&&e.document.nodeType!==11)return n}catch(i){}return ot(t,h,null,[e]).length>0},ot.contains=function(e,t){return(e.ownerDocument||e)!==h&&c(e),y(e,t)},ot.attr=function(e,n){(e.ownerDocument||e)!==h&&c(e);var i=s.attrHandle[n.toLowerCase()],o=i&&M.call(s.attrHandle,n.toLowerCase())?i(e,n,!d):t;return o===t?r.attributes||!d?e.getAttribute(n):(o=e.getAttributeNode(n))&&o.specified?o.value:null:o},ot.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ot.uniqueSort=function(e){var t,n=[],i=0,s=0;k=!r.detectDuplicates,l=!r.sortStable&&e.slice(0),e.sort(L);if(k){while(t=e[s++])t===e[s]&&(i=n.push(s));while(i--)e.splice(n[i],1)}return e},o=ot.getText=function(e){var t,n="",r=0,i=e.nodeType;if(!i)for(;t=e[r];r++)n+=o(t);else if(i===1||i===9||i===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(i===3||i===4)return e.nodeValue;return n},s=ot.selectors={cacheLength:50,createPseudo:ft,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(rt,it),e[3]=(e[4]||e[5]||"").replace(rt,it),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1].slice(0,3)==="nth"?(e[3]||ot.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd")),e[5]=+(e[7]+e[8]||e[3]==="odd")):e[3]&&ot.error(e[0]),e},PSEUDO:function(e){var n,r=!e[5]&&e[2];return G.CHILD.test(e[0])?null:(e[3]&&e[4]!==t?e[2]=e[4]:r&&K.test(r)&&(n=bt(r,!0))&&(n=r.indexOf(")",r.length-n)-r.length)&&(e[0]=e[0].slice(0,n),e[2]=r.slice(0,n)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(rt,it).toLowerCase();return e==="*"?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=new RegExp("(^|"+I+")"+e+"("+I+"|$)"))&&T(e,function(e){return t.test(typeof e.className=="string"&&e.className||typeof e.getAttribute!==A&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ot.attr(r,e);return i==null?t==="!=":t?(i+="",t==="="?i===n:t==="!="?i!==n:t==="^="?n&&i.indexOf(n)===0:t==="*="?n&&i.indexOf(n)>-1:t==="$="?n&&i.slice(-n.length)===n:t==="~="?(" "+i+" ").indexOf(n)>-1:t==="|="?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s=e.slice(0,3)!=="nth",o=e.slice(-4)!=="last",u=t==="of-type";return r===1&&i===0?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:c.nodeType===1)return!1;d=v=e==="only"&&!d&&"nextSibling"}return!0}d=[o?m.firstChild:m.lastChild];if(o&&y){l=m[b]||(m[b]={}),f=l[e]||[],p=f[0]===S&&f[1],h=f[0]===S&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(c.nodeType===1&&++h&&c===t){l[e]=[S,p,h];break}}else if(y&&(f=(t[b]||(t[b]={}))[e])&&f[0]===S)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:c.nodeType===1)&&++h){y&&((c[b]||(c[b]={}))[e]=[S,h]);if(c===t)break}return h-=i,h===r||h%r===0&&h/r>=0}}},PSEUDO:function(e,t){var n,r=s.pseudos[e]||s.setFilters[e.toLowerCase()]||ot.error("unsupported pseudo: "+e);return r[b]?r(t):r.length>1?(n=[e,e,"",t],s.setFilters.hasOwnProperty(e.toLowerCase())?ft(function(e,n){var i,s=r(e,t),o=s.length;while(o--)i=j.call(e,s[o]),e[i]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:ft(function(e){var t=[],n=[],r=a(e.replace(W,"$1"));return r[b]?ft(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)if(s=o[u])e[u]=!(t[u]=s)}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:ft(function(e){return function(t){return ot(e,t).length>0}}),contains:ft(function(e){return function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}}),lang:ft(function(e){return Q.test(e||"")||ot.error("unsupported lang: "+e),e=e.replace(rt,it).toLowerCase(),function(t){var n;do if(n=d?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||n.indexOf(e+"-")===0;while((t=t.parentNode)&&t.nodeType===1);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||e.nodeType===3||e.nodeType===4)return!1;return!0},parent:function(e){return!s.pseudos.empty(e)},header:function(e){return tt.test(e.nodeName)},input:function(e){return et.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},text:function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()===e.type)},first:yt(function(){return[0]}),last:yt(function(e,t){return[t-1]}),eq:yt(function(e,t,n){return[n<0?n+t:n]}),even:yt(function(e,t){var n=0;for(;n<t;n+=2)e.push(n);return e}),odd:yt(function(e,t){var n=1;for(;n<t;n+=2)e.push(n);return e}),lt:yt(function(e,t,n){var r=n<0?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:yt(function(e,t,n){var r=n<0?n+t:n;for(;++r<t;)e.push(r);return e})}};for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})s.pseudos[n]=mt(n);for(n in{submit:!0,reset:!0})s.pseudos[n]=gt(n);a=ot.compile=function(e,t){var n,r=[],i=[],s=C[e+" "];if(!s){t||(t=bt(e)),n=t.length;while(n--)s=Nt(t[n]),s[b]?r.push(s):i.push(s);s=C(e,Ct(i,r))}return s},s.pseudos.nth=s.pseudos.eq,At.prototype=s.filters=s.pseudos,s.setFilters=new At,r.sortStable=b.split("").sort(L).join("")===b,c(),[0,0].sort(L),r.detectDuplicates=k,w.find=ot,w.expr=ot.selectors,w.expr[":"]=w.expr.pseudos,w.unique=ot.uniqueSort,w.text=ot.getText,w.isXMLDoc=ot.isXML,w.contains=ot.contains}(e);var B={};w.Callbacks=function(e){e=typeof e=="string"?B[e]||j(e):w.extend({},e);var n,r,i,s,o,u,a=[],f=!e.once&&[],l=function(t){r=e.memory&&t,i=!0,o=u||0,u=0,s=a.length,n=!0;for(;a&&o<s;o++)if(a[o].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,a&&(f?f.length&&l(f.shift()):r?a=[]:c.disable())},c={add:function(){if(a){var t=a.length;(function i(t){w.each(t,function(t,n){var r=w.type(n);r==="function"?(!e.unique||!c.has(n))&&a.push(n):n&&n.length&&r!=="string"&&i(n)})})(arguments),n?s=a.length:r&&(u=t,l(r))}return this},remove:function(){return a&&w.each(arguments,function(e,t){var r;while((r=w.inArray(t,a,r))>-1)a.splice(r,1),n&&(r<=s&&s--,r<=o&&o--)}),this},has:function(e){return e?w.inArray(e,a)>-1:!!a&&!!a.length},empty:function(){return a=[],s=0,this},disable:function(){return a=f=r=t,this},disabled:function(){return!a},lock:function(){return f=t,r||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],a&&(!i||f)&&(n?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},w.extend({Deferred:function(e){var t=[["resolve","done",w.Callbacks("once memory"),"resolved"],["reject","fail",w.Callbacks("once memory"),"rejected"],["notify","progress",w.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return w.Deferred(function(n){w.each(t,function(t,s){var o=s[0],u=w.isFunction(e[t])&&e[t];i[s[1]](function(){var e=u&&u.apply(this,arguments);e&&w.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o+"With"](this===r?n.promise():this,u?[e]:arguments)})}),e=null}).promise()},promise:function(e){return e!=null?w.extend(e,r):r}},i={};return r.pipe=r.then,w.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=function(){return i[s[0]+"With"](this===i?r:this,arguments),this},i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=v.call(arguments),r=n.length,i=r!==1||e&&w.isFunction(e.promise)?r:0,s=i===1?e:w.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?v.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1){u=new Array(r),a=new Array(r),f=new Array(r);for(;t<r;t++)n[t]&&w.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i}return i||s.resolveWith(f,n),s.promise()}}),w.support=function(t){var n,r,s,u,a,f,l,c,h,p=o.createElement("div");p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=p.getElementsByTagName("*")||[],r=p.getElementsByTagName("a")[0];if(!r||!r.style||!n.length)return t;u=o.createElement("select"),f=u.appendChild(o.createElement("option")),s=p.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t.getSetAttribute=p.className!=="t",t.leadingWhitespace=p.firstChild.nodeType===3,t.tbody=!p.getElementsByTagName("tbody").length,t.htmlSerialize=!!p.getElementsByTagName("link").length,t.style=/top/.test(r.getAttribute("style")),t.hrefNormalized=r.getAttribute("href")==="/a",t.opacity=/^0.5/.test(r.style.opacity),t.cssFloat=!!r.style.cssFloat,t.checkOn=!!s.value,t.optSelected=f.selected,t.enctype=!!o.createElement("form").enctype,t.html5Clone=o.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",t.inlineBlockNeedsLayout=!1,t.shrinkWrapBlocks=!1,t.pixelPosition=!1,t.deleteExpando=!0,t.noCloneEvent=!0,t.reliableMarginRight=!0,t.boxSizingReliable=!0,s.checked=!0,t.noCloneChecked=s.cloneNode(!0).checked,u.disabled=!0,t.optDisabled=!f.disabled;try{delete p.test}catch(d){t.deleteExpando=!1}s=o.createElement("input"),s.setAttribute("value",""),t.input=s.getAttribute("value")==="",s.value="t",s.setAttribute("type","radio"),t.radioValue=s.value==="t",s.setAttribute("checked","t"),s.setAttribute("name","t"),a=o.createDocumentFragment(),a.appendChild(s),t.appendChecked=s.checked,t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,p.attachEvent&&(p.attachEvent("onclick",function(){t.noCloneEvent=!1}),p.cloneNode(!0).click());for(h in{submit:!0,change:!0,focusin:!0})p.setAttribute(l="on"+h,"t"),t[h+"Bubbles"]=l in e||p.attributes[l].expando===!1;p.style.backgroundClip="content-box",p.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle=p.style.backgroundClip==="content-box";for(h in w(t))break;return t.ownLast=h!=="0",w(function(){var n,r,s,u="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",a=o.getElementsByTagName("body")[0];if(!a)return;n=o.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",a.appendChild(n).appendChild(p),p.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=p.getElementsByTagName("td"),s[0].style.cssText="padding:0;margin:0;border:0;display:none",c=s[0].offsetHeight===0,s[0].style.display="",s[1].style.display="none",t.reliableHiddenOffsets=c&&s[0].offsetHeight===0,p.innerHTML="",p.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",w.swap(a,a.style.zoom!=null?{zoom:1}:{},function(){t.boxSizing=p.offsetWidth===4}),e.getComputedStyle&&(t.pixelPosition=(e.getComputedStyle(p,null)||{}).top!=="1%",t.boxSizingReliable=(e.getComputedStyle(p,null)||{width:"4px"}).width==="4px",r=p.appendChild(o.createElement("div")),r.style.cssText=p.style.cssText=u,r.style.marginRight=r.style.width="0",p.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof p.style.zoom!==i&&(p.innerHTML="",p.style.cssText=u+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=p.offsetWidth===3,p.style.display="block",p.innerHTML="<div></div>",p.firstChild.style.width="5px",t.shrinkWrapBlocks=p.offsetWidth!==3,t.inlineBlockNeedsLayout&&(a.style.zoom=1)),a.removeChild(n),n=p=s=r=null}),n=u=a=f=r=s=null,t}({});var F=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,I=/([A-Z])/g;w.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?w.cache[e[w.expando]]:e[w.expando],!!e&&!z(e)},data:function(e,t,n){return q(e,t,n)},removeData:function(e,t){return R(e,t)},_data:function(e,t,n){return q(e,t,n,!0)},_removeData:function(e,t){return R(e,t,!0)},acceptData:function(e){if(e.nodeType&&e.nodeType!==1&&e.nodeType!==9)return!1;var t=e.nodeName&&w.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),w.fn.extend({data:function(e,n){var r,i,s=null,o=0,u=this[0];if(e===t){if(this.length){s=w.data(u);if(u.nodeType===1&&!w._data(u,"parsedAttrs")){r=u.attributes;for(;o<r.length;o++)i=r[o].name,i.indexOf("data-")===0&&(i=w.camelCase(i.slice(5)),U(u,i,s[i]));w._data(u,"parsedAttrs",!0)}}return s}return typeof e=="object"?this.each(function(){w.data(this,e)}):arguments.length>1?this.each(function(){w.data(this,e,n)}):u?U(u,e,w.data(u,e)):null},removeData:function(e){return this.each(function(){w.removeData(this,e)})}}),w.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=w._data(e,t),n&&(!r||w.isArray(n)?r=w._data(e,t,w.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=w.queue(e,t),r=n.length,i=n.shift(),s=w._queueHooks(e,t),o=function(){w.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),r--),i&&(t==="fx"&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return w._data(e,n)||w._data(e,n,{empty:w.Callbacks("once memory").add(function(){w._removeData(e,t+"queue"),w._removeData(e,n)})})}}),w.fn.extend({queue:function(e,n){var r=2;return typeof e!="string"&&(n=e,e="fx",r--),arguments.length<r?w.queue(this[0],e):n===t?this:this.each(function(){var t=w.queue(this,e,n);w._queueHooks(this,e),e==="fx"&&t[0]!=="inprogress"&&w.dequeue(this,e)})},dequeue:function(e){return this.each(function(){w.dequeue(this,e)})},delay:function(e,t){return e=w.fx?w.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=w.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};typeof e!="string"&&(n=e,e=t),e=e||"fx";while(u--)r=w._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var W,X,V=/[\t\r\n\f]/g,$=/\r/g,J=/^(?:input|select|textarea|button|object)$/i,K=/^(?:a|area)$/i,Q=/^(?:checked|selected)$/i,G=w.support.getSetAttribute,Y=w.support.input;w.fn.extend({attr:function(e,t){return w.access(this,w.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){w.removeAttr(this,e)})},prop:function(e,t){return w.access(this,w.prop,e,t,arguments.length>1)},removeProp:function(e){return e=w.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o=0,u=this.length,a=typeof e=="string"&&e;if(w.isFunction(e))return this.each(function(t){w(this).addClass(e.call(this,t,this.className))});if(a){t=(e||"").match(S)||[];for(;o<u;o++){n=this[o],r=n.nodeType===1&&(n.className?(" "+n.className+" ").replace(V," "):" ");if(r){s=0;while(i=t[s++])r.indexOf(" "+i+" ")<0&&(r+=i+" ");n.className=w.trim(r)}}}return this},removeClass:function(e){var t,n,r,i,s,o=0,u=this.length,a=arguments.length===0||typeof e=="string"&&e;if(w.isFunction(e))return this.each(function(t){w(this).removeClass(e.call(this,t,this.className))});if(a){t=(e||"").match(S)||[];for(;o<u;o++){n=this[o],r=n.nodeType===1&&(n.className?(" "+n.className+" ").replace(V," "):"");if(r){s=0;while(i=t[s++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");n.className=e?w.trim(r):""}}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return w.isFunction(e)?this.each(function(n){w(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var s,o=0,u=w(this),a=t,f=e.match(S)||[];while(s=f[o++])a=r?a:!u.hasClass(s),u[a?"addClass":"removeClass"](s)}else if(n===i||n==="boolean")this.className&&w._data(this,"__className__",this.className),this.className=this.className||e===!1?"":w._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(V," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(!arguments.length){if(s)return r=w.valHooks[s.type]||w.valHooks[s.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(s,"value"))!==t?n:(n=s.value,typeof n=="string"?n.replace($,""):n==null?"":n);return}return i=w.isFunction(e),this.each(function(n){var s;if(this.nodeType!==1)return;i?s=e.call(this,n,w(this).val()):s=e,s==null?s="":typeof s=="number"?s+="":w.isArray(s)&&(s=w.map(s,function(e){return e==null?"":e+""})),r=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()];if(!r||!("set"in r)||r.set(this,s,"value")===t)this.value=s})}}),w.extend({valHooks:{option:{get:function(e){var t=w.find.attr(e,"value");return t!=null?t:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s=e.type==="select-one"||i<0,o=s?null:[],u=s?i+1:r.length,a=i<0?u:s?i:0;for(;a<u;a++){n=r[a];if((n.selected||a===i)&&(w.support.optDisabled?!n.disabled:n.getAttribute("disabled")===null)&&(!n.parentNode.disabled||!w.nodeName(n.parentNode,"optgroup"))){t=w(n).val();if(s)return t;o.push(t)}}return o},set:function(e,t){var n,r,i=e.options,s=w.makeArray(t),o=i.length;while(o--){r=i[o];if(r.selected=w.inArray(w(r).val(),s)>=0)n=!0}return n||(e.selectedIndex=-1),s}}},attr:function(e,n,r){var s,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;if(typeof e.getAttribute===i)return w.prop(e,n,r);if(u!==1||!w.isXMLDoc(e))n=n.toLowerCase(),s=w.attrHooks[n]||(w.expr.match.bool.test(n)?X:W);if(r===t)return s&&"get"in s&&(o=s.get(e,n))!==null?o:(o=w.find.attr(e,n),o==null?t:o);if(r!==null)return s&&"set"in s&&(o=s.set(e,r,n))!==t?o:(e.setAttribute(n,r+""),r);w.removeAttr(e,n)},removeAttr:function(e,t){var n,r,i=0,s=t&&t.match(S);if(s&&e.nodeType===1)while(n=s[i++])r=w.propFix[n]||n,w.expr.match.bool.test(n)?Y&&G||!Q.test(n)?e[r]=!1:e[w.camelCase("default-"+n)]=e[r]=!1:w.attr(e,n,""),e.removeAttribute(G?n:r)},attrHooks:{type:{set:function(e,t){if(!w.support.radioValue&&t==="radio"&&w.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;return o=u!==1||!w.isXMLDoc(e),o&&(n=w.propFix[n]||n,s=w.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&(i=s.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var t=w.find.attr(e,"tabindex");return t?parseInt(t,10):J.test(e.nodeName)||K.test(e.nodeName)&&e.href?0:-1}}}}),X={set:function(e,t,n){return t===!1?w.removeAttr(e,n):Y&&G||!Q.test(n)?e.setAttribute(!G&&w.propFix[n]||n,n):e[w.camelCase("default-"+n)]=e[n]=!0,n}},w.each(w.expr.match.bool.source.match(/\w+/g),function(e,n){var r=w.expr.attrHandle[n]||w.find.attr;w.expr.attrHandle[n]=Y&&G||!Q.test(n)?function(e,n,i){var s=w.expr.attrHandle[n],o=i?t:(w.expr.attrHandle[n]=t)!=r(e,n,i)?n.toLowerCase():null;return w.expr.attrHandle[n]=s,o}:function(e,n,r){return r?t:e[w.camelCase("default-"+n)]?n.toLowerCase():null}});if(!Y||!G)w.attrHooks.value={set:function(e,t,n){if(!w.nodeName(e,"input"))return W&&W.set(e,t,n);e.defaultValue=t}};G||(W={set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="",r==="value"||n===e.getAttribute(r)?n:t}},w.expr.attrHandle.id=w.expr.attrHandle.name=w.expr.attrHandle.coords=function(e,n,r){var i;return r?t:(i=e.getAttributeNode(n))&&i.value!==""?i.value:null},w.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&r.specified?r.value:t},set:W.set},w.attrHooks.contenteditable={set:function(e,t,n){W.set(e,t===""?!1:t,n)}},w.each(["width","height"],function(e,t){w.attrHooks[t]={set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}}})),w.support.hrefNormalized||w.each(["href","src"],function(e,t){w.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),w.support.style||(w.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),w.support.optSelected||(w.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this}),w.support.enctype||(w.propFix.enctype="encoding"),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(e,t){if(w.isArray(t))return e.checked=w.inArray(w(e).val(),t)>=0}},w.support.checkOn||(w.valHooks[this].get=function(e){return e.getAttribute("value")===null?"on":e.value})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\.(.+)|)$/;w.event={global:{},add:function(e,n,r,s,o){var u,a,f,l,c,h,p,d,v,m,g,y=w._data(e);if(!y)return;r.handler&&(l=r,r=l.handler,o=l.selector),r.guid||(r.guid=w.guid++),(a=y.events)||(a=y.events={}),(h=y.handle)||(h=y.handle=function(e){return typeof w===i||!!e&&w.event.triggered===e.type?t:w.event.dispatch.apply(h.elem,arguments)},h.elem=e),n=(n||"").match(S)||[""],f=n.length;while(f--){u=rt.exec(n[f])||[],v=g=u[1],m=(u[2]||"").split(".").sort();if(!v)continue;c=w.event.special[v]||{},v=(o?c.delegateType:c.bindType)||v,c=w.event.special[v]||{},p=w.extend({type:v,origType:g,data:s,handler:r,guid:r.guid,selector:o,needsContext:o&&w.expr.match.needsContext.test(o),namespace:m.join(".")},l);if(!(d=a[v])){d=a[v]=[],d.delegateCount=0;if(!c.setup||c.setup.call(e,s,m,h)===!1)e.addEventListener?e.addEventListener(v,h,!1):e.attachEvent&&e.attachEvent("on"+v,h)}c.add&&(c.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),o?d.splice(d.delegateCount++,0,p):d.push(p),w.event.global[v]=!0}e=null},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m=w.hasData(e)&&w._data(e);if(!m||!(l=m.events))return;t=(t||"").match(S)||[""],f=t.length;while(f--){u=rt.exec(t[f])||[],p=v=u[1],d=(u[2]||"").split(".").sort();if(!p){for(p in l)w.event.remove(e,p+t[f],n,r,!0);continue}c=w.event.special[p]||{},p=(r?c.delegateType:c.bindType)||p,h=l[p]||[],u=u[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=h.length;while(s--)o=h[s],(i||v===o.origType)&&(!n||n.guid===o.guid)&&(!u||u.test(o.namespace))&&(!r||r===o.selector||r==="**"&&o.selector)&&(h.splice(s,1),o.selector&&h.delegateCount--,c.remove&&c.remove.call(e,o));a&&!h.length&&((!c.teardown||c.teardown.call(e,d,m.handle)===!1)&&w.removeEvent(e,p,m.handle),delete l[p])}w.isEmptyObject(l)&&(delete m.handle,w._removeData(e,"events"))},trigger:function(n,r,i,s){var u,a,f,l,c,h,p,d=[i||o],v=y.call(n,"type")?n.type:n,m=y.call(n,"namespace")?n.namespace.split("."):[];f=h=i=i||o;if(i.nodeType===3||i.nodeType===8)return;if(nt.test(v+w.event.triggered))return;v.indexOf(".")>=0&&(m=v.split("."),v=m.shift(),m.sort()),a=v.indexOf(":")<0&&"on"+v,n=n[w.expando]?n:new w.Event(v,typeof n=="object"&&n),n.isTrigger=s?2:3,n.namespace=m.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=r==null?[n]:w.makeArray(r,[n]),c=w.event.special[v]||{};if(!s&&c.trigger&&c.trigger.apply(i,r)===!1)return;if(!s&&!c.noBubble&&!w.isWindow(i)){l=c.delegateType||v,nt.test(l+v)||(f=f.parentNode);for(;f;f=f.parentNode)d.push(f),h=f;h===(i.ownerDocument||o)&&d.push(h.defaultView||h.parentWindow||e)}p=0;while((f=d[p++])&&!n.isPropagationStopped())n.type=p>1?l:c.bindType||v,u=(w._data(f,"events")||{})[n.type]&&w._data(f,"handle"),u&&u.apply(f,r),u=a&&f[a],u&&w.acceptData(f)&&u.apply&&u.apply(f,r)===!1&&n.preventDefault();n.type=v;if(!s&&!n.isDefaultPrevented()&&(!c._default||c._default.apply(d.pop(),r)===!1)&&w.acceptData(i)&&a&&i[v]&&!w.isWindow(i)){h=i[a],h&&(i[a]=null),w.event.triggered=v;try{i[v]()}catch(g){}w.event.triggered=t,h&&(i[a]=h)}return n.result},dispatch:function(e){e=w.event.fix(e);var n,r,i,s,o,u=[],a=v.call(arguments),f=(w._data(this,"events")||{})[e.type]||[],l=w.event.special[e.type]||{};a[0]=e,e.delegateTarget=this;if(l.preDispatch&&l.preDispatch.call(this,e)===!1)return;u=w.event.handlers.call(this,e,f),n=0;while((s=u[n++])&&!e.isPropagationStopped()){e.currentTarget=s.elem,o=0;while((i=s.handlers[o++])&&!e.isImmediatePropagationStopped())if(!e.namespace_re||e.namespace_re.test(i.namespace))e.handleObj=i,e.data=i.data,r=((w.event.special[i.origType]||{}).handle||i.handler).apply(s.elem,a),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation())}return l.postDispatch&&l.postDispatch.call(this,e),e.result},handlers:function(e,n){var r,i,s,o,u=[],a=n.delegateCount,f=e.target;if(a&&f.nodeType&&(!e.button||e.type!=="click"))for(;f!=this;f=f.parentNode||this)if(f.nodeType===1&&(f.disabled!==!0||e.type!=="click")){s=[];for(o=0;o<a;o++)i=n[o],r=i.selector+" ",s[r]===t&&(s[r]=i.needsContext?w(r,this).index(f)>=0:w.find(r,this,null,[f]).length),s[r]&&s.push(i);s.length&&u.push({elem:f,handlers:s})}return a<n.length&&u.push({elem:this,handlers:n.slice(a)}),u},fix:function(e){if(e[w.expando])return e;var t,n,r,i=e.type,s=e,u=this.fixHooks[i];u||(this.fixHooks[i]=u=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=u.props?this.props.concat(u.props):this.props,e=new w.Event(s),t=r.length;while(t--)n=r[t],e[n]=s[n];return e.target||(e.target=s.srcElement||o),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,u.filter?u.filter(e,s):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,s,u=n.button,a=n.fromElement;return e.pageX==null&&n.clientX!=null&&(i=e.target.ownerDocument||o,s=i.documentElement,r=i.body,e.pageX=n.clientX+(s&&s.scrollLeft||r&&r.scrollLeft||0)-(s&&s.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(s&&s.scrollTop||r&&r.scrollTop||0)-(s&&s.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),!e.which&&u!==t&&(e.which=u&1?1:u&2?3:u&4?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ot()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===ot()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(w.nodeName(this,"input")&&this.type==="checkbox"&&this.click)return this.click(),!1},_default:function(e){return w.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=w.extend(new w.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?w.event.trigger(i,null,t):w.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},w.removeEvent=o.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===i&&(e[r]=null),e.detachEvent(r,n))},w.Event=function(e,t){if(!(this instanceof w.Event))return new w.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?it:st):this.type=e,t&&w.extend(this,t),this.timeStamp=e&&e.timeStamp||w.now(),this[w.expando]=!0},w.Event.prototype={isDefaultPrevented:st,isPropagationStopped:st,isImmediatePropagationStopped:st,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=it;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},w.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){w.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj;if(!i||i!==r&&!w.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),w.support.submitBubbles||(w.event.special.submit={setup:function(){if(w.nodeName(this,"form"))return!1;w.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=w.nodeName(n,"input")||w.nodeName(n,"button")?n.form:t;r&&!w._data(r,"submitBubbles")&&(w.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),w._data(r,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&w.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(w.nodeName(this,"form"))return!1;w.event.remove(this,"._submit")}}),w.support.changeBubbles||(w.event.special.change={setup:function(){if(Z.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")w.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),w.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),w.event.simulate("change",this,e,!0)});return!1}w.event.add(this,"beforeactivate._change",function(e){var t=e.target;Z.test(t.nodeName)&&!w._data(t,"changeBubbles")&&(w.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&w.event.simulate("change",this.parentNode,e,!0)}),w._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return w.event.remove(this,"._change"),!Z.test(this.nodeName)}}),w.support.focusinBubbles||w.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){w.event.simulate(t,e.target,w.event.fix(e),!0)};w.event.special[t]={setup:function(){n++===0&&o.addEventListener(e,r,!0)},teardown:function(){--n===0&&o.removeEventListener(e,r,!0)}}}),w.fn.extend({on:function(e,n,r,i,s){var o,u;if(typeof e=="object"){typeof n!="string"&&(r=r||n,n=t);for(o in e)this.on(o,n,r,e[o],s);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=st;else if(!i)return this;return s===1&&(u=i,i=function(e){return w().off(e),u.apply(this,arguments)},i.guid=u.guid||(u.guid=w.guid++)),this.each(function(){w.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,w(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if(typeof e=="object"){for(s in e)this.off(s,n,e[s]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=st),this.each(function(){w.event.remove(this,e,r,n)})},trigger:function(e,t){return this.each(function(){w.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return w.event.trigger(e,t,n,!0)}});var ut=/^.[^:#\[\.,]*$/,at=/^(?:parents|prev(?:Until|All))/,ft=w.expr.match.needsContext,lt={children:!0,contents:!0,next:!0,prev:!0};w.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if(typeof e!="string")return this.pushStack(w(e).filter(function(){for(t=0;t<i;t++)if(w.contains(r[t],this))return!0}));for(t=0;t<i;t++)w.find(e,r[t],n);return n=this.pushStack(i>1?w.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},has:function(e){var t,n=w(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(w.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ht(this,e||[],!0))},filter:function(e){return this.pushStack(ht(this,e||[],!1))},is:function(e){return!!ht(this,typeof e=="string"&&ft.test(e)?w(e):e||[],!1).length},closest:function(e,t){var n,r=0,i=this.length,s=[],o=ft.test(e)||typeof e!="string"?w(e,t||this.context):0;for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:n.nodeType===1&&w.find.matchesSelector(n,e))){n=s.push(n);break}return this.pushStack(s.length>1?w.unique(s):s)},index:function(e){return e?typeof e=="string"?w.inArray(this[0],w(e)):w.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?w(e,t):w.makeArray(e&&e.nodeType?[e]:e),r=w.merge(this.get(),n);return this.pushStack(w.unique(r))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),w.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return w.dir(e,"parentNode")},parentsUntil:function(e,t,n){return w.dir(e,"parentNode",n)},next:function(e){return ct(e,"nextSibling")},prev:function(e){return ct(e,"previousSibling")},nextAll:function(e){return w.dir(e,"nextSibling")},prevAll:function(e){return w.dir(e,"previousSibling")},nextUntil:function(e,t,n){return w.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return w.dir(e,"previousSibling",n)},siblings:function(e){return w.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return w.sibling(e.firstChild)},contents:function(e){return w.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:w.merge([],e.childNodes)}},function(e,t){w.fn[e]=function(n,r){var i=w.map(this,t,n);return e.slice(-5)!=="Until"&&(r=n),r&&typeof r=="string"&&(i=w.filter(r,i)),this.length>1&&(lt[e]||(i=w.unique(i)),at.test(e)&&(i=i.reverse())),this.pushStack(i)}}),w.extend({filter:function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),t.length===1&&r.nodeType===1?w.find.matchesSelector(r,e)?[r]:[]:w.find.matches(e,w.grep(t,function(e){return e.nodeType===1}))},dir:function(e,n,r){var i=[],s=e[n];while(s&&s.nodeType!==9&&(r===t||s.nodeType!==1||!w(s).is(r)))s.nodeType===1&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var dt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",vt=/ jQuery\d+="(?:null|\d+)"/g,mt=new RegExp("<(?:"+dt+")[\\s/>]","i"),gt=/^\s+/,yt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=/<([\w:]+)/,wt=/<tbody/i,Et=/<|&#?\w+;/,St=/<(?:script|style|link)/i,xt=/^(?:checkbox|radio)$/i,Tt=/checked\s*(?:[^=]|=\s*.checked.)/i,Nt=/^$|\/(?:java|ecma)script/i,Ct=/^true\/(.*)/,kt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Lt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:w.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},At=pt(o),Ot=At.appendChild(o.createElement("div"));Lt.optgroup=Lt.option,Lt.tbody=Lt.tfoot=Lt.colgroup=Lt.caption=Lt.thead,Lt.th=Lt.td,w.fn.extend({text:function(e){return w.access(this,function(e){return e===t?w.text(this):this.empty().append((this[0]&&this[0].ownerDocument||o).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=Mt(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=Mt(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=e?w.filter(e,this):this,i=0;for(;(n=r[i])!=null;i++)!t&&n.nodeType===1&&w.cleanData(jt(n)),n.parentNode&&(t&&w.contains(n.ownerDocument,n)&&Pt(jt(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){e.nodeType===1&&w.cleanData(jt(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&w.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return w.clone(this,e,t)})},html:function(e){return w.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return n.nodeType===1?n.innerHTML.replace(vt,""):t;if(typeof e=="string"&&!St.test(e)&&(w.support.htmlSerialize||!mt.test(e))&&(w.support.leadingWhitespace||!gt.test(e))&&!Lt[(bt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(yt,"<$1></$2>");try{for(;r<i;r++)n=this[r]||{},n.nodeType===1&&(w.cleanData(jt(n,!1)),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=w.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(n){var r=e[t++],i=e[t++];i&&(r&&r.parentNode!==i&&(r=this.nextSibling),w(this).remove(),i.insertBefore(n,r))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,n){e=p.apply([],e);var r,i,s,o,u,a,f=0,l=this.length,c=this,h=l-1,d=e[0],v=w.isFunction(d);if(v||!(l<=1||typeof d!="string"||w.support.checkClone||!Tt.test(d)))return this.each(function(r){var i=c.eq(r);v&&(e[0]=d.call(this,r,i.html())),i.domManip(e,t,n)});if(l){a=w.buildFragment(e,this[0].ownerDocument,!1,!n&&this),r=a.firstChild,a.childNodes.length===1&&(a=r);if(r){o=w.map(jt(a,"script"),_t),s=o.length;for(;f<l;f++)i=a,f!==h&&(i=w.clone(i,!0,!0),s&&w.merge(o,jt(i,"script"))),t.call(this[f],i,f);if(s){u=o[o.length-1].ownerDocument,w.map(o,Dt);for(f=0;f<s;f++)i=o[f],Nt.test(i.type||"")&&!w._data(i,"globalEval")&&w.contains(u,i)&&(i.src?w._evalUrl(i.src):w.globalEval((i.text||i.textContent||i.innerHTML||"").replace(kt,"")))}a=r=null}}return this}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){w.fn[e]=function(e){var n,r=0,i=[],s=w(e),o=s.length-1;for(;r<=o;r++)n=r===o?this:this.clone(!0),w(s[r])[t](n),d.apply(i,n.get());return this.pushStack(i)}}),w.extend({clone:function(e,t,n){var r,i,s,o,u,a=w.contains(e.ownerDocument,e);w.support.html5Clone||w.isXMLDoc(e)||!mt.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(Ot.innerHTML=e.outerHTML,Ot.removeChild(s=Ot.firstChild));if((!w.support.noCloneEvent||!w.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!w.isXMLDoc(e)){r=jt(s),u=jt(e);for(o=0;(i=u[o])!=null;++o)r[o]&&Bt(i,r[o])}if(t)if(n){u=u||jt(e),r=r||jt(s);for(o=0;(i=u[o])!=null;o++)Ht(i,r[o])}else Ht(e,s);return r=jt(s,"script"),r.length>0&&Pt(r,!a&&jt(e,"script")),r=u=i=null,s},buildFragment:function(e,t,n,r){var i,s,o,u,a,f,l,c=e.length,h=pt(t),p=[],d=0;for(;d<c;d++){s=e[d];if(s||s===0)if(w.type(s)==="object")w.merge(p,s.nodeType?[s]:s);else if(!Et.test(s))p.push(t.createTextNode(s));else{u=u||h.appendChild(t.createElement("div")),a=(bt.exec(s)||["",""])[1].toLowerCase(),l=Lt[a]||Lt._default,u.innerHTML=l[1]+s.replace(yt,"<$1></$2>")+l[2],i=l[0];while(i--)u=u.lastChild;!w.support.leadingWhitespace&&gt.test(s)&&p.push(t.createTextNode(gt.exec(s)[0]));if(!w.support.tbody){s=a==="table"&&!wt.test(s)?u.firstChild:l[1]==="<table>"&&!wt.test(s)?u:0,i=s&&s.childNodes.length;while(i--)w.nodeName(f=s.childNodes[i],"tbody")&&!f.childNodes.length&&s.removeChild(f)}w.merge(p,u.childNodes),u.textContent="";while(u.firstChild)u.removeChild(u.firstChild);u=h.lastChild}}u&&h.removeChild(u),w.support.appendChecked||w.grep(jt(p,"input"),Ft),d=0;while(s=p[d++]){if(r&&w.inArray(s,r)!==-1)continue;o=w.contains(s.ownerDocument,s),u=jt(h.appendChild(s),"script"),o&&Pt(u);if(n){i=0;while(s=u[i++])Nt.test(s.type||"")&&n.push(s)}}return u=null,h},cleanData:function(e,t){var n,r,s,o,u=0,a=w.expando,f=w.cache,l=w.support.deleteExpando,h=w.event.special;for(;(n=e[u])!=null;u++)if(t||w.acceptData(n)){s=n[a],o=s&&f[s];if(o){if(o.events)for(r in o.events)h[r]?w.event.remove(n,r):w.removeEvent(n,r,o.handle);f[s]&&(delete f[s],l?delete n[a]:typeof n.removeAttribute!==i?n.removeAttribute(a):n[a]=null,c.push(s))}}},_evalUrl:function(e){return w.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),w.fn.extend({wrapAll:function(e){if(w.isFunction(e))return this.each(function(t){w(this).wrapAll(e.call(this,t))});if(this[0]){var t=w(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return w.isFunction(e)?this.each(function(t){w(this).wrapInner(e.call(this,t))}):this.each(function(){var t=w(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=w.isFunction(e);return this.each(function(n){w(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){w.nodeName(this,"body")||w(this).replaceWith(this.childNodes)}).end()}});var It,qt,Rt,Ut=/alpha\([^)]*\)/i,zt=/opacity\s*=\s*([^)]*)/,Wt=/^(top|right|bottom|left)$/,Xt=/^(none|table(?!-c[ea]).+)/,Vt=/^margin/,$t=new RegExp("^("+E+")(.*)$","i"),Jt=new RegExp("^("+E+")(?!px)[a-z%]+$","i"),Kt=new RegExp("^([+-])=("+E+")","i"),Qt={BODY:"block"},Gt={position:"absolute",visibility:"hidden",display:"block"},Yt={letterSpacing:0,fontWeight:400},Zt=["Top","Right","Bottom","Left"],en=["Webkit","O","Moz","ms"];w.fn.extend({css:function(e,n){return w.access(this,function(e,n,r){var i,s,o={},u=0;if(w.isArray(n)){s=qt(e),i=n.length;for(;u<i;u++)o[n[u]]=w.css(e,n[u],!1,s);return o}return r!==t?w.style(e,n,r):w.css(e,n)},e,n,arguments.length>1)},show:function(){return rn(this,!0)},hide:function(){return rn(this)},toggle:function(e){var t=typeof e=="boolean";return this.each(function(){(t?e:nn(this))?w(this).show():w(this).hide()})}}),w.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Rt(e,"opacity");return n===""?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":w.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var s,o,u,a=w.camelCase(n),f=e.style;n=w.cssProps[a]||(w.cssProps[a]=tn(f,a)),u=w.cssHooks[n]||w.cssHooks[a];if(r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];o=typeof r,o==="string"&&(s=Kt.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(w.css(e,n)),o="number");if(r==null||o==="number"&&isNaN(r))return;o==="number"&&!w.cssNumber[a]&&(r+="px"),!w.support.clearCloneStyle&&r===""&&n.indexOf("background")===0&&(f[n]="inherit");if(!u||!("set"in u)||(r=u.set(e,r,i))!==t)try{f[n]=r}catch(l){}},css:function(e,n,r,i){var s,o,u,a=w.camelCase(n);return n=w.cssProps[a]||(w.cssProps[a]=tn(e.style,a)),u=w.cssHooks[n]||w.cssHooks[a],u&&"get"in u&&(o=u.get(e,!0,r)),o===t&&(o=Rt(e,n,i)),o==="normal"&&n in Yt&&(o=Yt[n]),r===""||r?(s=parseFloat(o),r===!0||w.isNumeric(s)?s||0:o):o}}),e.getComputedStyle?(qt=function(t){return e.getComputedStyle(t,null)},Rt=function(e,n,r){var i,s,o,u=r||qt(e),a=u?u.getPropertyValue(n)||u[n]:t,f=e.style;return u&&(a===""&&!w.contains(e.ownerDocument,e)&&(a=w.style(e,n)),Jt.test(a)&&Vt.test(n)&&(i=f.width,s=f.minWidth,o=f.maxWidth,f.minWidth=f.maxWidth=f.width=a,a=u.width,f.width=i,f.minWidth=s,f.maxWidth=o)),a}):o.documentElement.currentStyle&&(qt=function(e){return e.currentStyle},Rt=function(e,n,r){var i,s,o,u=r||qt(e),a=u?u[n]:t,f=e.style;return a==null&&f&&f[n]&&(a=f[n]),Jt.test(a)&&!Wt.test(n)&&(i=f.left,s=e.runtimeStyle,o=s&&s.left,o&&(s.left=e.currentStyle.left),f.left=n==="fontSize"?"1em":a,a=f.pixelLeft+"px",f.left=i,o&&(s.left=o)),a===""?"auto":a}),w.each(["height","width"],function(e,t){w.cssHooks[t]={get:function(e,n,r){if(n)return e.offsetWidth===0&&Xt.test(w.css(e,"display"))?w.swap(e,Gt,function(){return un(e,t,r)}):un(e,t,r)},set:function(e,n,r){var i=r&&qt(e);return sn(e,n,r?on(e,t,r,w.support.boxSizing&&w.css(e,"boxSizing",!1,i)==="border-box",i):0)}}}),w.support.opacity||(w.cssHooks.opacity={get:function(e,t){return zt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=w.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if((t>=1||t==="")&&w.trim(s.replace(Ut,""))===""&&n.removeAttribute){n.removeAttribute("filter");if(t===""||r&&!r.filter)return}n.filter=Ut.test(s)?s.replace(Ut,i):s+" "+i}}),w(function(){w.support.reliableMarginRight||(w.cssHooks.marginRight={get:function(e,t){if(t)return w.swap(e,{display:"inline-block"},Rt,[e,"marginRight"])}}),!w.support.pixelPosition&&w.fn.position&&w.each(["top","left"],function(e,t){w.cssHooks[t]={get:function(e,n){if(n)return n=Rt(e,t),Jt.test(n)?w(e).position()[t]+"px":n}}})}),w.expr&&w.expr.filters&&(w.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!w.support.reliableHiddenOffsets&&(e.style&&e.style.display||w.css(e,"display"))==="none"},w.expr.filters.visible=function(e){return!w.expr.filters.hidden(e)}),w.each({margin:"",padding:"",border:"Width"},function(e,t){w.cssHooks[e+t]={expand:function(n){var r=0,i={},s=typeof n=="string"?n.split(" "):[n];for(;r<4;r++)i[e+Zt[r]+t]=s[r]||s[r-2]||s[0];return i}},Vt.test(e)||(w.cssHooks[e+t].set=sn)});var ln=/%20/g,cn=/\[\]$/,hn=/\r?\n/g,pn=/^(?:submit|button|image|reset|file)$/i,dn=/^(?:input|select|textarea|keygen)/i;w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=w.prop(this,"elements");return e?w.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!w(this).is(":disabled")&&dn.test(this.nodeName)&&!pn.test(e)&&(this.checked||!xt.test(e))}).map(function(e,t){var n=w(this).val();return n==null?null:w.isArray(n)?w.map(n,function(e){return{name:t.name,value:e.replace(hn,"\r\n")}}):{name:t.name,value:n.replace(hn,"\r\n")}}).get()}}),w.param=function(e,n){var r,i=[],s=function(e,t){t=w.isFunction(t)?t():t==null?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=w.ajaxSettings&&w.ajaxSettings.traditional);if(w.isArray(e)||e.jquery&&!w.isPlainObject(e))w.each(e,function(){s(this.name,this.value)});else for(r in e)vn(r,e[r],n,s);return i.join("&").replace(ln,"+")},w.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){w.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),w.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)}});var mn,gn,yn=w.now(),bn=/\?/,wn=/#.*$/,En=/([?&])_=[^&]*/,Sn=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,xn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Tn=/^(?:GET|HEAD)$/,Nn=/^\/\//,Cn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,kn=w.fn.load,Ln={},An={},On="*/".concat("*");try{gn=s.href}catch(Mn){gn=o.createElement("a"),gn.href="",gn=gn.href}mn=Cn.exec(gn.toLowerCase())||[],w.fn.load=function(e,n,r){if(typeof e!="string"&&kn)return kn.apply(this,arguments);var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),w.isFunction(n)?(r=n,n=t):n&&typeof n=="object"&&(o="POST"),u.length>0&&w.ajax({url:e,type:o,dataType:"html",data:n}).done(function(e){s=arguments,u.html(i?w("<div>").append(w.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){u.each(r,s||[e.responseText,t,e])}),this},w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){w.fn[t]=function(e){return this.on(t,e)}}),w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:gn,type:"GET",isLocal:xn.test(mn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":On,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":w.parseJSON,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Pn(Pn(e,w.ajaxSettings),t):Pn(w.ajaxSettings,e)},ajaxPrefilter:_n(Ln),ajaxTransport:_n(An),ajax:function(e,n){function N(e,n,r,i){var l,g,y,E,S,T=n;if(b===2)return;b=2,u&&clearTimeout(u),f=t,o=i||"",x.readyState=e>0?4:0,l=e>=200&&e<300||e===304,r&&(E=Hn(c,x,r)),E=Bn(c,E,x,l);if(l)c.ifModified&&(S=x.getResponseHeader("Last-Modified"),S&&(w.lastModified[s]=S),S=x.getResponseHeader("etag"),S&&(w.etag[s]=S)),e===204||c.type==="HEAD"?T="nocontent":e===304?T="notmodified":(T=E.state,g=E.data,y=E.error,l=!y);else{y=T;if(e||!T)T="error",e<0&&(e=0)}x.status=e,x.statusText=(n||T)+"",l?d.resolveWith(h,[g,T,x]):d.rejectWith(h,[x,T,y]),x.statusCode(m),m=t,a&&p.trigger(l?"ajaxSuccess":"ajaxError",[x,c,l?g:y]),v.fireWith(h,[x,T]),a&&(p.trigger("ajaxComplete",[x,c]),--w.active||w.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var r,i,s,o,u,a,f,l,c=w.ajaxSetup({},n),h=c.context||c,p=c.context&&(h.nodeType||h.jquery)?w(h):w.event,d=w.Deferred(),v=w.Callbacks("once memory"),m=c.statusCode||{},g={},y={},b=0,E="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(b===2){if(!l){l={};while(t=Sn.exec(o))l[t[1].toLowerCase()]=t[2]}t=l[e.toLowerCase()]}return t==null?null:t},getAllResponseHeaders:function(){return b===2?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,g[e]=t),this},overrideMimeType:function(e){return b||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(b<2)for(t in e)m[t]=[m[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||E;return f&&f.abort(t),N(0,t),this}};d.promise(x).complete=v.add,x.success=x.done,x.error=x.fail,c.url=((e||c.url||gn)+"").replace(wn,"").replace(Nn,mn[1]+"//"),c.type=n.method||n.type||c.method||c.type,c.dataTypes=w.trim(c.dataType||"*").toLowerCase().match(S)||[""],c.crossDomain==null&&(r=Cn.exec(c.url.toLowerCase()),c.crossDomain=!(!r||r[1]===mn[1]&&r[2]===mn[2]&&(r[3]||(r[1]==="http:"?"80":"443"))===(mn[3]||(mn[1]==="http:"?"80":"443")))),c.data&&c.processData&&typeof c.data!="string"&&(c.data=w.param(c.data,c.traditional)),Dn(Ln,c,n,x);if(b===2)return x;a=c.global,a&&w.active++===0&&w.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!Tn.test(c.type),s=c.url,c.hasContent||(c.data&&(s=c.url+=(bn.test(s)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=En.test(s)?s.replace(En,"$1_="+yn++):s+(bn.test(s)?"&":"?")+"_="+yn++)),c.ifModified&&(w.lastModified[s]&&x.setRequestHeader("If-Modified-Since",w.lastModified[s]),w.etag[s]&&x.setRequestHeader("If-None-Match",w.etag[s])),(c.data&&c.hasContent&&c.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",c.contentType),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+(c.dataTypes[0]!=="*"?", "+On+"; q=0.01":""):c.accepts["*"]);for(i in c.headers)x.setRequestHeader(i,c.headers[i]);if(!c.beforeSend||c.beforeSend.call(h,x,c)!==!1&&b!==2){E="abort";for(i in{success:1,error:1,complete:1})x[i](c[i]);f=Dn(An,c,n,x);if(!f)N(-1,"No Transport");else{x.readyState=1,a&&p.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){x.abort("timeout")},c.timeout));try{b=1,f.send(g,N)}catch(T){if(!(b<2))throw T;N(-1,T)}}return x}return x.abort()},getJSON:function(e,t,n){return w.get(e,t,n,"json")},getScript:function(e,n){return w.get(e,t,n,"script")}}),w.each(["get","post"],function(e,n){w[n]=function(e,r,i,s){return w.isFunction(r)&&(s=s||i,i=r,r=t),w.ajax({url:e,type:n,dataType:s,data:r,success:i})}}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return w.globalEval(e),e}}}),w.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),w.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=o.head||w("head")[0]||o.documentElement;return{send:function(t,i){n=o.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){if(t||!n.readyState||/loaded|complete/.test(n.readyState))n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success")},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var jn=[],Fn=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=jn.pop()||w.expando+"_"+yn++;return this[e]=!0,e}}),w.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.jsonp!==!1&&(Fn.test(n.url)?"url":typeof n.data=="string"&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Fn.test(n.data)&&"data");if(a||n.dataTypes[0]==="jsonp")return s=n.jsonpCallback=w.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,a?n[a]=n[a].replace(Fn,"$1"+s):n.jsonp!==!1&&(n.url+=(bn.test(n.url)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||w.error(s+" was not called"),u[0]},n.dataTypes[0]="json",o=e[s],e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,jn.push(s)),u&&w.isFunction(o)&&o(u[0]),u=o=t}),"script"});var In,qn,Rn=0,Un=e.ActiveXObject&&function(){var e;for(e in In)In[e](t,!0)};w.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&zn()||Wn()}:zn,qn=w.ajaxSettings.xhr(),w.support.cors=!!qn&&"withCredentials"in qn,qn=w.support.ajax=!!qn,qn&&w.ajaxTransport(function(n){if(!n.crossDomain||w.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async);if(n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c;try{if(r&&(i||a.readyState===4)){r=t,o&&(a.onreadystatechange=w.noop,Un&&delete In[o]);if(i)a.readyState!==4&&a.abort();else{c={},u=a.status,f=a.getAllResponseHeaders(),typeof a.responseText=="string"&&(c.text=a.responseText);try{l=a.statusText}catch(h){l=""}!u&&n.isLocal&&!n.crossDomain?u=c.text?200:404:u===1223&&(u=204)}}}catch(p){i||s(-1,p)}c&&s(u,l,c,f)},n.async?a.readyState===4?setTimeout(r):(o=++Rn,Un&&(In||(In={},w(e).unload(Un)),In[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Xn,Vn,$n=/^(?:toggle|show|hide)$/,Jn=new RegExp("^(?:([+-])=|)("+E+")([a-z%]*)$","i"),Kn=/queueHooks$/,Qn=[nr],Gn={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=Jn.exec(t),s=i&&i[3]||(w.cssNumber[e]?"":"px"),o=(w.cssNumber[e]||s!=="px"&&+r)&&Jn.exec(w.css(n.elem,e)),u=1,a=20;if(o&&o[3]!==s){s=s||o[3],i=i||[],o=+r||1;do u=u||".5",o/=u,w.style(n.elem,e,o+s);while(u!==(u=n.cur()/r)&&u!==1&&--a)}return i&&(o=n.start=+o||+r||0,n.unit=s,n.end=i[1]?o+(i[1]+1)*i[2]:+i[2]),n}]};w.Animation=w.extend(er,{tweener:function(e,t){w.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;r<i;r++)n=e[r],Gn[n]=Gn[n]||[],Gn[n].unshift(t)},prefilter:function(e,t){t?Qn.unshift(e):Qn.push(e)}}),w.Tween=rr,rr.prototype={constructor:rr,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(w.cssNumber[n]?"":"px")},cur:function(){var e=rr.propHooks[this.prop];return e&&e.get?e.get(this):rr.propHooks._default.get(this)},run:function(e){var t,n=rr.propHooks[this.prop];return this.options.duration?this.pos=t=w.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rr.propHooks._default.set(this),this}},rr.prototype.init.prototype=rr.prototype,rr.propHooks={_default:{get:function(e){var t;return e.elem[e.prop]==null||!!e.elem.style&&e.elem.style[e.prop]!=null?(t=w.css(e.elem,e.prop,""),!t||t==="auto"?0:t):e.elem[e.prop]},set:function(e){w.fx.step[e.prop]?w.fx.step[e.prop](e):e.elem.style&&(e.elem.style[w.cssProps[e.prop]]!=null||w.cssHooks[e.prop])?w.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},rr.propHooks.scrollTop=rr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},w.each(["toggle","show","hide"],function(e,t){var n=w.fn[t];w.fn[t]=function(e,r,i){return e==null||typeof e=="boolean"?n.apply(this,arguments):this.animate(ir(t,!0),e,r,i)}}),w.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nn).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=w.isEmptyObject(e),s=w.speed(t,n,r),o=function(){var t=er(this,w.extend({},e),s);(i||w._data(this,"finish"))&&t.stop(!0)};return o.finish=o,i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=e!=null&&e+"queueHooks",s=w.timers,o=w._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&Kn.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem===this&&(e==null||s[n].queue===e)&&(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&w.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=w._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=w.timers,o=r?r.length:0;n.finish=!0,w.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0);for(t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),w.each({slideDown:ir("show"),slideUp:ir("hide"),slideToggle:ir("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){w.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),w.speed=function(e,t,n){var r=e&&typeof e=="object"?w.extend({},e):{complete:n||!n&&t||w.isFunction(e)&&e,duration:e,easing:n&&t||t&&!w.isFunction(t)&&t};r.duration=w.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in w.fx.speeds?w.fx.speeds[r.duration]:w.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(){w.isFunction(r.old)&&r.old.call(this),r.queue&&w.dequeue(this,r.queue)},r},w.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},w.timers=[],w.fx=rr.prototype.init,w.fx.tick=function(){var e,n=w.timers,r=0;Xn=w.now();for(;r<n.length;r++)e=n[r],!e()&&n[r]===e&&n.splice(r--,1);n.length||w.fx.stop(),Xn=t},w.fx.timer=function(e){e()&&w.timers.push(e)&&w.fx.start()},w.fx.interval=13,w.fx.start=function(){Vn||(Vn=setInterval(w.fx.tick,w.fx.interval))},w.fx.stop=function(){clearInterval(Vn),Vn=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fx.step={},w.expr&&w.expr.filters&&(w.expr.filters.animated=function(e){return w.grep(w.timers,function(t){return e===t.elem}).length}),w.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){w.offset.setOffset(this,e,t)});var n,r,s={top:0,left:0},o=this[0],u=o&&o.ownerDocument;if(!u)return;return n=u.documentElement,w.contains(n,o)?(typeof o.getBoundingClientRect!==i&&(s=o.getBoundingClientRect()),r=sr(u),{top:s.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:s.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):s},w.offset={setOffset:function(e,t,n){var r=w.css(e,"position");r==="static"&&(e.style.position="relative");var i=w(e),s=i.offset(),o=w.css(e,"top"),u=w.css(e,"left"),a=(r==="absolute"||r==="fixed")&&w.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),w.isFunction(t)&&(t=t.call(e,n,s)),t.top!=null&&(f.top=t.top-s.top+c),t.left!=null&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},w.fn.extend({position:function(){if(!this[0])return;var e,t,n={top:0,left:0},r=this[0];return w.css(r,"position")==="fixed"?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),w.nodeName(e[0],"html")||(n=e.offset()),n.top+=w.css(e[0],"borderTopWidth",!0),n.left+=w.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-w.css(r,"marginTop",!0),left:t.left-n.left-w.css(r,"marginLeft",!0)}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||u;while(e&&!w.nodeName(e,"html")&&w.css(e,"position")==="static")e=e.offsetParent;return e||u})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);w.fn[e]=function(i){return w.access(this,function(e,i,s){var o=sr(e);if(s===t)return o?n in o?o[n]:o.document.documentElement[i]:e[i];o?o.scrollTo(r?w(o).scrollLeft():s,r?s:w(o).scrollTop()):e[i]=s},e,i,arguments.length,null)}}),w.each({Height:"height",Width:"width"},function(e,n){w.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){w.fn[i]=function(i,s){var o=arguments.length&&(r||typeof i!="boolean"),u=r||(i===!0||s===!0?"margin":"border");return w.access(this,function(n,r,i){var s;return w.isWindow(n)?n.document.documentElement["client"+e]:n.nodeType===9?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?w.css(n,r,u):w.style(n,r,i,u)},n,o?i:t,o,null)}})}),w.fn.size=function(){return this.length},w.fn.andSelf=w.fn.addBack,typeof module=="object"&&module&&typeof module.exports=="object"?module.exports=w:(e.jQuery=e.$=w,typeof define=="function"&&define.amd&&define("jquery",[],function(){return w}))}(window),function(e,t){if(typeof define=="function"&&define.amd)define("backbone",["underscore","jquery","exports"],function(n,r,i){e.Backbone=t(e,i,n,r)});else if(typeof exports!="undefined"){var n=require("underscore");t(e,exports,n)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,n,r){var i=e.Backbone,s=[],o=s.push,u=s.slice,a=s.splice;t.VERSION="1.1.2",t.$=r,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var f=t.Events={on:function(e,t,n){if(!c(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,r){if(!c(this,"once",e,[t,r])||!t)return this;var i=this,s=n.once(function(){i.off(e,s),t.apply(this,arguments)});return s._callback=t,this.on(e,s,r)},off:function(e,t,r){var i,s,o,u,a,f,l,h;if(!this._events||!c(this,"off",e,[t,r]))return this;if(!e&&!t&&!r)return this._events=void 0,this;u=e?[e]:n.keys(this._events);for(a=0,f=u.length;a<f;a++){e=u[a];if(o=this._events[e]){this._events[e]=i=[];if(t||r)for(l=0,h=o.length;l<h;l++)s=o[l],(t&&t!==s.callback&&t!==s.callback._callback||r&&r!==s.context)&&i.push(s);i.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=u.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&h(n,t),r&&h(r,arguments),this},stopListening:function(e,t,r){var i=this._listeningTo;if(!i)return this;var s=!t&&!r;!r&&typeof t=="object"&&(r=this),e&&((i={})[e._listenId]=e);for(var o in i)e=i[o],e.off(t,r,this),(s||n.isEmpty(e._events))&&delete this._listeningTo[o];return this}},l=/\s+/,c=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(l.test(n)){var s=n.split(l);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},h=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t);return}},p={listenTo:"on",listenToOnce:"once"};n.each(p,function(e,t){f[t]=function(t,r,i){var s=this._listeningTo||(this._listeningTo={}),o=t._listenId||(t._listenId=n.uniqueId("l"));return s[o]=t,!i&&typeof r=="object"&&(i=this),t[e](r,i,this),this}}),f.bind=f.on,f.unbind=f.off,n.extend(t,f);var d=t.Model=function(e,t){var r=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(r=this.parse(r,t)||{}),r=n.defaults({},r,n.result(this,"defaults")),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(d.prototype,f,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,r){var i,s,o,u,a,f,l,c;if(e==null)return this;typeof e=="object"?(s=e,r=t):(s={})[e]=t,r||(r={});if(!this._validate(s,r))return!1;o=r.unset,a=r.silent,u=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=n.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(i in s)t=s[i],n.isEqual(c[i],t)||u.push(i),n.isEqual(l[i],t)?delete this.changed[i]:this.changed[i]=t,o?delete c[i]:c[i]=t;if(!a){u.length&&(this._pending=r);for(var h=0,p=u.length;h<p;h++)this.trigger("change:"+u[h],this,c[u[h]],r)}if(f)return this;if(!a)while(this._pending)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t,r=!1,i=this._changing?this._previousAttributes:this.attributes;for(var s in e){if(n.isEqual(i[s],t=e[s]))continue;(r||(r={}))[s]=t}return r},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,r=e.success;return e.success=function(n){if(!t.set(t.parse(n,e),e))return!1;r&&r(t,n,e),t.trigger("sync",t,n,e)},I(this,e),this.sync("read",this,e)},save:function(e,t,r){var i,s,o,u=this.attributes;e==null||typeof e=="object"?(i=e,r=t):(i={})[e]=t,r=n.extend({validate:!0},r);if(i&&!r.wait){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;i&&r.wait&&(this.attributes=n.extend({},u,i)),r.parse===void 0&&(r.parse=!0);var a=this,f=r.success;return r.success=function(e){a.attributes=u;var t=a.parse(e,r);r.wait&&(t=n.extend(i||{},t));if(n.isObject(t)&&!a.set(t,r))return!1;f&&f(a,e,r),a.trigger("sync",a,e,r)},I(this,r),s=this.isNew()?"create":r.patch?"patch":"update",s==="patch"&&(r.attrs=i),o=this.sync(s,this,r),i&&r.wait&&(this.attributes=u),o},destroy:function(e){e=e?n.clone(e):{};var t=this,r=e.success,i=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(n){(e.wait||t.isNew())&&i(),r&&r(t,n,e),t.isNew()||t.trigger("sync",t,n,e)};if(this.isNew())return e.success(),!1;I(this,e);var s=this.sync("delete",this,e);return e.wait||i(),s},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||F();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return r?(this.trigger("invalid",this,r,n.extend(t,{validationError:r})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];n.each(v,function(e){d.prototype[e]=function(){var t=u.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var m=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},y={add:!0,remove:!1};n.extend(m.prototype,f,{model:d,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,y))},remove:function(e,t){var r=!n.isArray(e);e=r?[e]:n.clone(e),t||(t={});var i,s,o,u;for(i=0,s=e.length;i<s;i++){u=e[i]=this.get(e[i]);if(!u)continue;delete this._byId[u.id],delete this._byId[u.cid],o=this.indexOf(u),this.models.splice(o,1),this.length--,t.silent||(t.index=o,u.trigger("remove",u,this,t)),this._removeReference(u,t)}return r?e[0]:e},set:function(e,t){t=n.defaults({},t,g),t.parse&&(e=this.parse(e,t));var r=!n.isArray(e);e=r?e?[e]:[]:n.clone(e);var i,s,o,u,a,f,l,c=t.at,h=this.model,p=this.comparator&&c==null&&t.sort!==!1,v=n.isString(this.comparator)?this.comparator:null,m=[],y=[],b={},w=t.add,E=t.merge,S=t.remove,x=!p&&w&&S?[]:!1;for(i=0,s=e.length;i<s;i++){a=e[i]||{},a instanceof d?o=u=a:o=a[h.prototype.idAttribute||"id"];if(f=this.get(o))S&&(b[f.cid]=!0),E&&(a=a===u?u.attributes:a,t.parse&&(a=f.parse(a,t)),f.set(a,t),p&&!l&&f.hasChanged(v)&&(l=!0)),e[i]=f;else if(w){u=e[i]=this._prepareModel(a,t);if(!u)continue;m.push(u),this._addReference(u,t)}u=f||u,x&&(u.isNew()||!b[u.id])&&x.push(u),b[u.id]=!0}if(S){for(i=0,s=this.length;i<s;++i)b[(u=this.models[i]).cid]||y.push(u);y.length&&this.remove(y,t)}if(m.length||x&&x.length){p&&(l=!0),this.length+=m.length;if(c!=null)for(i=0,s=m.length;i<s;i++)this.models.splice(c+i,0,m[i]);else{x&&(this.models.length=0);var T=x||m;for(i=0,s=T.length;i<s;i++)this.models.push(T[i])}}l&&this.sort({silent:!0});if(!t.silent){for(i=0,s=m.length;i<s;i++)(u=m[i]).trigger("add",u,this,t);(l||x&&x.length)&&this.trigger("sort",this,t)}return r?e[0]:e},reset:function(e,t){t||(t={});for(var r=0,i=this.models.length;r<i;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return u.apply(this.models,arguments)},get:function(e){return e==null?void 0:this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,r=this;return e.success=function(n){var i=e.reset?"reset":"set";r[i](n,e),t&&t(r,n,e),r.trigger("sync",r,n,e)},I(this,e),this.sync("read",this,e)},create:function(e,t){t=t?n.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var r=this,i=t.success;return t.success=function(e,n){t.wait&&r.add(e,t),i&&i(e,n,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof d)return e;t=t?n.clone(t):{},t.collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_addReference:function(e,t){this._byId[e.cid]=e,e.id!=null&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(b,function(e){m.prototype[e]=function(){var t=u.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});var w=["groupBy","countBy","sortBy","indexBy"];n.each(w,function(e){m.prototype[e]=function(t,r){var i=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,i,r)}});var E=t.View=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,x)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},S=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];n.extend(E.prototype,f,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var r=e[t];n.isFunction(r)||(r=this[e[t]]);if(!r)continue;var i=t.match(S),s=i[1],o=i[2];r=n.bind(r,this),s+=".delegateEvents"+this.cid,o===""?this.$el.on(s,r):this.$el.on(s,o,r)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(!this.el){var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className"));var r=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(r,!1)}else this.setElement(n.result(this,"el"),!1)}}),t.sync=function(e,r,i){var s=N[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:s,dataType:"json"};i.url||(o.url=n.result(r,"url")||F()),i.data==null&&r&&(e==="create"||e==="update"||e==="patch")&&(o.contentType="application/json",o.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{});if(i.emulateHTTP&&(s==="PUT"||s==="DELETE"||s==="PATCH")){o.type="POST",i.emulateJSON&&(o.data._method=s);var u=i.beforeSend;i.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",s);if(u)return u.apply(this,arguments)}}o.type!=="GET"&&!i.emulateJSON&&(o.processData=!1),o.type==="PATCH"&&T&&(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=i.xhr=t.ajax(n.extend(o,i));return r.trigger("request",r,a,i),a};var T=typeof window!="undefined"&&!!window.ActiveXObject&&(!window.XMLHttpRequest||!(new XMLHttpRequest).dispatchEvent),N={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var C=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},k=/\((.*?)\)/g,L=/(\(\?)?:\w+/g,A=/\*\w+/g,O=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(C.prototype,f,{initialize:function(){},route:function(e,r,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var s=this;return t.history.route(e,function(n){var o=s._extractParameters(e,n);s.execute(i,o),s.trigger.apply(s,["route:"+r].concat(o)),s.trigger("route",r,o),t.history.trigger("route",s,r,o)}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(!this.routes)return;this.routes=n.result(this,"routes");var e,t=n.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(O,"\\$&").replace(k,"(?:$1)?").replace(L,function(e,t){return t?e:"([^/?]+)"}).replace(A,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,function(e,t){return t===r.length-1?e||null:e?decodeURIComponent(e):null})}});var M=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},_=/^[#\/]|\s+$/g,D=/^\/+|\/+$/g,P=/msie [\w.]+/,H=/\/$/,B=/#.*$/;M.started=!1,n.extend(M.prototype,f,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(H,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(_,"")},start:function(e){if(M.started)throw new Error("Backbone.history has already been started");M.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var r=this.getFragment(),i=document.documentMode,s=P.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);this.root=("/"+this.root+"/").replace(D,"/");if(s&&this._wantsHashChange){var o=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=o.hide().appendTo("body")[0].contentWindow,this.navigate(r)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=r;var u=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&u.hash&&(this.fragment=this.getHash().replace(_,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),M.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0})},navigate:function(e,t){if(!M.started)return!1;if(!t||t===!0)t={trigger:!!t};var n=this.root+(e=this.getFragment(e||""));e=e.replace(B,"");if(this.fragment===e)return;this.fragment=e,e===""&&n!=="/"&&(n=n.slice(0,-1));if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}if(t.trigger)return this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new M;var j=function(e,t){var r=this,i;e&&n.has(e,"constructor")?i=e.constructor:i=function(){return r.apply(this,arguments)},n.extend(i,r,t);var s=function(){this.constructor=i};return s.prototype=r.prototype,i.prototype=new s,e&&n.extend(i.prototype,e),i.__super__=r.prototype,i};d.extend=m.extend=C.extend=E.extend=M.extend=j;var F=function(){throw new Error('A "url" property or function must be specified')},I=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}};return t}),function(e,t){if(typeof define=="function"&&define.amd)define("marionette",["backbone","underscore"],function(n,r){return e.Marionette=t(e,n,r)});else if(typeof exports!="undefined"){var n=require("backbone"),r=require("underscore");module.exports=t(e,n,r)}else e.Marionette=t(e,e.Backbone,e._)}(this,function(e,t,n){(function(e,t){var n=e.ChildViewContainer;return e.ChildViewContainer=function(e,t){var n=function(e){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),t.each(e,this.add,this)};t.extend(n.prototype,{add:function(e,t){var n=e.cid;return this._views[n]=e,e.model&&(this._indexByModel[e.model.cid]=n),t&&(this._indexByCustom[t]=n),this._updateLength(),this},findByModel:function(e){return this.findByModelCid(e.cid)},findByModelCid:function(e){var t=this._indexByModel[e];return this.findByCid(t)},findByCustom:function(e){var t=this._indexByCustom[e];return this.findByCid(t)},findByIndex:function(e){return t.values(this._views)[e]},findByCid:function(e){return this._views[e]},remove:function(e){var n=e.cid;return e.model&&delete this._indexByModel[e.model.cid],t.any(this._indexByCustom,function(e,t){if(e===n)return delete this._indexByCustom[t],!0},this),delete this._views[n],this._updateLength(),this},call:function(e){this.apply(e,t.tail(arguments))},apply:function(e,n){t.each(this._views,function(r){t.isFunction(r[e])&&r[e].apply(r,n||[])})},_updateLength:function(){this.length=t.size(this._views)}});var r=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return t.each(r,function(e){n.prototype[e]=function(){var n=t.values(this._views),r=[n].concat(t.toArray(arguments));return t[e].apply(t,r)}}),n}(e,t),e.ChildViewContainer.VERSION="0.1.4",e.ChildViewContainer.noConflict=function(){return e.ChildViewContainer=n,this},e.ChildViewContainer})(t,n),function(e,t){var n=e.Wreqr,r=e.Wreqr={};return e.Wreqr.VERSION="1.3.1",e.Wreqr.noConflict=function(){return e.Wreqr=n,this},r.Handlers=function(e,t){var n=function(e){this.options=e,this._wreqrHandlers={},t.isFunction(this.initialize)&&this.initialize(e)};return n.extend=e.Model.extend,t.extend(n.prototype,e.Events,{setHandlers:function(e){t.each(e,function(e,n){var r=null;t.isObject(e)&&!t.isFunction(e)&&(r=e.context,e=e.callback),this.setHandler(n,e,r)},this)},setHandler:function(e,t,n){var r={callback:t,context:n};this._wreqrHandlers[e]=r,this.trigger("handler:add",e,t,n)},hasHandler:function(e){return!!this._wreqrHandlers[e]},getHandler:function(e){var t=this._wreqrHandlers[e];if(!t)return;return function(){var e=Array.prototype.slice.apply(arguments);return t.callback.apply(t.context,e)}},removeHandler:function(e){delete this._wreqrHandlers[e]},removeAllHandlers:function(){this._wreqrHandlers={}}}),n}(e,t),r.CommandStorage=function(){var n=function(e){this.options=e,this._commands={},t.isFunction(this.initialize)&&this.initialize(e)};return t.extend(n.prototype,e.Events,{getCommands:function(e){var t=this._commands[e];return t||(t={command:e,instances:[]},this._commands[e]=t),t},addCommand:function(e,t){var n=this.getCommands(e);n.instances.push(t)},clearCommands:function(e){var t=this.getCommands(e);t.instances=[]}}),n}(),r.Commands=function(e){return e.Handlers.extend({storageType:e.CommandStorage,constructor:function(t){this.options=t||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var n=Array.prototype.slice.call(arguments);e.Handlers.prototype.constructor.apply(this,n)},execute:function(e,t){e=arguments[0],t=Array.prototype.slice.call(arguments,1),this.hasHandler(e)?this.getHandler(e).apply(this,t):this.storage.addCommand(e,t)},_executeCommands:function(e,n,r){var i=this.storage.getCommands(e);t.each(i.instances,function(e){n.apply(r,e)}),this.storage.clearCommands(e)},_initializeStorage:function(e){var n,r=e.storageType||this.storageType;t.isFunction(r)?n=new r:n=r,this.storage=n}})}(r),r.RequestResponse=function(e){return e.Handlers.extend({request:function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);if(this.hasHandler(e))return this.getHandler(e).apply(this,t)}})}(r),r.EventAggregator=function(e,t){var n=function(){};return n.extend=e.Model.extend,t.extend(n.prototype,e.Events),n}(e,t),r.Channel=function(n){var r=function(t){this.vent=new e.Wreqr.EventAggregator,this.reqres=new e.Wreqr.RequestResponse,this.commands=new e.Wreqr.Commands,this.channelName=t};return t.extend(r.prototype,{reset:function(){return this.vent.off(),this.vent.stopListening(),this.reqres.removeAllHandlers(),this.commands.removeAllHandlers(),this},connectEvents:function(e,t){return this._connect("vent",e,t),this},connectCommands:function(e,t){return this._connect("commands",e,t),this},connectRequests:function(e,t){return this._connect("reqres",e,t),this},_connect:function(e,n,r){if(!n)return;r=r||this;var i=e==="vent"?"on":"setHandler";t.each(n,function(n,s){this[e][i](s,t.bind(n,r))},this)}}),r}(r),r.radio=function(e){var n=function(){this._channels={},this.vent={},this.commands={},this.reqres={},this._proxyMethods()};t.extend(n.prototype,{channel:function(e){if(!e)throw new Error("Channel must receive a name");return this._getChannel(e)},_getChannel:function(t){var n=this._channels[t];return n||(n=new e.Channel(t),this._channels[t]=n),n},_proxyMethods:function(){t.each(["vent","commands","reqres"],function(e){t.each(r[e],function(t){this[e][t]=i(this,e,t)},this)},this)}});var r={vent:["on","off","trigger","once","stopListening","listenTo","listenToOnce"],commands:["execute","setHandler","setHandlers","removeHandler","removeAllHandlers"],reqres:["request","setHandler","setHandlers","removeHandler","removeAllHandlers"]},i=function(e,t,n){return function(r){var i=e._getChannel(r)[t],s=Array.prototype.slice.call(arguments,1);return i[n].apply(i,s)}};return new n}(r),e.Wreqr}(t,n);var r=e.Marionette,i=t.Marionette={};i.VERSION="2.2.0",i.noConflict=function(){return e.Marionette=r,this},t.Marionette=i,i.Deferred=t.$.Deferred;var s=Array.prototype.slice;i.extend=t.Model.extend,i.getOption=function(e,t){if(!e||!t)return;var n;return e.options&&e.options[t]!==undefined?n=e.options[t]:n=e[t],n},i.proxyGetOption=function(e){return i.getOption(this,e)},i.normalizeMethods=function(e){var t={};return n.each(e,function(e,r){n.isFunction(e)||(e=this[e]);if(!e)return;t[r]=e},this),t},i.normalizeUIString=function(e,t){return e.replace(/@ui\.[a-zA-Z_$0-9]*/g,function(e){return t[e.slice(4)]})},i.normalizeUIKeys=function(e,t){if(typeof e=="undefined")return;return e=n.clone(e),n.each(n.keys(e),function(n){var r=i.normalizeUIString(n,t);r!==n&&(e[r]=e[n],delete e[n])}),e},i.normalizeUIValues=function(e,t){if(typeof e=="undefined")return;return n.each(e,function(r,s){n.isString(r)&&(e[s]=i.normalizeUIString(r,t))}),e},i.actAsCollection=function(e,t){var r=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];n.each(r,function(r){e[r]=function(){var e=n.values(n.result(this,t)),i=[e].concat(n.toArray(arguments));return n[r].apply(n,i)}})},i.triggerMethod=function(e){function r(e,t,n){return n.toUpperCase()}var t=/(^|:)(\w)/gi,i="on"+e.replace(t,r),s=this[i],o;return n.isFunction(s)&&(o=s.apply(this,n.tail(arguments))),n.isFunction(this.trigger)&&this.trigger.apply(this,arguments),o},i.triggerMethodOn=function(e,t){var r=n.tail(arguments,2),s;return n.isFunction(e.triggerMethod)?s=e.triggerMethod:s=i.triggerMethod,s.apply(e,[t].concat(r))},i.MonitorDOMRefresh=function(e){function r(e){e._isShown=!0,s(e)}function i(e){e._isRendered=!0,s(e)}function s(e){e._isShown&&e._isRendered&&o(e)&&n.isFunction(e.triggerMethod)&&e.triggerMethod("dom:refresh")}function o(n){return t.$.contains(e,n.el)}return function(e){e.listenTo(e,"show",function(){r(e)}),e.listenTo(e,"render",function(){i(e)})}}(document.documentElement),function(e){function t(t,r,i,s){var o=s.split(/\s+/);n.each(o,function(n){var s=t[n];if(!s)throw new e.Error('Method "'+n+'" was configured as an event handler, but does not exist.');t.listenTo(r,i,s)})}function r(e,t,n,r){e.listenTo(t,n,r)}function i(e,t,r,i){var s=i.split(/\s+/);n.each(s,function(n){var i=e[n];e.stopListening(t,r,i)})}function s(e,t,n,r){e.stopListening(t,n,r)}function o(t,r,i,s,o){if(!r||!i)return;if(!n.isFunction(i)&&!n.isObject(i))throw new e.Error({message:"Bindings must be an object or function.",url:"marionette.functions.html#marionettebindentityevents"});n.isFunction(i)&&(i=i.call(t)),n.each(i,function(e,i){n.isFunction(e)?s(t,r,i,e):o(t,r,i,e)})}e.bindEntityEvents=function(e,n,i){o(e,n,i,r,t)},e.unbindEntityEvents=function(e,t,n){o(e,t,n,s,i)},e.proxyBindEntityEvents=function(t,n){return e.bindEntityEvents(this,t,n)},e.proxyUnbindEntityEvents=function(t,n){return e.unbindEntityEvents(this,t,n)}}(i);var o=["description","fileName","lineNumber","name","message","number"];return i.Error=i.extend.call(Error,{urlRoot:"http://marionettejs.com/docs/"+i.VERSION+"/",constructor:function(e,t){n.isObject(e)?(t=e,e=t.message):t||(t={});var r=Error.call(this,e);n.extend(this,n.pick(r,o),n.pick(t,o)),this.captureStackTrace(),t.url&&(this.url=this.urlRoot+t.url)},captureStackTrace:function(){Error.captureStackTrace&&Error.captureStackTrace(this,i.Error)},toString:function(){return this.name+": "+this.message+(this.url?" See: "+this.url:"")}}),i.Error.extend=i.extend,i.Callbacks=function(){this._deferred=i.Deferred(),this._callbacks=[]},n.extend(i.Callbacks.prototype,{add:function(e,t){var r=n.result(this._deferred,"promise");this._callbacks.push({cb:e,ctx:t}),r.then(function(n){t&&(n.context=t),e.call(n.context,n.options)})},run:function(e,t){this._deferred.resolve({options:e,context:t})},reset:function(){var e=this._callbacks;this._deferred=i.Deferred(),this._callbacks=[],n.each(e,function(e){this.add(e.cb,e.ctx)},this)}}),i.Controller=function(e){this.options=e||{},n.isFunction(this.initialize)&&this.initialize(this.options)},i.Controller.extend=i.extend,n.extend(i.Controller.prototype,t.Events,{destroy:function(){var e=s.call(arguments);return this.triggerMethod.apply(this,["before:destroy"].concat(e)),this.triggerMethod.apply(this,["destroy"].concat(e)),this.stopListening(),this.off(),this},triggerMethod:i.triggerMethod,getOption:i.proxyGetOption}),i.Object=function(e){this.options=n.extend({},n.result(this,"options"),e),this.initialize.apply(this,arguments)},i.Object.extend=i.extend,n.extend(i.Object.prototype,{initialize:function(){},destroy:function(){this.triggerMethod("before:destroy"),this.triggerMethod("destroy"),this.stopListening()},triggerMethod:i.triggerMethod,getOption:i.proxyGetOption,bindEntityEvents:i.proxyBindEntityEvents,unbindEntityEvents:i.proxyUnbindEntityEvents}),n.extend(i.Object.prototype,t.Events),i.Region=function(e){this.options=e||{},this.el=this.getOption("el"),this.el=this.el instanceof t.$?this.el[0]:this.el;if(!this.el)throw new i.Error({name:"NoElError",message:'An "el" must be specified for a region.'});this.$el=this.getEl(this.el);if(this.initialize){var n=s.apply(arguments);this.initialize.apply(this,n)}},n.extend(i.Region,{buildRegion:function(e,t){if(n.isString(e))return this._buildRegionFromSelector(e,t);if(e.selector||e.el||e.regionClass)return this._buildRegionFromObject(e,t);if(n.isFunction(e))return this._buildRegionFromRegionClass(e);throw new i.Error({message:"Improper region configuration type.",url:"marionette.region.html#region-configuration-types"})},_buildRegionFromSelector:function(e,t){return new t({el:e})},_buildRegionFromObject:function(e,r){var i=e.regionClass||r,s=n.omit(e,"selector","regionClass");e.selector&&!s.el&&(s.el=e.selector);var o=new i(s);return e.parentEl&&(o.getEl=function(r){if(n.isObject(r))return t.$(r);var i=e.parentEl;return n.isFunction(i)&&(i=i()),i.find(r)}),o},_buildRegionFromRegionClass:function(e){return new e}}),n.extend(i.Region.prototype,t.Events,{show:function(e,t){this._ensureElement();var r=t||{},s=e!==this.currentView,o=!!r.preventDestroy,u=!!r.forceShow,a=!!this.currentView,f=!o&&s,l=s||u;return a&&this.triggerMethod("before:swapOut",this.currentView),f&&this.empty(),l?(e.once("destroy",n.bind(this.empty,this)),e.render(),a&&this.triggerMethod("before:swap",e),this.triggerMethod("before:show",e),i.triggerMethodOn(e,"before:show"),a&&this.triggerMethod("swapOut",this.currentView),this.attachHtml(e),this.currentView=e,a&&this.triggerMethod("swap",e),this.triggerMethod("show",e),i.triggerMethodOn(e,"show"),this):this},_ensureElement:function(){n.isObject(this.el)||(this.$el=this.getEl(this.el),this.el=this.$el[0]);if(!this.$el||this.$el.length===0)throw new i.Error('An "el" '+this.$el.selector+" must exist in DOM")},getEl:function(e){return t.$(e)},attachHtml:function(e){this.el.innerHTML="",this.el.appendChild(e.el)},empty:function(){var e=this.currentView;if(!e)return;return this.triggerMethod("before:empty",e),this._destroyView(),this.triggerMethod("empty",e),delete this.currentView,this},_destroyView:function(){var e=this.currentView;e.destroy&&!e.isDestroyed?e.destroy():e.remove&&e.remove()},attachView:function(e){return this.currentView=e,this},hasView:function(){return!!this.currentView},reset:function(){return this.empty(),this.$el&&(this.el=this.$el.selector),delete this.$el,this},getOption:i.proxyGetOption,triggerMethod:i.triggerMethod}),i.Region.extend=i.extend,i.RegionManager=function(e){var t=e.Controller.extend({constructor:function(t){this._regions={},e.Controller.call(this,t)},addRegions:function(e,t){n.isFunction(e)&&(e=e.apply(this,arguments));var r={};return n.each(e,function(e,i){n.isString(e)&&(e={selector:e}),e.selector&&(e=n.defaults({},e,t));var s=this.addRegion(i,e);r[i]=s},this),r},addRegion:function(t,n){var r;return n instanceof e.Region?r=n:r=e.Region.buildRegion(n,e.Region),this.triggerMethod("before:add:region",t,r),this._store(t,r),this.triggerMethod("add:region",t,r),r},get:function(e){return this._regions[e]},getRegions:function(){return n.clone(this._regions)},removeRegion:function(e){var t=this._regions[e];return this._remove(e,t),t},removeRegions:function(){var e=this.getRegions();return n.each(this._regions,function(e,t){this._remove(t,e)},this),e},emptyRegions:function(){var e=this.getRegions();return n.each(e,function(e){e.empty()},this),e},destroy:function(){return this.removeRegions(),e.Controller.prototype.destroy.apply(this,arguments)},_store:function(e,t){this._regions[e]=t,this._setLength()},_remove:function(e,t){this.triggerMethod("before:remove:region",e,t),t.empty(),t.stopListening(),delete this._regions[e],this._setLength(),this.triggerMethod("remove:region",e,t)},_setLength:function(){this.length=n.size(this._regions)}});return e.actAsCollection(t.prototype,"_regions"),t}(i),i.TemplateCache=function(e){this.templateId=e},n.extend(i.TemplateCache,{templateCaches:{},get:function(e){var t=this.templateCaches[e];return t||(t=new i.TemplateCache(e),this.templateCaches[e]=t),t.load()},clear:function(){var e,t=s.call(arguments),n=t.length;if(n>0)for(e=0;e<n;e++)delete this.templateCaches[t[e]];else this.templateCaches={}}}),n.extend(i.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var e=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(e),this.compiledTemplate},loadTemplate:function(e){var n=t.$(e).html();if(!n||n.length===0)throw new i.Error({name:"NoTemplateError",message:'Could not find template: "'+e+'"'});return n},compileTemplate:function(e){return n.template(e)}}),i.Renderer={render:function(e,t){if(!e)throw new i.Error({name:"TemplateNotFoundError",message:"Cannot render the template since its false, null or undefined."});var n;return typeof e=="function"?n=e:n=i.TemplateCache.get(e),n(t)}},i.View=t.View.extend({constructor:function(e){n.bindAll(this,"render"),this.options=n.extend({},n.result(this,"options"),n.isFunction(e)?e.call(this):e),this._behaviors=i.Behaviors(this),t.View.apply(this,arguments),i.MonitorDOMRefresh(this),this.listenTo(this,"show",this.onShowCalled)},getTemplate:function(){return this.getOption("template")},serializeModel:function(e){return e.toJSON.apply(e,s.call(arguments,1))},mixinTemplateHelpers:function(e){e=e||{};var t=this.getOption("templateHelpers");return n.isFunction(t)&&(t=t.call(this)),n.extend(e,t)},normalizeUIKeys:function(e){var t=n.result(this,"ui"),r=n.result(this,"_uiBindings");return i.normalizeUIKeys(e,r||t)},normalizeUIValues:function(e){var t=n.result(this,"ui"),r=n.result(this,"_uiBindings");return i.normalizeUIValues(e,r||t)},configureTriggers:function(){if(!this.triggers)return;var e={},t=this.normalizeUIKeys(n.result(this,"triggers"));return n.each(t,function(t,n){e[n]=this._buildViewTrigger(t)},this),e},delegateEvents:function(e){return this._delegateDOMEvents(e),this.bindEntityEvents(this.model,this.getOption("modelEvents")),this.bindEntityEvents(this.collection,this.getOption("collectionEvents")),n.each(this._behaviors,function(e){e.bindEntityEvents(this.model,e.getOption("modelEvents")),e.bindEntityEvents(this.collection,e.getOption("collectionEvents"))},this),this},_delegateDOMEvents:function(e){var r=e||this.events;n.isFunction(r)&&(r=r.call(this)),r=this.normalizeUIKeys(r),n.isUndefined(e)&&(this.events=r);var i={},s=n.result(this,"behaviorEvents")||{},o=this.configureTriggers(),u=n.result(this,"behaviorTriggers")||{};n.extend(i,s,r,o,u),t.View.prototype.delegateEvents.call(this,i)},undelegateEvents:function(){var e=s.call(arguments);return t.View.prototype.undelegateEvents.apply(this,e),this.unbindEntityEvents(this.model,this.getOption("modelEvents")),this.unbindEntityEvents(this.collection,this.getOption("collectionEvents")),n.each(this._behaviors,function(e){e.unbindEntityEvents(this.model,e.getOption("modelEvents")),e.unbindEntityEvents(this.collection,e.getOption("collectionEvents"))},this),this},onShowCalled:function(){},_ensureViewIsIntact:function(){if(this.isDestroyed)throw new i.Error({name:"ViewDestroyedError",message:'View (cid: "'+this.cid+'") has already been destroyed and cannot be used.'})},destroy:function(){if(this.isDestroyed)return;var e=s.call(arguments);return this.triggerMethod.apply(this,["before:destroy"].concat(e)),this.isDestroyed=!0,this.triggerMethod.apply(this,["destroy"].concat(e)),this.unbindUIElements(),this.remove(),n.invoke(this._behaviors,"destroy",e),this},bindUIElements:function(){this._bindUIElements(),n.invoke(this._behaviors,this._bindUIElements)},_bindUIElements:function(){if(!this.ui)return;this._uiBindings||(this._uiBindings=this.ui);var e=n.result(this,"_uiBindings");this.ui={},n.each(n.keys(e),function(t){var n=e[t];this.ui[t]=this.$(n)},this)},unbindUIElements:function(){this._unbindUIElements(),n.invoke(this._behaviors,this._unbindUIElements)},_unbindUIElements:function(){if(!this.ui||!this._uiBindings)return;n.each(this.ui,function(e,t){delete this.ui[t]},this),this.ui=this._uiBindings,delete this._uiBindings},_buildViewTrigger:function(e){var t=n.isObject(e),r=n.defaults({},t?e:{},{preventDefault:!0,stopPropagation:!0}),i=t?r.event:e;return function(e){e&&(e.preventDefault&&r.preventDefault&&e.preventDefault(),e.stopPropagation&&r.stopPropagation&&e.stopPropagation());var t={view:this,model:this.model,collection:this.collection};this.triggerMethod(i,t)}},setElement:function(){var e=t.View.prototype.setElement.apply(this,arguments);return n.invoke(this._behaviors,"proxyViewProperties",this),e},triggerMethod:function(){var e=arguments,t=i.triggerMethod,r=t.apply(this,e);return n.each(this._behaviors,function(n){t.apply(n,e)}),r},normalizeMethods:i.normalizeMethods,getOption:i.proxyGetOption,bindEntityEvents:i.proxyBindEntityEvents,unbindEntityEvents:i.proxyUnbindEntityEvents}),i.ItemView=i.View.extend({constructor:function(){i.View.apply(this,arguments)},serializeData:function(){var e={};return this.model?e=n.partial(this.serializeModel,this.model).apply(this,arguments):this.collection&&(e={items:n.partial(this.serializeCollection,this.collection).apply(this,arguments)}),e},serializeCollection:function(e){return e.toJSON.apply(e,s.call(arguments,1))},render:function(){return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this._renderTemplate(),this.bindUIElements(),this.triggerMethod("render",this),this},_renderTemplate:function(){var e=this.getTemplate();if(e===!1)return;if(!e)throw new i.Error({name:"UndefinedTemplateError",message:"Cannot render the template since it is null or undefined."});var t=this.serializeData();t=this.mixinTemplateHelpers(t);var n=i.Renderer.render(e,t,this);return this.attachElContent(n),this},attachElContent:function(e){return this.$el.html(e),this},destroy:function(){if(this.isDestroyed)return;return i.View.prototype.destroy.apply(this,arguments)}}),i.CollectionView=i.View.extend({childViewEventPrefix:"childview",constructor:function(e){var r=e||{};this.sort=n.isUndefined(r.sort)?!0:r.sort;if(!(!r.collection||r.collection instanceof t.Collection))throw new i.Error("The Collection option passed to this view needs to be an instance of a Backbone.Collection");this.once("render",this._initialEvents),this._initChildViewStorage(),i.View.apply(this,arguments),this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment(),this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer(),this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1,this._triggerBeforeShowBufferedChildren(),this.attachBuffer(this,this.elBuffer),this._triggerShowBufferedChildren(),this.initRenderBuffer()},_triggerBeforeShowBufferedChildren:function(){this._isShown&&n.each(this._bufferedChildren,n.partial(this._triggerMethodOnChild,"before:show"))},_triggerShowBufferedChildren:function(){this._isShown&&(n.each(this._bufferedChildren,n.partial(this._triggerMethodOnChild,"show")),this._bufferedChildren=[])},_triggerMethodOnChild:function(e,t){i.triggerMethodOn(t,e)},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this.render),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))},_onCollectionAdd:function(e){this.destroyEmptyView();var t=this.getChildView(e),n=this.collection.indexOf(e);this.addChild(e,t,n)},_onCollectionRemove:function(e){var t=this.children.findByModel(e);this.removeChildView(t),this.checkEmpty()},onShowCalled:function(){this.children.each(n.partial(this._triggerMethodOnChild,"show"))},render:function(){return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this._renderChildren(),this.triggerMethod("render",this),this},resortView:function(){this.render()},_sortViews:function(){var e=this.collection.find(function(e,t){var n=this.children.findByModel(e);return!n||n._index!==t},this);e&&this.resortView()},_renderChildren:function(){this.destroyEmptyView(),this.destroyChildren(),this.isEmpty(this.collection)?this.showEmptyView():(this.triggerMethod("before:render:collection",this),this.startBuffering(),this.showCollection(),this.endBuffering(),this.triggerMethod("render:collection",this))},showCollection:function(){var e;this.collection.each(function(t,n){e=this.getChildView(t),this.addChild(t,e,n)},this)},showEmptyView:function(){var e=this.getEmptyView();if(e&&!this._showingEmptyView){this.triggerMethod("before:render:empty"),this._showingEmptyView=!0;var n=new t.Model;this.addEmptyView(n,e),this.triggerMethod("render:empty")}},destroyEmptyView:function(){this._showingEmptyView&&(this.triggerMethod("before:remove:empty"),this.destroyChildren(),delete this._showingEmptyView,this.triggerMethod("remove:empty"))},getEmptyView:function(){return this.getOption("emptyView")},addEmptyView:function(e,t){var r=this.getOption("emptyViewOptions")||this.getOption("childViewOptions");n.isFunction(r)&&(r=r.call(this));var s=this.buildChildView(e,t,r);this.proxyChildEvents(s),this._isShown&&i.triggerMethodOn(s,"before:show"),this.children.add(s),this.renderChildView(s,-1),this._isShown&&i.triggerMethodOn(s,"show")},getChildView:function(e){var t=this.getOption("childView");if(!t)throw new i.Error({name:"NoChildViewError",message:'A "childView" must be specified'});return t},addChild:function(e,t,r){var i=this.getOption("childViewOptions");n.isFunction(i)&&(i=i.call(this,e,r));var s=this.buildChildView(e,t,i);return this._updateIndices(s,!0,r),this._addChildView(s,r),s},_updateIndices:function(e,t,n){if(!this.sort)return;t?(e._index=n,this.children.each(function(t){t._index>=e._index&&t._index++})):this.children.each(function(t){t._index>=e._index&&t._index--})},_addChildView:function(e,t){this.proxyChildEvents(e),this.triggerMethod("before:add:child",e),this.children.add(e),this.renderChildView(e,t),this._isShown&&!this.isBuffering&&i.triggerMethodOn(e,"show"),this.triggerMethod("add:child",e)},renderChildView:function(e,t){return e.render(),this.attachHtml(this,e,t),e},buildChildView:function(e,t,r){var i=n.extend({model:e},r);return new t(i)},removeChildView:function(e){return e&&(this.triggerMethod("before:remove:child",e),e.destroy?e.destroy():e.remove&&e.remove(),this.stopListening(e),this.children.remove(e),this.triggerMethod("remove:child",e),this._updateIndices(e,!1)),e},isEmpty:function(){return!this.collection||this.collection.length===0},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},attachBuffer:function(e,t){e.$el.append(t)},attachHtml:function(e,t,n){e.isBuffering?(e.elBuffer.appendChild(t.el),e._bufferedChildren.push(t)):e._insertBefore(t,n)||e._insertAfter(t)},_insertBefore:function(e,t){var n,r=this.sort&&t<this.children.length-1;return r&&(n=this.children.find(function(e){return e._index===t+1})),n?(n.$el.before(e.el),!0):!1},_insertAfter:function(e){this.$el.append(e.el)},_initChildViewStorage:function(){this.children=new t.ChildViewContainer},destroy:function(){if(this.isDestroyed)return;return this.triggerMethod("before:destroy:collection"),this.destroyChildren(),this.triggerMethod("destroy:collection"),i.View.prototype.destroy.apply(this,arguments)},destroyChildren:function(){var e=this.children.map(n.identity);return this.children.each(this.removeChildView,this),this.checkEmpty(),e},proxyChildEvents:function(e){var t=this.getOption("childViewEventPrefix");this.listenTo(e,"all",function(){var r=s.call(arguments),i=r[0],o=this.normalizeMethods(n.result(this,"childEvents"));r[0]=t+":"+i,r.splice(1,0,e),typeof o!="undefined"&&n.isFunction(o[i])&&o[i].apply(this,r.slice(1)),this.triggerMethod.apply(this,r)},this)}}),i.CompositeView=i.CollectionView.extend({constructor:function(){i.CollectionView.apply(this,arguments)},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this._renderChildren),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))},getChildView:function(e){var t=this.getOption("childView")||this.constructor;if(!t)throw new i.Error({name:"NoChildViewError",message:'A "childView" must be specified'});return t},serializeData:function(){var e={};return this.model&&(e=n.partial(this.serializeModel,this.model).apply(this,arguments)),e},render:function(){return this._ensureViewIsIntact(),this.isRendered=!0,this.resetChildViewContainer(),this.triggerMethod("before:render",this),this._renderTemplate(),this._renderChildren(),this.triggerMethod("render",this),this},_renderChildren:function(){this.isRendered&&i.CollectionView.prototype._renderChildren.call(this)},_renderTemplate:function(){var e={};e=this.serializeData(),e=this.mixinTemplateHelpers(e),this.triggerMethod("before:render:template");var t=this.getTemplate(),n=i.Renderer.render(t,e,this);this.attachElContent(n),this.bindUIElements(),this.triggerMethod("render:template")},attachElContent:function(e){return this.$el.html(e),this},attachBuffer:function(e,t){var n=this.getChildViewContainer(e);n.append(t)},_insertAfter:function(e){var t=this.getChildViewContainer(this);t.append(e.el)},getChildViewContainer:function(e){if("$childViewContainer"in e)return e.$childViewContainer;var t,r=i.getOption(e,"childViewContainer");if(r){var s=n.isFunction(r)?r.call(e):r;s.charAt(0)==="@"&&e.ui?t=e.ui[s.substr(4)]:t=e.$(s);if(t.length<=0)throw new i.Error({name:"ChildViewContainerMissingError",message:'The specified "childViewContainer" was not found: '+e.childViewContainer})}else t=e.$el;return e.$childViewContainer=t,t},resetChildViewContainer:function(){this.$childViewContainer&&delete this.$childViewContainer}}),i.LayoutView=i.ItemView.extend({regionClass:i.Region,constructor:function(e){e=e||{},this._firstRender=!0,this._initializeRegions(e),i.ItemView.call(this,e)},render:function(){return this._ensureViewIsIntact(),this._firstRender?this._firstRender=!1:this._reInitializeRegions(),i.ItemView.prototype.render.apply(this,arguments)},destroy:function(){return this.isDestroyed?this:(this.regionManager.destroy(),i.ItemView.prototype.destroy.apply(this,arguments))},addRegion:function(e,t){this.triggerMethod("before:region:add",e);var n={};return n[e]=t,this._buildRegions(n)[e]},addRegions:function(e){return this.regions=n.extend({},this.regions,e),this._buildRegions(e)},removeRegion:function(e){return this.triggerMethod("before:region:remove",e),delete this.regions[e],this.regionManager.removeRegion(e)},getRegion:function(e){return this.regionManager.get(e)},getRegions:function(){return this.regionManager.getRegions()},_buildRegions:function(e){var t=this,n={regionClass:this.getOption("regionClass"),parentEl:function(){return t.$el}};return this.regionManager.addRegions(e,n)},_initializeRegions:function(e){var t;this._initRegionManager(),n.isFunction(this.regions)?t=this.regions(e):t=this.regions||{};var r=this.getOption.call(e,"regions");n.isFunction(r)&&(r=r.call(this,e)),n.extend(t,r),t=this.normalizeUIValues(t),this.addRegions(t)},_reInitializeRegions:function(){this.regionManager.emptyRegions(),this.regionManager.each(function(e){e.reset()})},getRegionManager:function(){return new i.RegionManager},_initRegionManager:function(){this.regionManager=this.getRegionManager(),this.listenTo(this.regionManager,"before:add:region",function(e){this.triggerMethod("before:add:region",e)}),this.listenTo(this.regionManager,"add:region",function(e,t){this[e]=t,this.triggerMethod("add:region",e,t)}),this.listenTo(this.regionManager,"before:remove:region",function(e){this.triggerMethod("before:remove:region",e)}),this.listenTo(this.regionManager,"remove:region",function(e,t){delete this[e],this.triggerMethod("remove:region",e,t)})}}),i.Behavior=function(e,t){function n(t,n){this.view=n,this.defaults=e.result(this,"defaults")||{},this.options=e.extend({},this.defaults,t),this.$=function(){return this.view.$.apply(this.view,arguments)},this.initialize.apply(this,arguments)}return e.extend(n.prototype,t.Events,{initialize:function(){},destroy:function(){this.stopListening()},proxyViewProperties:function(e){this.$el=e.$el,this.el=e.el},triggerMethod:i.triggerMethod,getOption:i.proxyGetOption,bindEntityEvents:i.proxyBindEntityEvents,unbindEntityEvents:i.proxyUnbindEntityEvents}),n.extend=i.extend,n}(n,t),i.Behaviors=function(e,t){function n(e,i){return t.isObject(e.behaviors)?(i=n.parseBehaviors(e,i||t.result(e,"behaviors")),n.wrap(e,i,t.keys(r)),i):{}}function i(e,n){this._view=e,this._viewUI=t.result(e,"ui"),this._behaviors=n,this._triggers={}}var r={behaviorTriggers:function(e,t){var n=new i(this,t);return n.buildBehaviorTriggers()},behaviorEvents:function(n,r){var i={},s=t.result(this,"ui");return t.each(r,function(n,r){var o={},u=t.clone(t.result(n,"events"))||{},a=t.result(n,"ui"),f=t.extend({},s,a);u=e.normalizeUIKeys(u,f),t.each(t.keys(u),function(e){var i=(new Array(r+2)).join(" "),s=e+i,a=t.isFunction(u[e])?u[e]:n[u[e]];o[s]=t.bind(a,n)}),i=t.extend(i,o)}),i}};return t.extend(n,{behaviorsLookup:function(){throw new e.Error({message:"You must define where your behaviors are stored.",url:"marionette.behaviors.html#behaviorslookup"})},getBehaviorClass:function(e,r){return e.behaviorClass?e.behaviorClass:t.isFunction(n.behaviorsLookup)?n.behaviorsLookup.apply(this,arguments)[r]:n.behaviorsLookup[r]},parseBehaviors:function(e,r){return t.chain(r).map(function(r,i){var s=n.getBehaviorClass(r,i),o=new s(r,e),u=n.parseBehaviors(e,t.result(o,"behaviors"));return[o].concat(u)}).flatten().value()},wrap:function(e,n,i){t.each(i,function(i){e[i]=t.partial(r[i],e[i],n)})}}),t.extend(i.prototype,{buildBehaviorTriggers:function(){return t.each(this._behaviors,this._buildTriggerHandlersForBehavior,this),this._triggers},_buildTriggerHandlersForBehavior:function(n,r){var i=t.extend({},this._viewUI,t.result(n,"ui")),s=t.clone(t.result(n,"triggers"))||{};s=e.normalizeUIKeys(s,i),t.each(s,t.partial(this._setHandlerForBehavior,n,r),this)},_setHandlerForBehavior:function(e,t,n,r){var i=r.replace(/^\S+/,function(e){return e+"."+"behaviortriggers"+t});this._triggers[i]=this._view._buildViewTrigger(n)}}),n}(i,n),i.AppRouter=t.Router.extend({constructor:function(e){t.Router.apply(this,arguments),this.options=e||{};var n=this.getOption("appRoutes"),r=this._getController();this.processAppRoutes(r,n),this.on("route",this._processOnRoute,this)},appRoute:function(e,t){var n=this._getController();this._addAppRoute(n,e,t)},_processOnRoute:function(e,t){var r=n.invert(this.getOption("appRoutes"))[e];n.isFunction(this.onRoute)&&this.onRoute(e,r,t)},processAppRoutes:function(e,t){if(!t)return;var r=n.keys(t).reverse();n.each(r,function(n){this._addAppRoute(e,n,t[n])},this)},_getController:function(){return this.getOption("controller")},_addAppRoute:function(e,t,r){var s=e[r];if(!s)throw new i.Error('Method "'+r+'" was not found on the controller');this.route(t,r,n.bind(s,e))},getOption:i.proxyGetOption}),i.Application=function(e){this.options=e,this._initializeRegions(e),this._initCallbacks=new i.Callbacks,this.submodules={},n.extend(this,e),this._initChannel(),this.initialize.apply(this,arguments)},n.extend(i.Application.prototype,t.Events,{initialize:function(){},execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(e){this._initCallbacks.add(e)},start:function(e){this.triggerMethod("before:start",e),this._initCallbacks.run(e,this),this.triggerMethod("start",e)},addRegions:function(e){return this._regionManager.addRegions(e)},emptyRegions:function(){return this._regionManager.emptyRegions()},removeRegion:function(e){return this._regionManager.removeRegion(e)},getRegion:function(e){return this._regionManager.get(e)},getRegions:function(){return this._regionManager.getRegions()},module:function(e,t){var n=i.Module.getClass(t),r=s.call(arguments);return r.unshift(this),n.create.apply(n,r)},getRegionManager:function(){return new i.RegionManager},_initializeRegions:function(e){var t=n.isFunction(this.regions)?this.regions(e):this.regions||{};this._initRegionManager();var r=i.getOption(e,"regions");return n.isFunction(r)&&(r=r.call(this,e)),n.extend(t,r),this.addRegions(t),this},_initRegionManager:function(){this._regionManager=this.getRegionManager(),this.listenTo(this._regionManager,"before:add:region",function(e){this.triggerMethod("before:add:region",e)}),this.listenTo(this._regionManager,"add:region",function(e,t){this[e]=t,this.triggerMethod("add:region",e,t)}),this.listenTo(this._regionManager,"before:remove:region",function(e){this.triggerMethod("before:remove:region",e)}),this.listenTo(this._regionManager,"remove:region",function(e,t){delete this[e],this.triggerMethod("remove:region",e,t)})},_initChannel:function(){this.channelName=n.result(this,"channelName")||"global",this.channel=n.result(this,"channel")||t.Wreqr.radio.channel(this.channelName),this.vent=n.result(this,"vent")||this.channel.vent,this.commands=n.result(this,"commands")||this.channel.commands,this.reqres=n.result(this,"reqres")||this.channel.reqres},triggerMethod:i.triggerMethod,getOption:i.proxyGetOption}),i.Application.extend=i.extend,i.Module=function(e,t,r){this.moduleName=e,this.options=n.extend({},this.options,r),this.initialize=r.initialize||this.initialize,this.submodules={},this._setupInitializersAndFinalizers(),this.app=t,n.isFunction(this.initialize)&&this.initialize(e,t,this.options)},i.Module.extend=i.extend,n.extend(i.Module.prototype,t.Events,{startWithParent:!0,initialize:function(){},addInitializer:function(e){this._initializerCallbacks.add(e)},addFinalizer:function(e){this._finalizerCallbacks.add(e)},start:function(e){if(this._isInitialized)return;n.each(this.submodules,function(t){t.startWithParent&&t.start(e)}),this.triggerMethod("before:start",e),this._initializerCallbacks.run(e,this),this._isInitialized=!0,this.triggerMethod("start",e)},stop:function(){if(!this._isInitialized)return;this._isInitialized=!1,this.triggerMethod("before:stop"),n.each(this.submodules,function(e){e.stop()}),this._finalizerCallbacks.run(undefined,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),this.triggerMethod("stop")},addDefinition:function(e,t){this._runModuleDefinition(e,t)},_runModuleDefinition:function(e,r){if(!e)return;var s=n.flatten([this,this.app,t,i,t.$,n,r]);e.apply(this,s)},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new i.Callbacks,this._finalizerCallbacks=new i.Callbacks},triggerMethod:i.triggerMethod}),n.extend(i.Module,{create:function(e,t,r){var i=e,o=s.call(arguments);o.splice(0,3),t=t.split(".");var u=t.length,a=[];return a[u-1]=r,n.each(t,function(t,n){var s=i;i=this._getModule(s,t,e,r),this._addModuleDefinition(s,i,a[n],o)},this),i},_getModule:function(e,t,r,i,s){var o=n.extend({},i),u=this.getClass(i),a=e[t];return a||(a=new u(t,r,o),e[t]=a,e.submodules[t]=a),a},getClass:function(e){var t=i.Module;return e?e.prototype instanceof t?e:e.moduleClass||t:t},_addModuleDefinition:function(e,t,n,r){var i=this._getDefine(n),s=this._getStartWithParent(n,t);i&&t.addDefinition(i,r),this._addStartWithParent(e,t,s)},_getStartWithParent:function(e,t){var r;return n.isFunction(e)&&e.prototype instanceof i.Module?(r=t.constructor.prototype.startWithParent,n.isUndefined(r)?!0:r):n.isObject(e)?(r=e.startWithParent,n.isUndefined(r)?!0:r):!0},_getDefine:function(e){return!n.isFunction(e)||e.prototype instanceof i.Module?n.isObject(e)?e.define:null:e},_addStartWithParent:function(e,t,n){t.startWithParent=t.startWithParent&&n;if(!t.startWithParent||!!t.startWithParentIsConfigured)return;t.startWithParentIsConfigured=!0,e.addInitializer(function(e){t.startWithParent&&t.start(e)})}}),i}),function(){var e={};(function(e,t){e.VERSION="1.0.0-rc.3",e.COMPILER_REVISION=2,e.REVISION_CHANGES={1:"<= 1.0.rc.2",2:">= 1.0.0-rc.3"},e.helpers={},e.partials={},e.registerHelper=function(e,t,n){n&&(t.not=n),this.helpers[e]=t},e.registerPartial=function(e,t){this.partials[e]=t},e.registerHelper("helperMissing",function(e){if(arguments.length===2)return t;throw new Error("Could not find property '"+e+"'")});var n=Object.prototype.toString,r="[object Function]";e.registerHelper("blockHelperMissing",function(t,i){var s=i.inverse||function(){},o=i.fn,u=n.call(t);return u===r&&(t=t.call(this)),t===!0?o(this):t===!1||t==null?s(this):u==="[object Array]"?t.length>0?e.helpers.each(t,i):s(this):o(t)}),e.K=function(){},e.createFrame=Object.create||function(t){e.K.prototype=t;var n=new e.K;return e.K.prototype=null,n},e.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(t,n){if(e.logger.level<=t){var r=e.logger.methodMap[t];typeof console!="undefined"&&console[r]&&console[r].call(console,n)}}},e.log=function(t,n){e.logger.log(t,n)},e.registerHelper("each",function(t,n){var r=n.fn,i=n.inverse,s=0,o="",u;n.data&&(u=e.createFrame(n.data));if(t&&typeof t=="object")if(t instanceof Array)for(var a=t.length;s<a;s++)u&&(u.index=s),o+=r(t[s],{data:u});else for(var f in t)t.hasOwnProperty(f)&&(u&&(u.key=f),o+=r(t[f],{data:u}),s++);return s===0&&(o=i(this)),o}),e.registerHelper("if",function(t,i){var s=n.call(t);return s===r&&(t=t.call(this)),!t||e.Utils.isEmpty(t)?i.inverse(this):i.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn})}),e.registerHelper("with",function(e,t){return t.fn(e)}),e.registerHelper("log",function(t,n){var r=n.data&&n.data.level!=null?parseInt(n.data.level,10):1;e.log(r,t)})})(e);var t=function(){function n(){this.yy={}}var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,simpleInverse:6,statements:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,OPEN_PARTIAL:24,partialName:25,params:26,hash:27,DATA:28,param:29,STRING:30,INTEGER:31,BOOLEAN:32,hashSegments:33,hashSegment:34,ID:35,EQUALS:36,PARTIAL_NAME:37,pathSegments:38,SEP:39,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"OPEN_PARTIAL",28:"DATA",30:"STRING",31:"INTEGER",32:"BOOLEAN",35:"ID",36:"EQUALS",37:"PARTIAL_NAME",39:"SEP"},productions_:[0,[3,2],[4,2],[4,3],[4,2],[4,1],[4,1],[4,0],[7,1],[7,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[6,2],[17,3],[17,2],[17,2],[17,1],[17,1],[26,2],[26,1],[29,1],[29,1],[29,1],[29,1],[29,1],[27,1],[33,2],[33,1],[34,3],[34,3],[34,3],[34,3],[34,3],[25,1],[21,1],[38,3],[38,1]],performAction:function(t,n,r,i,s,o,u){var a=o.length-1;switch(s){case 1:return o[a-1];case 2:this.$=new i.ProgramNode([],o[a]);break;case 3:this.$=new i.ProgramNode(o[a-2],o[a]);break;case 4:this.$=new i.ProgramNode(o[a-1],[]);break;case 5:this.$=new i.ProgramNode(o[a]);break;case 6:this.$=new i.ProgramNode([],[]);break;case 7:this.$=new i.ProgramNode([]);break;case 8:this.$=[o[a]];break;case 9:o[a-1].push(o[a]),this.$=o[a-1];break;case 10:this.$=new i.BlockNode(o[a-2],o[a-1].inverse,o[a-1],o[a]);break;case 11:this.$=new i.BlockNode(o[a-2],o[a-1],o[a-1].inverse,o[a]);break;case 12:this.$=o[a];break;case 13:this.$=o[a];break;case 14:this.$=new i.ContentNode(o[a]);break;case 15:this.$=new i.CommentNode(o[a]);break;case 16:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1]);break;case 17:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1]);break;case 18:this.$=o[a-1];break;case 19:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1]);break;case 20:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1],!0);break;case 21:this.$=new i.PartialNode(o[a-1]);break;case 22:this.$=new i.PartialNode(o[a-2],o[a-1]);break;case 23:break;case 24:this.$=[[o[a-2]].concat(o[a-1]),o[a]];break;case 25:this.$=[[o[a-1]].concat(o[a]),null];break;case 26:this.$=[[o[a-1]],o[a]];break;case 27:this.$=[[o[a]],null];break;case 28:this.$=[[new i.DataNode(o[a])],null];break;case 29:o[a-1].push(o[a]),this.$=o[a-1];break;case 30:this.$=[o[a]];break;case 31:this.$=o[a];break;case 32:this.$=new i.StringNode(o[a]);break;case 33:this.$=new i.IntegerNode(o[a]);break;case 34:this.$=new i.BooleanNode(o[a]);break;case 35:this.$=new i.DataNode(o[a]);break;case 36:this.$=new i.HashNode(o[a]);break;case 37:o[a-1].push(o[a]),this.$=o[a-1];break;case 38:this.$=[o[a]];break;case 39:this.$=[o[a-2],o[a]];break;case 40:this.$=[o[a-2],new i.StringNode(o[a])];break;case 41:this.$=[o[a-2],new i.IntegerNode(o[a])];break;case 42:this.$=[o[a-2],new i.BooleanNode(o[a])];break;case 43:this.$=[o[a-2],new i.DataNode(o[a])];break;case 44:this.$=new i.PartialNameNode(o[a]);break;case 45:this.$=new i.IdNode(o[a]);break;case 46:o[a-2].push(o[a]),this.$=o[a-2];break;case 47:this.$=[o[a]]}},table:[{3:1,4:2,5:[2,7],6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],22:[1,14],23:[1,15],24:[1,16]},{1:[3]},{5:[1,17]},{5:[2,6],7:18,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,6],22:[1,14],23:[1,15],24:[1,16]},{5:[2,5],6:20,8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,5],22:[1,14],23:[1,15],24:[1,16]},{17:23,18:[1,22],21:24,28:[1,25],35:[1,27],38:26},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],24:[2,8]},{4:28,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],24:[1,16]},{4:29,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],24:[1,16]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],24:[2,12]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],24:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],24:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],24:[2,15]},{17:30,21:24,28:[1,25],35:[1,27],38:26},{17:31,21:24,28:[1,25],35:[1,27],38:26},{17:32,21:24,28:[1,25],35:[1,27],38:26},{25:33,37:[1,34]},{1:[2,1]},{5:[2,2],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,2],22:[1,14],23:[1,15],24:[1,16]},{17:23,21:24,28:[1,25],35:[1,27],38:26},{5:[2,4],7:35,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,4],22:[1,14],23:[1,15],24:[1,16]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],24:[2,9]},{5:[2,23],14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],24:[2,23]},{18:[1,36]},{18:[2,27],21:41,26:37,27:38,28:[1,45],29:39,30:[1,42],31:[1,43],32:[1,44],33:40,34:46,35:[1,47],38:26},{18:[2,28]},{18:[2,45],28:[2,45],30:[2,45],31:[2,45],32:[2,45],35:[2,45],39:[1,48]},{18:[2,47],28:[2,47],30:[2,47],31:[2,47],32:[2,47],35:[2,47],39:[2,47]},{10:49,20:[1,50]},{10:51,20:[1,50]},{18:[1,52]},{18:[1,53]},{18:[1,54]},{18:[1,55],21:56,35:[1,27],38:26},{18:[2,44],35:[2,44]},{5:[2,3],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,3],22:[1,14],23:[1,15],24:[1,16]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],24:[2,17]},{18:[2,25],21:41,27:57,28:[1,45],29:58,30:[1,42],31:[1,43],32:[1,44],33:40,34:46,35:[1,47],38:26},{18:[2,26]},{18:[2,30],28:[2,30],30:[2,30],31:[2,30],32:[2,30],35:[2,30]},{18:[2,36],34:59,35:[1,60]},{18:[2,31],28:[2,31],30:[2,31],31:[2,31],32:[2,31],35:[2,31]},{18:[2,32],28:[2,32],30:[2,32],31:[2,32],32:[2,32],35:[2,32]},{18:[2,33],28:[2,33],30:[2,33],31:[2,33],32:[2,33],35:[2,33]},{18:[2,34],28:[2,34],30:[2,34],31:[2,34],32:[2,34],35:[2,34]},{18:[2,35],28:[2,35],30:[2,35],31:[2,35],32:[2,35],35:[2,35]},{18:[2,38],35:[2,38]},{18:[2,47],28:[2,47],30:[2,47],31:[2,47],32:[2,47],35:[2,47],36:[1,61],39:[2,47]},{35:[1,62]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],24:[2,10]},{21:63,35:[1,27],38:26},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],24:[2,11]},{14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],24:[2,16]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],24:[2,19]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],24:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],24:[2,21]},{18:[1,64]},{18:[2,24]},{18:[2,29],28:[2,29],30:[2,29],31:[2,29],32:[2,29],35:[2,29]},{18:[2,37],35:[2,37]},{36:[1,61]},{21:65,28:[1,69],30:[1,66],31:[1,67],32:[1,68],35:[1,27],38:26},{18:[2,46],28:[2,46],30:[2,46],31:[2,46],32:[2,46],35:[2,46],39:[2,46]},{18:[1,70]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],24:[2,22]},{18:[2,39],35:[2,39]},{18:[2,40],35:[2,40]},{18:[2,41],35:[2,41]},{18:[2,42],35:[2,42]},{18:[2,43],35:[2,43]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],24:[2,18]}],defaultActions:{17:[2,1],25:[2,28],38:[2,26],57:[2,24]},parseError:function(t,n){throw new Error(t)},parse:function(t){function v(e){r.length=r.length-2*e,i.length=i.length-e,s.length=s.length-e}function m(){var e;return e=n.lexer.lex()||1,typeof e!="number"&&(e=n.symbols_[e]||e),e}var n=this,r=[0],i=[null],s=[],o=this.table,u="",a=0,f=0,l=0,c=2,h=1;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,typeof this.lexer.yylloc=="undefined"&&(this.lexer.yylloc={});var p=this.lexer.yylloc;s.push(p);var d=this.lexer.options&&this.lexer.options.ranges;typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);var g,y,b,w,E,S,x={},T,N,C,k;for(;;){b=r[r.length-1];if(this.defaultActions[b])w=this.defaultActions[b];else{if(g===null||typeof g=="undefined")g=m();w=o[b]&&o[b][g]}if(typeof w=="undefined"||!w.length||!w[0]){var L="";if(!l){k=[];for(T in o[b])this.terminals_[T]&&T>2&&k.push("'"+this.terminals_[T]+"'");this.lexer.showPosition?L="Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+k.join(", ")+", got '"+(this.terminals_[g]||g)+"'":L="Parse error on line "+(a+1)+": Unexpected "+(g==1?"end of input":"'"+(this.terminals_[g]||g)+"'"),this.parseError(L,{text:this.lexer.match,token:this.terminals_[g]||g,line:this.lexer.yylineno,loc:p,expected:k})}}if(w[0]instanceof Array&&w.length>1)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+g);switch(w[0]){case 1:r.push(g),i.push(this.lexer.yytext),s.push(this.lexer.yylloc),r.push(w[1]),g=null,y?(g=y,y=null):(f=this.lexer.yyleng,u=this.lexer.yytext,a=this.lexer.yylineno,p=this.lexer.yylloc,l>0&&l--);break;case 2:N=this.productions_[w[1]][1],x.$=i[i.length-N],x._$={first_line:s[s.length-(N||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(N||1)].first_column,last_column:s[s.length-1].last_column},d&&(x._$.range=[s[s.length-(N||1)].range[0],s[s.length-1].range[1]]),S=this.performAction.call(x,u,f,a,this.yy,w[1],i,s);if(typeof S!="undefined")return S;N&&(r=r.slice(0,-1*N*2),i=i.slice(0,-1*N),s=s.slice(0,-1*N)),r.push(this.productions_[w[1]][0]),i.push(x.$),s.push(x._$),C=o[r[r.length-2]][r[r.length-1]],r.push(C);break;case 3:return!0}}return!0}},t=function(){var e={EOF:1,parseError:function(t,n){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,n)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=(new Array(e.length+1)).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,r,i,s;this._more||(this.yytext="",this.match="");var o=this._currentRules();for(var u=0;u<o.length;u++){n=this._input.match(this.rules[o[u]]);if(n&&(!t||n[0].length>t[0].length)){t=n,r=u;if(!this.options.flex)break}}if(t){s=t[0].match(/(?:\r\n?|\n).*/g),s&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,o[r],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1);if(e)return e;return}return this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return typeof t!="undefined"?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return e.options={},e.performAction=function(t,n,r,i){var s=i;switch(r){case 0:n.yytext.slice(-1)!=="\\"&&this.begin("mu"),n.yytext.slice(-1)==="\\"&&(n.yytext=n.yytext.substr(0,n.yyleng-1),this.begin("emu"));if(n.yytext)return 14;break;case 1:return 14;case 2:return n.yytext.slice(-1)!=="\\"&&this.popState(),n.yytext.slice(-1)==="\\"&&(n.yytext=n.yytext.substr(0,n.yyleng-1)),14;case 3:return n.yytext=n.yytext.substr(0,n.yyleng-4),this.popState(),15;case 4:return this.begin("par"),24;case 5:return 16;case 6:return 20;case 7:return 19;case 8:return 19;case 9:return 23;case 10:return 23;case 11:this.popState(),this.begin("com");break;case 12:return n.yytext=n.yytext.substr(3,n.yyleng-5),this.popState(),15;case 13:return 22;case 14:return 36;case 15:return 35;case 16:return 35;case 17:return 39;case 18:break;case 19:return this.popState(),18;case 20:return this.popState(),18;case 21:return n.yytext=n.yytext.substr(1,n.yyleng-2).replace(/\\"/g,'"'),30;case 22:return n.yytext=n.yytext.substr(1,n.yyleng-2).replace(/\\'/g,"'"),30;case 23:return n.yytext=n.yytext.substr(1),28;case 24:return 32;case 25:return 32;case 26:return 31;case 27:return 35;case 28:return n.yytext=n.yytext.substr(1,n.yyleng-2),35;case 29:return"INVALID";case 30:break;case 31:return this.popState(),37;case 32:return 5}},e.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{>)/,/^(?:\{\{#)/,/^(?:\{\{\/)/,/^(?:\{\{\^)/,/^(?:\{\{\s*else\b)/,/^(?:\{\{\{)/,/^(?:\{\{&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{)/,/^(?:=)/,/^(?:\.(?=[} ]))/,/^(?:\.\.)/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}\}\})/,/^(?:\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@[a-zA-Z]+)/,/^(?:true(?=[}\s]))/,/^(?:false(?=[}\s]))/,/^(?:-?[0-9]+(?=[}\s]))/,/^(?:[a-zA-Z0-9_$-]+(?=[=}\s\/.]))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:\s+)/,/^(?:[a-zA-Z0-9_$-/]+)/,/^(?:$)/],e.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},par:{rules:[30,31],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},e}();return e.lexer=t,n.prototype=e,e.Parser=n,new n}();e.Parser=t,e.parse=function(t){return t.constructor===e.AST.ProgramNode?t:(e.Parser.yy=e.AST,e.Parser.parse(t))},function(){e.AST={},e.AST.ProgramNode=function(t,n){this.type="program",this.statements=t,n&&(this.inverse=new e.AST.ProgramNode(n))},e.AST.MustacheNode=function(e,t,n){this.type="mustache",this.escaped=!n,this.hash=t;var r=this.id=e[0],i=this.params=e.slice(1),s=this.eligibleHelper=r.isSimple;this.isHelper=s&&(i.length||t)},e.AST.PartialNode=function(e,t){this.type="partial",this.partialName=e,this.context=t},e.AST.BlockNode=function(t,n,r,i){var s=function(t,n){if(t.original!==n.original)throw new e.Exception(t.original+" doesn't match "+n.original)};s(t.id,i),this.type="block",this.mustache=t,this.program=n,this.inverse=r,this.inverse&&!this.program&&(this.isInverse=!0)},e.AST.ContentNode=function(e){this.type="content",this.string=e},e.AST.HashNode=function(e){this.type="hash",this.pairs=e},e.AST.IdNode=function(t){this.type="ID",this.original=t.join(".");var n=[],r=0;for(var i=0,s=t.length;i<s;i++){var o=t[i];if(o===".."||o==="."||o==="this"){if(n.length>0)throw new e.Exception("Invalid path: "+this.original);o===".."?r++:this.isScoped=!0}else n.push(o)}this.parts=n,this.string=n.join("."),this.depth=r,this.isSimple=t.length===1&&!this.isScoped&&r===0,this.stringModeValue=this.string},e.AST.PartialNameNode=function(e){this.type="PARTIAL_NAME",this.name=e},e.AST.DataNode=function(e){this.type="DATA",this.id=e},e.AST.StringNode=function(e){this.type="STRING",this.string=e,this.stringModeValue=e},e.AST.IntegerNode=function(e){this.type="INTEGER",this.integer=e,this.stringModeValue=Number(e)},e.AST.BooleanNode=function(e){this.type="BOOLEAN",this.bool=e,this.stringModeValue=e==="true"},e.AST.CommentNode=function(e){this.type="comment",this.comment=e}}();var n=["description","fileName","lineNumber","message","name","number","stack"];e.Exception=function(e){var t=Error.prototype.constructor.apply(this,arguments);for(var r=0;r<n.length;r++)this[n[r]]=t[n[r]]},e.Exception.prototype=new Error,e.SafeString=function(e){this.string=e},e.SafeString.prototype.toString=function(){return this.string.toString()},function(){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},n=/[&<>"'`]/g,r=/[&<>"'`]/,i=function(e){return t[e]||"&amp;"};e.Utils={escapeExpression:function(t){return t instanceof e.SafeString?t.toString():t==null||t===!1?"":r.test(t)?t.replace(n,i):t},isEmpty:function(e){return!e&&e!==0?!0:Object.prototype.toString.call(e)==="[object Array]"&&e.length===0?!0:!1}}}(),e.Compiler=function(){},e.JavaScriptCompiler=function(){},function(t,n){t.prototype={compiler:t,disassemble:function(){var e=this.opcodes,t,n=[],r,i;for(var s=0,o=e.length;s<o;s++){t=e[s];if(t.opcode==="DECLARE")n.push("DECLARE "+t.name+"="+t.value);else{r=[];for(var u=0;u<t.args.length;u++)i=t.args[u],typeof i=="string"&&(i='"'+i.replace("\n","\\n")+'"'),r.push(i);n.push(t.opcode+" "+r.join(" "))}}return n.join("\n")},equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var n=0;n<t;n++){var r=this.opcodes[n],i=e.opcodes[n];if(r.opcode!==i.opcode||r.args.length!==i.args.length)return!1;for(var s=0;s<r.args.length;s++)if(r.args[s]!==i.args[s])return!1}t=this.children.length;if(e.children.length!==t)return!1;for(n=0;n<t;n++)if(!this.children[n].equals(e.children[n]))return!1;return!0},guid:0,compile:function(e,t){this.children=[],this.depths={list:[]},this.options=t;var n=this.options.knownHelpers;this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0};if(n)for(var r in n)this.options.knownHelpers[r]=n[r];return this.program(e)},accept:function(e){return this[e.type](e)},program:function(e){var t=e.statements,n;this.opcodes=[];for(var r=0,i=t.length;r<i;r++)n=t[r],this[n.type](n);return this.isSimple=i===1,this.depths.list=this.depths.list.sort(function(e,t){return e-t}),this},compileProgram:function(e){var t=(new this.compiler).compile(e,this.options),n=this.guid++,r;this.usePartial=this.usePartial||t.usePartial,this.children[n]=t;for(var i=0,s=t.depths.list.length;i<s;i++){r=t.depths.list[i];if(r<2)continue;this.addDepth(r-1)}return n},block:function(e){var t=e.mustache,n=e.program,r=e.inverse;n&&(n=this.compileProgram(n)),r&&(r=this.compileProgram(r));var i=this.classifyMustache(t);i==="helper"?this.helperMustache(t,n,r):i==="simple"?(this.simpleMustache(t),this.opcode("pushProgram",n),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousMustache(t,n,r),this.opcode("pushProgram",n),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(e){var t=e.pairs,n,r;this.opcode("pushHash");for(var i=0,s=t.length;i<s;i++)n=t[i],r=n[1],this.options.stringParams?this.opcode("pushStringParam",r.stringModeValue,r.type):this.accept(r),this.opcode("assignToHash",n[0]);this.opcode("popHash")},partial:function(e){var t=e.partialName;this.usePartial=!0,e.context?this.ID(e.context):this.opcode("push","depth0"),this.opcode("invokePartial",t.name),this.opcode("append")},content:function(e){this.opcode("appendContent",e.string)},mustache:function(e){var t=this.options,n=this.classifyMustache(e);n==="simple"?this.simpleMustache(e):n==="helper"?this.helperMustache(e):this.ambiguousMustache(e),e.escaped&&!t.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousMustache:function(e,t,n){var r=e.id,i=r.parts[0],s=t!=null||n!=null;this.opcode("getContext",r.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("invokeAmbiguous",i,s)},simpleMustache:function(e){var t=e.id;t.type==="DATA"?this.DATA(t):t.parts.length?this.ID(t):(this.addDepth(t.depth),this.opcode("getContext",t.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperMustache:function(e,t,n){var r=this.setupFullMustacheParams(e,t,n),i=e.id.parts[0];if(this.options.knownHelpers[i])this.opcode("invokeKnownHelper",r.length,i);else{if(this.knownHelpersOnly)throw new Error("You specified knownHelpersOnly, but used the unknown helper "+i);this.opcode("invokeHelper",r.length,i)}},ID:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0];t?this.opcode("lookupOnContext",e.parts[0]):this.opcode("pushContext");for(var n=1,r=e.parts.length;n<r;n++)this.opcode("lookup",e.parts[n])},DATA:function(e){this.options.data=!0,this.opcode("lookupData",e.id)},STRING:function(e){this.opcode("pushString",e.string)},INTEGER:function(e){this.opcode("pushLiteral",e.integer)},BOOLEAN:function(e){this.opcode("pushLiteral",e.bool)},comment:function(){},opcode:function(e){this.opcodes.push({opcode:e,args:[].slice.call(arguments,1)})},declare:function(e,t){this.opcodes.push({opcode:"DECLARE",name:e,value:t})},addDepth:function(e){if(isNaN(e))throw new Error("EWOT");if(e===0)return;this.depths[e]||(this.depths[e]=!0,this.depths.list.push(e))},classifyMustache:function(e){var t=e.isHelper,n=e.eligibleHelper,r=this.options;if(n&&!t){var i=e.id.parts[0];r.knownHelpers[i]?t=!0:r.knownHelpersOnly&&(n=!1)}return t?"helper":n?"ambiguous":"simple"},pushParams:function(e){var t=e.length,n;while(t--)n=e[t],this.options.stringParams?(n.depth&&this.addDepth(n.depth),this.opcode("getContext",n.depth||0),this.opcode("pushStringParam",n.stringModeValue,n.type)):this[n.type](n)},setupMustacheParams:function(e){var t=e.params;return this.pushParams(t),e.hash?this.hash(e.hash):this.opcode("emptyHash"),t},setupFullMustacheParams:function(e,t,n){var r=e.params;return this.pushParams(r),this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.hash(e.hash):this.opcode("emptyHash"),r}};var r=function(e){this.value=e};n.prototype={nameLookup:function(e,t){return/^[0-9]+$/.test(t)?e+"["+t+"]":n.isValidJavaScriptVariableName(t)?e+"."+t:e+"['"+t+"']"},appendToBuffer:function(e){return this.environment.isSimple?"return "+e+";":{appendToBuffer:!0,content:e,toString:function(){return"buffer += "+e+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(t,n,r,i){this.environment=t,this.options=n||{},e.log(e.logger.DEBUG,this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!r,this.context=r||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.compileStack=[],this.inlineStack=[],this.compileChildren(t,n);var s=t.opcodes,o;this.i=0;for(u=s.length;this.i<u;this.i++)o=s[this.i],o.opcode==="DECLARE"?this[o.name]=o.value:this[o.opcode].apply(this,o.args);return this.createFunctionContext(i)},nextOpcode:function(){var e=this.environment.opcodes;return e[this.i+1]},eat:function(){this.i=this.i+1},preamble:function(){var e=[];if(!this.isChild){var t=this.namespace,n="helpers = helpers || "+t+".helpers;";this.environment.usePartial&&(n=n+" partials = partials || "+t+".partials;"),this.options.data&&(n+=" data = data || {};"),e.push(n)}else e.push("");this.environment.isSimple?e.push(""):e.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=e},createFunctionContext:function(t){var n=this.stackVars.concat(this.registers.list);n.length>0&&(this.source[1]=this.source[1]+", "+n.join(", "));if(!this.isChild)for(var r in this.context.aliases)this.source[1]=this.source[1]+", "+r+"="+this.context.aliases[r];this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.source.push("return buffer;");var i=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];for(var s=0,o=this.environment.depths.list.length;s<o;s++)i.push("depth"+this.environment.depths.list[s]);var u=this.mergeSource();if(!this.isChild){var a=e.COMPILER_REVISION,f=e.REVISION_CHANGES[a];u="this.compilerInfo = ["+a+",'"+f+"'];\n"+u}if(t)return i.push(u),Function.apply(this,i);var l="function "+(this.name||"")+"("+i.join(",")+") {\n  "+u+"}";return e.log(e.logger.DEBUG,l+"\n\n"),l},mergeSource:function(){var e="",t;for(var n=0,r=this.source.length;n<r;n++){var i=this.source[n];i.appendToBuffer?t?t=t+"\n    + "+i.content:t=i.content:(t&&(e+="buffer += "+t+";\n  ",t=undefined),e+=i+"\n  ")}return e},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e),this.replaceStack(function(t){return e.splice(1,0,t),"blockHelperMissing.call("+e.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e);var t=this.topStack();e.splice(1,0,t),e[e.length-1]="options",this.source.push("if (!"+this.lastHelper+") { "+t+" = blockHelperMissing.call("+e.join(", ")+"); }")},appendContent:function(e){this.source.push(this.appendToBuffer(this.quotedString(e)))},append:function(){this.flushInline();var e=this.popStack();this.source.push("if("+e+" || "+e+" === 0) { "+this.appendToBuffer(e)+" }"),this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(e){this.lastContext!==e&&(this.lastContext=e)},lookupOnContext:function(e){this.push(this.nameLookup("depth"+this.lastContext,e,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(e){return"typeof "+e+" === functionType ? "+e+".apply(depth0) : "+e})},lookup:function(e){this.replaceStack(function(t){return t+" == null || "+t+" === false ? "+t+" : "+this.nameLookup(t,e,"context")})},lookupData:function(e){this.push(this.nameLookup("data",e,"data"))},pushStringParam:function(e,t){this.pushStackLiteral("depth"+this.lastContext),this.pushString(t),typeof e=="string"?this.pushString(e):this.pushStackLiteral(e)},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&this.register("hashTypes","{}")},pushHash:function(){this.hash={values:[],types:[]}},popHash:function(){var e=this.hash;this.hash=undefined,this.options.stringParams&&this.register("hashTypes","{"+e.types.join(",")+"}"),this.push("{\n    "+e.values.join(",\n    ")+"\n  }")},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},push:function(e){return this.inlineStack.push(e),e},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){e!=null?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},invokeHelper:function(e,t){this.context.aliases.helperMissing="helpers.helperMissing";var n=this.lastHelper=this.setupHelper(e,t,!0);this.push(n.name),this.replaceStack(function(e){return e+" ? "+e+".call("+n.callParams+") "+": helperMissing.call("+n.helperMissingParams+")"})},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(e,t){this.context.aliases.functionType='"function"',this.pushStackLiteral("{}");var n=this.setupHelper(0,e,t),r=this.lastHelper=this.nameLookup("helpers",e,"helper"),i=this.nameLookup("depth"+this.lastContext,e,"context"),s=this.nextStack();this.source.push("if ("+s+" = "+r+") { "+s+" = "+s+".call("+n.callParams+"); }"),this.source.push("else { "+s+" = "+i+"; "+s+" = typeof "+s+" === functionType ? "+s+".apply(depth0) : "+s+"; }")},invokePartial:function(e){var t=[this.nameLookup("partials",e,"partial"),"'"+e+"'",this.popStack(),"helpers","partials"];this.options.data&&t.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+t.join(", ")+")")},assignToHash:function(e){var t=this.popStack(),n;this.options.stringParams&&(n=this.popStack(),this.popStack());var r=this.hash;n&&r.types.push("'"+e+"': "+n),r.values.push("'"+e+"': ("+t+")")},compiler:n,compileChildren:function(e,t){var n=e.children,r,i;for(var s=0,o=n.length;s<o;s++){r=n[s],i=new this.compiler;var u=this.matchExistingProgram(r);u==null?(this.context.programs.push(""),u=this.context.programs.length,r.index=u,r.name="program"+u,this.context.programs[u]=i.compile(r,t,this.context),this.context.environments[u]=r):(r.index=u,r.name="program"+u)}},matchExistingProgram:function(e){for(var t=0,n=this.context.environments.length;t<n;t++){var r=this.context.environments[t];if(r&&r.equals(e))return t}},programExpression:function(e){this.context.aliases.self="this";if(e==null)return"self.noop";var t=this.environment.children[e],n=t.depths.list,r,i=[t.index,t.name,"data"];for(var s=0,o=n.length;s<o;s++)r=n[s],r===1?i.push("depth0"):i.push("depth"+(r-1));return n.length===0?"self.program("+i.join(", ")+")":(i.shift(),"self.programWithDepth("+i.join(", ")+")")},register:function(e,t){this.useRegister(e),this.source.push(e+" = "+t+";")},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},pushStackLiteral:function(e){return this.push(new r(e))},pushStack:function(e){this.flushInline();var t=this.incrStack();return e&&this.source.push(t+" = "+e+";"),this.compileStack.push(t),t},replaceStack:function(e){var t="",n=this.isInline(),i;if(n){var s=this.popStack(!0);if(s instanceof r)i=s.value;else{var o=this.stackSlot?this.topStackName():this.incrStack();t="("+this.push(o)+" = "+s+"),",i=this.topStack()}}else i=this.topStack();var u=e.call(this,i);return n?((this.inlineStack.length||this.compileStack.length)&&this.popStack(),this.push("("+t+u+")")):(/^stack/.test(i)||(i=this.nextStack()),this.source.push(i+" = ("+t+u+");")),i},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;if(e.length){this.inlineStack=[];for(var t=0,n=e.length;t<n;t++){var i=e[t];i instanceof r?this.compileStack.push(i):this.pushStack(i)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),n=(t?this.inlineStack:this.compileStack).pop();return!e&&n instanceof r?n.value:(t||this.stackSlot--,n)},topStack:function(e){var t=this.isInline()?this.inlineStack:this.compileStack,n=t[t.length-1];return!e&&n instanceof r?n.value:n},quotedString:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'"'},setupHelper:function(e,t,n){var r=[];this.setupParams(e,r,n);var i=this.nameLookup("helpers",t,"helper");return{params:r,name:i,callParams:["depth0"].concat(r).join(", "),helperMissingParams:n&&["depth0",this.quotedString(t)].concat(r).join(", ")}},setupParams:function(e,t,n){var r=[],i=[],s=[],o,u,a;r.push("hash:"+this.popStack()),u=this.popStack(),a=this.popStack();if(a||u)a||(this.context.aliases.self="this",a="self.noop"),u||(this.context.aliases.self="this",u="self.noop"),r.push("inverse:"+u),r.push("fn:"+a);for(var f=0;f<e;f++)o=this.popStack(),t.push(o),this.options.stringParams&&(s.push(this.popStack()),i.push(this.popStack()));return this.options.stringParams&&(r.push("contexts:["+i.join(",")+"]"),r.push("types:["+s.join(",")+"]"),r.push("hashTypes:hashTypes")),this.options.data&&r.push("data:data"),r="{"+r.join(",")+"}",n?(this.register("options",r),t.push("options")):t.push(r),t.join(", ")}};var i="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),s=n.RESERVED_WORDS={};for(var o=0,u=i.length;o<u;o++)s[i[o]]=!0;n.isValidJavaScriptVariableName=function(e){return!n.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(e)?!0:!1},e.precompile=function(r,i){if(!r||typeof r!="string"&&r.constructor!==e.AST.ProgramNode)throw new e.Exception("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+r);i=i||{},"data"in i||(i.data=!0);var s=e.parse(r),o=(new t).compile(s,i);return(new n).compile(o,i)},e.compile=function(r,i){function o(){var s=e.parse(r),o=(new t).compile(s,i),u=(new n).compile(o,i,undefined,!0);return e.template(u)}if(!r||typeof r!="string"&&r.constructor!==e.AST.ProgramNode)throw new e.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+r);i=i||{},"data"in i||(i.data=!0);var s;return function(e,t){return s||(s=o()),s.call(this,e,t)}},e.VM={template:function(t){var n={escapeExpression:e.Utils.escapeExpression,invokePartial:e.VM.invokePartial,programs:[],program:function(t,n,r){var i=this.programs[t];return r?e.VM.program(n,r):i?i:(i=this.programs[t]=e.VM.program(n),i)},programWithDepth:e.VM.programWithDepth,noop:e.VM.noop,compilerInfo:null};return function(r,i){i=i||{};var s=t.call(n,e,r,i.helpers,i.partials,i.data),o=n.compilerInfo||[],u=o[0]||1,a=e.COMPILER_REVISION;if(u!==a){if(u<a){var f=e.REVISION_CHANGES[a],l=e.REVISION_CHANGES[u];throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+f+") or downgrade your runtime to an older version ("+l+")."}throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+o[1]+")."}return s}},programWithDepth:function(e,t,n){var r=Array.prototype.slice.call(arguments,2);return function(n,i){return i=i||{},e.apply(this,[n,i.data||t].concat(r))}},program:function(e,t){return function(n,r){return r=r||{},e(n,r.data||t)}},noop:function(){return""},invokePartial:function(t,n,r,i,s,o){var u={helpers:i,partials:s,data:o};if(t===undefined)throw new e.Exception("The partial "+n+" could not be found");if(t instanceof Function)return t(r,u);if(!e.compile)throw new e.Exception("The partial "+n+" could not be compiled when running in runtime-only mode");return s[n]=e.compile(t,{data:o!==undefined}),s[n](r,u)}},e.template=e.VM.template}(e.Compiler,e.JavaScriptCompiler),define("handlebars",[],function(){return e})}(),define("i18nprecompile",["handlebars","underscore"],function(e,t){function n(r,i,s){return s=s||{},i=i||{},r&&r.type==="program"&&r.statements&&(t(r.statements).forEach(function(t,o){var u="<!-- i18n error -->";if(t.type==="mustache"&&t.id&&t.id.original==="$"){if(t.params.length&&t.params[0].string){var a=t.params[0].string;u=i[a]||(s.originalKeyFallback?a:u)}r.statements[o]=new e.AST.ContentNode(u)}else t.program&&(t.program=n(t.program,i,s))}),r.inverse&&n(r.inverse,i,s)),r}return function(t,r,i){i=i||{};var s,o;return s=e.parse(t),r!==!1&&(s=n(s,r,i)),o=(new e.Compiler).compile(s,i),(new e.JavaScriptCompiler).compile(o,i)}}),function(window){var JSON=window.JSON||{};(function(){function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&&typeof a=="object"&&typeof a.toJSON=="function"&&(a=a.toJSON(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)typeof rep[n]=="string"&&(r=rep[n],i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})})(),define("json2",[],function(){return JSON})}.call(this,this),define("hbs",["handlebars","underscore","i18nprecompile","json2"],function(e,t,n,r){var i,s,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=function(){throw new Error("Environment unsupported.")},a=[],f="w+",l="hbs",c="@hbs",h="/styles/",p="/demo-build/styles/",d="templates/helpers/",v="templates/i18n/",m="screen.build.css";e.registerHelper("$",function(){}),typeof window!="undefined"&&window.navigator&&window.document&&!window.navigator.userAgent.match(/Node.js/)?(s=function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return arguments[0]===!0?new XDomainRequest:new XMLHttpRequest;for(t=0;t<3;t++){n=o[t];try{e=new ActiveXObject(n)}catch(r){}if(e){o=[n];break}}if(!e)throw new Error("getXhr(): XMLHttpRequest not available");return e},getIEVersion=function(){var e=-1;if(navigator.appName=="Microsoft Internet Explorer"){var t=navigator.userAgent,n=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");n.exec(t)!=null&&(e=parseFloat(RegExp.$1))}return e},u=function(e,t){var n=!1;if(e.indexOf("http")!=0)n=!1;else{var r=e.substr(0,5)==="https"?8:7,i=window.location.href.substr(0,5)==="https"?8:7,o=e.substr(r).split("/").shift(),u=getIEVersion();n=o!=window.location.href.substr(i).split("/").shift()&&u>=7}if(n){var a=s(!0);a.open("GET",e),a.onload=function(){t(a.responseText)},a.onprogress=function(){},a.ontimeout=function(){},a.onerror=function(){},setTimeout(function(){a.send()},0)}else{var f=s();f.open("GET",e,!0),f.onreadystatechange=function(e){f.readyState===4&&t(f.responseText)},f.send(null)}}):typeof process!="undefined"&&process.versions&&!!process.versions.node?(i=require.nodeRequire("fs"),u=function(e,t){var n=i.readFileSync(e,"utf8")||"";n=n.replace(/^\uFEFF/,""),t(n)}):typeof java!="undefined"&&typeof java.io!="undefined"&&(u=function(e,t){var n=new java.io.File(e),r=new java.io.FileReader(n),i=new java.io.BufferedReader(r),s,o="";while((s=i.readLine())!==null)o+=new String(s)+"\n";i.close(),t(o)});var g={},y=function(e,t){g[e]?t(g[e]):u(e,function(n){g[e]=n,t.call(this,n)})},b=[],w={};return{get:function(){return e},write:function(e,t,n){if(t+c in a){var r=a[t+c];n.asModule(e+"!"+t,r)}},version:"0.5.0",load:function(s,o,g,E){function k(e,n){return t(e).forEach(function(e){e&&e.type&&e.type==="partial"&&n.push(e.partialName.name),e&&e.program&&e.program.statements&&k(e.program.statements,n),e&&e.program&&e.program.inverse&&e.program.inverse.statements&&k(e.program.inverse.statements,n)}),n}function L(e){var n=[];return e&&e.statements&&(n=k(e.statements,[])),t(n).unique()}function A(e){var t,n,i;if(e&&e.statements){t=e.statements[0];if(t&&t.type==="comment")try{return n=t.comment.replace(new RegExp("^[\\s]+|[\\s]+$","g"),""),i=r.parse(n),n}catch(s){return"{ 'description' : '"+t.comment+"' }"}}return"{}"}function O(e){if(!e)return[];var t=[e[0]],n=e[0],r;for(r=1;r<e.length;++r)e.hasOwnProperty(r)&&(n+="."+e[r],t.push(n));return t}function M(n,r,i,s){i=i?i+".":"";var o="",u=!1;return t(n).forEach(function(n){var u,a,f;if(n&&n.type&&n.type==="mustache"){if(!n.params||!n.params.length){u=O(n.id.parts);for(a in u)u[a]&&(o=u[a]||o,r.push(i+u[a]));r.push(i+n.id.string)}var l=["this",".","..","./..","../..","../../.."];n.params&&typeof e.helpers[n.id.string]=="undefined"&&t(n.params).forEach(function(a){(t(l).contains(a.original)||a instanceof e.AST.StringNode||a instanceof e.AST.IntegerNode||a instanceof e.AST.BooleanNode)&&s.push(n.id.string),u=O(a.parts);for(var f in u)u[f]&&(o=u[f]||o,s.push(n.id.string),r.push(i+u[f]))})}n&&n.mustache&&M([n.mustache],r,i+o,s),n&&n.program&&n.program.statements&&(f=M([n.mustache],[],"",s)[0]||"",n.program.inverse&&n.program.inverse.statements&&M(n.program.inverse.statements,r,i+o+(f?i+o?"."+f:f:""),s),M(n.program.statements,r,i+o+(f?i+o?"."+f:f:""),s))}),r}function D(e){var n=[],r=[];e&&e.statements&&(n=M(e.statements,[],undefined,r));var i=["helperMissing","blockHelperMissing","each","if","unless","with"];return{vars:t(n).chain().unique().map(function(e){return e===""?".":e.length&&e[e.length-1]==="."?e.substr(0,e.length-1)+"[]":e}).value(),helpers:t(r).chain().unique().map(function(e){return t(i).contains(e)?undefined:e}).compact().value()}}function P(e){var t=e.split("/");for(var n=0;n<t.length;n++)t[n]==".."&&(delete t[n-1],delete t[n]);return t.join("/").replace(/\/\/+/g,"/")}function H(l){u(B,function(u){var c=e.parse(u),v=L(c),y=A(c),C=D(c),k=C.vars,O=C.helpers||[],M="",H="",B="",j=[],F,I,q,R,U,z=s.substr(0,s.lastIndexOf("/")+1);require.config.hbs=require.config.hbs||{},require.config.hbs._partials=require.config.hbs._partials||{};if(y!=="{}")try{q=r.parse(y)}catch(W){console.log("couldn't parse meta for %s",$)}for(var X in v)if(v.hasOwnProperty(X)&&typeof v[X]=="string"){var V=v[X],$;V.match(/^(\.|\/)+/)?$=P(z+V):$=P(N+V),require.config.hbs._partials[$]=require.config.hbs._partials[$]||[],require.config.hbs._partials[$].references=require.config.hbs._partials[$].references||[],require.config.hbs._partials[$].references.push(V),require.config.hbs._loadedDeps=require.config.hbs._loadedDeps||{},j[X]="hbs!"+$}F=j.join("', 'hbs!"),O=O.concat(q&&q.helpers?q.helpers:[]),I=T?"":function(){var e,t=[],n=E.hbs&&E.hbs.helperPathCallback?E.hbs.helperPathCallback:function(e){return(E.hbs&&E.hbs.helperDirectory?E.hbs.helperDirectory:d)+e};for(e=0;e<O.length;e++)t[e]="'"+n(O[e],$)+"'";return t}().join(","),I&&(I=","+I);if(q)try{q.styles&&(b=t.union(b,q.styles),require.isBrowser&&!E.isBuild?(R=document.head||document.getElementsByTagName("head")[0],t(q.styles).forEach(function(e){w[e]||(U=document.createElement("link"),U.href=E.baseUrl+h+e+".css",U.media="all",U.rel="stylesheet",U.type="text/css",R.appendChild(U),w[e]=U)})):E.isBuild&&function(){var e=require.nodeRequire("fs"),n=t(q.styles).map(function(e){return w[e]?"":(w[e]=!0,"@import url("+e+".css);\n")}).join("\n");e.open(__dirname+p+m,f,"0666",function(t,r){e.writeSync(r,n,null,encoding="utf8"),e.close(r)}),f="a"}())}catch(W){console.log("error injecting styles")}!E.isBuild&&!E.serverRender&&(M="<!-- START - "+s+" -->",H="<!-- END - "+s+" -->",B="t.meta = "+y+";\n"+"t.helpers = "+r.stringify(O)+";\n"+"t.deps = "+r.stringify(j)+";\n"+"t.vars = "+r.stringify(k)+";\n");var J=x?!1:t.extend(l,E.localeMapping),K=E.hbs||{},Q=t.extend(K.compileOptions||{},{originalKeyFallback:K.originalKeyFallback}),G=n(u,J,Q),Y=E.isBuild?"":"'"+s+"',";F&&(F=", '"+F+"'");var Z=[];require.config.hbs._partials[s]&&(Z=require.config.hbs._partials[s].references),u="/* START_TEMPLATE */\ndefine("+Y+"['hbs','handlebars'"+F+I+"], function( hbs, Handlebars ){ \n"+"var t = Handlebars.template("+G+");\n";for(var X=0;X<Z.length;X++)u+="Handlebars.registerPartial('"+Z[X]+"', t);\n";u+=B+"return t;\n"+"});\n"+"/* END_TEMPLATE */\n",E.isBuild&&(a[S]=u),E.isBuild||(u+="\r\n//@ sourceURL="+$),E.isBuild?(g.fromText(s,u),o([s],function(e){g(e)})):require(j,function(){g.fromText(u),o([s],function(e){g(e)})}),E.removeCombined&&i.unlinkSync($)})}var S=s+c;E.hbs=E.hbs||{};var x=E.hbs.i18n!=1,T=E.hbs.helpers==0,N="";E.hbs.partialsUrl&&(N=E.hbs.partialsUrl,N.match(/\/$/)||(N+="/"));var C=[],B,j=E.hbs&&E.hbs.templateExtension===!1;j?B=o.toUrl(s):B=o.toUrl(s+"."+(E.hbs&&E.hbs.templateExtension?E.hbs.templateExtension:l));if(x)H(!1);else{var F=(E.hbs&&E.hbs.i18nDirectory?E.hbs.i18nDirectory:v)+(E.locale||"en_us")+".json";try{y(o.toUrl(F),function(e){H(r.parse(e))})}catch(I){if(!!E.hbs)throw I;console.warn("hbs: Error reading "+F+", disabling i18n. Ignore this if you're using jam, otherwise check your i18n configuration.\n"),E.hbs={i18n:!1,helpers:!0},H(!1)}}}}}),define("hbs!templates/modal/modal_layout",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,'<div class="modal" data-behavior="modal">\n  <a class="modal--close" href="#" data-behavior="modal-close"></a>\n  <div class="modal--content" data-region="content"></div>\n</div>'});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/modal/modal_layout",["marionette","hbs!templates/modal/modal_layout"],function(e,n){var r,i;return r=function(e){function r(){return i=r.__super__.constructor.apply(this,arguments),i}return t(r,e),r.prototype.template=n,r.prototype.attributes={style:"display: none;"},r.prototype.triggers={'click [data-behavior="modal-close"]':"click:modal:close"},r.prototype.regions={content:'[data-region="content"]'},r.prototype.onClickModalClose=function(){return this.closeModal()},r.prototype.initialize=function(e){var t=this;return this.vent=Vocat.vent,this.$el.hide(),this.listenTo(this.vent,"modal:open",function(e){return t.view=e,t.updateContent(e),t.open()}),this.listenTo(this.vent,"modal:close",function(){return t.closeModal()})},r.prototype.updateContent=function(e){return this.content.show(e)},r.prototype.closeModal=function(){return this.vent.trigger("modal:before:close"),this.content.reset(),this.ensureBackdrop().fadeOut(250),this.$el.hide(),this.vent.trigger("modal:after:close")},r.prototype.open=function(){return this.vent.trigger("modal:before:show"),Backbone.Wreqr.radio.channel("global").vent.trigger("user:action"),this.showBackdrop(),this.centerModal(),this.$el.show(),this.vent.trigger("modal:after:show"),this.view.trigger("modal:after:show")},r.prototype.centerModal=function(){return this.$el.prependTo("body"),this.$el.css({zIndex:4e3,marginTop:"-150px",marginLeft:-1*(this.$el.find("[data-behavior=modal]").outerWidth()/2)+"px",position:"fixed",left:"50%",top:"50%"})},r.prototype.resizeBackdrop=function(){return this.ensureBackdrop().css({height:$(document).height(),width:$(document).width()})},r.prototype.ensureBackdrop=function(){var e;return e=$("[data-behavior=modal-backdrop]"),e.length===0&&(e=$('<div class="modal-backdrop" data-behavior="modal-backdrop">').css({height:$(window).height()}).appendTo($("body")).hide(),$(window).bind("resize",_.bind(this.resizeBackdrop,this))),e},r.prototype.showBackdrop=function(){return this.resizeBackdrop(),this.ensureBackdrop().fadeIn(150)},r}(e.LayoutView)})}.call(this),define("hbs!templates/modal/modal_confirm",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){function l(e,t){var r="",i;return r+='\n<h5 class="modal--header">',(i=n.headerLabel)?i=i.call(e,{hash:{}}):(i=e.headerLabel,i=typeof i===u?i.apply(e):i),r+=a(i)+"</h5>\n",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression,f=this;o=n["if"].call(t,t.headerLabel,{hash:{},inverse:f.noop,fn:f.program(1,l,i)});if(o||o===0)s+=o;return s+='\n<p style="margin-bottom: 2rem;">',(o=n.descriptionLabel)?o=o.call(t,{hash:{}}):(o=t.descriptionLabel,o=typeof o===u?o.apply(t):o),s+=a(o)+'</p>\n<a href="#" class="primary-button confirm-button" data-behavior="confirm">',(o=n.confirmLabel)?o=o.call(t,{hash:{}}):(o=t.confirmLabel,o=typeof o===u?o.apply(t):o),s+=a(o)+'</a>\n<a href="#" class="warning-button cancel-button" data-behavior="dismiss">',(o=n.dismissLabel)?o=o.call(t,{hash:{}}):(o=t.dismissLabel,o=typeof o===u?o.apply(t):o),s+=a(o)+"</a>\n",s});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/modal/modal_confirm",["marionette","hbs!templates/modal/modal_confirm"],function(e,n){var r,i;return r=function(r){function s(){return i=s.__super__.constructor.apply(this,arguments),i}return t(s,r),s.prototype.template=n,s.prototype.headerLabel="Are You Sure?",s.prototype.confirmLabel="Yes, Proceed",s.prototype.dismissLabel="Cancel",s.prototype.confirmEvent="modal:confirm",s.prototype.confirmHref=null,s.prototype.dismissEvent="modal:dismiss",s.prototype.triggers={'click [data-behavior="confirm"]':"click:confirm",'click [data-behavior="dismiss"]':"click:dismiss"},s.prototype.onKeyUp=function(e){var t;t=e.keyCode!=null?e.keyCode:e.which,t===13&&this.onClickConfirm();if(t===27)return this.onClickDismiss()},s.prototype.onClickConfirm=function(){var t;return e.getOption(this,"confirmElement")!=null?(Vocat.vent.trigger("modal:close"),t=e.getOption(this,"confirmElement"),t.addClass("modal-blocked"),t.click(),t.removeClass("modal-blocked")):(this.vent.triggerMethod(e.getOption(this,"confirmEvent")),Vocat.vent.trigger("modal:close"))},s.prototype.onClickDismiss=function(){return this.vent.triggerMethod(e.getOption(this,"dismissEvent")),Vocat.vent.trigger("modal:close")},s.prototype.serializeData=function(){return{descriptionLabel:e.getOption(this,"descriptionLabel"),confirmLabel:e.getOption(this,"confirmLabel"),dismissLabel:e.getOption(this,"dismissLabel"),headerLabel:e.getOption(this,"headerLabel")}},s.prototype.onDestroy=function(){return $(window).off("keyup",this.onKeyUp)},s.prototype.initialize=function(e){return this.vent=e.vent,_.bindAll(this,"onKeyUp"),$(window).on("keyup",this.onKeyUp)},s}(e.ItemView)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("behaviors/closes_on_user_action",["require","marionette"],function(e){var n,r,i;return r=e("marionette"),n=function(e){function n(){return i=n.__super__.constructor.apply(this,arguments),i}return t(n,e),n.prototype.defaults={closeMethod:"close"},n.prototype.triggers={},n.prototype.ui={},n.prototype.initialize=function(){return this.globalChannel=Backbone.Wreqr.radio.channel("global")},n.prototype.onOpened=function(){var e=this;return this.globalChannel.vent.trigger("user:action"),this.listenTo(this.globalChannel.vent,"user:action",function(t){if(!t||!$.contains(e.el,t.target))return e.view[e.defaults.closeMethod]()})},n.prototype.onClosed=function(){return this.stopListening(this.globalChannel.vent,"user:action")},n}(r.Behavior)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/layout/dropdown",["require","marionette","behaviors/closes_on_user_action"],function(e){var n,r,i,s;return i=e("marionette"),n=e("behaviors/closes_on_user_action"),r=function(e){function r(){return s=r.__super__.constructor.apply(this,arguments),s}return t(r,e),r.prototype.adjusted=!1,r.prototype.allowAdjustment=!0,r.prototype.triggers={"click @ui.trigger":"click:trigger"},r.prototype.ui={trigger:'[data-behavior="toggle"]',dropdown:'[data-behavior="dropdown-options"]'},r.prototype.behaviors={closesOnUserAction:{behaviorClass:n}},r.prototype.onClickTrigger=function(){return this.$el.hasClass("open")?this.close():this.open()},r.prototype.adjustPosition=function(){var e;if(this.adjusted===!1&&this.getOption("allowAdjustment")===!0)return e=this.$el.find('[data-behavior="dropdown-options"]'),e.offset().left<0?(e.css({left:0}),e.css({right:"auto"})):e.width()+e.offset().left-$("html").width()<25&&(e.css({right:0}),e.css({left:"auto"})),this.adjusted=!0},r.prototype.open=function(){return this.$el.addClass("open"),this.adjustPosition(),this.triggerMethod("opened")},r.prototype.close=function(){return this.$el.removeClass("open"),this.triggerMethod("closed")},r.prototype.initialize=function(e){this.vent=e.vent,this.$dropdown=this.$el.find(this.ui.dropdown),this.$trigger=this.$el.find(this.ui.trigger);if(!this.$el.hasClass("dropdown-initialized"))return this.$el.addClass("dropdown-initialized")},r}(i.ItemView)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/layout/figures_collection",["require","marionette"],function(e){var n,r,i;return r=e("marionette"),n=function(e){function n(){return i=n.__super__.constructor.apply(this,arguments),i}return t(n,e),n.prototype.initialize=function(){var e,t,n;return e=this.$el.find("div:first-child"),n=_.max(e,function(e){return $(e).outerHeight()}),t=$(n).outerHeight(),console.log(t,"h"),e.outerHeight(t)},n}(r.ItemView)})}.call(this),function(e,t){var n=function(){var t=e._data(document,"events");return t&&t.click&&e.grep(t.click,function(e){return e.namespace==="rails"}).length};n()&&e.error("jquery-ujs has already been loaded!");var r;e.rails=r={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input:file",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(t){var n=e('meta[name="csrf-token"]').attr("content");n&&t.setRequestHeader("X-CSRF-Token",n)},fire:function(t,n,r){var i=e.Event(n);return t.trigger(i,r),i.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e.attr("href")},handleRemote:function(n){var i,s,o,u,a,f,l,c;if(r.fire(n,"ajax:before")){u=n.data("cross-domain"),a=u===t?null:u,f=n.data("with-credentials")||null,l=n.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType;if(n.is("form")){i=n.attr("method"),s=n.attr("action"),o=n.serializeArray();var h=n.data("ujs:submit-button");h&&(o.push(h),n.data("ujs:submit-button",null))}else n.is(r.inputChangeSelector)?(i=n.data("method"),s=n.data("url"),o=n.serialize(),n.data("params")&&(o=o+"&"+n.data("params"))):(i=n.data("method"),s=r.href(n),o=n.data("params")||null);c={type:i||"GET",data:o,dataType:l,beforeSend:function(e,i){return i.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+i.accepts.script),r.fire(n,"ajax:beforeSend",[e,i])},success:function(e,t,r){n.trigger("ajax:success",[e,t,r])},complete:function(e,t){n.trigger("ajax:complete",[e,t])},error:function(e,t,r){n.trigger("ajax:error",[e,t,r])},xhrFields:{withCredentials:f},crossDomain:a},s&&(c.url=s);var p=r.ajax(c);return n.trigger("ajax:send",p),p}return!1},handleMethod:function(n){var i=r.href(n),s=n.data("method"),o=n.attr("target"),u=e("meta[name=csrf-token]").attr("content"),a=e("meta[name=csrf-param]").attr("content"),f=e('<form method="post" action="'+i+'"></form>'),l='<input name="_method" value="'+s+'" type="hidden" />';a!==t&&u!==t&&(l+='<input name="'+a+'" value="'+u+'" type="hidden" />'),o&&f.attr("target",o),f.hide().append(l).appendTo("body"),f.submit()},disableFormElements:function(t){t.find(r.disableSelector).each(function(){var t=e(this),n=t.is("button")?"html":"val";t.data("ujs:enable-with",t[n]()),t[n](t.data("disable-with")),t.prop("disabled",!0)})},enableFormElements:function(t){t.find(r.enableSelector).each(function(){var t=e(this),n=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[n](t.data("ujs:enable-with")),t.prop("disabled",!1)})},allowAction:function(e){var t=e.data("confirm"),n=!1,i;return t?(r.fire(e,"confirm")&&(n=r.confirm(t),i=r.fire(e,"confirm:complete",[n])),n&&i):!0},blankInputs:function(t,n,r){var i=e(),s,o,u=n||"input,textarea",a=t.find(u);return a.each(function(){s=e(this),o=s.is(":checkbox,:radio")?s.is(":checked"):s.val();if(!o==!r){if(s.is(":radio")&&a.filter('input:radio:checked[name="'+s.attr("name")+'"]').length)return!0;i=i.add(s)}}),i.length?i:!1},nonBlankInputs:function(e,t){return r.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},callFormSubmitBindings:function(n,r){var i=n.data("events"),s=!0;return i!==t&&i.submit!==t&&e.each(i.submit,function(e,t){if(typeof t.handler=="function")return s=t.handler(r)}),s},disableElement:function(e){e.data("ujs:enable-with",e.html()),e.html(e.data("disable-with")),e.bind("click.railsDisable",function(e){return r.stopEverything(e)})},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.data("ujs:enable-with",!1)),e.unbind("click.railsDisable")}},r.fire(e(document),"rails:attachBindings")&&(e.ajaxPrefilter(function(e,t,n){e.crossDomain||r.CSRFProtection(n)}),e(document).delegate(r.linkDisableSelector,"ajax:complete",function(){r.enableElement(e(this))}),e(document).delegate(r.linkClickSelector,"click.rails",function(n){var i=e(this),s=i.data("method"),o=i.data("params");if(!r.allowAction(i))return r.stopEverything(n);i.is(r.linkDisableSelector)&&r.disableElement(i);if(i.data("remote")!==t){if((n.metaKey||n.ctrlKey)&&(!s||s==="GET")&&!o)return!0;var u=r.handleRemote(i);return u===!1?r.enableElement(i):u.error(function(){r.enableElement(i)}),!1}if(i.data("method"))return r.handleMethod(i),!1}),e(document).delegate(r.inputChangeSelector,"change.rails",function(t){var n=e(this);return r.allowAction(n)?(r.handleRemote(n),!1):r.stopEverything(t)}),e(document).delegate(r.formSubmitSelector,"submit.rails",function(n){var i=e(this),s=i.data("remote")!==t,o=r.blankInputs(i,r.requiredInputSelector),u=r.nonBlankInputs(i,r.fileInputSelector);if(!r.allowAction(i))return r.stopEverything(n);if(o&&i.attr("novalidate")==t&&r.fire(i,"ajax:aborted:required",[o]))return r.stopEverything(n);if(s){if(u){setTimeout(function(){r.disableFormElements(i)},13);var a=r.fire(i,"ajax:aborted:file",[u]);return a||setTimeout(function(){r.enableFormElements(i)},13),a}return!e.support.submitBubbles&&e().jquery<"1.7"&&r.callFormSubmitBindings(i,n)===!1?r.stopEverything(n):(r.handleRemote(i),!1)}setTimeout(function(){r.disableFormElements(i)},13)}),e(document).delegate(r.formInputClickSelector,"click.rails",function(t){var n=e(this);if(!r.allowAction(n))return r.stopEverything(t);var i=n.attr("name"),s=i?{name:i,value:n.val()}:null;n.closest("form").data("ujs:submit-button",s)}),e(document).delegate(r.formSubmitSelector,"ajax:beforeSend.rails",function(t){this==t.target&&r.disableFormElements(e(this))}),e(document).delegate(r.formSubmitSelector,"ajax:complete.rails",function(t){this==t.target&&r.enableFormElements(e(this))}),e(function(){csrf_token=e("meta[name=csrf-token]").attr("content"),csrf_param=e("meta[name=csrf-param]").attr("content"),e('form input[name="'+csrf_param+'"]').val(csrf_token)}))}(jQuery),define("jquery_ujs",function(){}),function(){define("jquery_rails",["jquery","jquery_ujs"],function(e){return e})}.call(this),function(){var e,t,n,r,i,s={}.hasOwnProperty,o=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=function(){function e(){this.options_index=0,this.parsed=[]}return e.prototype.add_node=function(e){return e.nodeName.toUpperCase()==="OPTGROUP"?this.add_group(e):this.add_option(e)},e.prototype.add_group=function(e){var t,n,r,i,s,o;t=this.parsed.length,this.parsed.push({array_index:t,group:!0,label:this.escapeExpression(e.label),children:0,disabled:e.disabled}),s=e.childNodes,o=[];for(r=0,i=s.length;r<i;r++)n=s[r],o.push(this.add_option(n,t,e.disabled));return o},e.prototype.add_option=function(e,t,n){if(e.nodeName.toUpperCase()==="OPTION")return e.text!==""?(t!=null&&(this.parsed[t].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:e.value,text:e.text,html:e.innerHTML,selected:e.selected,disabled:n===!0?n:e.disabled,group_array_index:t,classes:e.className,style:e.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1},e.prototype.escapeExpression=function(e){var t,n;return e==null||e===!1?"":/[\&\<\>\"\'\`]/.test(e)?(t={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},n=/&(?!\w+;)|[\<\>\"\'\`]/g,e.replace(n,function(e){return t[e]||"&amp;"})):e},e}(),r.select_to_array=function(e){var t,n,i,s,o;n=new r,o=e.childNodes;for(i=0,s=o.length;i<s;i++)t=o[i],n.add_node(t);return n.parsed},t=function(){function e(t,n){this.form_field=t,this.options=n!=null?n:{};if(!e.browser_is_supported())return;this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers()}return e.prototype.set_default_values=function(){var e=this;return this.click_test_action=function(t){return e.test_active_click(t)},this.activate_action=function(t){return e.activate_field(t)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.allow_single_deselect=this.options.allow_single_deselect!=null&&this.form_field.options[0]!=null&&this.form_field.options[0].text===""?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=this.options.enable_split_word_search!=null?this.options.enable_split_word_search:!0,this.group_search=this.options.group_search!=null?this.options.group_search:!0,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=this.options.single_backstroke_delete!=null?this.options.single_backstroke_delete:!0,this.max_selected_options=this.options.max_selected_options||Infinity,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=this.options.display_selected_options!=null?this.options.display_selected_options:!0,this.display_disabled_options=this.options.display_disabled_options!=null?this.options.display_disabled_options:!0},e.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||e.default_multiple_text:this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||e.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||e.default_no_result_text},e.prototype.mouse_enter=function(){return this.mouse_on_container=!0},e.prototype.mouse_leave=function(){return this.mouse_on_container=!1},e.prototype.input_focus=function(e){var t=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return t.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},e.prototype.input_blur=function(e){var t=this;if(!this.mouse_on_container)return this.active_field=!1,setTimeout(function(){return t.blur_test()},100)},e.prototype.results_option_build=function(e){var t,n,r,i,s;t="",s=this.results_data;for(r=0,i=s.length;r<i;r++){n=s[r],n.group?t+=this.result_add_group(n):t+=this.result_add_option(n);if(e!=null?e.first:void 0)n.selected&&this.is_multiple?this.choice_build(n):n.selected&&!this.is_multiple&&this.single_set_selected_text(n.text)}return t},e.prototype.result_add_option=function(e){var t,n;return e.search_match?this.include_option_in_results(e)?(t=[],!e.disabled&&(!e.selected||!this.is_multiple)&&t.push("active-result"),e.disabled&&(!e.selected||!this.is_multiple)&&t.push("disabled-result"),e.selected&&t.push("result-selected"),e.group_array_index!=null&&t.push("group-option"),e.classes!==""&&t.push(e.classes),n=e.style.cssText!==""?' style="'+e.style+'"':"",'<li class="'+t.join(" ")+'"'+n+' data-option-array-index="'+e.array_index+'">'+e.search_text+"</li>"):"":""},e.prototype.result_add_group=function(e){return!e.search_match&&!e.group_match?"":e.active_options>0?'<li class="group-result">'+e.search_text+"</li>":""},e.prototype.results_update_field=function(){this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.result_single_selected=null,this.results_build();if(this.results_showing)return this.winnow_results()},e.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},e.prototype.results_search=function(e){return this.results_showing?this.winnow_results():this.results_show()},e.prototype.winnow_results=function(){var e,t,n,r,i,s,o,u,a,f,l,c,h;this.no_results_clear(),i=0,o=this.get_search_text(),e=o.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),r=this.search_contains?"":"^",n=new RegExp(r+e,"i"),f=new RegExp(e,"i"),h=this.results_data;for(l=0,c=h.length;l<c;l++){t=h[l],t.search_match=!1,s=null;if(this.include_option_in_results(t)){t.group&&(t.group_match=!1,t.active_options=0),t.group_array_index!=null&&this.results_data[t.group_array_index]&&(s=this.results_data[t.group_array_index],s.active_options===0&&s.search_match&&(i+=1),s.active_options+=1);if(!t.group||!!this.group_search)t.search_text=t.group?t.label:t.html,t.search_match=this.search_string_match(t.search_text,n),t.search_match&&!t.group&&(i+=1),t.search_match?(o.length&&(u=t.search_text.search(f),a=t.search_text.substr(0,u+o.length)+"</em>"+t.search_text.substr(u+o.length),t.search_text=a.substr(0,u)+"<em>"+a.substr(u)),s!=null&&(s.group_match=!0)):t.group_array_index!=null&&this.results_data[t.group_array_index].search_match&&(t.search_match=!0)}}return this.result_clear_highlight(),i<1&&o.length?(this.update_results_content(""),this.no_results(o)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},e.prototype.search_string_match=function(e,t){var n,r,i,s;if(t.test(e))return!0;if(this.enable_split_word_search&&(e.indexOf(" ")>=0||e.indexOf("[")===0)){r=e.replace(/\[|\]/g,"").split(" ");if(r.length)for(i=0,s=r.length;i<s;i++){n=r[i];if(t.test(n))return!0}}},e.prototype.choices_count=function(){var e,t,n,r;if(this.selected_option_count!=null)return this.selected_option_count;this.selected_option_count=0,r=this.form_field.options;for(t=0,n=r.length;t<n;t++)e=r[t],e.selected&&(this.selected_option_count+=1);return this.selected_option_count},e.prototype.choices_click=function(e){e.preventDefault();if(!this.results_showing&&!this.is_disabled)return this.results_show()},e.prototype.keyup_checker=function(e){var t,n;t=(n=e.which)!=null?n:e.keyCode,this.search_field_scale();switch(t){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:e.preventDefault();if(this.results_showing)return this.result_select(e);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},e.prototype.container_width=function(){return this.options.width!=null?this.options.width:""+this.form_field.offsetWidth+"px"},e.prototype.include_option_in_results=function(e){return this.is_multiple&&!this.display_selected_options&&e.selected?!1:!this.display_disabled_options&&e.disabled?!1:e.empty?!1:!0},e.browser_is_supported=function(){return window.navigator.appName==="Microsoft Internet Explorer"?document.documentMode>=8:/iP(od|hone)/i.test(window.navigator.userAgent)?!1:/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent)?!1:!0},e.default_multiple_text="Select Some Options",e.default_single_text="Select an Option",e.default_no_result_text="No results match",e}(),e=jQuery,e.fn.extend({chosen:function(r){return t.browser_is_supported()?this.each(function(t){var i,s;i=e(this),s=i.data("chosen"),r==="destroy"&&s?s.destroy():s||i.data("chosen",new n(this,r))}):this}}),n=function(t){function n(){return i=n.__super__.constructor.apply(this,arguments),i}return o(n,t),n.prototype.setup=function(){return this.form_field_jq=e(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},n.prototype.set_up_html=function(){var t,n;return t=["chosen-container"],t.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&t.push(this.form_field.className),this.is_rtl&&t.push("chosen-rtl"),n={"class":t.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(n.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=e("<div />",n),this.is_multiple?this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>'):this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("chosen:ready",{chosen:this})},n.prototype.register_observers=function(){var e=this;return this.container.bind("mousedown.chosen",function(t){e.container_mousedown(t)}),this.container.bind("mouseup.chosen",function(t){e.container_mouseup(t)}),this.container.bind("mouseenter.chosen",function(t){e.mouse_enter(t)}),this.container.bind("mouseleave.chosen",function(t){e.mouse_leave(t)}),this.search_results.bind("mouseup.chosen",function(t){e.search_results_mouseup(t)}),this.search_results.bind("mouseover.chosen",function(t){e.search_results_mouseover(t)}),this.search_results.bind("mouseout.chosen",function(t){e.search_results_mouseout(t)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(t){e.search_results_mousewheel(t)}),this.form_field_jq.bind("chosen:updated.chosen",function(t){e.results_update_field(t)}),this.form_field_jq.bind("chosen:activate.chosen",function(t){e.activate_field(t)}),this.form_field_jq.bind("chosen:open.chosen",function(t){e.container_mousedown(t)}),this.search_field.bind("blur.chosen",function(t){e.input_blur(t)}),this.search_field.bind("keyup.chosen",function(t){e.keyup_checker(t)}),this.search_field.bind("keydown.chosen",function(t){e.keydown_checker(t)}),this.search_field.bind("focus.chosen",function(t){e.input_focus(t)}),this.is_multiple?this.search_choices.bind("click.chosen",function(t){e.choices_click(t)}):this.container.bind("click.chosen",function(e){e.preventDefault()})},n.prototype.destroy=function(){return e(document).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},n.prototype.search_field_disabled=function(){this.is_disabled=this.form_field_jq[0].disabled;if(this.is_disabled)return this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field();this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1;if(!this.is_multiple)return this.selected_item.bind("focus.chosen",this.activate_action)},n.prototype.container_mousedown=function(t){if(!this.is_disabled){t&&t.type==="mousedown"&&!this.results_showing&&t.preventDefault();if(t==null||!e(t.target).hasClass("search-choice-close"))return this.active_field?!this.is_multiple&&t&&(e(t.target)[0]===this.selected_item[0]||e(t.target).parents("a.chosen-single").length)&&(t.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),e(document).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field()}},n.prototype.container_mouseup=function(e){if(e.target.nodeName==="ABBR"&&!this.is_disabled)return this.results_reset(e)},n.prototype.search_results_mousewheel=function(e){var t,n,r;t=-((n=e.originalEvent)!=null?n.wheelDelta:void 0)||((r=e.originialEvent)!=null?r.detail:void 0);if(t!=null)return e.preventDefault(),e.type==="DOMMouseScroll"&&(t*=40),this.search_results.scrollTop(t+this.search_results.scrollTop())},n.prototype.blur_test=function(e){if(!this.active_field&&this.container.hasClass("chosen-container-active"))return this.close_field()},n.prototype.close_field=function(){return e(document).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},n.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},n.prototype.test_active_click=function(t){return this.container.is(e(t.target).closest(".chosen-container"))?this.active_field=!0:this.close_field()},n.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=r.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},n.prototype.result_do_highlight=function(e){var t,n,r,i,s;if(e.length){this.result_clear_highlight(),this.result_highlight=e,this.result_highlight.addClass("highlighted"),r=parseInt(this.search_results.css("maxHeight"),10),s=this.search_results.scrollTop(),i=r+s,n=this.result_highlight.position().top+this.search_results.scrollTop(),t=n+this.result_highlight.outerHeight();if(t>=i)return this.search_results.scrollTop(t-r>0?t-r:0);if(n<s)return this.search_results.scrollTop(n)}},n.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},n.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results())},n.prototype.update_results_content=function(e){return this.search_results.html(e)},n.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},n.prototype.set_tab_index=function(e){var t;if(this.form_field.tabIndex)return t=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=t},n.prototype.set_label_behavior=function(){var t=this;this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=e("label[for='"+this.form_field.id+"']"));if(this.form_field_label.length>0)return this.form_field_label.bind("click.chosen",function(e){return t.is_multiple?t.container_mousedown(e):t.activate_field()})},n.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},n.prototype.search_results_mouseup=function(t){var n;n=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first();if(n.length)return this.result_highlight=n,this.result_select(t),this.search_field.focus()},n.prototype.search_results_mouseover=function(t){var n;n=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first();if(n)return this.result_do_highlight(n)},n.prototype.search_results_mouseout=function(t){if(e(t.target).hasClass("active-result"))return this.result_clear_highlight()},n.prototype.choice_build=function(t){var n,r,i=this;return n=e("<li />",{"class":"search-choice"}).html("<span>"+t.html+"</span>"),t.disabled?n.addClass("search-choice-disabled"):(r=e("<a />",{"class":"search-choice-close","data-option-array-index":t.array_index}),r.bind("click.chosen",function(e){return i.choice_destroy_link_click(e)}),n.append(r)),this.search_container.before(n)},n.prototype.choice_destroy_link_click=function(t){t.preventDefault(),t.stopPropagation();if(!this.is_disabled)return this.choice_destroy(e(t.target))},n.prototype.choice_destroy=function(e){if(this.result_deselect(e[0].getAttribute("data-option-array-index")))return this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),e.parents("li").first().remove(),this.search_field_scale()},n.prototype.results_reset=function(){this.form_field.options[0].selected=!0,this.selected_option_count=null,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change");if(this.active_field)return this.results_hide()},n.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},n.prototype.result_select=function(e){var t,n,r;if(this.result_highlight)return t=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?t.removeClass("active-result"):(this.result_single_selected&&(this.result_single_selected.removeClass("result-selected"),r=this.result_single_selected[0].getAttribute("data-option-array-index"),this.results_data[r].selected=!1),this.result_single_selected=t),t.addClass("result-selected"),n=this.results_data[t[0].getAttribute("data-option-array-index")],n.selected=!0,this.form_field.options[n.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(n):this.single_set_selected_text(n.text),(!e.metaKey&&!e.ctrlKey||!this.is_multiple)&&this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[n.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale())},n.prototype.single_set_selected_text=function(e){return e==null&&(e=this.default_text),e===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").text(e)},n.prototype.result_deselect=function(e){var t;return t=this.results_data[e],this.form_field.options[t.options_index].disabled?!1:(t.selected=!1,this.form_field.options[t.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[t.options_index].value}),this.search_field_scale(),!0)},n.prototype.single_deselect_control_build=function(){if(!this.allow_single_deselect)return;return this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")},n.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":e("<div/>").text(e.trim(this.search_field.val())).html()},n.prototype.winnow_results_set_highlight=function(){var e,t;t=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),e=t.length?t.first():this.search_results.find(".active-result").first();if(e!=null)return this.result_do_highlight(e)},n.prototype.no_results=function(t){var n;return n=e('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),n.find("span").first().html(t),this.search_results.append(n)},n.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},n.prototype.keydown_arrow=function(){var e;if(!this.results_showing||!this.result_highlight)return this.results_show();e=this.result_highlight.nextAll("li.active-result").first();if(e)return this.result_do_highlight(e)},n.prototype.keyup_arrow=function(){var e;if(!this.results_showing&&!this.is_multiple)return this.results_show();if(this.result_highlight)return e=this.result_highlight.prevAll("li.active-result"),e.length?this.result_do_highlight(e.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())},n.prototype.keydown_backstroke=function(){var e;if(this.pending_backstroke)return this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke();e=this.search_container.siblings("li.search-choice").last();if(e.length&&!e.hasClass("search-choice-disabled"))return this.pending_backstroke=e,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")},n.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},n.prototype.keydown_checker=function(e){var t,n;t=(n=e.which)!=null?n:e.keyCode,this.search_field_scale(),t!==8&&this.pending_backstroke&&this.clear_backstroke();switch(t){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(e),this.mouse_on_container=!1;break;case 13:e.preventDefault();break;case 38:e.preventDefault(),this.keyup_arrow();break;case 40:e.preventDefault(),this.keydown_arrow()}},n.prototype.search_field_scale=function(){var t,n,r,i,s,o,u,a,f;if(this.is_multiple){r=0,u=0,s="position:absolute; left: -1000px; top: -1000px; display:none;",o=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"];for(a=0,f=o.length;a<f;a++)i=o[a],s+=i+":"+this.search_field.css(i)+";";return t=e("<div />",{style:s}),t.text(this.search_field.val()),e("body").append(t),u=t.width()+25,t.remove(),n=this.container.outerWidth(),u>n-10&&(u=n-10),this.search_field.css({width:u+"px"})}},n}(t)}.call(this),define("vendor/plugins/chosen",function(){}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/layout/chosen",["jquery_rails","vendor/plugins/chosen"],function(e){var n,r,i;return r=require("marionette"),n=function(e){function n(){return i=n.__super__.constructor.apply(this,arguments),i}return t(n,e),n.prototype.initialize=function(){var e,t;return e="Select an Option",this.$el.hasClass("month")&&(e="Month"),this.$el.hasClass("year")&&(e="Year"),this.$el.hasClass("day")&&(e="Day"),t={disable_search_threshold:1e3,allow_single_deselect:!0,placeholder_text_single:e},this.$el.chosen(t)},n}(r.ItemView)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/layout/header_drawer",["require","marionette","behaviors/closes_on_user_action"],function(e){var n,r,i,s;return i=e("marionette"),n=e("behaviors/closes_on_user_action"),r=function(e){function r(){return s=r.__super__.constructor.apply(this,arguments),s}return t(r,e),r.prototype.behaviors={closesOnUserAction:{behaviorClass:n}},r.prototype.toggle=function(){return $("body").hasClass("drawer-open")?this.close():this.open()},r.prototype.open=function(){return $("body").addClass("drawer-open"),this.triggerMethod("opened")},r.prototype.close=function(){return $("body").removeClass("drawer-open"),this.triggerMethod("closed")},r.prototype.initialize=function(e){var t=this;return this.vent=e.vent,this.globalChannel=Backbone.Wreqr.radio.channel("global"),this.listenTo(this.globalChannel.vent,"drawer:toggle",function(){return t.toggle()})},r}(i.ItemView)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/layout/header_drawer_trigger",["require","marionette"],function(e){var n,r,i;return r=e("marionette"),n=function(e){function n(){return i=n.__super__.constructor.apply(this,arguments),i}return t(n,e),n.prototype.onClickTrigger=function(){return this.globalChannel.vent.trigger("drawer:toggle")},n.prototype.initialize=function(e){var t=this;return this.globalChannel=Backbone.Wreqr.radio.channel("global"),this.vent=e.vent,this.$el.on("click",function(e){return e.stopPropagation(),t.onClickTrigger()})},n}(r.ItemView)})}.call(this),define("hbs!templates/notification/notification_layout",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="";return s});return n}),define("hbs!templates/notification/notification_message",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression;return s+='<aside class="alert--label"></aside>\n<p>\n	',(o=n.property)?o=o.call(t,{hash:{}}):(o=t.property,o=typeof o===u?o.apply(t):o),s+=a(o)+" ",(o=n.msg)?o=o.call(t,{hash:{}}):(o=t.msg,o=typeof o===u?o.apply(t):o),s+=a(o)+'\n</p>\n<a data-behavior="close" class="alert--close" href="#"></a>\n',s});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/notification/notification_message",["marionette","hbs!templates/notification/notification_message"],function(e,n){var r,i;return r=function(e){function r(){return i=r.__super__.constructor.apply(this,arguments),i}return t(r,e),r.prototype.template=n,r.prototype.lifetime=1e4,r.prototype.className=function(){return"alert alert-"+this.model.get("level")},r.prototype.triggers={'click [data-behavior="destroy"]':"destroy"},r.prototype.initialize=function(e){var t;t=parseInt(this.model.get("lifetime"));if(t>0)return this.lifetime=t},r.prototype.onShow=function(){var e=this;return setTimeout(function(){return e.trigger("view:expired")},this.lifetime)},r}(e.ItemView)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/notification/notification_region",["require","marionette"],function(e){var n,r,i;return n=e("marionette"),r=function(e){function n(){return i=n.__super__.constructor.apply(this,arguments),i}return t(n,e),n.PROMISE=$.Deferred().resolve(),n.prototype.expiring=!1,n.prototype.attachHtml=function(e){return this.$el.hide(),this.$el.empty().append(e.el)},n.prototype.onEmpty=function(){return this.$el.remove()},n.prototype.onShow=function(e){var t,r,i=this;return r=250,t=this.$el.outerHeight(),n.PROMISE=n.PROMISE.then(function(){var e;return i.trigger("transition:start",t,r),e=$.Deferred(),i.$el.fadeIn(r,function(){return e.resolve(),i.trigger("transition:complete",t,r)}),e}),this.listenTo(e,"view:expired",function(){if(i.expiring===!1)return i.expiring=!0,n.PROMISE=n.PROMISE.then(function(){var e;return i.trigger("transition:start",t*-1,r),e=$.Deferred(),i.$el.fadeOut(r,function(){return e.resolve(),i.trigger("transition:complete",t*-1,r),i.trigger("region:expired")}),e})})},n}(n.Region)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("models/flash_message",["backbone"],function(e){var n,r;return n=function(e){function n(){return r=n.__super__.constructor.apply(this,arguments),r}return t(n,e),n}(e.Model)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/notification/notification_layout",["require","marionette","hbs!templates/notification/notification_layout","views/notification/notification_message","views/notification/notification_region","models/flash_message"],function(e){var n,r,i,s,o,u,a;return r=e("marionette"),u=e("hbs!templates/notification/notification_layout"),s=e("views/notification/notification_message"),o=e("views/notification/notification_region"),n=e("models/flash_message"),i=function(e){function i(){return a=i.__super__.constructor.apply(this,arguments),a}var r;return t(i,e),i.prototype.notificationCounter=0,i.prototype.notificationRegion=null,i.prototype.className="notification",r=null,i.prototype.template=u,i.prototype.initialize=function(e){return this.setupEvents()},i.prototype.onShow=function(){return this.loadServerSideFlashMessages()},i.prototype.setupEvents=function(){var e=this;return this.listenTo(this.getOption("vent"),"error:add",function(t){return e.handleIncomingMessages(t)}),this.listenTo(this.getOption("vent"),"notification:show",function(t){return e.handleIncomingNotification(t)}),this.listenTo(this.getOption("vent"),"notification:empty",function(){return e.handleEmptyNotification()}),this.listenTo(this.regionManager,"transition:start",function(t,n){return e.adjustPosition(t,n)})},i.prototype.adjustPosition=function(e,t){var n,r,i,s;return n=$(".container"),i=parseInt(n.css("marginTop").replace("px","")),s=i+e,n.animate({marginTop:""+s+"px"},t),r=e-i},i.prototype.handleEmptyNotification=function(){if(this.notificationRegion!=null)return this.notificationRegion.currentView.trigger("view:expired")},i.prototype.handleIncomingNotification=function(e){var t,n=this;this.notificationRegion==null&&(t=this.makeRegion(),this.notificationRegion=this[t],this.listenTo(this.notificationRegion,"empty",function(){return n.notificationRegion=null}));if(!this.notificationRegion.hasView())return this.notificationRegion.show(e)},i.prototype.handleIncomingMessages=function(e){var t,n=this;return t=this.messageViewsFromMessageParams(e),_.each(t,function(e){var t;return t=n.makeRegion(),n[t].show(e)})},i.prototype.getAndIncrementNotificationCounter=function(){var e;return e=this.notificationCounter,this.notificationCounter++,e},i.prototype.makeRegion=function(){var e,t,n,r=this;return n="notificationRegion"+this.getAndIncrementNotificationCounter(),e=$('<div style="display: none;" class="notification-item" id="'+n+'"></div>'),this.$el.append(e),t=this.addRegion(n,{selector:"#"+n,regionClass:o}),this.listenTo(this[n],"region:expired",function(){return r.regionManager.removeRegion(n)}),this.regionManager.listenTo(this[n],"transition:start",function(e,t){return r.regionManager.trigger("transition:start",e,t)}),this.regionManager.listenTo(this[n],"transition:complete",function(e,t){return r.regionManager.trigger("transition:complete",e,t)}),n},i.prototype.messageViewsFromMessageParams=function(e){var t;return!_.isString(e.msg)&&(_.isObject(e.msg)||_.isArray(e.msg))?t=this.viewsFromComplexMessageParams(e):(t=[],t.push(this.makeOneNotificationView(e))),t},i.prototype.viewsFromComplexMessageParams=function(e){var t,n,r,i=this;return r=[],e.level!=null?t=e.level:t="notice",e.lifetime!=null?n=e.lifetime:n=null,_.isArray(e.msg)?e.msg.length>0&&_.each(e.msg,function(e){return r.push(i.makeOneNotificationView({level:t,msg:e,property:null,lifetime:n}))}):_.isObject(e.msg)?_.each(e.msg,function(e,s){return s==="base"?r.push(i.makeOneNotificationView({level:t,msg:e,property:null,lifetime:n})):r.push(i.makeOneNotificationView({level:t,msg:""+(s.charAt(0).toUpperCase()+s.slice(1))+" "+e,property:null,lifetime:n}))}):r.push(this.makeOneNotificationView({level:t,msg:e.msg,property:null,lifetime:n})),r},i.prototype.makeOneNotificationView=function(e){var t,r;return t=new n({msg:e.msg,level:e.level,property:e.property,lifetime:e.lifetime}),r=new s({model:t})},i.prototype.loadServerSideFlashMessages=function(){var e,t,n,r,i=this;t=$("#bootstrap-globalFlash");if(t.length>0){n=$("<div></div>"),n.html(t.text()),r=n.text();if(r!=null&&!/^\s*$/.test(r)){e=JSON.parse(r);if(_.isArray(e.globalFlash))return _.each(e.globalFlash,function(e){return i.handleIncomingMessages(e)})}}},i}(r.LayoutView)})}.call(this),define("hbs!templates/notification/notification_exception",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression;return s+='<div class="alert alert-error">\n	<aside class="alert--label"></aside>\n	<p>\n		Uh-oh, Vocat has run into a problem it can\'t solve:\n	</p>\n	<p>\n		<span style="font-weight: normal">',(o=n.msg)?o=o.call(t,{hash:{}}):(o=t.msg,o=typeof o===u?o.apply(t):o),s+=a(o)+"</span>\n	</p>\n</div>\n",s});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("behaviors/global_notification",["require","marionette"],function(e){var n,r,i;return r=e("marionette"),n=function(e){function n(){return i=n.__super__.constructor.apply(this,arguments),i}return t(n,e),n.prototype.defaults={},n.prototype.triggers={},n.prototype.ui={},n}(r.Behavior)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/notification/notification_exception",["require","marionette","hbs!templates/notification/notification_exception","behaviors/global_notification"],function(e){var n,r,i,s,o;return r=e("marionette"),s=e("hbs!templates/notification/notification_exception"),n=e("behaviors/global_notification"),i=function(e){function r(){return o=r.__super__.constructor.apply(this,arguments),o}return t(r,e),r.prototype.template=s,r.prototype.behaviors={globalNotification:{behaviorClass:n}},r.prototype.serializeData=function(){return{msg:this.msg}},r.prototype.initialize=function(e){return this.msg=e.msg},r}(r.ItemView)})}.call(this),define("hbs!templates/layout/loading",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression;return s+='<div style="margin: auto; text-align: center" class="wrap">\n  <span class="attachment-placeholder--button loading">',(o=n.msg)?o=o.call(t,{hash:{}}):(o=t.msg,o=typeof o===u?o.apply(t):o),s+=a(o)+"</span>\n</div>\n",s});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/layout/loading",["require","marionette","hbs!templates/layout/loading"],function(e){var n,r,i,s;return r=e("marionette"),i=e("hbs!templates/layout/loading"),n=function(e){function n(){return s=n.__super__.constructor.apply(this,arguments),s}return t(n,e),n.prototype.msg="Loading...",n.prototype.template=i,n.prototype.serializeData=function(){return{msg:r.getOption(this,"msg")}},n.prototype.initialize=function(e){return this.options=e},n}(r.ItemView)})}.call(this),define("hbs!templates/modal/modal_error",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression;return s+='<p style="margin-bottom: 2rem;">',(o=n.message)?o=o.call(t,{hash:{}}):(o=t.message,o=typeof o===u?o.apply(t):o),s+=a(o)+'</p>\n<a href="#" class="gray-ex-button" data-behavior="dismiss">',(o=n.dismissLabel)?o=o.call(t,{hash:{}}):(o=t.dismissLabel,o=typeof o===u?o.apply(t):o),s+=a(o)+"</a>\n",s});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/modal/modal_error",["marionette","hbs!templates/modal/modal_error"],function(e,n){var r,i;return r=function(r){function s(){return i=s.__super__.constructor.apply(this,arguments),i}return t(s,r),s.prototype.template=n,s.prototype.message="An error occured.",s.prototype.dismissLabel="Dismiss",s.prototype.dismissEvent="modal:dismiss",s.prototype.triggers={'click [data-behavior="dismiss"]':"click:dismiss"},s.prototype.onKeyUp=function(e){var t;t=e.keyCode!=null?e.keyCode:e.which,t===13&&this.onClickConfirm();if(t===27)return this.onClickDismiss()},s.prototype.onClickDismiss=function(){return this.vent.triggerMethod(e.getOption(this,"dismissEvent")),Vocat.vent.trigger("modal:destroy")},s.prototype.serializeData=function(){return{message:e.getOption(this,"message"),dismissLabel:e.getOption(this,"dismissLabel")}},s.prototype.onDestroy=function(){return $(window).off("keyup",this.onKeyUp)},s.prototype.initialize=function(e){return this.vent=e.vent,_.bindAll(this,"onKeyUp"),$(window).on("keyup",this.onKeyUp)},s}(e.ItemView)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("controllers/vocat_controller",["require","marionette","views/layout/loading","views/modal/modal_error","jquery_rails"],function(e){var n,r,i,s,o,u;return i=e("marionette"),r=e("views/layout/loading"),s=e("views/modal/modal_error"),n=e("jquery_rails"),o=function(e){function i(){return u=i.__super__.constructor.apply(this,arguments),u}return t(i,e),i.prototype.collections={},i.prototype.initialize=function(){return this.bootstrapCollections()},i.prototype.isBlank=function(e){return e===null&&(e=""),/^\s*$/.test(e)},i.prototype.deferredCollectionFetching=function(e,t,i){var o,u=this;return i==null&&(i="loading..."),o=n.Deferred(),window.Vocat.main.show(new r({msg:i})),e.fetch({reset:!0,data:t,error:function(){return Vocat.vent.trigger("modal:open",new s({model:u.model,vent:u,message:"Exception: Unable to fetch collection models. Please report this error to your VOCAT administrator."}))},success:function(){return o.resolve()}}),o},i.prototype.bootstrapCollections=function(){var e=this;return _.each(this.collections,function(t,r){var i,s,o,u;s=n("#bootstrap-"+r);if(s.length>0){o=n("<div></div>"),o.html(s.text()),u=o.text();if(!e.isBlank(u)){i=JSON.parse(u);if(i[r]!=null)return t.reset(i[r])}}})},i}(i.Controller)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("models/enrollment",["backbone"],function(e){var n,r;return n=function(e){function n(){return r=n.__super__.constructor.apply(this,arguments),r}return t(n,e),n.prototype.urlRoot="/api/v1/enrollments",n}(e.Model)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("models/user",["backbone"],function(e){var n,r;return n=function(e){function n(){return r=n.__super__.constructor.apply(this,arguments),r}return t(n,e),n.prototype.creatorType="User",n}(e.Model)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("collections/user_collection",["backbone","models/user"],function(e,n){var r,i;return r=function(e){function r(){return i=r.__super__.constructor.apply(this,arguments),i}return t(r,e),r.prototype.model=n,r.prototype.activeModel=null,r.prototype.url="/api/v1/users",r.prototype.getSearchTerm=function(){return"email"},r.prototype.getActive=function(){return this.activeModel},r.prototype.setActive=function(e){var t,n;t=this.getActive(),e!=null?(n=this.get(e),n!=null?this.activeModel=n:this.activeModel=null):this.activeModel=null;if(this.activeModel!==t)return this.trigger("change:active",this.activeModel)},r}(e.Collection)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("models/course",["backbone"],function(e){var n,r;return n=function(e){function n(){return r=n.__super__.constructor.apply(this,arguments),r}return t(n,e),n}(e.Model)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("collections/course_collection",["backbone","models/course"],function(e,n){var r,i;return r=function(e){function r(){return i=r.__super__.constructor.apply(this,arguments),i}return t(r,e),r.prototype.model=n,r.prototype.activeModel=null,r.prototype.url="/api/v1/courses",r.prototype.getSearchTerm=function(){return"section"},r}(e.Collection)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("collections/enrollment_collection",["backbone","models/enrollment","collections/user_collection","collections/course_collection"],function(e,n,r,i){var s,o;return s=function(e){function s(){return o=s.__super__.constructor.apply(this,arguments),o}return t(s,e),s.prototype.model=n,s.prototype.searchType=function(){return this.scope.course?"user":"course"},s.prototype.role=function(){return this.scope.role},s.prototype.getSearchCollection=function(){return this.searchType()==="user"?new r:new i},s.prototype.getContextualName=function(e){return this.searchType()==="user"?e.get("user_name"):e.get("course_name")},s.prototype.newEnrollmentFromSearchModel=function(e){var t,n;return t={course:e.id,user:e.id},this.scope.course!=null&&(t.course=this.scope.course),this.scope.user!=null&&(t.user=this.scope.user),this.scope.role!=null&&(t.role=this.scope.role),n=new this.model(t),n},s.prototype.baseUrl=function(){return this.searchType()==="user"?"/api/v1/courses/"+this.scope.course+"/enrollments":"/api/v1/users/"+this.scope.user+"/enrollments"},s.prototype.bulkUrl=function(){return this.searchType()==="user"?""+this.baseUrl()+"/bulk?role="+this.scope.role:""+this.baseUrl()+"/bulk"},s.prototype.url=function(){return this.searchType()==="user"?""+this.baseUrl()+"?role="+this.scope.role:this.baseUrl()},s.prototype.comparator=function(e){return this.searchType()==="user"?e.get("user_name"):e.get("course_name")},s.prototype.initialize=function(e,t){return this.scope=t.scope},s}(e.Collection)})}.call(this),define("hbs!templates/admin/enrollment_layout",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression;return s+='<div class="page-section">\n  <div class="header-wrapper">\n    <div class="header">\n      <h2 class="heading-page-section" data-behavior="label-container">',(o=n.label)?o=o.call(t,{hash:{}}):(o=t.label,o=typeof o===u?o.apply(t):o),s+=a(o)+'</h2>\n    </div>\n  </div>\n  <div class="body">\n    <form class="formgrid">\n      <div data-region="flash">\n      </div>\n      <div data-region="input">\n      </div>\n      <div data-region="invite">\n      </div>\n    </form>\n  </div>\n</div>\n\n<div class="page-section page-section-clear">\n  <div data-region="list" class="table-wrapper" >\n  </div>\n</div>\n\n',s});return n}),define("hbs!templates/admin/enrollment/list_users_item",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){function l(e,t){var r="",i;return r+='\n	<a href="/admin/users/',(i=n.user)?i=i.call(e,{hash:{}}):(i=e.user,i=typeof i===u?i.apply(e):i),r+=a(i)+'">',(i=n.user_name)?i=i.call(e,{hash:{}}):(i=e.user_name,i=typeof i===u?i.apply(e):i),r+=a(i)+"</a>\n	",r}function c(e,t){var r="",i;return r+="\n	",(i=n.user_name)?i=i.call(e,{hash:{}}):(i=e.user_name,i=typeof i===u?i.apply(e):i),r+=a(i)+"\n	",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression,f=this;s+="<th>\n	",o=n["if"].call(t,t.isAdmin,{hash:{},inverse:f.program(3,c,i),fn:f.program(1,l,i)});if(o||o===0)s+=o;return s+="\n</th>\n<td>",(o=n.email)?o=o.call(t,{hash:{}}):(o=t.email,o=typeof o===u?o.apply(t):o),s+=a(o)+"</td>\n<td>",(o=n.last_sign_in_at)?o=o.call(t,{hash:{}}):(o=t.last_sign_in_at,o=typeof o===u?o.apply(t):o),s+=a(o)+'</td>\n<td style="width: 10%;"><a data-behavior="destroy" href="" class="gentle-warning-button delete-button">Remove From Course</a></td>\n',s});return n}),define("hbs!templates/admin/enrollment/list_courses_item",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression;return s+='<th><a href="/admin/courses/',(o=n.course)?o=o.call(t,{hash:{}}):(o=t.course,o=typeof o===u?o.apply(t):o),s+=a(o)+'">',(o=n.course_name)?o=o.call(t,{hash:{}}):(o=t.course_name,o=typeof o===u?o.apply(t):o),s+=a(o)+"</a></th>\n<td>",(o=n.role)?o=o.call(t,{hash:{}}):(o=t.role,o=typeof o===u?o.apply(t):o),s+=a(o)+'</td>\n<td><a data-behavior="destroy" href="" class="gentle-warning-button delete-button">Drop Course</a></td>',s});return n}),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};define("views/admin/enrollment/item",["require","marionette","hbs!templates/admin/enrollment/list_users_item","hbs!templates/admin/enrollment/list_courses_item"],function(t){var r,i,s,o,u;return i=t("marionette"),o=t("hbs!templates/admin/enrollment/list_users_item"),s=t("hbs!templates/admin/enrollment/list_courses_item"),r=function(t){function r(){return this.getTemplate=e(this.getTemplate,this),u=r.__super__.constructor.apply(this,arguments),u}return n(r,t),r.prototype.tagName="tr",r.prototype.getTemplate=function(){return this.model.collection.searchType()==="user"?o:s},r.prototype.triggers=function(){return{'click [data-behavior="destroy"]':"clickDestroy"}},r.prototype.initialize=function(e){return this.vent=e.vent},r.prototype.serializeData=function(){var e;return e=r.__super__.serializeData.call(this),e.isAdmin=window.VocatUserRole==="administrator",e},r.prototype.onClickDestroy=function(){var e=this;return this.model.destroy({wait:!0,success:function(e){return Vocat.vent.trigger("error:add",{level:"notice",lifetime:5e3,msg:""+e.get("user_name")+" has been removed from section #"+e.get("section")+"."})},error:function(e,t){return Vocat.vent.trigger("error:add",{level:"error",lifetime:5e3,msg:t.responseJSON.errors})}})},r.prototype.onRender=function(){},r}(i.ItemView)})}.call(this),define("hbs!templates/admin/enrollment/empty_courses",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression;return s+='<th colspan="',(o=n.colspan)?o=o.call(t,{hash:{}}):(o=t.colspan,o=typeof o===u?o.apply(t):o),s+=a(o)+'">User is not currently enrolled in any courses.</td>',s});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/admin/enrollment/empty_courses",["require","marionette","hbs!templates/admin/enrollment/empty_courses"],function(e){var n,r,i,s;return r=e("marionette"),i=e("hbs!templates/admin/enrollment/empty_courses"),n=function(e){function n(){return s=n.__super__.constructor.apply(this,arguments),s}return t(n,e),n.prototype.template=i,n.prototype.tagName="tr",n.prototype.serializeData=function(){return{colspan:4}},n.prototype.onShow=function(){return this.$el.find("th").attr("colspan",this.$el.closest("table").find("thead th").length)},n}(r.ItemView)})}.call(this),define("hbs!templates/admin/enrollment/empty_users",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression;return s+='<th colspan="',(o=n.colspan)?o=o.call(t,{hash:{}}):(o=t.colspan,o=typeof o===u?o.apply(t):o),s+=a(o)+'">No ',(o=n.role)?o=o.call(t,{hash:{}}):(o=t.role,o=typeof o===u?o.apply(t):o),s+=a(o)+"s have been added to this course.</td>",s});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/admin/enrollment/empty_users",["require","marionette","hbs!templates/admin/enrollment/empty_users"],function(e){var n,r,i,s;return r=e("marionette"),i=e("hbs!templates/admin/enrollment/empty_users"),n=function(e){function n(){return s=n.__super__.constructor.apply(this,arguments),s}return t(n,e),n.prototype.template=i,n.prototype.tagName="tr",n.prototype.serializeData=function(){return{colspan:4,role:this.options.role}},n.prototype.onShow=function(){return this.$el.find("th").attr("colspan",this.$el.closest("table").find("thead th").length)},n}(r.ItemView)})}.call(this),define("hbs!templates/admin/enrollment/list_courses",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,'<table class="table table-white-head">\n  <thead>\n  <tr>\n    <th>Course</th>\n    <th>Role</th>\n    <th class="column-tight">Actions</th>\n  </tr>\n  </thead>\n  <tbody>\n  </tbody>\n</table>'});return n}),define("hbs!templates/admin/enrollment/list_users",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,'<table class="table table-white-head">\n  <thead>\n  <tr>\n    <th>Name</th>\n    <th>Email</th>\n    <th>Last Login</th>\n    <th class="column-tight">Actions</th>\n  </tr>\n  </thead>\n  <tbody>\n  </tbody>\n</table>'});return n}),function(e,t){function i(t,n){var r,i,o,u=t.nodeName.toLowerCase();return"area"===u?(r=t.parentNode,i=r.name,!t.href||!i||r.nodeName.toLowerCase()!=="map"?!1:(o=e("img[usemap=#"+i+"]")[0],!!o&&s(o))):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"===u?t.href||n:n)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return e.css(this,"visibility")==="hidden"}).length}var n=0,r=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(n,r){return typeof n=="number"?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),r&&r.call(t)},n)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(t,!r)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function u(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var i=r==="Width"?["Left","Right"]:["Top","Bottom"],s=r.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?o["inner"+r].call(this):this.each(function(){e(this).css(s,u(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?o["outer"+r].call(this,t):this.each(function(){e(this).css(s,u(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n){var r,i=e.plugins[t];if(!i||!e.element[0].parentNode||e.element[0].parentNode.nodeType===11)return;for(r=0;r<i.length;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)}})}(jQuery),function(e,t){var n=0,r=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var n=0,r;(r=t[n])!=null;n++)try{e(r).triggerHandler("remove")}catch(s){}i(t)},e.widget=function(t,n,r){var i,s,o,u,a={},f=t.split(".")[0];t=t.split(".")[1],i=f+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[f]=e[f]||{},s=e[f][t],o=e[f][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,r){if(!e.isFunction(r)){a[t]=r;return}a[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},i=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=i,s=r.apply(this,arguments),this._super=t,this._superApply=n,s}}()}),o.prototype=e.widget.extend(u,{widgetEventPrefix:s?u.widgetEventPrefix:t},a,{constructor:o,namespace:f,widgetName:t,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(n){var i=r.call(arguments,1),s=0,o=i.length,u,a;for(;s<o;s++)for(u in i[s])a=i[s][u],i[s].hasOwnProperty(u)&&a!==t&&(e.isPlainObject(a)?n[u]=e.isPlainObject(n[u])?e.widget.extend({},n[u],a):e.widget.extend({},a):n[u]=a);return n},e.widget.bridge=function(n,i){var s=i.prototype.widgetFullName||n;e.fn[n]=function(o){var u=typeof o=="string",a=r.call(arguments,1),f=this;return o=!u&&a.length?e.widget.extend.apply(null,[o].concat(a)):o,u?this.each(function(){var r,i=e.data(this,s);if(!i)return e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+o+"'");if(!e.isFunction(i[o])||o.charAt(0)==="_")return e.error("no such method '"+o+"' for "+n+" widget instance");r=i[o].apply(i,a);if(r!==i&&r!==t)return f=r&&r.jquery?f.pushStack(r.get()):r,!1}):this.each(function(){var t=e.data(this,s);t?t.option(o||{})._init():e.data(this,s,new i(o,this))}),f}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,r){var i=n,s,o,u;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof n=="string"){i={},s=n.split("."),n=s.shift();if(s.length){o=i[n]=e.widget.extend({},this.options[n]);for(u=0;u<s.length-1;u++)o[s[u]]=o[s[u]]||{},o=o[s[u]];n=s.pop();if(r===t)return o[n]===t?null:o[n];o[n]=r}else{if(r===t)return this.options[n]===t?null:this.options[n];i[n]=r}}return this._setOptions(i),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,r){var i,s=this;typeof t!="boolean"&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,o){function u(){if(!t&&(s.options.disabled===!0||e(this).hasClass("ui-state-disabled")))return;return(typeof o=="string"?s[o]:o).apply(s,arguments)}typeof o!="string"&&(u.guid=o.guid=o.guid||u.guid||e.guid++);var a=r.match(/^(\w+)\s*(.*)$/),f=a[1]+s.eventNamespace,l=a[2];l?i.delegate(l,f,u):n.bind(f,u)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&e.effects.effect[u]?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}})}(jQuery),function(e,t){var n=!1;e(document).mouseup(function(){n=!1}),e.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(n)return;this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=t.which===1,s=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!i||s||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e,t){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){this.options.helper==="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){this.offsetParentCssPosition==="fixed"&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute");if(!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}if(!this.options.axis||this.options.axis!=="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!=="x")this.helper[0].style.top=this.position.top+"px";return e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=this,r=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(r=e.ui.ddmanager.drop(this,t)),this.dropped&&(r=this.dropped,this.dropped=!1),this.options.helper==="original"&&!e.contains(this.element[0].ownerDocument,this.element[0])?!1:(this.options.revert==="invalid"&&!r||this.options.revert==="valid"&&r||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,r)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",t)!==!1&&n._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1)},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):n.helper==="clone"?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo(n.appendTo==="parent"?this.element[0].parentNode:n.appendTo),r[0]!==this.element[0]&&!/(fixed|absolute)/.test(r.css("position"))&&r.css("position","absolute"),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){var t=this.offsetParent.offset();this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&e.ui.ie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options;if(!i.containment){this.containment=null;return}if(i.containment==="window"){this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(i.containment==="document"){this.containment=[0,0,e(document).width()-this.helperProportions.width-this.margins.left,(e(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(i.containment.constructor===Array){this.containment=i.containment;return}i.containment==="parent"&&(i.containment=this.helper[0].parentNode),n=e(i.containment),r=n[0];if(!r)return;t=n.css("overflow")!=="hidden",this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(t?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n},_convertPositionTo:function(t,n){n||(n=this.position);var r=t==="absolute"?1:-1,i=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:i.scrollTop(),left:i.scrollLeft()}),{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():this.offset.scroll.top)*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():this.offset.scroll.left)*r}},_generatePosition:function(t){var n,r,i,s,o=this.options,u=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=t.pageX,f=t.pageY;return this.offset.scroll||(this.offset.scroll={top:u.scrollTop(),left:u.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(r=this.relative_container.offset(),n=[this.containment[0]+r.left,this.containment[1]+r.top,this.containment[2]+r.left,this.containment[3]+r.top]):n=this.containment,t.pageX-this.offset.click.left<n[0]&&(a=n[0]+this.offset.click.left),t.pageY-this.offset.click.top<n[1]&&(f=n[1]+this.offset.click.top),t.pageX-this.offset.click.left>n[2]&&(a=n[2]+this.offset.click.left),t.pageY-this.offset.click.top>n[3]&&(f=n[3]+this.offset.click.top)),o.grid&&(i=o.grid[1]?this.originalPageY+Math.round((f-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,f=n?i-this.offset.click.top>=n[1]||i-this.offset.click.top>n[3]?i:i-this.offset.click.top>=n[1]?i-o.grid[1]:i+o.grid[1]:i,s=o.grid[0]?this.originalPageX+Math.round((a-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,a=n?s-this.offset.click.left>=n[0]||s-this.offset.click.left>n[2]?s:s-this.offset.click.left>=n[0]?s-o.grid[0]:s+o.grid[0]:s)),{top:f-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():this.offset.scroll.top),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r]),t==="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var r=e(this).data("ui-draggable"),i=r.options,s=e.extend({},n,{item:r.element});r.sortables=[],e(i.connectToSortable).each(function(){var n=e.data(this,"ui-sortable");n&&!n.options.disabled&&(r.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,s))})},stop:function(t,n){var r=e(this).data("ui-draggable"),i=e.extend({},n,{item:r.element});e.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,r.options.helper==="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,i))})},drag:function(t,n){var r=e(this).data("ui-draggable"),i=this;e.each(r.sortables,function(){var s=!1,o=this;this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(s=!0,e.each(r.sortables,function(){return this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this!==o&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(o.instance.element[0],this.instance.element[0])&&(s=!1),s})),s?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(i).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),n=e(this).data("ui-draggable").options;t.css("cursor")&&(n._cursor=t.css("cursor")),t.css("cursor",n.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var r=e(n.helper),i=e(this).data("ui-draggable").options;r.css("opacity")&&(i._opacity=r.css("opacity")),r.css("opacity",i.opacity)},stop:function(t,n){var r=e(this).data("ui-draggable").options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&t.scrollParent[0].tagName!=="HTML"&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var n=e(this).data("ui-draggable"),r=n.options,i=!1;if(n.scrollParent[0]!==document&&n.scrollParent[0].tagName!=="HTML"){if(!r.axis||r.axis!=="x")n.overflowOffset.top+n.scrollParent[0].offsetHeight-t.pageY<r.scrollSensitivity?n.scrollParent[0].scrollTop=i=n.scrollParent[0].scrollTop+r.scrollSpeed:t.pageY-n.overflowOffset.top<r.scrollSensitivity&&(n.scrollParent[0].scrollTop=i=n.scrollParent[0].scrollTop-r.scrollSpeed);if(!r.axis||r.axis!=="y")n.overflowOffset.left+n.scrollParent[0].offsetWidth-t.pageX<r.scrollSensitivity?n.scrollParent[0].scrollLeft=i=n.scrollParent[0].scrollLeft+r.scrollSpeed:t.pageX-n.overflowOffset.left<r.scrollSensitivity&&(n.scrollParent[0].scrollLeft=i=n.scrollParent[0].scrollLeft-r.scrollSpeed)}else{if(!r.axis||r.axis!=="x")t.pageY-e(document).scrollTop()<r.scrollSensitivity?i=e(document).scrollTop(e(document).scrollTop()-r.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<r.scrollSensitivity&&(i=e(document).scrollTop(e(document).scrollTop()+r.scrollSpeed));if(!r.axis||r.axis!=="y")t.pageX-e(document).scrollLeft()<r.scrollSensitivity?i=e(document).scrollLeft(e(document).scrollLeft()-r.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<r.scrollSensitivity&&(i=e(document).scrollLeft(e(document).scrollLeft()+r.scrollSpeed))}i!==!1&&e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),n=t.options;t.snapElements=[],e(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var n=e(this),r=n.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:n.outerWidth(),height:n.outerHeight(),top:r.top,left:r.left})})},drag:function(t,n){var r,i,s,o,u,a,f,l,c,h,p=e(this).data("ui-draggable"),d=p.options,v=d.snapTolerance,m=n.offset.left,g=m+p.helperProportions.width,y=n.offset.top,b=y+p.helperProportions.height;for(c=p.snapElements.length-1;c>=0;c--){u=p.snapElements[c].left,a=u+p.snapElements[c].width,f=p.snapElements[c].top,l=f+p.snapElements[c].height;if(g<u-v||m>a+v||b<f-v||y>l+v||!e.contains(p.snapElements[c].item.ownerDocument,p.snapElements[c].item)){p.snapElements[c].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=!1;continue}d.snapMode!=="inner"&&(r=Math.abs(f-b)<=v,i=Math.abs(l-y)<=v,s=Math.abs(u-g)<=v,o=Math.abs(a-m)<=v,r&&(n.position.top=p._convertPositionTo("relative",{top:f-p.helperProportions.height,left:0}).top-p.margins.top),i&&(n.position.top=p._convertPositionTo("relative",{top:l,left:0}).top-p.margins.top),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:u-p.helperProportions.width}).left-p.margins.left),o&&(n.position.left=p._convertPositionTo("relative",{top:0,left:a}).left-p.margins.left)),h=r||i||s||o,d.snapMode!=="outer"&&(r=Math.abs(f-y)<=v,i=Math.abs(l-b)<=v,s=Math.abs(u-m)<=v,o=Math.abs(a-g)<=v,r&&(n.position.top=p._convertPositionTo("relative",{top:f,left:0}).top-p.margins.top),i&&(n.position.top=p._convertPositionTo("relative",{top:l-p.helperProportions.height,left:0}).top-p.margins.top),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:u}).left-p.margins.left),o&&(n.position.left=p._convertPositionTo("relative",{top:0,left:a-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[c].snapping&&(r||i||s||o||h)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=r||i||s||o||h}}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,n=this.data("ui-draggable").options,r=e.makeArray(e(n.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});if(!r.length)return;t=parseInt(e(r[0]).css("zIndex"),10)||0,e(r).each(function(n){e(this).css("zIndex",t+n)}),this.css("zIndex",t+r.length)}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var r=e(n.helper),i=e(this).data("ui-draggable").options;r.css("zIndex")&&(i._zIndex=r.css("zIndex")),r.css("zIndex",i.zIndex)},stop:function(t,n){var r=e(this).data("ui-draggable").options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}})}(jQuery),function(e,t){function n(e,t,n){return e>t&&e<t+n}e.widget("ui.droppable",{version:"1.10.3",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t=this.options,n=t.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){var t=0,n=e.ui.ddmanager.droppables[this.options.scope];for(;t<n.length;t++)n[t]===this&&n.splice(t,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,n){t==="accept"&&(this.accept=e.isFunction(n)?n:function(e){return e.is(n)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]===this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]===this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var r=n||e.ui.ddmanager.current,i=!1;return!r||(r.currentItem||r.element)[0]===this.element[0]?!1:(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"ui-droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope===r.options.scope&&t.accept.call(t.element[0],r.currentItem||r.element)&&e.ui.intersect(r,e.extend(t,{offset:t.element.offset()}),t.options.tolerance))return i=!0,!1}),i?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element):!1)},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(e,t,r){if(!t.offset)return!1;var i,s,o=(e.positionAbs||e.position.absolute).left,u=o+e.helperProportions.width,a=(e.positionAbs||e.position.absolute).top,f=a+e.helperProportions.height,l=t.offset.left,c=l+t.proportions.width,h=t.offset.top,p=h+t.proportions.height;switch(r){case"fit":return l<=o&&u<=c&&h<=a&&f<=p;case"intersect":return l<o+e.helperProportions.width/2&&u-e.helperProportions.width/2<c&&h<a+e.helperProportions.height/2&&f-e.helperProportions.height/2<p;case"pointer":return i=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,s=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,n(s,h,t.proportions.height)&&n(i,l,t.proportions.width);case"touch":return(a>=h&&a<=p||f>=h&&f<=p||a<h&&f>p)&&(o>=l&&o<=c||u>=l&&u<=c||o<l&&u>c);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var r,i,s=e.ui.ddmanager.droppables[t.options.scope]||[],o=n?n.type:null,u=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(r=0;r<s.length;r++){if(s[r].options.disabled||t&&!s[r].accept.call(s[r].element[0],t.currentItem||t.element))continue;for(i=0;i<u.length;i++)if(u[i]===s[r].element[0]){s[r].proportions.height=0;continue e}s[r].visible=s[r].element.css("display")!=="none";if(!s[r].visible)continue;o==="mousedown"&&s[r]._activate.call(s[r],n),s[r].offset=s[r].element.offset(),s[r].proportions={width:s[r].element[0].offsetWidth,height:s[r].element[0].offsetHeight}}},drop:function(t,n){var r=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){if(!this.options)return;!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(r=this._drop.call(this,n)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,n))}),r},dragStart:function(t,n){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var r,i,s,o=e.ui.intersect(t,this,this.options.tolerance),u=!o&&this.isover?"isout":o&&!this.isover?"isover":null;if(!u)return;this.options.greedy&&(i=this.options.scope,s=this.element.parents(":data(ui-droppable)").filter(function(){return e.data(this,"ui-droppable").options.scope===i}),s.length&&(r=e.data(s[0],"ui-droppable"),r.greedyChild=u==="isover")),r&&u==="isover"&&(r.isover=!1,r.isout=!0,r._out.call(r,n)),this[u]=!0,this[u==="isout"?"isover":"isout"]=!1,this[u==="isover"?"_over":"_out"].call(this,n),r&&u==="isout"&&(r.isout=!1,r.isover=!0,r._over.call(r,n))})},dragStop:function(t,n){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}}}(jQuery),function(e,t){function n(e){return parseInt(e,10)||0}function r(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,n,r,i,s,o=this,u=this.options;this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!u.aspectRatio,aspectRatio:u.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:u.helper||u.ghost||u.animate?u.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=u.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor===String){this.handles==="all"&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={};for(n=0;n<t.length;n++)r=e.trim(t[n]),s="ui-resizable-"+r,i=e("<div class='ui-resizable-handle "+s+"'></div>"),i.css({zIndex:u.zIndex}),"se"===r&&i.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[r]=".ui-resizable-"+r,this.element.append(i)}this._renderAxis=function(t){var n,r,i,s;t=t||this.element;for(n in this.handles){this.handles[n].constructor===String&&(this.handles[n]=e(this.handles[n],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(r=e(this.handles[n],this.element),s=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth(),i=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(i,s),this._proportionallyResize());if(!e(this.handles[n]).length)continue}},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(i=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=i&&i[1]?i[1]:"se")}),u.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(u.disabled)return;e(this).removeClass("ui-resizable-autohide"),o._handles.show()}).mouseleave(function(){if(u.disabled)return;o.resizing||(e(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_mouseCapture:function(t){var n,r,i=!1;for(n in this.handles){r=e(this.handles[n])[0];if(r===t.target||e.contains(r,t.target))i=!0}return!this.options.disabled&&i},_mouseStart:function(t){var r,i,s,o=this.options,u=this.element.position(),a=this.element;return this.resizing=!0,/absolute/.test(a.css("position"))?a.css({position:"absolute",top:a.css("top"),left:a.css("left")}):a.is(".ui-draggable")&&a.css({position:"absolute",top:u.top,left:u.left}),this._renderProxy(),r=n(this.helper.css("left")),i=n(this.helper.css("top")),o.containment&&(r+=e(o.containment).scrollLeft()||0,i+=e(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:r,top:i},this.size=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.originalPosition={left:r,top:i},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio=typeof o.aspectRatio=="number"?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,s=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor",s==="auto"?this.axis+"-resize":s),a.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n,r=this.helper,i={},s=this.originalMousePosition,o=this.axis,u=this.position.top,a=this.position.left,f=this.size.width,l=this.size.height,c=t.pageX-s.left||0,h=t.pageY-s.top||0,p=this._change[o];if(!p)return!1;n=p.apply(this,[t,c,h]),this._updateVirtualBoundaries(t.shiftKey);if(this._aspectRatio||t.shiftKey)n=this._updateRatio(n,t);return n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),this.position.top!==u&&(i.top=this.position.top+"px"),this.position.left!==a&&(i.left=this.position.left+"px"),this.size.width!==f&&(i.width=this.size.width+"px"),this.size.height!==l&&(i.height=this.size.height+"px"),r.css(i),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(i)||this._trigger("resize",t,this.ui()),!1},_mouseStop:function(t){this.resizing=!1;var n,r,i,s,o,u,a,f=this.options,l=this;return this._helper&&(n=this._proportionallyResizeElements,r=n.length&&/textarea/i.test(n[0].nodeName),i=r&&e.ui.hasScroll(n[0],"left")?0:l.sizeDiff.height,s=r?0:l.sizeDiff.width,o={width:l.helper.width()-s,height:l.helper.height()-i},u=parseInt(l.element.css("left"),10)+(l.position.left-l.originalPosition.left)||null,a=parseInt(l.element.css("top"),10)+(l.position.top-l.originalPosition.top)||null,f.animate||this.element.css(e.extend(o,{top:a,left:u})),l.helper.height(l.size.height),l.helper.width(l.size.width),this._helper&&!f.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,n,i,s,o,u=this.options;o={minWidth:r(u.minWidth)?u.minWidth:0,maxWidth:r(u.maxWidth)?u.maxWidth:Infinity,minHeight:r(u.minHeight)?u.minHeight:0,maxHeight:r(u.maxHeight)?u.maxHeight:Infinity};if(this._aspectRatio||e)t=o.minHeight*this.aspectRatio,i=o.minWidth/this.aspectRatio,n=o.maxHeight*this.aspectRatio,s=o.maxWidth/this.aspectRatio,t>o.minWidth&&(o.minWidth=t),i>o.minHeight&&(o.minHeight=i),n<o.maxWidth&&(o.maxWidth=n),s<o.maxHeight&&(o.maxHeight=s);this._vBoundaries=o},_updateCache:function(e){this.offset=this.helper.offset(),r(e.left)&&(this.position.left=e.left),r(e.top)&&(this.position.top=e.top),r(e.height)&&(this.size.height=e.height),r(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,i=this.axis;return r(e.height)?e.width=e.height*this.aspectRatio:r(e.width)&&(e.height=e.width/this.aspectRatio),i==="sw"&&(e.left=t.left+(n.width-e.width),e.top=null),i==="nw"&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,i=r(e.width)&&t.maxWidth&&t.maxWidth<e.width,s=r(e.height)&&t.maxHeight&&t.maxHeight<e.height,o=r(e.width)&&t.minWidth&&t.minWidth>e.width,u=r(e.height)&&t.minHeight&&t.minHeight>e.height,a=this.originalPosition.left+this.originalSize.width,f=this.position.top+this.size.height,l=/sw|nw|w/.test(n),c=/nw|ne|n/.test(n);return o&&(e.width=t.minWidth),u&&(e.height=t.minHeight),i&&(e.width=t.maxWidth),s&&(e.height=t.maxHeight),o&&l&&(e.left=a-t.minWidth),i&&l&&(e.left=a-t.maxWidth),u&&c&&(e.top=f-t.minHeight),s&&c&&(e.top=f-t.maxHeight),!e.width&&!e.height&&!e.left&&e.top?e.top=null:!e.width&&!e.height&&!e.top&&e.left&&(e.left=null),e},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length)return;var e,t,n,r,i,s=this.helper||this.element;for(e=0;e<this._proportionallyResizeElements.length;e++){i=this._proportionallyResizeElements[e];if(!this.borderDif){this.borderDif=[],n=[i.css("borderTopWidth"),i.css("borderRightWidth"),i.css("borderBottomWidth"),i.css("borderLeftWidth")],r=[i.css("paddingTop"),i.css("paddingRight"),i.css("paddingBottom"),i.css("paddingLeft")];for(t=0;t<n.length;t++)this.borderDif[t]=(parseInt(n[t],10)||0)+(parseInt(r[t],10)||0)}i.css({height:s.height()-this.borderDif[0]-this.borderDif[2]||0,width:s.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize,r=this.originalPosition;return{left:r.left+t,width:n.width-t}},n:function(e,t,n){var r=this.originalSize,i=this.originalPosition;return{top:i.top+n,height:r.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},sw:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,r]))},ne:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},nw:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,r]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),t!=="resize"&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).data("ui-resizable"),r=n.options,i=n._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),o=s&&e.ui.hasScroll(i[0],"left")?0:n.sizeDiff.height,u=s?0:n.sizeDiff.width,a={width:n.size.width-u,height:n.size.height-o},f=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,l=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(a,l&&f?{top:l,left:f}:{}),{duration:r.animateDuration,easing:r.animateEasing,step:function(){var r={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};i&&i.length&&e(i[0]).css({width:r.width,height:r.height}),n._updateCache(r),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,r,i,s,o,u,a,f=e(this).data("ui-resizable"),l=f.options,c=f.element,h=l.containment,p=h instanceof e?h.get(0):/parent/.test(h)?c.parent().get(0):h;if(!p)return;f.containerElement=e(p),/document/.test(h)||h===document?(f.containerOffset={left:0,top:0},f.containerPosition={left:0,top:0},f.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(p),r=[],e(["Top","Right","Left","Bottom"]).each(function(e,i){r[e]=n(t.css("padding"+i))}),f.containerOffset=t.offset(),f.containerPosition=t.position(),f.containerSize={height:t.innerHeight()-r[3],width:t.innerWidth()-r[1]},i=f.containerOffset,s=f.containerSize.height,o=f.containerSize.width,u=e.ui.hasScroll(p,"left")?p.scrollWidth:o,a=e.ui.hasScroll(p)?p.scrollHeight:s,f.parentData={element:p,left:i.left,top:i.top,width:u,height:a})},resize:function(t){var n,r,i,s,o=e(this).data("ui-resizable"),u=o.options,a=o.containerOffset,f=o.position,l=o._aspectRatio||t.shiftKey,c={top:0,left:0},h=o.containerElement;h[0]!==document&&/static/.test(h.css("position"))&&(c=a),f.left<(o._helper?a.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-a.left:o.position.left-c.left),l&&(o.size.height=o.size.width/o.aspectRatio),o.position.left=u.helper?a.left:0),f.top<(o._helper?a.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-a.top:o.position.top),l&&(o.size.width=o.size.height*o.aspectRatio),o.position.top=o._helper?a.top:0),o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top,n=Math.abs((o._helper?o.offset.left-c.left:o.offset.left-c.left)+o.sizeDiff.width),r=Math.abs((o._helper?o.offset.top-c.top:o.offset.top-a.top)+o.sizeDiff.height),i=o.containerElement.get(0)===o.element.parent().get(0),s=/relative|absolute/.test(o.containerElement.css("position")),i&&s&&(n-=o.parentData.left),n+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-n,l&&(o.size.height=o.size.width/o.aspectRatio)),r+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-r,l&&(o.size.width=o.size.height*o.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),n=t.options,r=t.containerOffset,i=t.containerPosition,s=t.containerElement,o=e(t.helper),u=o.offset(),a=o.outerWidth()-t.sizeDiff.width,f=o.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(s.css("position"))&&e(this).css({left:u.left-i.left-r.left,width:a,height:f}),t._helper&&!n.animate&&/static/.test(s.css("position"))&&e(this).css({left:u.left-i.left-r.left,width:a,height:f})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable"),n=t.options,r=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};typeof n.alsoResize=="object"&&!n.alsoResize.parentNode?n.alsoResize.length?(n.alsoResize=n.alsoResize[0],r(n.alsoResize)):e.each(n.alsoResize,function(e){r(e)}):r(n.alsoResize)},resize:function(t,n){var r=e(this).data("ui-resizable"),i=r.options,s=r.originalSize,o=r.originalPosition,u={height:r.size.height-s.height||0,width:r.size.width-s.width||0,top:r.position.top-o.top||0,left:r.position.left-o.left||0},a=function(t,r){e(t).each(function(){var t=e(this),i=e(this).data("ui-resizable-alsoresize"),s={},o=r&&r.length?r:t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var n=(i[t]||0)+(u[t]||0);n&&n>=0&&(s[t]=n||null)}),t.css(s)})};typeof i.alsoResize=="object"&&!i.alsoResize.nodeType?e.each(i.alsoResize,function(e,t){a(e,t)}):a(i.alsoResize)},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),n=t.options,r=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:r.height,width:r.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof n.ghost=="string"?n.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),n=t.options,r=t.size,i=t.originalSize,s=t.originalPosition,o=t.axis,u=typeof n.grid=="number"?[n.grid,n.grid]:n.grid,a=u[0]||1,f=u[1]||1,l=Math.round((r.width-i.width)/a)*a,c=Math.round((r.height-i.height)/f)*f,h=i.width+l,p=i.height+c,d=n.maxWidth&&n.maxWidth<h,v=n.maxHeight&&n.maxHeight<p,m=n.minWidth&&n.minWidth>h,g=n.minHeight&&n.minHeight>p;n.grid=u,m&&(h+=a),g&&(p+=f),d&&(h-=a),v&&(p-=f),/^(se|s|e)$/.test(o)?(t.size.width=h,t.size.height=p):/^(ne)$/.test(o)?(t.size.width=h,t.size.height=p,t.position.top=s.top-c):/^(sw)$/.test(o)?(t.size.width=h,t.size.height=p,t.position.left=s.left-l):(t.size.width=h,t.size.height=p,t.position.top=s.top-c,t.position.left=s.left-l)}})}(jQuery),function(e,t){e.widget("ui.selectable",e.ui.mouse,{version:"1.10.3",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,n=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(n.options.filter,n.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),n=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:n.left,top:n.top,right:n.left+t.outerWidth(),bottom:n.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var n=this,r=this.options;this.opos=[t.pageX,t.pageY];if(this.options.disabled)return;this.selectees=e(r.filter,this.element[0]),this._trigger("start",t),e(r.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),r.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var r=e.data(this,"selectable-item");r.startselected=!0,!t.metaKey&&!t.ctrlKey&&(r.$element.removeClass("ui-selected"),r.selected=!1,r.$element.addClass("ui-unselecting"),r.unselecting=!0,n._trigger("unselecting",t,{unselecting:r.element}))}),e(t.target).parents().addBack().each(function(){var r,i=e.data(this,"selectable-item");if(i)return r=!t.metaKey&&!t.ctrlKey||!i.$element.hasClass("ui-selected"),i.$element.removeClass(r?"ui-unselecting":"ui-selected").addClass(r?"ui-selecting":"ui-unselecting"),i.unselecting=!r,i.selecting=r,i.selected=r,r?n._trigger("selecting",t,{selecting:i.element}):n._trigger("unselecting",t,{unselecting:i.element}),!1})},_mouseDrag:function(t){this.dragged=!0;if(this.options.disabled)return;var n,r=this,i=this.options,s=this.opos[0],o=this.opos[1],u=t.pageX,a=t.pageY;return s>u&&(n=u,u=s,s=n),o>a&&(n=a,a=o,o=n),this.helper.css({left:s,top:o,width:u-s,height:a-o}),this.selectees.each(function(){var n=e.data(this,"selectable-item"),f=!1;if(!n||n.element===r.element[0])return;i.tolerance==="touch"?f=!(n.left>u||n.right<s||n.top>a||n.bottom<o):i.tolerance==="fit"&&(f=n.left>s&&n.right<u&&n.top>o&&n.bottom<a),f?(n.selected&&(n.$element.removeClass("ui-selected"),n.selected=!1),n.unselecting&&(n.$element.removeClass("ui-unselecting"),n.unselecting=!1),n.selecting||(n.$element.addClass("ui-selecting"),n.selecting=!0,r._trigger("selecting",t,{selecting:n.element}))):(n.selecting&&((t.metaKey||t.ctrlKey)&&n.startselected?(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.$element.addClass("ui-selected"),n.selected=!0):(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.startselected&&(n.$element.addClass("ui-unselecting"),n.unselecting=!0),r._trigger("unselecting",t,{unselecting:n.element}))),n.selected&&!t.metaKey&&!t.ctrlKey&&!n.startselected&&(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,r._trigger("unselecting",t,{unselecting:n.element})))}),!1},_mouseStop:function(t){var n=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-unselecting"),r.unselecting=!1,r.startselected=!1,n._trigger("unselected",t,{unselected:r.element})}),e(".ui-selecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-selecting").addClass("ui-selected"),r.selecting=!1,r.selected=!0,r.startselected=!0,n._trigger("selected",t,{selected:r.element})}),this._trigger("stop",t),this.helper.remove(),!1}})}(jQuery),function(e,t){function n(e,t,n){return e>t&&e<t+n}function r(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?e.axis==="x"||r(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){t==="disabled"?(this.options[t]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var r=null,i=!1,s=this;if(this.reverting)return!1;if(this.options.disabled||this.options.type==="static")return!1;this._refreshItems(t),e(t.target).parents().each(function(){if(e.data(this,s.widgetName+"-item")===s)return r=e(this),!1}),e.data(t.target,s.widgetName+"-item")===s&&(r=e(t.target));if(!r)return!1;if(this.options.handle&&!n){e(this.options.handle,r).find("*").addBack().each(function(){this===t.target&&(i=!0)});if(!i)return!1}return this.currentItem=r,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,n,r){var i,s,o=this.options;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&o.cursor!=="auto"&&(s=this.document.find("body"),this.storedCursor=s.css("cursor"),s.css("cursor",o.cursor),this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(s)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!r)for(i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,r,i,s,o=this.options,u=!1;this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=u=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=u=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-e(document).scrollTop()<o.scrollSensitivity?u=e(document).scrollTop(e(document).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<o.scrollSensitivity&&(u=e(document).scrollTop(e(document).scrollTop()+o.scrollSpeed)),t.pageX-e(document).scrollLeft()<o.scrollSensitivity?u=e(document).scrollLeft(e(document).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<o.scrollSensitivity&&(u=e(document).scrollLeft(e(document).scrollLeft()+o.scrollSpeed))),u!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!=="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!=="x")this.helper[0].style.top=this.position.top+"px";for(n=this.items.length-1;n>=0;n--){r=this.items[n],i=r.item[0],s=this._intersectsWithPointer(r);if(!s)continue;if(r.instance!==this.currentContainer)continue;if(i!==this.currentItem[0]&&this.placeholder[s===1?"next":"prev"]()[0]!==i&&!e.contains(this.placeholder[0],i)&&(this.options.type==="semi-dynamic"?!e.contains(this.element[0],i):!0)){this.direction=s===1?"down":"up";if(this.options.tolerance!=="pointer"&&!this._intersectsWithSides(r))break;this._rearrange(t,r),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(!t)return;e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t);if(this.options.revert){var r=this,i=this.placeholder.offset(),s=this.options.axis,o={};if(!s||s==="x")o.left=i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft);if(!s||s==="y")o.top=i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop);this.reverting=!0,e(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1},cancel:function(){if(this.dragging){this._mouseUp({target:null}),this.options.helper==="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,s=e.left,o=s+e.width,u=e.top,a=u+e.height,f=this.offset.click.top,l=this.offset.click.left,c=this.options.axis==="x"||r+f>u&&r+f<a,h=this.options.axis==="y"||t+l>s&&t+l<o,p=c&&h;return this.options.tolerance==="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:s<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&u<r+this.helperProportions.height/2&&i-this.helperProportions.height/2<a},_intersectsWithPointer:function(e){var t=this.options.axis==="x"||n(this.positionAbs.top+this.offset.click.top,e.top,e.height),r=this.options.axis==="y"||n(this.positionAbs.left+this.offset.click.left,e.left,e.width),i=t&&r,s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return i?this.floating?o&&o==="right"||s==="down"?2:1:s&&(s==="down"?2:1):!1},_intersectsWithSides:function(e){var t=n(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),r=n(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),i=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?s==="right"&&r||s==="left"&&!r:i&&(i==="down"&&t||i==="up"&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return e!==0&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return e!==0&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n,r,i,s,o=[],u=[],a=this._connectWith();if(a&&t)for(n=a.length-1;n>=0;n--){i=e(a[n]);for(r=i.length-1;r>=0;r--)s=e.data(i[r],this.widgetFullName),s&&s!==this&&!s.options.disabled&&u.push([e.isFunction(s.options.items)?s.options.items.call(s.element):e(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s])}u.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(n=u.length-1;n>=0;n--)u[n][0].each(function(){o.push(this)});return e(o)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;n<t.length;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,r,i,s,o,u,a,f,l=this.items,c=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(n=h.length-1;n>=0;n--){i=e(h[n]);for(r=i.length-1;r>=0;r--)s=e.data(i[r],this.widgetFullName),s&&s!==this&&!s.options.disabled&&(c.push([e.isFunction(s.options.items)?s.options.items.call(s.element[0],t,{item:this.currentItem}):e(s.options.items,s.element),s]),this.containers.push(s))}for(n=c.length-1;n>=0;n--){o=c[n][1],u=c[n][0];for(r=0,f=u.length;r<f;r++)a=e(u[r]),a.data(this.widgetName+"-item",o),l.push({item:a,instance:o,width:0,height:0,left:0,top:0})}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,r,i,s;for(n=this.items.length-1;n>=0;n--){r=this.items[n];if(r.instance!==this.currentContainer&&this.currentContainer&&r.item[0]!==this.currentItem[0])continue;i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item,t||(r.width=i.outerWidth(),r.height=i.outerHeight()),s=i.offset(),r.left=s.left,r.top=s.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)s=this.containers[n].element.offset(),this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var n,r=t.options;if(!r.placeholder||r.placeholder.constructor===String)n=r.placeholder,r.placeholder={element:function(){var r=t.currentItem[0].nodeName.toLowerCase(),i=e("<"+r+">",t.document[0]).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return r==="tr"?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(i)}):r==="img"&&i.attr("src",t.currentItem.attr("src")),n||i.css("visibility","hidden"),i},update:function(e,i){if(n&&!r.forcePlaceholderSize)return;i.height()||i.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),i.width()||i.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10))}};t.placeholder=e(r.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),r.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var i,s,o,u,a,f,l,c,h,p,d=null,v=null;for(i=this.containers.length-1;i>=0;i--){if(e.contains(this.currentItem[0],this.containers[i].element[0]))continue;if(this._intersectsWith(this.containers[i].containerCache)){if(d&&e.contains(this.containers[i].element[0],d.element[0]))continue;d=this.containers[i],v=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0)}if(!d)return;if(this.containers.length===1)this.containers[v].containerCache.over||(this.containers[v]._trigger("over",t,this._uiHash(this)),this.containers[v].containerCache.over=1);else{o=1e4,u=null,p=d.floating||r(this.currentItem),a=p?"left":"top",f=p?"width":"height",l=this.positionAbs[a]+this.offset.click[a];for(s=this.items.length-1;s>=0;s--){if(!e.contains(this.containers[v].element[0],this.items[s].item[0]))continue;if(this.items[s].item[0]===this.currentItem[0])continue;if(p&&!n(this.positionAbs.top+this.offset.click.top,this.items[s].top,this.items[s].height))continue;c=this.items[s].item.offset()[a],h=!1,Math.abs(c-l)>Math.abs(c+this.items[s][f]-l)&&(h=!0,c+=this.items[s][f]),Math.abs(c-l)<o&&(o=Math.abs(c-l),u=this.items[s],this.direction=h?"up":"down")}if(!u&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[v])return;u?this._rearrange(t,u,null,!0):this._rearrange(t,null,this.containers[v].element,!0),this._trigger("change",t,this._uiHash()),this.containers[v]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[v],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[v]._trigger("over",t,this._uiHash(this)),this.containers[v].containerCache.over=1}},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):n.helper==="clone"?this.currentItem.clone():this.currentItem;return r.parents("body").length||e(n.appendTo!=="parent"?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!r[0].style.width||n.forceHelperSize)&&r.width(this.currentItem.width()),(!r[0].style.height||n.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&e.ui.ie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options;i.containment==="parent"&&(i.containment=this.helper[0].parentNode);if(i.containment==="document"||i.containment==="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e(i.containment==="document"?document:window).width()-this.helperProportions.width-this.margins.left,(e(i.containment==="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];/^(document|window|parent)$/.test(i.containment)||(t=e(i.containment)[0],n=e(i.containment).offset(),r=e(t).css("overflow")!=="hidden",this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(r?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(r?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var r=t==="absolute"?1:-1,i=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(i[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():s?0:i.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():s?0:i.scrollLeft())*r}},_generatePosition:function(t){var n,r,i=this.options,s=t.pageX,o=t.pageY,u=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(u[0].tagName);return this.cssPosition==="relative"&&(this.scrollParent[0]===document||this.scrollParent[0]===this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),i.grid&&(n=this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1],o=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-i.grid[1]:n+i.grid[1]:n,r=this.originalPageX+Math.round((s-this.originalPageX)/i.grid[0])*i.grid[0],s=this.containment?r-this.offset.click.left>=this.containment[0]&&r-this.offset.click.left<=this.containment[2]?r:r-this.offset.click.left>=this.containment[0]?r-i.grid[0]:r+i.grid[0]:r)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():a?0:u.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():a?0:u.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay(function(){i===this.counter&&this.refreshPositions(!r)})},_clear:function(e,t){this.reverting=!1;var n,r=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)if(this._storedCSS[n]==="auto"||this._storedCSS[n]==="static")this._storedCSS[n]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!t&&r.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!t&&r.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(r.push(function(e){this._trigger("remove",e,this._uiHash())}),r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer))));for(n=this.containers.length-1;n>=0;n--)t||r.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over&&(r.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over=0);this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!t){this._trigger("beforeStop",e,this._uiHash());for(n=0;n<r.length;n++)r[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!t){for(n=0;n<r.length;n++)r[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})}(jQuery),function(e,t){var n="ui-effects-";e.effects={effect:{}},function(e,t){function h(e,t,n){var r=u[t.type]||{};return e==null?n||!t.def?null:t.def:(e=r.floor?~~e:parseFloat(e),isNaN(e)?t.def:r.mod?(e+r.mod)%r.mod:0>e?0:r.max<e?r.max:e)}function p(t){var n=s(),r=n._rgba=[];return t=t.toLowerCase(),c(i,function(e,i){var s,u=i.re.exec(t),a=u&&i.parse(u),f=i.space||"rgba";if(a)return s=n[f](a),n[o[f].cache]=s[o[f].cache],r=n._rgba=s._rgba,!1}),r.length?(r.join()==="0,0,0,0"&&e.extend(r,l.transparent),n):l[t]}function d(e,t,n){return n=(n+1)%1,n*6<1?e+(t-e)*n*6:n*2<1?t:n*3<2?e+(t-e)*(2/3-n)*6:e}var n="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",r=/^([\-+])=\s*(\d+\.?\d*)/,i=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1]*2.55,e[2]*2.55,e[3]*2.55,e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],s=e.Color=function(t,n,r,i){return new e.Color.fn.parse(t,n,r,i)},o={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},u={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},a=s.support={},f=e("<p>")[0],l,c=e.each;f.style.cssText="background-color:rgba(1,1,1,.5)",a.rgba=f.style.backgroundColor.indexOf("rgba")>-1,c(o,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),s.fn=e.extend(s.prototype,{parse:function(n,r,i,u){if(n===t)return this._rgba=[null,null,null,null],this;if(n.jquery||n.nodeType)n=e(n).css(r),r=t;var a=this,f=e.type(n),d=this._rgba=[];r!==t&&(n=[n,r,i,u],f="array");if(f==="string")return this.parse(p(n)||l._default);if(f==="array")return c(o.rgba.props,function(e,t){d[t.idx]=h(n[t.idx],t)}),this;if(f==="object")return n instanceof s?c(o,function(e,t){n[t.cache]&&(a[t.cache]=n[t.cache].slice())}):c(o,function(t,r){var i=r.cache;c(r.props,function(e,t){if(!a[i]&&r.to){if(e==="alpha"||n[e]==null)return;a[i]=r.to(a._rgba)}a[i][t.idx]=h(n[e],t,!0)}),a[i]&&e.inArray(null,a[i].slice(0,3))<0&&(a[i][3]=1,r.from&&(a._rgba=r.from(a[i])))}),this},is:function(e){var t=s(e),n=!0,r=this;return c(o,function(e,i){var s,o=t[i.cache];return o&&(s=r[i.cache]||i.to&&i.to(r._rgba)||[],c(i.props,function(e,t){if(o[t.idx]!=null)return n=o[t.idx]===s[t.idx],n})),n}),n},_space:function(){var e=[],t=this;return c(o,function(n,r){t[r.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var n=s(e),r=n._space(),i=o[r],a=this.alpha()===0?s("transparent"):this,f=a[i.cache]||i.to(a._rgba),l=f.slice();return n=n[i.cache],c(i.props,function(e,r){var i=r.idx,s=f[i],o=n[i],a=u[r.type]||{};if(o===null)return;s===null?l[i]=o:(a.mod&&(o-s>a.mod/2?s+=a.mod:s-o>a.mod/2&&(s-=a.mod)),l[i]=h((o-s)*t+s,r))}),this[r](l)},blend:function(t){if(this._rgba[3]===1)return this;var n=this._rgba.slice(),r=n.pop(),i=s(t)._rgba;return s(e.map(n,function(e,t){return(1-r)*i[t]+r*e}))},toRgbaString:function(){var t="rgba(",n=e.map(this._rgba,function(e,t){return e==null?t>2?1:0:e});return n[3]===1&&(n.pop(),t="rgb("),t+n.join()+")"},toHslaString:function(){var t="hsla(",n=e.map(this.hsla(),function(e,t){return e==null&&(e=t>2?1:0),t&&t<3&&(e=Math.round(e*100)+"%"),e});return n[3]===1&&(n.pop(),t="hsl("),t+n.join()+")"},toHexString:function(t){var n=this._rgba.slice(),r=n.pop();return t&&n.push(~~(r*255)),"#"+e.map(n,function(e){return e=(e||0).toString(16),e.length===1?"0"+e:e}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}}),s.fn.parse.prototype=s.fn,o.hsla.to=function(e){if(e[0]==null||e[1]==null||e[2]==null)return[null,null,null,e[3]];var t=e[0]/255,n=e[1]/255,r=e[2]/255,i=e[3],s=Math.max(t,n,r),o=Math.min(t,n,r),u=s-o,a=s+o,f=a*.5,l,c;return o===s?l=0:t===s?l=60*(n-r)/u+360:n===s?l=60*(r-t)/u+120:l=60*(t-n)/u+240,u===0?c=0:f<=.5?c=u/a:c=u/(2-a),[Math.round(l)%360,c,f,i==null?1:i]},o.hsla.from=function(e){if(e[0]==null||e[1]==null||e[2]==null)return[null,null,null,e[3]];var t=e[0]/360,n=e[1],r=e[2],i=e[3],s=r<=.5?r*(1+n):r+n-r*n,o=2*r-s;return[Math.round(d(o,s,t+1/3)*255),Math.round(d(o,s,t)*255),Math.round(d(o,s,t-1/3)*255),i]},c(o,function(n,i){var o=i.props,u=i.cache,a=i.to,f=i.from;s.fn[n]=function(n){a&&!this[u]&&(this[u]=a(this._rgba));if(n===t)return this[u].slice();var r,i=e.type(n),l=i==="array"||i==="object"?n:arguments,p=this[u].slice();return c(o,function(e,t){var n=l[i==="object"?e:t.idx];n==null&&(n=p[t.idx]),p[t.idx]=h(n,t)}),f?(r=s(f(p)),r[u]=p,r):s(p)},c(o,function(t,i){if(s.fn[t])return;s.fn[t]=function(s){var o=e.type(s),u=t==="alpha"?this._hsla?"hsla":"rgba":n,a=this[u](),f=a[i.idx],l;return o==="undefined"?f:(o==="function"&&(s=s.call(this,f),o=e.type(s)),s==null&&i.empty?this:(o==="string"&&(l=r.exec(s),l&&(s=f+parseFloat(l[2])*(l[1]==="+"?1:-1))),a[i.idx]=s,this[u](a)))}})}),s.hook=function(t){var n=t.split(" ");c(n,function(t,n){e.cssHooks[n]={set:function(t,r){var i,o,u="";if(r!=="transparent"&&(e.type(r)!=="string"||(i=p(r)))){r=s(i||r);if(!a.rgba&&r._rgba[3]!==1){o=n==="backgroundColor"?t.parentNode:t;while((u===""||u==="transparent")&&o&&o.style)try{u=e.css(o,"backgroundColor"),o=o.parentNode}catch(f){}r=r.blend(u&&u!=="transparent"?u:"_default")}r=r.toRgbaString()}try{t.style[n]=r}catch(f){}}},e.fx.step[n]=function(t){t.colorInit||(t.start=s(t.elem,n),t.end=s(t.end),t.colorInit=!0),e.cssHooks[n].set(t.elem,t.start.transition(t.end,t.pos))}})},s.hook(n),e.cssHooks.borderColor={expand:function(e){var t={};return c(["Top","Right","Bottom","Left"],function(n,r){t["border"+r+"Color"]=e}),t}},l=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(t){var n,r,i=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,s={};if(i&&i.length&&i[0]&&i[i[0]]){r=i.length;while(r--)n=i[r],typeof i[n]=="string"&&(s[e.camelCase(n)]=i[n])}else for(n in i)typeof i[n]=="string"&&(s[n]=i[n]);return s}function s(t,n){var i={},s,o;for(s in n)o=n[s],t[s]!==o&&!r[s]&&(e.fx.step[s]||!isNaN(parseFloat(o)))&&(i[s]=o);return i}var n=["add","remove","toggle"],r={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){if(e.end!=="none"&&!e.setAttr||e.pos===1&&!e.setAttr)jQuery.style(e.elem,n,e.end),e.setAttr=!0}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(t,r,o,u){var a=e.speed(r,o,u);return this.queue(function(){var r=e(this),o=r.attr("class")||"",u,f=a.children?r.find("*").addBack():r;f=f.map(function(){var t=e(this);return{el:t,start:i(this)}}),u=function(){e.each(n,function(e,n){t[n]&&r[n+"Class"](t[n])})},u(),f=f.map(function(){return this.end=i(this.el[0]),this.diff=s(this.start,this.end),this}),r.attr("class",o),f=f.map(function(){var t=this,n=e.Deferred(),r=e.extend({},a,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,r),n.promise()}),e.when.apply(e,f.get()).done(function(){u(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),a.complete.call(r[0])})})},e.fn.extend({addClass:function(t){return function(n,r,i,s){return r?e.effects.animateClass.call(this,{add:n},r,i,s):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(n,r,i,s){return arguments.length>1?e.effects.animateClass.call(this,{remove:n},r,i,s):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(n){return function(r,i,s,o,u){return typeof i=="boolean"||i===t?s?e.effects.animateClass.call(this,i?{add:r}:{remove:r},s,o,u):n.apply(this,arguments):e.effects.animateClass.call(this,{toggle:r},i,s,o)}}(e.fn.toggleClass),switchClass:function(t,n,r,i,s){return e.effects.animateClass.call(this,{add:n,remove:t},r,i,s)}})}(),function(){function r(t,n,r,i){e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},n==null&&(n={}),e.isFunction(n)&&(i=n,r=null,n={});if(typeof n=="number"||e.fx.speeds[n])i=r,r=n,n={};return e.isFunction(r)&&(i=r,r=null),n&&e.extend(t,n),r=r||n.duration,t.duration=e.fx.off?0:typeof r=="number"?r:r in e.fx.speeds?e.fx.speeds[r]:e.fx.speeds._default,t.complete=i||n.complete,t}function i(t){return!t||typeof t=="number"||e.fx.speeds[t]?!0:typeof t=="string"&&!e.effects.effect[t]?!0:e.isFunction(t)?!0:typeof t=="object"&&!t.effect?!0:!1}e.extend(e.effects,{version:"1.10.3",save:function(e,t){for(var r=0;r<t.length;r++)t[r]!==null&&e.data(n+t[r],e[0].style[t[r]])},restore:function(e,r){var i,s;for(s=0;s<r.length;s++)r[s]!==null&&(i=e.data(n+r[s]),i===t&&(i=""),e.css(r[s],i))},setMode:function(e,t){return t==="toggle"&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,r;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=e[1]/t.width}return{x:r,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},r=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),i={width:t.width(),height:t.height()},s=document.activeElement;try{s.id}catch(o){s=document.body}return t.wrap(r),(t[0]===s||e.contains(t[0],s))&&e(s).focus(),r=t.parent(),t.css("position")==="static"?(r.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,r){n[r]=t.css(r),isNaN(parseInt(n[r],10))&&(n[r]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(i),r.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus()),t},setTransition:function(t,n,r,i){return i=i||{},e.each(n,function(e,n){var s=t.cssUnit(n);s[0]>0&&(i[n]=s[0]*r+s[1])}),i}}),e.fn.extend({effect:function(){function o(n){function u(){e.isFunction(i)&&i.call(r[0]),e.isFunction(n)&&n()}var r=e(this),i=t.complete,o=t.mode;(r.is(":hidden")?o==="hide":o==="show")?(r[o](),u()):s.call(r[0],t,u)}var t=r.apply(this,arguments),n=t.mode,i=t.queue,s=e.effects.effect[t.effect];return e.fx.off||!s?n?this[n](t.duration,t.complete):this.each(function(){t.complete&&t.complete.call(this)}):i===!1?this.each(o):this.queue(i||"fx",o)},show:function(e){return function(t){if(i(t))return e.apply(this,arguments);var n=r.apply(this,arguments);return n.mode="show",this.effect.call(this,n)}}(e.fn.show),hide:function(e){return function(t){if(i(t))return e.apply(this,arguments);var n=r.apply(this,arguments);return n.mode="hide",this.effect.call(this,n)}}(e.fn.hide),toggle:function(e){return function(t){if(i(t)||typeof t=="boolean")return e.apply(this,arguments);var n=r.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)}}(e.fn.toggle),cssUnit:function(t){var n=this.css(t),r=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(r=[parseFloat(n),t])}),r}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return e===0||e===1?e:-Math.pow(2,8*(e-1))*Math.sin(((e-1)*80-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){var t,n=4;while(e<((t=Math.pow(2,--n))-1)/11);return 1/Math.pow(4,3-n)-7.5625*Math.pow((t*3-2)/22-e,2)}}),e.each(t,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return e<.5?n(e*2)/2:1-n(e*-2+2)/2}})}()}(jQuery),function(e,t){var n=0,r={},i={};r.height=r.paddingTop=r.paddingBottom=r.borderTopWidth=r.borderBottomWidth="hide",i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="show",e.widget("ui.accordion",{version:"1.10.3",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),!t.collapsible&&(t.active===!1||t.active==null)&&(t.active=0),this._processPanels(),t.active<0&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e(),content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this.options.heightStyle!=="content"&&e.css("height","")},_setOption:function(e,t){if(e==="active"){this._activate(t);return}e==="event"&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),e==="collapsible"&&!t&&this.options.active===!1&&this._activate(0),e==="icons"&&(this._destroyIcons(),t&&this._createIcons()),e==="disabled"&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)},_keydown:function(t){if(t.altKey||t.ctrlKey)return;var n=e.ui.keyCode,r=this.headers.length,i=this.headers.index(t.target),s=!1;switch(t.keyCode){case n.RIGHT:case n.DOWN:s=this.headers[(i+1)%r];break;case n.LEFT:case n.UP:s=this.headers[(i-1+r)%r];break;case n.SPACE:case n.ENTER:this._eventHandler(t);break;case n.HOME:s=this.headers[0];break;case n.END:s=this.headers[r-1]}s&&(e(t.target).attr("tabIndex",-1),e(s).attr("tabIndex",0),s.focus(),t.preventDefault())},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),t.active===!1&&t.collapsible===!0||!this.headers.length?(t.active=!1,this.active=e()):t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var t,r=this.options,i=r.heightStyle,s=this.element.parent(),o=this.accordionId="ui-accordion-"+(this.element.attr("id")||++n);this.active=this._findActive(r.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(t){var n=e(this),r=n.attr("id"),i=n.next(),s=i.attr("id");r||(r=o+"-header-"+t,n.attr("id",r)),s||(s=o+"-panel-"+t,i.attr("id",s)),n.attr("aria-controls",s),i.attr("aria-labelledby",r)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(r.event),i==="fill"?(t=s.height(),this.element.siblings(":visible").each(function(){var n=e(this),r=n.css("position");if(r==="absolute"||r==="fixed")return;t-=n.outerHeight(!0)}),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):i==="auto"&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).css("height","").height())}).height(t))},_activate:function(t){var n=this._findActive(t)[0];if(n===this.active[0])return;n=n||this.active[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop})},_findActive:function(t){return typeof t=="number"?this.headers.eq(t):e()},_setupEvents:function(t){var n={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,n),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var n=this.options,r=this.active,i=e(t.currentTarget),s=i[0]===r[0],o=s&&n.collapsible,u=o?e():i.next(),a=r.next(),f={oldHeader:r,oldPanel:a,newHeader:o?e():i,newPanel:u};t.preventDefault();if(s&&!n.collapsible||this._trigger("beforeActivate",t,f)===!1)return;n.active=o?!1:this.headers.index(i),this.active=s?e():i,this._toggle(f),r.removeClass("ui-accordion-header-active ui-state-active"),n.icons&&r.children(".ui-accordion-header-icon").removeClass(n.icons.activeHeader).addClass(n.icons.header),s||(i.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),n.icons&&i.children(".ui-accordion-header-icon").removeClass(n.icons.header).addClass(n.icons.activeHeader),i.next().addClass("ui-accordion-content-active"))},_toggle:function(t){var n=t.newPanel,r=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=n,this.prevHide=r,this.options.animate?this._animate(n,r,t):(r.hide(),n.show(),this._toggleComplete(t)),r.attr({"aria-expanded":"false","aria-hidden":"true"}),r.prev().attr("aria-selected","false"),n.length&&r.length?r.prev().attr("tabIndex",-1):n.length&&this.headers.filter(function(){return e(this).attr("tabIndex")===0}).attr("tabIndex",-1),n.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(e,t,n){var s,o,u,a=this,f=0,l=e.length&&(!t.length||e.index()<t.index()),c=this.options.animate||{},h=l&&c.down||c,p=function(){a._toggleComplete(n)};typeof h=="number"&&(u=h),typeof h=="string"&&(o=h),o=o||h.easing||c.easing,u=u||h.duration||c.duration;if(!t.length)return e.animate(i,u,o,p);if(!e.length)return t.animate(r,u,o,p);s=e.show().outerHeight(),t.animate(r,{duration:u,easing:o,step:function(e,t){t.now=Math.round(e)}}),e.hide().animate(i,{duration:u,easing:o,complete:p,step:function(e,n){n.now=Math.round(e),n.prop!=="height"?f+=n.now:a.options.heightStyle!=="content"&&(n.now=Math.round(s-t.outerHeight()-f),f=0)}})},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}})}(jQuery),function(e,t){var n=0;e.widget("ui.autocomplete",{version:"1.10.3",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,n,r,i=this.element[0].nodeName.toLowerCase(),s=i==="textarea",o=i==="input";this.isMultiLine=s?!0:o?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[s||o?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(i){if(this.element.prop("readOnly")){t=!0,r=!0,n=!0;return}t=!1,r=!1,n=!1;var s=e.ui.keyCode;switch(i.keyCode){case s.PAGE_UP:t=!0,this._move("previousPage",i);break;case s.PAGE_DOWN:t=!0,this._move("nextPage",i);break;case s.UP:t=!0,this._keyEvent("previous",i);break;case s.DOWN:t=!0,this._keyEvent("next",i);break;case s.ENTER:case s.NUMPAD_ENTER:this.menu.active&&(t=!0,i.preventDefault(),this.menu.select(i));break;case s.TAB:this.menu.active&&this.menu.select(i);break;case s.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(i),i.preventDefault());break;default:n=!0,this._searchTimeout(i)}},keypress:function(r){if(t){t=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&r.preventDefault();return}if(n)return;var i=e.ui.keyCode;switch(r.keyCode){case i.PAGE_UP:this._move("previousPage",r);break;case i.PAGE_DOWN:this._move("nextPage",r);break;case i.UP:this._keyEvent("previous",r);break;case i.DOWN:this._keyEvent("next",r)}},input:function(e){if(r){r=!1,e.preventDefault();return}this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){if(this.cancelBlur){delete this.cancelBlur;return}clearTimeout(this.searching),this.close(e),this._change(e)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var n=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(r){r.target!==t.element[0]&&r.target!==n&&!e.contains(n,r.target)&&t.close()})})},menufocus:function(t,n){if(this.isNewMenu){this.isNewMenu=!1;if(t.originalEvent&&/^mouse/.test(t.originalEvent.type)){this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});return}}var r=n.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:r})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(r.value):this.liveRegion.text(r.value)},menuselect:function(e,t){var n=t.item.data("ui-autocomplete-item"),r=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=r,this._delay(function(){this.previous=r,this.selectedItem=n})),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),e==="source"&&this._initSource(),e==="appendTo"&&this.menu.element.appendTo(this._appendTo()),e==="disabled"&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,n,r=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,r){r(e.ui.autocomplete.filter(t,n.term))}):typeof this.options.source=="string"?(n=this.options.source,this.source=function(t,i){r.xhr&&r.xhr.abort(),r.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){i(e)},error:function(){i([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){e=e!=null?e:this._value(),this.term=this._value();if(e.length<this.options.minLength)return this.close(t);if(this._trigger("search",t)===!1)return;return this._search(e)},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,t=++n;return function(r){t===n&&e.__response(r),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return typeof t=="string"?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var n=this.menu.element.empty();this._renderMenu(n,t),this.isNewMenu=!0,this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var r=this;e.each(n,function(e,n){r._renderItemData(t,n)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").append(e("<a>").text(n.label)).appendTo(t)},_move:function(e,t){if(!this.menu.element.is(":visible")){this.search(null,t);return}if(this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)){this._value(this.term),this.menu.blur();return}this.menu[e](t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(e,t),t.preventDefault()}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var r=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return r.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments);if(this.options.disabled||this.cancelSearch)return;e&&e.length?t=this.options.messages.results(e.length):t=this.options.messages.noResults,this.liveRegion.text(t)}})}(jQuery),function(e,t){var n,r,i,s,o="ui-button ui-widget ui-state-default ui-corner-all",u="ui-state-hover ui-state-active ",a="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",f=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},l=function(t){var n=t.name,r=t.form,i=e([]);return n&&(n=n.replace(/'/g,"\\'"),r?i=e(r).find("[name='"+n+"']"):i=e("[name='"+n+"']",t.ownerDocument).filter(function(){return!this.form})),i};e.widget("ui.button",{version:"1.10.3",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,f),typeof this.options.disabled!="boolean"?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,u=this.options,a=this.type==="checkbox"||this.type==="radio",c=a?"":"ui-state-active",h="ui-state-focus";u.label===null&&(u.label=this.type==="input"?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){if(u.disabled)return;this===n&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){if(u.disabled)return;e(this).removeClass(c)}).bind("click"+this.eventNamespace,function(e){u.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){t.buttonElement.addClass(h)}).bind("blur"+this.eventNamespace,function(){t.buttonElement.removeClass(h)}),a&&(this.element.bind("change"+this.eventNamespace,function(){if(s)return;t.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(e){if(u.disabled)return;s=!1,r=e.pageX,i=e.pageY}).bind("mouseup"+this.eventNamespace,function(e){if(u.disabled)return;if(r!==e.pageX||i!==e.pageY)s=!0})),this.type==="checkbox"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(u.disabled||s)return!1}):this.type==="radio"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(u.disabled||s)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var n=t.element[0];l(n).not(n).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(u.disabled)return!1;e(this).addClass("ui-state-active"),n=this,t.document.one("mouseup",function(){n=null})}).bind("mouseup"+this.eventNamespace,function(){if(u.disabled)return!1;e(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){if(u.disabled)return!1;(t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",u.disabled),this._resetButton()},_determineButtonType:function(){var e,t,n;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button",this.type==="checkbox"||this.type==="radio"?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),n=this.element.is(":checked"),n&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",n)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" "+u+" "+a).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){this._super(e,t);if(e==="disabled"){t?this.element.prop("disabled",!0):this.element.prop("disabled",!1);return}this._resetButton()},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),this.type==="radio"?l(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label);return}var t=this.buttonElement.removeClass(a),n=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),r=this.options.icons,i=r.primary&&r.secondary,s=[];r.primary||r.secondary?(this.options.text&&s.push("ui-button-text-icon"+(i?"s":r.primary?"-primary":"-secondary")),r.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+r.primary+"'></span>"),r.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+r.secondary+"'></span>"),this.options.text||(s.push(i?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(n)))):s.push("ui-button-text-only"),t.addClass(s.join(" "))}}),e.widget("ui.buttonset",{version:"1.10.3",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){e==="disabled"&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t=this.element.css("direction")==="rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(e,t){function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.dpDiv=s(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function s(t){var n="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(n,"mouseout",function(){e(this).removeClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&e(this).removeClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(n,"mouseover",function(){e.datepicker._isDisabledDatepicker(r.inline?t.parent()[0]:r.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&e(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&e(this).addClass("ui-datepicker-next-hover"))})}function o(t,n){e.extend(t,n);for(var r in n)n[r]==null&&(t[r]=n[r]);return t}e.extend(e.ui,{datepicker:{version:"1.10.3"}});var n="datepicker",r;e.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return o(this._defaults,e||{}),this},_attachDatepicker:function(t,n){var r,i,s;r=t.nodeName.toLowerCase(),i=r==="div"||r==="span",t.id||(this.uuid+=1,t.id="dp"+this.uuid),s=this._newInst(e(t),i),s.settings=e.extend({},n||{}),r==="input"?this._connectDatepicker(t,s):i&&this._inlineDatepicker(t,s)},_newInst:function(t,n){var r=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:r,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:n,dpDiv:n?s(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,r){var i=e(t);r.append=e([]),r.trigger=e([]);if(i.hasClass(this.markerClassName))return;this._attachments(i,r),i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(r),e.data(t,n,r),r.settings.disabled&&this._disableDatepicker(t)},_attachments:function(t,n){var r,i,s,o=this._get(n,"appendText"),u=this._get(n,"isRTL");n.append&&n.append.remove(),o&&(n.append=e("<span class='"+this._appendClass+"'>"+o+"</span>"),t[u?"before":"after"](n.append)),t.unbind("focus",this._showDatepicker),n.trigger&&n.trigger.remove(),r=this._get(n,"showOn"),(r==="focus"||r==="both")&&t.focus(this._showDatepicker);if(r==="button"||r==="both")i=this._get(n,"buttonText"),s=this._get(n,"buttonImage"),n.trigger=e(this._get(n,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:s,alt:i,title:i}):e("<button type='button'></button>").addClass(this._triggerClass).html(s?e("<img/>").attr({src:s,alt:i,title:i}):i)),t[u?"before":"after"](n.trigger),n.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1})},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,n,r,i,s=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){n=0,r=0;for(i=0;i<e.length;i++)e[i].length>n&&(n=e[i].length,r=i);return r},s.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),s.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-s.getDay())),e.input.attr("size",this._formatDate(e,s).length)}},_inlineDatepicker:function(t,r){var i=e(t);if(i.hasClass(this.markerClassName))return;i.addClass(this.markerClassName).append(r.dpDiv),e.data(t,n,r),this._setDate(r,this._getDefaultDate(r),!0),this._updateDatepicker(r),this._updateAlternate(r),r.settings.disabled&&this._disableDatepicker(t),r.dpDiv.css("display","block")},_dialogDatepicker:function(t,r,i,s,u){var a,f,l,c,h,p=this._dialogInst;return p||(this.uuid+=1,a="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+a+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),p=this._dialogInst=this._newInst(this._dialogInput,!1),p.settings={},e.data(this._dialogInput[0],n,p)),o(p.settings,s||{}),r=r&&r.constructor===Date?this._formatDate(p,r):r,this._dialogInput.val(r),this._pos=u?u.length?u:[u.pageX,u.pageY]:null,this._pos||(f=document.documentElement.clientWidth,l=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,h=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[f/2-100+c,l/2-150+h]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],n,p),this},_destroyDatepicker:function(t){var r,i=e(t),s=e.data(t,n);if(!i.hasClass(this.markerClassName))return;r=t.nodeName.toLowerCase(),e.removeData(t,n),r==="input"?(s.append.remove(),s.trigger.remove(),i.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(r==="div"||r==="span")&&i.removeClass(this.markerClassName).empty()},_enableDatepicker:function(t){var r,i,s=e(t),o=e.data(t,n);if(!s.hasClass(this.markerClassName))return;r=t.nodeName.toLowerCase();if(r==="input")t.disabled=!1,o.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if(r==="div"||r==="span")i=s.children("."+this._inlineClass),i.children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1);this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e})},_disableDatepicker:function(t){var r,i,s=e(t),o=e.data(t,n);if(!s.hasClass(this.markerClassName))return;r=t.nodeName.toLowerCase();if(r==="input")t.disabled=!0,o.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if(r==="div"||r==="span")i=s.children("."+this._inlineClass),i.children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0);this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,n)}catch(r){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(n,r,i){var s,u,a,f,l=this._getInst(n);if(arguments.length===2&&typeof r=="string")return r==="defaults"?e.extend({},e.datepicker._defaults):l?r==="all"?e.extend({},l.settings):this._get(l,r):null;s=r||{},typeof r=="string"&&(s={},s[r]=i),l&&(this._curInst===l&&this._hideDatepicker(),u=this._getDateDatepicker(n,!0),a=this._getMinMaxDate(l,"min"),f=this._getMinMaxDate(l,"max"),o(l.settings,s),a!==null&&s.dateFormat!==t&&s.minDate===t&&(l.settings.minDate=this._formatDate(l,a)),f!==null&&s.dateFormat!==t&&s.maxDate===t&&(l.settings.maxDate=this._formatDate(l,f)),"disabled"in s&&(s.disabled?this._disableDatepicker(n):this._enableDatepicker(n)),this._attachments(e(n),l),this._autoSize(l),this._setDate(l,u),this._updateAlternate(l),this._updateDatepicker(l))},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(t){var n,r,i,s=e.datepicker._getInst(t.target),o=!0,u=s.dpDiv.is(".ui-datepicker-rtl");s._keyEvent=!0;if(e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),o=!1;break;case 13:return i=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",s.dpDiv),i[0]&&e.datepicker._selectDay(t.target,s.selectedMonth,s.selectedYear,i[0]),n=e.datepicker._get(s,"onSelect"),n?(r=e.datepicker._formatDate(s),n.apply(s.input?s.input[0]:null,[r,s])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,u?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,u?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1}else t.keyCode===36&&t.ctrlKey?e.datepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var n,r,i=e.datepicker._getInst(t.target);if(e.datepicker._get(i,"constrainInput"))return n=e.datepicker._possibleChars(e.datepicker._get(i,"dateFormat")),r=String.fromCharCode(t.charCode==null?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||r<" "||!n||n.indexOf(r)>-1},_doKeyUp:function(t){var n,r=e.datepicker._getInst(t.target);if(r.input.val()!==r.lastVal)try{n=e.datepicker.parseDate(e.datepicker._get(r,"dateFormat"),r.input?r.input.val():null,e.datepicker._getFormatConfig(r)),n&&(e.datepicker._setDateFromField(r),e.datepicker._updateAlternate(r),e.datepicker._updateDatepicker(r))}catch(i){}return!0},_showDatepicker:function(t){t=t.target||t,t.nodeName.toLowerCase()!=="input"&&(t=e("input",t.parentNode)[0]);if(e.datepicker._isDisabledDatepicker(t)||e.datepicker._lastInput===t)return;var n,r,i,s,u,a,f;n=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==n&&(e.datepicker._curInst.dpDiv.stop(!0,!0),n&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),r=e.datepicker._get(n,"beforeShow"),i=r?r.apply(t,[t,n]):{};if(i===!1)return;o(n.settings,i),n.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(n),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),s=!1,e(t).parents().each(function(){return s|=e(this).css("position")==="fixed",!s}),u={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,n.dpDiv.empty(),n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(n),u=e.datepicker._checkOffset(n,u,s),n.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":s?"fixed":"absolute",display:"none",left:u.left+"px",top:u.top+"px"}),n.inline||(a=e.datepicker._get(n,"showAnim"),f=e.datepicker._get(n,"duration"),n.dpDiv.zIndex(e(t).zIndex()+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[a]?n.dpDiv.show(a,e.datepicker._get(n,"showOptions"),f):n.dpDiv[a||"show"](a?f:null),e.datepicker._shouldFocusInput(n)&&n.input.focus(),e.datepicker._curInst=n)},_updateDatepicker:function(t){this.maxRows=4,r=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var n,i=this._getNumberOfMonths(t),s=i[1],o=17;t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),s>1&&t.dpDiv.addClass("ui-datepicker-multi-"+s).css("width",o*s+"em"),t.dpDiv[(i[0]!==1||i[1]!==1?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(n=t.yearshtml,setTimeout(function(){n===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),n=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,n,r){var i=t.dpDiv.outerWidth(),s=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,u=t.input?t.input.outerHeight():0,a=document.documentElement.clientWidth+(r?0:e(document).scrollLeft()),f=document.documentElement.clientHeight+(r?0:e(document).scrollTop());return n.left-=this._get(t,"isRTL")?i-o:0,n.left-=r&&n.left===t.input.offset().left?e(document).scrollLeft():0,n.top-=r&&n.top===t.input.offset().top+u?e(document).scrollTop():0,n.left-=Math.min(n.left,n.left+i>a&&a>i?Math.abs(n.left+i-a):0),n.top-=Math.min(n.top,n.top+s>f&&f>s?Math.abs(s+u):0),n},_findPos:function(t){var n,r=this._getInst(t),i=this._get(r,"isRTL");while(t&&(t.type==="hidden"||t.nodeType!==1||e.expr.filters.hidden(t)))t=t[i?"previousSibling":"nextSibling"];return n=e(t).offset(),[n.left,n.top]},_hideDatepicker:function(t){var r,i,s,o,u=this._curInst;if(!u||t&&u!==e.data(t,n))return;this._datepickerShowing&&(r=this._get(u,"showAnim"),i=this._get(u,"duration"),s=function(){e.datepicker._tidyDialog(u)},e.effects&&(e.effects.effect[r]||e.effects[r])?u.dpDiv.hide(r,e.datepicker._get(u,"showOptions"),i,s):u.dpDiv[r==="slideDown"?"slideUp":r==="fadeIn"?"fadeOut":"hide"](r?i:null,s),r||s(),this._datepickerShowing=!1,o=this._get(u,"onClose"),o&&o.apply(u.input?u.input[0]:null,[u.input?u.input.val():"",u]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(!e.datepicker._curInst)return;var n=e(t.target),r=e.datepicker._getInst(n[0]);(n[0].id!==e.datepicker._mainDivId&&n.parents("#"+e.datepicker._mainDivId).length===0&&!n.hasClass(e.datepicker.markerClassName)&&!n.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||n.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==r)&&e.datepicker._hideDatepicker()},_adjustDate:function(t,n,r){var i=e(t),s=this._getInst(i[0]);if(this._isDisabledDatepicker(i[0]))return;this._adjustInstDate(s,n+(r==="M"?this._get(s,"showCurrentAtPos"):0),r),this._updateDatepicker(s)},_gotoToday:function(t){var n,r=e(t),i=this._getInst(r[0]);this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(n=new Date,i.selectedDay=n.getDate(),i.drawMonth=i.selectedMonth=n.getMonth(),i.drawYear=i.selectedYear=n.getFullYear()),this._notifyChange(i),this._adjustDate(r)},_selectMonthYear:function(t,n,r){var i=e(t),s=this._getInst(i[0]);s["selected"+(r==="M"?"Month":"Year")]=s["draw"+(r==="M"?"Month":"Year")]=parseInt(n.options[n.selectedIndex].value,10),this._notifyChange(s),this._adjustDate(i)},_selectDay:function(t,n,r,i){var s,o=e(t);if(e(i).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0]))return;s=this._getInst(o[0]),s.selectedDay=s.currentDay=e("a",i).html(),s.selectedMonth=s.currentMonth=n,s.selectedYear=s.currentYear=r,this._selectDate(t,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear))},_clearDate:function(t){var n=e(t);this._selectDate(n,"")},_selectDate:function(t,n){var r,i=e(t),s=this._getInst(i[0]);n=n!=null?n:this._formatDate(s),s.input&&s.input.val(n),this._updateAlternate(s),r=this._get(s,"onSelect"),r?r.apply(s.input?s.input[0]:null,[n,s]):s.input&&s.input.trigger("change"),s.inline?this._updateDatepicker(s):(this._hideDatepicker(),this._lastInput=s.input[0],typeof s.input[0]!="object"&&s.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var n,r,i,s=this._get(t,"altField");s&&(n=this._get(t,"altFormat")||this._get(t,"dateFormat"),r=this._getDate(t),i=this.formatDate(n,r,this._getFormatConfig(t)),e(s).each(function(){e(this).val(i)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t,n=new Date(e.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),t=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((t-n)/864e5)/7)+1},parseDate:function(t,n,r){if(t==null||n==null)throw"Invalid arguments";n=typeof n=="object"?n.toString():n+"";if(n==="")return null;var i,s,o,u=0,a=(r?r.shortYearCutoff:null)||this._defaults.shortYearCutoff,f=typeof a!="string"?a:(new Date).getFullYear()%100+parseInt(a,10),l=(r?r.dayNamesShort:null)||this._defaults.dayNamesShort,c=(r?r.dayNames:null)||this._defaults.dayNames,h=(r?r.monthNamesShort:null)||this._defaults.monthNamesShort,p=(r?r.monthNames:null)||this._defaults.monthNames,d=-1,v=-1,m=-1,g=-1,y=!1,b,w=function(e){var n=i+1<t.length&&t.charAt(i+1)===e;return n&&i++,n},E=function(e){var t=w(e),r=e==="@"?14:e==="!"?20:e==="y"&&t?4:e==="o"?3:2,i=new RegExp("^\\d{1,"+r+"}"),s=n.substring(u).match(i);if(!s)throw"Missing number at position "+u;return u+=s[0].length,parseInt(s[0],10)},S=function(t,r,i){var s=-1,o=e.map(w(t)?i:r,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});e.each(o,function(e,t){var r=t[1];if(n.substr(u,r.length).toLowerCase()===r.toLowerCase())return s=t[0],u+=r.length,!1});if(s!==-1)return s+1;throw"Unknown name at position "+u},x=function(){if(n.charAt(u)!==t.charAt(i))throw"Unexpected literal at position "+u;u++};for(i=0;i<t.length;i++)if(y)t.charAt(i)==="'"&&!w("'")?y=!1:x();else switch(t.charAt(i)){case"d":m=E("d");break;case"D":S("D",l,c);break;case"o":g=E("o");break;case"m":v=E("m");break;case"M":v=S("M",h,p);break;case"y":d=E("y");break;case"@":b=new Date(E("@")),d=b.getFullYear(),v=b.getMonth()+1,m=b.getDate();break;case"!":b=new Date((E("!")-this._ticksTo1970)/1e4),d=b.getFullYear(),v=b.getMonth()+1,m=b.getDate();break;case"'":w("'")?x():y=!0;break;default:x()}if(u<n.length){o=n.substr(u);if(!/^\s+/.test(o))throw"Extra/unparsed characters found in date: "+o}d===-1?d=(new Date).getFullYear():d<100&&(d+=(new Date).getFullYear()-(new Date).getFullYear()%100+(d<=f?0:-100));if(g>-1){v=1,m=g;do{s=this._getDaysInMonth(d,v-1);if(m<=s)break;v++,m-=s}while(!0)}b=this._daylightSavingAdjust(new Date(d,v-1,m));if(b.getFullYear()!==d||b.getMonth()+1!==v||b.getDate()!==m)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1e7,formatDate:function(e,t,n){if(!t)return"";var r,i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,s=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,u=(n?n.monthNames:null)||this._defaults.monthNames,a=function(t){var n=r+1<e.length&&e.charAt(r+1)===t;return n&&r++,n},f=function(e,t,n){var r=""+t;if(a(e))while(r.length<n)r="0"+r;return r},l=function(e,t,n,r){return a(e)?r[t]:n[t]},c="",h=!1;if(t)for(r=0;r<e.length;r++)if(h)e.charAt(r)==="'"&&!a("'")?h=!1:c+=e.charAt(r);else switch(e.charAt(r)){case"d":c+=f("d",t.getDate(),2);break;case"D":c+=l("D",t.getDay(),i,s);break;case"o":c+=f("o",Math.round(((new Date(t.getFullYear(),t.getMonth(),t.getDate())).getTime()-(new Date(t.getFullYear(),0,0)).getTime())/864e5),3);break;case"m":c+=f("m",t.getMonth()+1,2);break;case"M":c+=l("M",t.getMonth(),o,u);break;case"y":c+=a("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":c+=t.getTime();break;case"!":c+=t.getTime()*1e4+this._ticksTo1970;break;case"'":a("'")?c+="'":h=!0;break;default:c+=e.charAt(r)}return c},_possibleChars:function(e){var t,n="",r=!1,i=function(n){var r=t+1<e.length&&e.charAt(t+1)===n;return r&&t++,r};for(t=0;t<e.length;t++)if(r)e.charAt(t)==="'"&&!i("'")?r=!1:n+=e.charAt(t);else switch(e.charAt(t)){case"d":case"m":case"y":case"@":n+="0123456789";break;case"D":case"M":return null;case"'":i("'")?n+="'":r=!0;break;default:n+=e.charAt(t)}return n},_get:function(e,n){return e.settings[n]!==t?e.settings[n]:this._defaults[n]},_setDateFromField:function(e,t){if(e.input.val()===e.lastVal)return;var n=this._get(e,"dateFormat"),r=e.lastVal=e.input?e.input.val():null,i=this._getDefaultDate(e),s=i,o=this._getFormatConfig(e);try{s=this.parseDate(n,r,o)||i}catch(u){r=t?"":r}e.selectedDay=s.getDate(),e.drawMonth=e.selectedMonth=s.getMonth(),e.drawYear=e.selectedYear=s.getFullYear(),e.currentDay=r?s.getDate():0,e.currentMonth=r?s.getMonth():0,e.currentYear=r?s.getFullYear():0,this._adjustInstDate(e)},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,n,r){var i=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},s=function(n){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),n,e.datepicker._getFormatConfig(t))}catch(r){}var i=(n.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,s=i.getFullYear(),o=i.getMonth(),u=i.getDate(),a=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,f=a.exec(n);while(f){switch(f[2]||"d"){case"d":case"D":u+=parseInt(f[1],10);break;case"w":case"W":u+=parseInt(f[1],10)*7;break;case"m":case"M":o+=parseInt(f[1],10),u=Math.min(u,e.datepicker._getDaysInMonth(s,o));break;case"y":case"Y":s+=parseInt(f[1],10),u=Math.min(u,e.datepicker._getDaysInMonth(s,o))}f=a.exec(n)}return new Date(s,o,u)},o=n==null||n===""?r:typeof n=="string"?s(n):typeof n=="number"?isNaN(n)?r:i(n):new Date(n.getTime());return o=o&&o.toString()==="Invalid Date"?r:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var r=!t,i=e.selectedMonth,s=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),(i!==e.selectedMonth||s!==e.selectedYear)&&!n&&this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(r?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&e.input.val()===""?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var n=this._get(t,"stepMonths"),r="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(r,-n,"M")},next:function(){e.datepicker._adjustDate(r,+n,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(r)},selectDay:function(){return e.datepicker._selectDay(r,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(r,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(r,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q=new Date,R=this._daylightSavingAdjust(new Date(q.getFullYear(),q.getMonth(),q.getDate())),U=this._get(e,"isRTL"),z=this._get(e,"showButtonPanel"),W=this._get(e,"hideIfNoPrevNext"),X=this._get(e,"navigationAsDateFormat"),V=this._getNumberOfMonths(e),$=this._get(e,"showCurrentAtPos"),J=this._get(e,"stepMonths"),K=V[0]!==1||V[1]!==1,Q=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),G=this._getMinMaxDate(e,"min"),Y=this._getMinMaxDate(e,"max"),Z=e.drawMonth-$,et=e.drawYear;Z<0&&(Z+=12,et--);if(Y){t=this._daylightSavingAdjust(new Date(Y.getFullYear(),Y.getMonth()-V[0]*V[1]+1,Y.getDate())),t=G&&t<G?G:t;while(this._daylightSavingAdjust(new Date(et,Z,1))>t)Z--,Z<0&&(Z=11,et--)}e.drawMonth=Z,e.drawYear=et,n=this._get(e,"prevText"),n=X?this.formatDate(n,this._daylightSavingAdjust(new Date(et,Z-J,1)),this._getFormatConfig(e)):n,r=this._canAdjustMonth(e,-1,et,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+n+"</span></a>":W?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+n+"</span></a>",i=this._get(e,"nextText"),i=X?this.formatDate(i,this._daylightSavingAdjust(new Date(et,Z+J,1)),this._getFormatConfig(e)):i,s=this._canAdjustMonth(e,1,et,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+i+"</span></a>":W?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+i+"</span></a>",o=this._get(e,"currentText"),u=this._get(e,"gotoCurrent")&&e.currentDay?Q:R,o=X?this.formatDate(o,u,this._getFormatConfig(e)):o,a=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",f=z?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(U?a:"")+(this._isInRange(e,u)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(U?"":a)+"</div>":"",l=parseInt(this._get(e,"firstDay"),10),l=isNaN(l)?0:l,c=this._get(e,"showWeek"),h=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),d=this._get(e,"monthNames"),v=this._get(e,"monthNamesShort"),m=this._get(e,"beforeShowDay"),g=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),w="",E;for(S=0;S<V[0];S++){x="",this.maxRows=4;for(T=0;T<V[1];T++){N=this._daylightSavingAdjust(new Date(et,Z,e.selectedDay)),C=" ui-corner-all",k="";if(K){k+="<div class='ui-datepicker-group";if(V[1]>1)switch(T){case 0:k+=" ui-datepicker-group-first",C=" ui-corner-"+(U?"right":"left");break;case V[1]-1:k+=" ui-datepicker-group-last",C=" ui-corner-"+(U?"left":"right");break;default:k+=" ui-datepicker-group-middle",C=""}k+="'>"}k+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+C+"'>"+(/all|left/.test(C)&&S===0?U?s:r:"")+(/all|right/.test(C)&&S===0?U?r:s:"")+this._generateMonthYearHeader(e,Z,et,G,Y,S>0||T>0,d,v)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",L=c?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"";for(E=0;E<7;E++)A=(E+l)%7,L+="<th"+((E+l+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+h[A]+"'>"+p[A]+"</span></th>";k+=L+"</tr></thead><tbody>",O=this._getDaysInMonth(et,Z),et===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,O)),M=(this._getFirstDayOfMonth(et,Z)-l+7)%7,_=Math.ceil((M+O)/7),D=K?this.maxRows>_?this.maxRows:_:_,this.maxRows=D,P=this._daylightSavingAdjust(new Date(et,Z,1-M));for(H=0;H<D;H++){k+="<tr>",B=c?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(P)+"</td>":"";for(E=0;E<7;E++)j=m?m.apply(e.input?e.input[0]:null,[P]):[!0,""],F=P.getMonth()!==Z,I=F&&!y||!j[0]||G&&P<G||Y&&P>Y,B+="<td class='"+((E+l+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(P.getTime()===N.getTime()&&Z===e.selectedMonth&&e._keyEvent||b.getTime()===P.getTime()&&b.getTime()===N.getTime()?" "+this._dayOverClass:"")+(I?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!g?"":" "+j[1]+(P.getTime()===Q.getTime()?" "+this._currentClass:"")+(P.getTime()===R.getTime()?" ui-datepicker-today":""))+"'"+((!F||g)&&j[2]?" title='"+j[2].replace(/'/g,"&#39;")+"'":"")+(I?"":" data-handler='selectDay' data-event='click' data-month='"+P.getMonth()+"' data-year='"+P.getFullYear()+"'")+">"+(F&&!g?"&#xa0;":I?"<span class='ui-state-default'>"+P.getDate()+"</span>":"<a class='ui-state-default"+(P.getTime()===R.getTime()?" ui-state-highlight":"")+(P.getTime()===Q.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+P.getDate()+"</a>")+"</td>",P.setDate(P.getDate()+1),P=this._daylightSavingAdjust(P);k+=B+"</tr>"}Z++,Z>11&&(Z=0,et++),k+="</tbody></table>"+(K?"</div>"+(V[0]>0&&T===V[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=k}w+=x}return w+=f,e._keyEvent=!1,w},_generateMonthYearHeader:function(e,t,n,r,i,s,o,u){var a,f,l,c,h,p,d,v,m=this._get(e,"changeMonth"),g=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",w="";if(s||!m)w+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{a=r&&r.getFullYear()===n,f=i&&i.getFullYear()===n,w+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";for(l=0;l<12;l++)(!a||l>=r.getMonth())&&(!f||l<=i.getMonth())&&(w+="<option value='"+l+"'"+(l===t?" selected='selected'":"")+">"+u[l]+"</option>");w+="</select>"}y||(b+=w+(s||!m||!g?"&#xa0;":""));if(!e.yearshtml){e.yearshtml="";if(s||!g)b+="<span class='ui-datepicker-year'>"+n+"</span>";else{c=this._get(e,"yearRange").split(":"),h=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?n+parseInt(e.substring(1),10):e.match(/[+\-].*/)?h+parseInt(e,10):parseInt(e,10);return isNaN(t)?h:t},d=p(c[0]),v=Math.max(d,p(c[1]||"")),d=r?Math.max(d,r.getFullYear()):d,v=i?Math.min(v,i.getFullYear()):v,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";for(;d<=v;d++)e.yearshtml+="<option value='"+d+"'"+(d===n?" selected='selected'":"")+">"+d+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}}return b+=this._get(e,"yearSuffix"),y&&(b+=(s||!m||!g?"&#xa0;":"")+w),b+="</div>",b},_adjustInstDate:function(e,t,n){var r=e.drawYear+(n==="Y"?t:0),i=e.drawMonth+(n==="M"?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(r,i))+(n==="D"?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(r,i,s)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),(n==="M"||n==="Y")&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),i=n&&t<n?n:t;return r&&i>r?r:i},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return t==null?[1,1]:typeof t=="number"?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return(new Date(e,t,1)).getDay()},_canAdjustMonth:function(e,t,n,r){var i=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(n,r+(t<0?t:i[0]*i[1]),1));return t<0&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var n,r,i=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),o=null,u=null,a=this._get(e,"yearRange");return a&&(n=a.split(":"),r=(new Date).getFullYear(),o=parseInt(n[0],10),u=parseInt(n[1],10),n[0].match(/[+\-].*/)&&(o+=r),n[1].match(/[+\-].*/)&&(u+=r)),(!i||t.getTime()>=i.getTime())&&(!s||t.getTime()<=s.getTime())&&(!o||t.getFullYear()>=o)&&(!u||t.getFullYear()<=u)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t=typeof t!="string"?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,r){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var i=t?typeof t=="object"?t:this._daylightSavingAdjust(new Date(r,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),i,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),e("#"+e.datepicker._mainDivId).length===0&&e("body").append(e.datepicker.dpDiv);var n=Array.prototype.slice.call(arguments,1);return typeof t!="string"||t!=="isDisabled"&&t!=="getDate"&&t!=="widget"?t==="option"&&arguments.length===2&&typeof arguments[1]=="string"?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n)):this.each(function(){typeof t=="string"?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(n)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n))},e.datepicker=new i,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.10.3"}(jQuery),function(e,t){var n={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},r={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.10.3",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var n=e(this).css(t).offset().top;n<0&&e(this).css("top",t.top-n)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var n=this;if(!this._isOpen||this._trigger("beforeClose",t)===!1)return;this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||e(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){n._trigger("close",t)})},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var n=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return n&&!t&&this._trigger("focus",e),n},open:function(){var t=this;if(this._isOpen){this._moveToTop()&&this._focusTabbable();return}this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._trigger("open")},_focusTabbable:function(){var e=this.element.find("[autofocus]");e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function n(){var t=this.document[0].activeElement,n=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);n||this._focusTabbable()}t.preventDefault(),n.call(this),this._delay(n)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE){t.preventDefault(),this.close(t);return}if(t.keyCode!==e.ui.keyCode.TAB)return;var n=this.uiDialog.find(":tabbable"),r=n.filter(":first"),i=n.filter(":last");t.target!==i[0]&&t.target!==this.uiDialog[0]||!!t.shiftKey?(t.target===r[0]||t.target===this.uiDialog[0])&&t.shiftKey&&(i.focus(1),t.preventDefault()):(r.focus(1),t.preventDefault())},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,n=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty();if(e.isEmptyObject(n)||e.isArray(n)&&!n.length){this.uiDialog.removeClass("ui-dialog-buttons");return}e.each(n,function(n,r){var i,s;r=e.isFunction(r)?{click:r,text:n}:r,r=e.extend({type:"button"},r),i=r.click,r.click=function(){i.apply(t.element[0],arguments)},s={icons:r.icons,text:r.showText},delete r.icons,delete r.showText,e("<button></button>",r).button(s).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)},_makeDraggable:function(){function r(e){return{position:e.position,offset:e.offset}}var t=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,i){e(this).addClass("ui-dialog-dragging"),t._blockFrames(),t._trigger("dragStart",n,r(i))},drag:function(e,n){t._trigger("drag",e,r(n))},stop:function(i,s){n.position=[s.position.left-t.document.scrollLeft(),s.position.top-t.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),t._unblockFrames(),t._trigger("dragStop",i,r(s))}})},_makeResizable:function(){function o(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var t=this,n=this.options,r=n.resizable,i=this.uiDialog.css("position"),s=typeof r=="string"?r:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:s,start:function(n,r){e(this).addClass("ui-dialog-resizing"),t._blockFrames(),t._trigger("resizeStart",n,o(r))},resize:function(e,n){t._trigger("resize",e,o(n))},stop:function(r,i){n.height=e(this).height(),n.width=e(this).width(),e(this).removeClass("ui-dialog-resizing"),t._unblockFrames(),t._trigger("resizeStop",r,o(i))}}).css("position",i)},_minHeight:function(){var e=this.options;return e.height==="auto"?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var i=this,s=!1,o={};e.each(t,function(e,t){i._setOption(e,t),e in n&&(s=!0),e in r&&(o[e]=t)}),s&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(e,t){var n,r,i=this.uiDialog;e==="dialogClass"&&i.removeClass(this.options.dialogClass).addClass(t);if(e==="disabled")return;this._super(e,t),e==="appendTo"&&this.uiDialog.appendTo(this._appendTo()),e==="buttons"&&this._createButtons(),e==="closeText"&&this.uiDialogTitlebarClose.button({label:""+t}),e==="draggable"&&(n=i.is(":data(ui-draggable)"),n&&!t&&i.draggable("destroy"),!n&&t&&this._makeDraggable()),e==="position"&&this._position(),e==="resizable"&&(r=i.is(":data(ui-resizable)"),r&&!t&&i.resizable("destroy"),r&&typeof t=="string"&&i.resizable("option","handles",t),!r&&t!==!1&&this._makeResizable()),e==="title"&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title"))},_size:function(){var e,t,n,r=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),r.minWidth>r.width&&(r.width=r.minWidth),e=this.uiDialog.css({height:"auto",width:r.width}).outerHeight(),t=Math.max(0,r.minHeight-e),n=typeof r.maxHeight=="number"?Math.max(0,r.maxHeight-e):"none",r.height==="auto"?this.element.css({minHeight:t,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,r.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return e(t.target).closest(".ui-dialog").length?!0:!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(!this.options.modal)return;var t=this,n=this.widgetFullName;e.ui.dialog.overlayInstances||this._delay(function(){e.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(r){t._allowInteraction(r)||(r.preventDefault(),e(".ui-dialog:visible:last .ui-dialog-content").data(n)._focusTabbable())})}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),e.ui.dialog.overlayInstances++},_destroyOverlay:function(){if(!this.options.modal)return;this.overlay&&(e.ui.dialog.overlayInstances--,e.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),e.ui.dialog.overlayInstances=0,e.uiBackCompat!==!1&&e.widget("ui.dialog",e.ui.dialog,{_position:function(){var t=this.options.position,n=[],r=[0,0],i;if(t){if(typeof t=="string"||typeof t=="object"&&"0"in t)n=t.split?t.split(" "):[t[0],t[1]],n.length===1&&(n[1]=n[0]),e.each(["left","top"],function(e,t){+n[e]===n[e]&&(r[e]=n[e],n[e]=t)}),t={my:n[0]+(r[0]<0?r[0]:"+"+r[0])+" "+n[1]+(r[1]<0?r[1]:"+"+r[1]),at:n.join(" ")};t=e.extend({},e.ui.dialog.prototype.options.position,t)}else t=e.ui.dialog.prototype.options.position;i=this.uiDialog.is(":visible"),i||this.uiDialog.show(),this.uiDialog.position(t),i||this.uiDialog.hide()}})}(jQuery),function(e,t){var n=/up|down|vertical/,r=/up|left|vertical|horizontal/;e.effects.effect.blind=function(t,i){var s=e(this),o=["position","top","bottom","left","right","height","width"],u=e.effects.setMode(s,t.mode||"hide"),a=t.direction||"up",f=n.test(a),l=f?"height":"width",c=f?"top":"left",h=r.test(a),p={},d=u==="show",v,m,g;s.parent().is(".ui-effects-wrapper")?e.effects.save(s.parent(),o):e.effects.save(s,o),s.show(),v=e.effects.createWrapper(s).css({overflow:"hidden"}),m=v[l](),g=parseFloat(v.css(c))||0,p[l]=d?m:0,h||(s.css(f?"bottom":"right",0).css(f?"top":"left","auto").css({position:"absolute"}),p[c]=d?g:m+g),d&&(v.css(l,0),h||v.css(c,g+m)),v.animate(p,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){u==="hide"&&s.hide(),e.effects.restore(s,o),e.effects.removeWrapper(s),i()}})}}(jQuery),function(e,t){e.effects.effect.bounce=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"effect"),o=s==="hide",u=s==="show",a=t.direction||"up",f=t.distance,l=t.times||5,c=l*2+(u||o?1:0),h=t.duration/c,p=t.easing,d=a==="up"||a==="down"?"top":"left",v=a==="up"||a==="left",m,g,y,b=r.queue(),w=b.length;(u||o)&&i.push("opacity"),e.effects.save(r,i),r.show(),e.effects.createWrapper(r),f||(f=r[d==="top"?"outerHeight":"outerWidth"]()/3),u&&(y={opacity:1},y[d]=0,r.css("opacity",0).css(d,v?-f*2:f*2).animate(y,h,p)),o&&(f/=Math.pow(2,l-1)),y={},y[d]=0;for(m=0;m<l;m++)g={},g[d]=(v?"-=":"+=")+f,r.animate(g,h,p).animate(y,h,p),f=o?f*2:f/2;o&&(g={opacity:0},g[d]=(v?"-=":"+=")+f,r.animate(g,h,p)),r.queue(function(){o&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}),w>1&&b.splice.apply(b,[1,0].concat(b.splice(w,c+1))),r.dequeue()}}(jQuery),function(e,t){e.effects.effect.clip=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=t.direction||"vertical",a=u==="vertical",f=a?"height":"width",l=a?"top":"left",c={},h,p,d;e.effects.save(r,i),r.show(),h=e.effects.createWrapper(r).css({overflow:"hidden"}),p=r[0].tagName==="IMG"?h:r,d=p[f](),o&&(p.css(f,0),p.css(l,d/2)),c[f]=o?d:0,c[l]=o?0:d/2,p.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){o||r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}}(jQuery),function(e,t){e.effects.effect.drop=function(t,n){var r=e(this),i=["position","top","bottom","left","right","opacity","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=t.direction||"left",a=u==="up"||u==="down"?"top":"left",f=u==="up"||u==="left"?"pos":"neg",l={opacity:o?1:0},c;e.effects.save(r,i),r.show(),e.effects.createWrapper(r),c=t.distance||r[a==="top"?"outerHeight":"outerWidth"](!0)/2,o&&r.css("opacity",0).css(a,f==="pos"?-c:c),l[a]=(o?f==="pos"?"+=":"-=":f==="pos"?"-=":"+=")+c,r.animate(l,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}}(jQuery),function(e,t){e.effects.effect.explode=function(t,n){function y(){c.push(this),c.length===r*i&&b()}function b(){s.css({visibility:"visible"}),e(c).remove(),u||s.hide(),n()}var r=t.pieces?Math.round(Math.sqrt(t.pieces)):3,i=r,s=e(this),o=e.effects.setMode(s,t.mode||"hide"),u=o==="show",a=s.show().css("visibility","hidden").offset(),f=Math.ceil(s.outerWidth()/i),l=Math.ceil(s.outerHeight()/r),c=[],h,p,d,v,m,g;for(h=0;h<r;h++){v=a.top+h*l,g=h-(r-1)/2;for(p=0;p<i;p++)d=a.left+p*f,m=p-(i-1)/2,s.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-p*f,top:-h*l}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:f,height:l,left:d+(u?m*f:0),top:v+(u?g*l:0),opacity:u?0:1}).animate({left:d+(u?0:m*f),top:v+(u?0:g*l),opacity:u?1:0},t.duration||500,t.easing,y)}}}(jQuery),function(e,t){e.effects.effect.fade=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"toggle");r.animate({opacity:i},{queue:!1,duration:t.duration,easing:t.easing,complete:n})}}(jQuery),function(e,t){e.effects.effect.fold=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=s==="hide",a=t.size||15,f=/([0-9]+)%/.exec(a),l=!!t.horizFirst,c=o!==l,h=c?["width","height"]:["height","width"],p=t.duration/2,d,v,m={},g={};e.effects.save(r,i),r.show(),d=e.effects.createWrapper(r).css({overflow:"hidden"}),v=c?[d.width(),d.height()]:[d.height(),d.width()],f&&(a=parseInt(f[1],10)/100*v[u?0:1]),o&&d.css(l?{height:0,width:a}:{height:a,width:0}),m[h[0]]=o?v[0]:a,g[h[1]]=o?v[1]:0,d.animate(m,p,t.easing).animate(g,p,t.easing,function(){u&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()})}}(jQuery),function(e,t){e.effects.effect.highlight=function(t,n){var r=e(this),i=["backgroundImage","backgroundColor","opacity"],s=e.effects.setMode(r,t.mode||"show"),o={backgroundColor:r.css("backgroundColor")};s==="hide"&&(o.opacity=0),e.effects.save(r,i),r.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),n()}})}}(jQuery),function(e,t){e.effects.effect.pulsate=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"show"),s=i==="show",o=i==="hide",u=s||i==="hide",a=(t.times||5)*2+(u?1:0),f=t.duration/a,l=0,c=r.queue(),h=c.length,p;if(s||!r.is(":visible"))r.css("opacity",0).show(),l=1;for(p=1;p<a;p++)r.animate({opacity:l},f,t.easing),l=1-l;r.animate({opacity:l},f,t.easing),r.queue(function(){o&&r.hide(),n()}),h>1&&c.splice.apply(c,[1,0].concat(c.splice(h,a+1))),r.dequeue()}}(jQuery),function(e,t){e.effects.effect.puff=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"hide"),s=i==="hide",o=parseInt(t.percent,10)||150,u=o/100,a={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:i,complete:n,percent:s?o:100,from:s?a:{height:a.height*u,width:a.width*u,outerHeight:a.outerHeight*u,outerWidth:a.outerWidth*u}}),r.effect(t)},e.effects.effect.scale=function(t,n){var r=e(this),i=e.extend(!0,{},t),s=e.effects.setMode(r,t.mode||"effect"),o=parseInt(t.percent,10)||(parseInt(t.percent,10)===0?0:s==="hide"?0:100),u=t.direction||"both",a=t.origin,f={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()},l={y:u!=="horizontal"?o/100:1,x:u!=="vertical"?o/100:1};i.effect="size",i.queue=!1,i.complete=n,s!=="effect"&&(i.origin=a||["middle","center"],i.restore=!0),i.from=t.from||(s==="show"?{height:0,width:0,outerHeight:0,outerWidth:0}:f),i.to={height:f.height*l.y,width:f.width*l.x,outerHeight:f.outerHeight*l.y,outerWidth:f.outerWidth*l.x},i.fade&&(s==="show"&&(i.from.opacity=0,i.to.opacity=1),s==="hide"&&(i.from.opacity=1,i.to.opacity=0)),r.effect(i)},e.effects.effect.size=function(t,n){var r,i,s,o=e(this),u=["position","top","bottom","left","right","width","height","overflow","opacity"],a=["position","top","bottom","left","right","overflow","opacity"],f=["width","height","overflow"],l=["fontSize"],c=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=e.effects.setMode(o,t.mode||"effect"),d=t.restore||p!=="effect",v=t.scale||"both",m=t.origin||["middle","center"],g=o.css("position"),y=d?u:a,b={height:0,width:0,outerHeight:0,outerWidth:0};p==="show"&&o.show(),r={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()},t.mode==="toggle"&&p==="show"?(o.from=t.to||b,o.to=t.from||r):(o.from=t.from||(p==="show"?b:r),o.to=t.to||(p==="hide"?b:r)),s={from:{y:o.from.height/r.height,x:o.from.width/r.width},to:{y:o.to.height/r.height,x:o.to.width/r.width}};if(v==="box"||v==="both")s.from.y!==s.to.y&&(y=y.concat(c),o.from=e.effects.setTransition(o,c,s.from.y,o.from),o.to=e.effects.setTransition(o,c,s.to.y,o.to)),s.from.x!==s.to.x&&(y=y.concat(h),o.from=e.effects.setTransition(o,h,s.from.x,o.from),o.to=e.effects.setTransition(o,h,s.to.x,o.to));(v==="content"||v==="both")&&s.from.y!==s.to.y&&(y=y.concat(l).concat(f),o.from=e.effects.setTransition(o,l,s.from.y,o.from),o.to=e.effects.setTransition(o,l,s.to.y,o.to)),e.effects.save(o,y),o.show(),e.effects.createWrapper(o),o.css("overflow","hidden").css(o.from),m&&(i=e.effects.getBaseline(m,r),o.from.top=(r.outerHeight-o.outerHeight())*i.y,o.from.left=(r.outerWidth-o.outerWidth())*i.x,o.to.top=(r.outerHeight-o.to.outerHeight)*i.y,o.to.left=(r.outerWidth-o.to.outerWidth)*i.x),o.css(o.from);if(v==="content"||v==="both")c=c.concat(["marginTop","marginBottom"]).concat(l),h=h.concat(["marginLeft","marginRight"]),f=u.concat(c).concat(h),o.find("*[width]").each(function(){var n=e(this),r={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};d&&e.effects.save(n,f),n.from={height:r.height*s.from.y,width:r.width*s.from.x,outerHeight:r.outerHeight*s.from.y,outerWidth:r.outerWidth*s.from.x},n.to={height:r.height*s.to.y,width:r.width*s.to.x,outerHeight:r.height*s.to.y,outerWidth:r.width*s.to.x},s.from.y!==s.to.y&&(n.from=e.effects.setTransition(n,c,s.from.y,n.from),n.to=e.effects.setTransition(n,c,s.to.y,n.to)),s.from.x!==s.to.x&&(n.from=e.effects.setTransition(n,h,s.from.x,n.from),n.to=e.effects.setTransition(n,h,s.to.x,n.to)),n.css(n.from),n.animate(n.to,t.duration,t.easing,function(){d&&e.effects.restore(n,f)})});o.animate(o.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){o.to.opacity===0&&o.css("opacity",o.from.opacity),p==="hide"&&o.hide(),e.effects.restore(o,y),d||(g==="static"?o.css({position:"relative",top:o.to.top,left:o.to.left}):e.each(["top","left"],function(e,t){o.css(t,function(t,n){var r=parseInt(n,10),i=e?o.to.left:o.to.top;return n==="auto"?i+"px":r+i+"px"})})),e.effects.removeWrapper(o),n()}})}}(jQuery),function(e,t){e.effects.effect.shake=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"effect"),o=t.direction||"left",u=t.distance||20,a=t.times||3,f=a*2+1,l=Math.round(t.duration/f),c=o==="up"||o==="down"?"top":"left",h=o==="up"||o==="left",p={},d={},v={},m,g=r.queue(),y=g.length;e.effects.save(r,i),r.show(),e.effects.createWrapper(r),p[c]=(h?"-=":"+=")+u,d[c]=(h?"+=":"-=")+u*2,v[c]=(h?"-=":"+=")+u*2,r.animate(p,l,t.easing);for(m=1;m<a;m++)r.animate(d,l,t.easing).animate(v,l,t.easing);r.animate(d,l,t.easing).animate(p,l/2,t.easing).queue(function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}),y>1&&g.splice.apply(g,[1,0].concat(g.splice(y,f+1))),r.dequeue()}}(jQuery),function(e,t){e.effects.effect.slide=function(t,n){var r=e(this),i=["position","top","bottom","left","right","width","height"],s=e.effects.setMode(r,t.mode||"show"),o=s==="show",u=t.direction||"left",a=u==="up"||u==="down"?"top":"left",f=u==="up"||u==="left",l,c={};e.effects.save(r,i),r.show(),l=t.distance||r[a==="top"?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(r).css({overflow:"hidden"}),o&&r.css(a,f?isNaN(l)?"-"+l:-l:l),c[a]=(o?f?"+=":"-=":f?"-=":"+=")+l,r.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}}(jQuery),function(e,t){e.effects.effect.transfer=function(t,n){var r=e(this),i=e(t.to),s=i.css("position")==="fixed",o=e("body"),u=s?o.scrollTop():0,a=s?o.scrollLeft():0,f=i.offset(),l={top:f.top-u,left:f.left-a,height:i.innerHeight(),width:i.innerWidth()},c=r.offset(),h=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:c.top-u,left:c.left-a,height:r.innerHeight(),width:r.innerWidth(),position:s?"fixed":"absolute"}).animate(l,t.duration,t.easing,function(){h.remove(),n()})}}(jQuery),function(e,t){e.widget("ui.menu",{version:"1.10.3",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var n=e(t.target).closest(".ui-menu-item");!this.mouseHandled&&n.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(t),n.has(".ui-menu").length?this.expand(t):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&this.active.parents(".ui-menu").length===1&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var n=e(t.currentTarget);n.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,n)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,n)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function a(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var n,r,i,s,o,u=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:u=!1,r=this.previousFilter||"",i=String.fromCharCode(t.keyCode),s=!1,clearTimeout(this.filterTimer),i===r?s=!0:i=r+i,o=new RegExp("^"+a(i),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return o.test(e(this).children("a").text())}),n=s&&n.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):n,n.length||(i=String.fromCharCode(t.keyCode),o=new RegExp("^"+a(i),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return o.test(e(this).children("a").text())})),n.length?(this.focus(t,n),n.length>1?(this.previousFilter=i,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}u&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,n=this.options.icons.submenu,r=this.element.find(this.options.menus);r.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),r=t.prev("a"),i=e("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);r.attr("aria-haspopup","true").prepend(i),t.attr("aria-labelledby",r.attr("id"))}),t=r.add(this.element),t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-\u2014\u2013\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){e==="icons"&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),this._super(e,t)},focus:function(e,t){var n,r;this.blur(e,e&&e.type==="focus"),this._scrollIntoView(t),this.active=t.first(),r=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",r.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&e.type==="keydown"?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=t.children(".ui-menu"),n.length&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,r,i,s,o,u;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,r=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,i=t.offset().top-this.activeMenu.offset().top-n-r,s=this.activeMenu.scrollTop(),o=this.activeMenu.height(),u=t.height(),i<0?this.activeMenu.scrollTop(s+i):i+u>o&&this.activeMenu.scrollTop(s+i-o+u))},blur:function(e,t){t||clearTimeout(this.timer);if(!this.active)return;this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active})},_startOpening:function(e){clearTimeout(this.timer);if(e.attr("aria-hidden")!=="true")return;this.timer=this._delay(function(){this._close(),this._open(e)},this.delay)},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay(function(){var r=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));r.length||(r=this.element),this._close(r),this.blur(t),this.activeMenu=r},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var r;this.active&&(e==="first"||e==="last"?r=this.active[e==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1):r=this.active[e+"All"](".ui-menu-item").eq(0));if(!r||!r.length||!this.active)r=this.activeMenu.children(".ui-menu-item")[t]();this.focus(n,r)},nextPage:function(t){var n,r,i;if(!this.active){this.next(t);return}if(this.isLastItem())return;this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-r-i<0}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())},previousPage:function(t){var n,r,i;if(!this.active){this.next(t);return}if(this.isFirstItem())return;this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-r+i>0}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item").first())},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)}})}(jQuery),function(e,t){function h(e,t,n){return[parseFloat(e[0])*(l.test(e[0])?t/100:1),parseFloat(e[1])*(l.test(e[1])?n/100:1)]}function p(t,n){return parseInt(e.css(t,n),10)||0}function d(t){var n=t[0];return n.nodeType===9?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var n,r=Math.max,i=Math.abs,s=Math.round,o=/left|center|right/,u=/top|center|bottom/,a=/[\+\-]\d+(\.[\d]+)?%?/,f=/^\w+/,l=/%$/,c=e.fn.position;e.position={scrollbarWidth:function(){if(n!==t)return n;var r,i,s=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=s.children()[0];return e("body").append(s),r=o.offsetWidth,s.css("overflow","scroll"),i=o.offsetWidth,r===i&&(i=s[0].clientWidth),s.remove(),n=r-i},getScrollInfo:function(t){var n=t.isWindow?"":t.element.css("overflow-x"),r=t.isWindow?"":t.element.css("overflow-y"),i=n==="scroll"||n==="auto"&&t.width<t.element[0].scrollWidth,s=r==="scroll"||r==="auto"&&t.height<t.element[0].scrollHeight;return{width:s?e.position.scrollbarWidth():0,height:i?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),r=e.isWindow(n[0]);return{element:n,isWindow:r,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:r?n.width():n.outerWidth(),height:r?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return c.apply(this,arguments);t=e.extend({},t);var n,l,v,m,g,y,b=e(t.of),w=e.position.getWithinInfo(t.within),E=e.position.getScrollInfo(w),S=(t.collision||"flip").split(" "),x={};return y=d(b),b[0].preventDefault&&(t.at="left top"),l=y.width,v=y.height,m=y.offset,g=e.extend({},m),e.each(["my","at"],function(){var e=(t[this]||"").split(" "),n,r;e.length===1&&(e=o.test(e[0])?e.concat(["center"]):u.test(e[0])?["center"].concat(e):["center","center"]),e[0]=o.test(e[0])?e[0]:"center",e[1]=u.test(e[1])?e[1]:"center",n=a.exec(e[0]),r=a.exec(e[1]),x[this]=[n?n[0]:0,r?r[0]:0],t[this]=[f.exec(e[0])[0],f.exec(e[1])[0]]}),S.length===1&&(S[1]=S[0]),t.at[0]==="right"?g.left+=l:t.at[0]==="center"&&(g.left+=l/2),t.at[1]==="bottom"?g.top+=v:t.at[1]==="center"&&(g.top+=v/2),n=h(x.at,l,v),g.left+=n[0],g.top+=n[1],this.each(function(){var o,u,a=e(this),f=a.outerWidth(),c=a.outerHeight(),d=p(this,"marginLeft"),y=p(this,"marginTop"),T=f+d+p(this,"marginRight")+E.width,N=c+y+p(this,"marginBottom")+E.height,C=e.extend({},g),k=h(x.my,a.outerWidth(),a.outerHeight());t.my[0]==="right"?C.left-=f:t.my[0]==="center"&&(C.left-=f/2),t.my[1]==="bottom"?C.top-=c:t.my[1]==="center"&&(C.top-=c/2),C.left+=k[0],C.top+=k[1],e.support.offsetFractions||(C.left=s(C.left),C.top=s(C.top)),o={marginLeft:d,marginTop:y},e.each(["left","top"],function(r,i){e.ui.position[S[r]]&&e.ui.position[S[r]][i](C,{targetWidth:l,targetHeight:v,elemWidth:f,elemHeight:c,collisionPosition:o,collisionWidth:T,collisionHeight:N,offset:[n[0]+k[0],n[1]+k[1]],my:t.my,at:t.at,within:w,elem:a})}),t.using&&(u=function(e){var n=m.left-C.left,s=n+l-f,o=m.top-C.top,u=o+v-c,h={target:{element:b,left:m.left,top:m.top,width:l,height:v},element:{element:a,left:C.left,top:C.top,width:f,height:c},horizontal:s<0?"left":n>0?"right":"center",vertical:u<0?"top":o>0?"bottom":"middle"};l<f&&i(n+s)<l&&(h.horizontal="center"),v<c&&i(o+u)<v&&(h.vertical="middle"),r(i(n),i(s))>r(i(o),i(u))?h.important="horizontal":h.important="vertical",t.using.call(this,e,h)}),a.offset(e.extend(C,{using:u}))})},e.ui.position={fit:{left:function(e,t){var n=t.within,i=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,o=e.left-t.collisionPosition.marginLeft,u=i-o,a=o+t.collisionWidth-s-i,f;t.collisionWidth>s?u>0&&a<=0?(f=e.left+u+t.collisionWidth-s-i,e.left+=u-f):a>0&&u<=0?e.left=i:u>a?e.left=i+s-t.collisionWidth:e.left=i:u>0?e.left+=u:a>0?e.left-=a:e.left=r(e.left-o,e.left)},top:function(e,t){var n=t.within,i=n.isWindow?n.scrollTop:n.offset.top,s=t.within.height,o=e.top-t.collisionPosition.marginTop,u=i-o,a=o+t.collisionHeight-s-i,f;t.collisionHeight>s?u>0&&a<=0?(f=e.top+u+t.collisionHeight-s-i,e.top+=u-f):a>0&&u<=0?e.top=i:u>a?e.top=i+s-t.collisionHeight:e.top=i:u>0?e.top+=u:a>0?e.top-=a:e.top=r(e.top-o,e.top)}},flip:{left:function(e,t){var n=t.within,r=n.offset.left+n.scrollLeft,s=n.width,o=n.isWindow?n.scrollLeft:n.offset.left,u=e.left-t.collisionPosition.marginLeft,a=u-o,f=u+t.collisionWidth-s-o,l=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,c=t.at[0]==="left"?t.targetWidth:t.at[0]==="right"?-t.targetWidth:0,h=-2*t.offset[0],p,d;if(a<0){p=e.left+l+c+h+t.collisionWidth-s-r;if(p<0||p<i(a))e.left+=l+c+h}else if(f>0){d=e.left-t.collisionPosition.marginLeft+l+c+h-o;if(d>0||i(d)<f)e.left+=l+c+h}},top:function(e,t){var n=t.within,r=n.offset.top+n.scrollTop,s=n.height,o=n.isWindow?n.scrollTop:n.offset.top,u=e.top-t.collisionPosition.marginTop,a=u-o,f=u+t.collisionHeight-s-o,l=t.my[1]==="top",c=l?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,h=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,p=-2*t.offset[1],d,v;a<0?(v=e.top+c+h+p+t.collisionHeight-s-r,e.top+c+h+p>a&&(v<0||v<i(a))&&(e.top+=c+h+p)):f>0&&(d=e.top-t.collisionPosition.marginTop+c+h+p-o,e.top+c+h+p>f&&(d>0||i(d)<f)&&(e.top+=c+h+p))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,r,i,s,o=document.getElementsByTagName("body")[0],u=document.createElement("div");t=document.createElement(o?"div":"body"),r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in r)t.style[s]=r[s];t.appendChild(u),n=o||document.documentElement,n.insertBefore(t,n.firstChild),u.style.cssText="position: absolute; left: 10.7432222px;",i=e(u).offset().left,e.support.offsetFractions=i>10&&i<11,t.innerHTML="",n.removeChild(t)}()}(jQuery),function(e,t){e.widget("ui.progressbar",{version:"1.10.3",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){if(e===t)return this.options.value;this.options.value=this._constrainedValue(e),this._refreshValue()},_constrainedValue:function(e){return e===t&&(e=this.options.value),this.indeterminate=e===!1,typeof e!="number"&&(e=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){e==="max"&&(t=Math.max(this.min,t)),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,n=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(n.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}})}(jQuery),function(e,t){var n=5;e.widget("ui.slider",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,n,r=this.options,i=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),s="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",o=[];n=r.values&&r.values.length||1,i.length>n&&(i.slice(n).remove(),i=i.slice(0,n));for(t=i.length;t<n;t++)o.push(s);this.handles=i.add(e(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,n="";t.range?(t.range===!0&&(t.values?t.values.length&&t.values.length!==2?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),!this.range||!this.range.length?(this.range=e("<div></div>").appendTo(this.element),n="ui-slider-range ui-widget-header ui-corner-all"):this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}),this.range.addClass(n+(t.range==="min"||t.range==="max"?" ui-slider-range-"+t.range:""))):this.range=e([])},_setupEvents:function(){var e=this.handles.add(this.range).filter("a");this._off(e),this._on(e,this._handleEvents),this._hoverable(e),this._focusable(e)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var n,r,i,s,o,u,a,f,l=this,c=this.options;return c.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},r=this._normValueFromMouse(n),i=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var n=Math.abs(r-l.values(t));if(i>n||i===n&&(t===l._lastChangedValue||l.values(t)===c.min))i=n,s=e(this),o=t}),u=this._start(t,o),u===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,s.addClass("ui-state-active").focus(),a=s.offset(),f=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=f?{left:0,top:0}:{left:t.pageX-a.left-s.width()/2,top:t.pageY-a.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,r),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,r,i,s;return this.orientation==="horizontal"?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),r=n/t,r>1&&(r=1),r<0&&(r=0),this.orientation==="vertical"&&(r=1-r),i=this._valueMax()-this._valueMin(),s=this._valueMin()+r*i,this._trimAlignValue(s)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var r,i,s;this.options.values&&this.options.values.length?(r=this.values(t?0:1),this.options.values.length===2&&this.options.range===!0&&(t===0&&n>r||t===1&&n<r)&&(n=r),n!==this.values(t)&&(i=this.values(),i[t]=n,s=this._trigger("slide",e,{handle:this.handles[t],value:n,values:i}),r=this.values(t?0:1),s!==!1&&this.values(t,n,!0))):n!==this.value()&&(s=this._trigger("slide",e,{handle:this.handles[t],value:n}),s!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,n)}},value:function(e){if(arguments.length){this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(t,n){var r,i,s;if(arguments.length>1){this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),this._change(null,t);return}if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();r=this.options.values,i=arguments[0];for(s=0;s<r.length;s+=1)r[s]=this._trimAlignValue(i[s]),this._change(null,s);this._refreshValue()},_setOption:function(t,n){var r,i=0;t==="range"&&this.options.range===!0&&(n==="min"?(this.options.value=this._values(0),this.options.values=null):n==="max"&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(i=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments);switch(t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":this._animateOff=!0,this._refreshValue();for(r=0;r<i;r+=1)this._change(null,r);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e),e},_values:function(e){var t,n,r;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t),t;if(this.options.values&&this.options.values.length){n=this.options.values.slice();for(r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(n[r]);return n}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,r=e-n;return Math.abs(n)*2>=t&&(r+=n>0?t:-t),parseFloat(r.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,n,r,i,s,o=this.options.range,u=this.options,a=this,f=this._animateOff?!1:u.animate,l={};this.options.values&&this.options.values.length?this.handles.each(function(r){n=(a.values(r)-a._valueMin())/(a._valueMax()-a._valueMin())*100,l[a.orientation==="horizontal"?"left":"bottom"]=n+"%",e(this).stop(1,1)[f?"animate":"css"](l,u.animate),a.options.range===!0&&(a.orientation==="horizontal"?(r===0&&a.range.stop(1,1)[f?"animate":"css"]({left:n+"%"},u.animate),r===1&&a.range[f?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:u.animate})):(r===0&&a.range.stop(1,1)[f?"animate":"css"]({bottom:n+"%"},u.animate),r===1&&a.range[f?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:u.animate}))),t=n}):(r=this.value(),i=this._valueMin(),s=this._valueMax(),n=s!==i?(r-i)/(s-i)*100:0,l[this.orientation==="horizontal"?"left":"bottom"]=n+"%",this.handle.stop(1,1)[f?"animate":"css"](l,u.animate),o==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[f?"animate":"css"]({width:n+"%"},u.animate),o==="max"&&this.orientation==="horizontal"&&this.range[f?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:u.animate}),o==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[f?"animate":"css"]({height:n+"%"},u.animate),o==="max"&&this.orientation==="vertical"&&this.range[f?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:u.animate}))},_handleEvents:{keydown:function(t){var r,i,s,o,u=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:t.preventDefault();if(!this._keySliding){this._keySliding=!0,e(t.target).addClass("ui-state-active"),r=this._start(t,u);if(r===!1)return}}o=this.options.step,this.options.values&&this.options.values.length?i=s=this.values(u):i=s=this.value();switch(t.keyCode){case e.ui.keyCode.HOME:s=this._valueMin();break;case e.ui.keyCode.END:s=this._valueMax();break;case e.ui.keyCode.PAGE_UP:s=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/n);break;case e.ui.keyCode.PAGE_DOWN:s=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/n);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(i===this._valueMax())return;s=this._trimAlignValue(i+o);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i===this._valueMin())return;s=this._trimAlignValue(i-o)}this._slide(t,u,s)},click:function(e){e.preventDefault()},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,n),this._change(t,n),e(t.target).removeClass("ui-state-active"))}}})}(jQuery),function(e){function t(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"1.10.3",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},n=this.element;return e.each(["min","max","step"],function(e,r){var i=n.attr(r);i!==undefined&&i.length&&(t[r]=i)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){if(this.cancelBlur){delete this.cancelBlur;return}this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e)},mousewheel:function(e,t){if(!t)return;if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()},"mousedown .ui-spinner-button":function(t){function r(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n}))}var n;n=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),r.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,r.call(this)});if(this._start(t)===!1)return;this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(!e(t.currentTarget).hasClass("ui-state-active"))return;if(this._start(t)===!1)return!1;this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(e.height()*.5)&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var n=this.options,r=e.ui.keyCode;switch(t.keyCode){case r.UP:return this._repeat(null,1,t),!0;case r.DOWN:return this._repeat(null,-1,t),!0;case r.PAGE_UP:return this._repeat(null,n.page,t),!0;case r.PAGE_DOWN:return this._repeat(null,-n.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+"</a>"+"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+"</a>"},_start:function(e){return!this.spinning&&this._trigger("start",e)===!1?!1:(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(e,t,n){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,n)},e),this._spin(t*this.options.step,n)},_spin:function(e,t){var n=this.value()||0;this.counter||(this.counter=1),n=this._adjustValue(n+e*this._increment(this.counter));if(!this.spinning||this._trigger("spin",t,{value:n})!==!1)this._value(n),this.counter++},_increment:function(t){var n=this.options.incremental;return n?e.isFunction(n)?n(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return this.options.min!==null&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),n=t.indexOf(".");return n===-1?0:t.length-n-1},_adjustValue:function(e){var t,n,r=this.options;return t=r.min!==null?r.min:0,n=e-t,n=Math.round(n/r.step)*r.step,e=t+n,e=parseFloat(e.toFixed(this._precision())),r.max!==null&&e>r.max?r.max:r.min!==null&&e<r.min?r.min:e},_stop:function(e){if(!this.spinning)return;clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e)},_setOption:function(e,t){if(e==="culture"||e==="numberFormat"){var n=this._parse(this.element.val());this.options[e]=t,this.element.val(this._format(n));return}(e==="max"||e==="min"||e==="step")&&typeof t=="string"&&(t=this._parse(t)),e==="icons"&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),e==="disabled"&&(t?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:t(function(e){this._super(e),this._value(this.element.val())}),_parse:function(e){return typeof e=="string"&&e!==""&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),e===""||isNaN(e)?null:e},_format:function(e){return e===""?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(e,t){var n;e!==""&&(n=this._parse(e),n!==null&&(t||(n=this._adjustValue(n)),e=this._format(n))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:t(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:t(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:t(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){if(!arguments.length)return this._parse(this.element.val());t(this._value).call(this,e)},widget:function(){return this.uiSpinner}})}(jQuery),function(e,t){function i(){return++n}function s(e){return e.hash.length>1&&decodeURIComponent(e.href.replace(r,""))===decodeURIComponent(location.href.replace(r,""))}var n=0,r=/#.*$/;e.widget("ui.tabs",{version:"1.10.3",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var t=this,n=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",n.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),n.active=this._initialActive(),e.isArray(n.disabled)&&(n.disabled=e.unique(n.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.options.active!==!1&&this.anchors.length?this.active=this._findActive(n.active):this.active=e(),this._refresh(),this.active.length&&this.load(n.active)},_initialActive:function(){var t=this.options.active,n=this.options.collapsible,r=location.hash.substring(1);if(t===null){r&&this.tabs.each(function(n,i){if(e(i).attr("aria-controls")===r)return t=n,!1}),t===null&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active")));if(t===null||t===-1)t=this.tabs.length?0:!1}return t!==!1&&(t=this.tabs.index(this.tabs.eq(t)),t===-1&&(t=n?!1:0)),!n&&t===!1&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var n=e(this.document[0].activeElement).closest("li"),r=this.tabs.index(n),i=!0;if(this._handlePageNav(t))return;switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:r++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:i=!1,r--;break;case e.ui.keyCode.END:r=this.anchors.length-1;break;case e.ui.keyCode.HOME:r=0;break;case e.ui.keyCode.SPACE:t.preventDefault(),clearTimeout(this.activating),this._activate(r);return;case e.ui.keyCode.ENTER:t.preventDefault(),clearTimeout(this.activating),this._activate(r===this.options.active?!1:r);return;default:return}t.preventDefault(),clearTimeout(this.activating),r=this._focusNextTab(r,i),t.ctrlKey||(n.attr("aria-selected","false"),this.tabs.eq(r).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",r)},this.delay))},_panelKeydown:function(t){if(this._handlePageNav(t))return;t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){if(t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP)return this._activate(this._focusNextTab(this.options.active-1,!1)),!0;if(t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN)return this._activate(this._focusNextTab(this.options.active+1,!0)),!0},_findNextTab:function(t,n){function i(){return t>r&&(t=0),t<0&&(t=r),t}var r=this.tabs.length-1;while(e.inArray(i(),this.options.disabled)!==-1)t=n?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){if(e==="active"){this._activate(t);return}if(e==="disabled"){this._setupDisabled(t);return}this._super(e,t),e==="collapsible"&&(this.element.toggleClass("ui-tabs-collapsible",t),!t&&this.options.active===!1&&this._activate(0)),e==="event"&&this._setupEvents(t),e==="heightStyle"&&this._setupHeightStyle(t)},_tabId:function(e){return e.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,n=this.tablist.children(":has(a[href])");t.disabled=e.map(n.filter(".ui-state-disabled"),function(e){return n.index(e)}),this._processTabs(),t.active===!1||!this.anchors.length?(t.active=!1,this.active=e()):this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(n,r){var i,o,u,a=e(r).uniqueId().attr("id"),f=e(r).closest("li"),l=f.attr("aria-controls");s(r)?(i=r.hash,o=t.element.find(t._sanitizeSelector(i))):(u=t._tabId(f),i="#"+u,o=t.element.find(i),o.length||(o=t._createPanel(u),o.insertAfter(t.panels[n-1]||t.tablist)),o.attr("aria-live","polite")),o.length&&(t.panels=t.panels.add(o)),l&&f.data("ui-tabs-aria-controls",l),f.attr({"aria-controls":i.substring(1),"aria-labelledby":a}),o.attr("aria-labelledby",a)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var n=0,r;r=this.tabs[n];n++)t===!0||e.inArray(n,t)!==-1?e(r).addClass("ui-state-disabled").attr("aria-disabled","true"):e(r).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var n={click:function(e){e.preventDefault()}};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,n),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var n,r=this.element.parent();t==="fill"?(n=r.height(),n-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),r=t.css("position");if(r==="absolute"||r==="fixed")return;n-=t.outerHeight(!0)}),this.element.children().not(this.panels).each(function(){n-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,n-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):t==="auto"&&(n=0,this.panels.each(function(){n=Math.max(n,e(this).height("").height())}).height(n))},_eventHandler:function(t){var n=this.options,r=this.active,i=e(t.currentTarget),s=i.closest("li"),o=s[0]===r[0],u=o&&n.collapsible,a=u?e():this._getPanelForTab(s),f=r.length?this._getPanelForTab(r):e(),l={oldTab:r,oldPanel:f,newTab:u?e():s,newPanel:a};t.preventDefault();if(s.hasClass("ui-state-disabled")||s.hasClass("ui-tabs-loading")||this.running||o&&!n.collapsible||this._trigger("beforeActivate",t,l)===!1)return;n.active=u?!1:this.tabs.index(s),this.active=o?e():s,this.xhr&&this.xhr.abort(),!f.length&&!a.length&&e.error("jQuery UI Tabs: Mismatching fragment identifier."),a.length&&this.load(this.tabs.index(s),t),this._toggle(t,l)},_toggle:function(t,n){function o(){r.running=!1,r._trigger("activate",t,n)}function u(){n.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),i.length&&r.options.show?r._show(i,r.options.show,o):(i.show(),o())}var r=this,i=n.newPanel,s=n.oldPanel;this.running=!0,s.length&&this.options.hide?this._hide(s,this.options.hide,function(){n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),u()}):(n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),s.hide(),u()),s.attr({"aria-expanded":"false","aria-hidden":"true"}),n.oldTab.attr("aria-selected","false"),i.length&&s.length?n.oldTab.attr("tabIndex",-1):i.length&&this.tabs.filter(function(){return e(this).attr("tabIndex")===0}).attr("tabIndex",-1),i.attr({"aria-expanded":"true","aria-hidden":"false"}),n.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var n,r=this._findActive(t);if(r[0]===this.active[0])return;r.length||(r=this.active),n=r.find(".ui-tabs-anchor")[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop})},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return typeof e=="string"&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),n=t.data("ui-tabs-aria-controls");n?t.attr("aria-controls",n).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),this.options.heightStyle!=="content"&&this.panels.css("height","")},enable:function(n){var r=this.options.disabled;if(r===!1)return;n===t?r=!1:(n=this._getIndex(n),e.isArray(r)?r=e.map(r,function(e){return e!==n?e:null}):r=e.map(this.tabs,function(e,t){return t!==n?t:null})),this._setupDisabled(r)},disable:function(n){var r=this.options.disabled;if(r===!0)return;if(n===t)r=!0;else{n=this._getIndex(n);if(e.inArray(n,r)!==-1)return;e.isArray(r)?r=e.merge([n],r).sort():r=[n]}this._setupDisabled(r)},load:function(t,n){t=this._getIndex(t);var r=this,i=this.tabs.eq(t),o=i.find(".ui-tabs-anchor"),u=this._getPanelForTab(i),a={tab:i,panel:u};if(s(o[0]))return;this.xhr=e.ajax(this._ajaxSettings(o,n,a)),this.xhr&&this.xhr.statusText!=="canceled"&&(i.addClass("ui-tabs-loading"),u.attr("aria-busy","true"),this.xhr.success(function(e){setTimeout(function(){u.html(e),r._trigger("load",n,a)},1)}).complete(function(e,t){setTimeout(function(){t==="abort"&&r.panels.stop(!1,!0),i.removeClass("ui-tabs-loading"),u.removeAttr("aria-busy"),e===r.xhr&&delete r.xhr},1)}))},_ajaxSettings:function(t,n,r){var i=this;return{url:t.attr("href"),beforeSend:function(t,s){return i._trigger("beforeLoad",n,e.extend({jqXHR:t,ajaxSettings:s},r))}}},_getPanelForTab:function(t){var n=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+n))}})}(jQuery),function(e){function n(t,n){var r=(t.attr("aria-describedby")||"").split(/\s+/);r.push(n),t.data("ui-tooltip-id",n).attr("aria-describedby",e.trim(r.join(" ")))}function r(t){var n=t.data("ui-tooltip-id"),r=(t.attr("aria-describedby")||"").split(/\s+/),i=e.inArray(n,r);i!==-1&&r.splice(i,1),t.removeData("ui-tooltip-id"),r=e.trim(r.join(" ")),r?t.attr("aria-describedby",r):t.removeAttr("aria-describedby")}var t=0;e.widget("ui.tooltip",{version:"1.10.3",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(t,n){var r=this;if(t==="disabled"){this[n?"_disable":"_enable"](),this.options[t]=n;return}this._super(t,n),t==="content"&&e.each(this.tooltips,function(e,t){r._updateContent(t)})},_disable:function(){var t=this;e.each(this.tooltips,function(n,r){var i=e.Event("blur");i.target=i.currentTarget=r[0],t.close(i,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var n=this,r=e(t?t.target:this.element).closest(this.options.items);if(!r.length||r.data("ui-tooltip-id"))return;r.attr("title")&&r.data("ui-tooltip-title",r.attr("title")),r.data("ui-tooltip-open",!0),t&&t.type==="mouseover"&&r.parents().each(function(){var t=e(this),r;t.data("ui-tooltip-open")&&(r=e.Event("blur"),r.target=r.currentTarget=this,n.close(r,!0)),t.attr("title")&&(t.uniqueId(),n.parents[this.id]={element:this,title:t.attr("title")},t.attr("title",""))}),this._updateContent(r,t)},_updateContent:function(e,t){var n,r=this.options.content,i=this,s=t?t.type:null;if(typeof r=="string")return this._open(t,e,r);n=r.call(e[0],function(n){if(!e.data("ui-tooltip-open"))return;i._delay(function(){t&&(t.type=s),this._open(t,e,n)})}),n&&this._open(t,e,n)},_open:function(t,r,i){function f(e){a.of=e;if(s.is(":hidden"))return;s.position(a)}var s,o,u,a=e.extend({},this.options.position);if(!i)return;s=this._find(r);if(s.length){s.find(".ui-tooltip-content").html(i);return}r.is("[title]")&&(t&&t.type==="mouseover"?r.attr("title",""):r.removeAttr("title")),s=this._tooltip(r),n(r,s.attr("id")),s.find(".ui-tooltip-content").html(i),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:f}),f(t)):s.position(e.extend({of:r},this.options.position)),s.hide(),this._show(s,this.options.show),this.options.show&&this.options.show.delay&&(u=this.delayedShow=setInterval(function(){s.is(":visible")&&(f(a.of),clearInterval(u))},e.fx.interval)),this._trigger("open",t,{tooltip:s}),o={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var n=e.Event(t);n.currentTarget=r[0],this.close(n,!0)}},remove:function(){this._removeTooltip(s)}};if(!t||t.type==="mouseover")o.mouseleave="close";if(!t||t.type==="focusin")o.focusout="close";this._on(!0,r,o)},close:function(t){var n=this,i=e(t?t.currentTarget:this.element),s=this._find(i);if(this.closing)return;clearInterval(this.delayedShow),i.data("ui-tooltip-title")&&i.attr("title",i.data("ui-tooltip-title")),r(i),s.stop(!0),this._hide(s,this.options.hide,function(){n._removeTooltip(e(this))}),i.removeData("ui-tooltip-open"),this._off(i,"mouseleave focusout keyup"),i[0]!==this.element[0]&&this._off(i,"remove"),this._off(this.document,"mousemove"),t&&t.type==="mouseleave"&&e.each(this.parents,function(t,r){e(r.element).attr("title",r.title),delete n.parents[t]}),this.closing=!0,this._trigger("close",t,{tooltip:s}),this.closing=!1},_tooltip:function(n){var r="ui-tooltip-"+t++,i=e("<div>").attr({id:r,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return e("<div>").addClass("ui-tooltip-content").appendTo(i),i.appendTo(this.document[0].body),this.tooltips[r]=n,i},_find:function(t){var n=t.data("ui-tooltip-id");return n?e("#"+n):e()},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(n,r){var i=e.Event("blur");i.target=i.currentTarget=r[0],t.close(i,!0),e("#"+n).remove(),r.data("ui-tooltip-title")&&(r.attr("title",r.data("ui-tooltip-title")),r.removeData("ui-tooltip-title"))})}})}(jQuery),define("jquery_ui",function(){}),function(){(function(e){return e.fn.ajaxChosen=function(t,n,r){var i,s,o,u;return t==null&&(t={}),r==null&&(r={}),s={minTermLength:3,afterTypeDelay:500,jsonTermKey:"term",keepTypingMsg:"Keep typing...",lookingForMsg:"Looking for"},u=this,i=null,o=e.extend({},s,e(u).data(),t),this.chosen(r?r:{}),console.log("test Z"),this.each(function(){return e(this).next(".chosen-container").find(".search-field > input, .chosen-search > input").bind("keyup",function(){var r,s,a,f,l;return f=e(this).val(),l=e.trim(e(this).val()),s=l.length<o.minTermLength?o.keepTypingMsg:o.lookingForMsg+(" '"+l+"'"),u.next(".chosen-container").find(".no-results").text(s),l===e(this).data("prevVal")?!1:(e(this).data("prevVal",l),this.timer&&clearTimeout(this.timer),l.length<o.minTermLength?!1:(r=e(this),o.data==null&&(o.data={}),o.data[o.jsonTermKey]=l,o.dataCallback!=null&&(o.data=o.dataCallback(o.data)),a=o.success,o.success=function(i){var s,o,a;if(i==null)return;return a=[],u.find("option").each(function(){return e(this).is(":selected")?a.push(e(this).val()+"-"+e(this).text()):e(this).remove()}),u.find("optgroup:empty").each(function(){return e(this).remove()}),s=n!=null?n(i,r):i,o=0,e.each(s,function(t,n){var r,i,s;o++;if(n.group)return r=u.find("optgroup[label='"+n.text+"']"),r.size()||(r=e("<optgroup />")),r.attr("label",n.text).appendTo(u),e.each(n.items,function(t,n){var i,s;typeof n=="string"?(s=t,i=n):(s=n.value,i=n.text);if(e.inArray(s+"-"+i,a)===-1)return e("<option />").attr("value",s).html(i).appendTo(r)});typeof n=="string"?(s=t,i=n):(s=n.value,i=n.text);if(e.inArray(s+"-"+i,a)===-1)return e("<option />").attr("value",s).html(i).appendTo(u)}),o?u.trigger("chosen:updated"):(u.data().chosen.no_results_clear(),u.data().chosen.no_results(r.val())),t.success!=null&&t.success(i),r.val(f)},this.timer=setTimeout(function(){return i&&i.abort(),i=e.ajax(o)},o.afterTypeDelay)))})})}})(jQuery)}.call(this),define("vendor/plugins/ajax_chosen",function(){}),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};define("views/admin/enrollment/list",["require","marionette","views/admin/enrollment/item","views/admin/enrollment/empty_courses","views/admin/enrollment/empty_users","hbs!templates/admin/enrollment/list_courses","hbs!templates/admin/enrollment/list_users","jquery_ui","vendor/plugins/ajax_chosen"],function(t){var r,i,s,o,u,a,f,l;return u=t("marionette"),o=t("views/admin/enrollment/item"),r=t("views/admin/enrollment/empty_courses"),i=t("views/admin/enrollment/empty_users"),a=t("hbs!templates/admin/enrollment/list_courses"),f=t("hbs!templates/admin/enrollment/list_users"),t("jquery_ui"),t("vendor/plugins/ajax_chosen"),s=function(t){function s(){return this.getTemplate=e(this.getTemplate,this),l=s.__super__.constructor.apply(this,arguments),l}return n(s,t),s.prototype.childViewContainer="tbody",s.prototype.childView=o,s.prototype.getTemplate=function(){return this.collection.searchType()==="user"?f:a},s.prototype.childViewOptions=function(){return{role:this.collection.role(),vent:this.vent}},s.prototype.ui={studentInput:'[data-behavior="student-input"]'},s.prototype.appendHtml=function(e,t,n){var r,i;return e.childViewContainer?i=e.$(e.childViewContainer):i=e.$el,r=i.children(),r.size()<=n?i.append(t.el):r.eq(n).before(t.el)},s.prototype.initialize=function(e){return this.vent=e.vent,this.collection.searchType()==="user"?this.emptyView=i:this.emptyView=r,this.collection.fetch()},s}(u.CompositeView)})}.call(this),define("hbs!templates/admin/enrollment/user_input",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,'<div class="formgrid whole">\n		<label>Find Users by Email (<a href="#" data-behavior="show-bulk">or bulk add users</a>)</label>\n		<div class="live-search">\n			<input class="live-search--input" data-behavior="search-term" type="text">\n			<div data-behavior="container-wrapper" class="live-search--results">\n				<ul data-container="items">\n				</ul>\n			</div>\n		</div>\n		<small>\n			As you type the email, users who exist in VOCAT will appear below. Simply click on the user\'s name to add the user\n			to the course.\n		</small>\n</div>\n\n'});return n}),define("hbs!templates/admin/enrollment/course_input",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,'<div class="formgrid whole">\n  <label>Search by Section</label>\n  <div class="live-search">\n    <input class="live-search--input" data-behavior="search-term" type="text">\n    <div data-behavior="container-wrapper" class="live-search--results">\n      <ul data-container="items">\n      </ul>\n    </div>\n  </div>\n  <small class="input-message">As you type the section, the corresponding course will appear below. Simply click on the course to enroll the user.</small>\n</div>\n<div class="formgrid whole">\n	<a href="#" data-behavior="submit-invite-and-enroll" class="primary-button new-button">Invite User</a>\n</div>\n'});return n}),define("hbs!templates/admin/enrollment/course_input_item",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression;return s+='<a href="#"><span>[',(o=n.section)?o=o.call(t,{hash:{}}):(o=t.section,o=typeof o===u?o.apply(t):o),s+=a(o)+"] ",(o=n.department)?o=o.call(t,{hash:{}}):(o=t.department,o=typeof o===u?o.apply(t):o),s+=a(o),(o=n.number)?o=o.call(t,{hash:{}}):(o=t.number,o=typeof o===u?o.apply(t):o),s+=a(o)+" ",(o=n.name)?o=o.call(t,{hash:{}}):(o=t.name,o=typeof o===u?o.apply(t):o),s+=a(o)+", ",(o=n.semester_name)?o=o.call(t,{hash:{}}):(o=t.semester_name,o=typeof o===u?o.apply(t):o),s+=a(o)+" ",(o=n.year)?o=o.call(t,{hash:{}}):(o=t.year,o=typeof o===u?o.apply(t):o),s+=a(o)+"</span></a>",s});return n}),define("hbs!templates/admin/enrollment/user_input_item",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression;return s+='<a href="#">',(o=n.list_name)?o=o.call(t,{hash:{}}):(o=t.list_name,o=typeof o===u?o.apply(t):o),s+=a(o)+" &lt;",(o=n.email)?o=o.call(t,{hash:{}}):(o=t.email,o=typeof o===u?o.apply(t):o),s+=a(o)+"&gt;</a>",s});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/admin/enrollment/input_item",["require","marionette","hbs!templates/admin/enrollment/course_input_item","hbs!templates/admin/enrollment/user_input_item"],function(e){var n,r,i,s,o;return r=e("marionette"),i=e("hbs!templates/admin/enrollment/course_input_item"),s=e("hbs!templates/admin/enrollment/user_input_item"),n=function(e){function n(){return o=n.__super__.constructor.apply(this,arguments),o}return t(n,e),n.prototype.getTemplate=function(){return this.model.get("section")!=null?i:s},n.prototype.tagName="li",n.prototype.className="active-result",n.prototype.initialize=function(e){return this.enrollmentCollection=e.enrollmentCollection,this.vent=e.vent},n.prototype.triggers=function(){return{mousedown:"click"}},n.prototype.onClick=function(){var e,t=this;return e=this.enrollmentCollection.newEnrollmentFromSearchModel(this.model),e.save({},{error:function(e,t){return Vocat.vent.trigger("error:add",{level:"error",lifetime:5e3,msg:t.responseJSON.errors})},success:function(){var n,r,i;return t.enrollmentCollection.add(e),t.trigger("add",e),t.enrollmentCollection==="users"?(i=t.enrollmentCollection.role(),r=i[0],r==="a"||r==="e"||r==="i"||r==="o"||r==="u"?n="an":n="a",Vocat.vent.trigger("error:add",{level:"notice",lifetime:5e3,msg:""+e.get("user_name")+" is now "+n+" "+i+" in section #"+e.get("section")+"."})):Vocat.vent.trigger("error:add",{level:"notice",lifetime:5e3,msg:""+e.get("user_name")+" is now enrolled in section "+e.get("section")})}}),this.trigger("clicked")},n.prototype.onRender=function(){},n}(r.ItemView)})}.call(this),define("hbs!templates/admin/enrollment/input_empty",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){function a(e,t){return"\nNo users matching this email currently exist in VOCAT. If you would like to invite this user, please invite the user in the field below.\n"}function f(e,t){return"\nNo matching courses currently exist in VOCAT.\n"}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u=this;o=n["if"].call(t,t.isUserCollection,{hash:{},inverse:u.noop,fn:u.program(1,a,i)});if(o||o===0)s+=o;s+="\n\n",o=n["if"].call(t,t.isCourseCollection,{hash:{},inverse:u.noop,fn:u.program(3,f,i)});if(o||o===0)s+=o;return s});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/admin/enrollment/input_empty",["require","marionette","hbs!templates/admin/enrollment/input_empty"],function(e){var n,r,i,s;return r=e("marionette"),i=e("hbs!templates/admin/enrollment/input_empty"),n=function(e){function n(){return s=n.__super__.constructor.apply(this,arguments),s}return t(n,e),n.prototype.template=i,n.prototype.tagName="li",n.prototype.initialize=function(e){return this.collectionType=e.collectionType},n.prototype.serializeData=function(){return{isUserCollection:this.collectionType==="user",isCourseCollection:this.collectionType==="course"}},n}(r.ItemView)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/admin/enrollment/input",["require","marionette","hbs!templates/admin/enrollment/user_input","hbs!templates/admin/enrollment/course_input","views/admin/enrollment/input_item","views/admin/enrollment/input_empty","behaviors/closes_on_user_action","jquery_ui","vendor/plugins/ajax_chosen"],function(e){var n,r,i,s,o,u,a,f;return o=e("marionette"),a=e("hbs!templates/admin/enrollment/user_input"),u=e("hbs!templates/admin/enrollment/course_input"),s=e("views/admin/enrollment/input_item"),r=e("views/admin/enrollment/input_empty"),n=e("behaviors/closes_on_user_action"),e("jquery_ui"),e("vendor/plugins/ajax_chosen"),i=function(e){function n(){return f=n.__super__.constructor.apply(this,arguments),f}return t(n,e),n.prototype.emptyView=r,n.prototype.childView=s,n.prototype.childViewContainer='[data-container="items"]',n.prototype.ui={emptyViewContainer:'[data-container="empty"]',containerWrapper:'[data-behavior="container-wrapper"]',termInput:'[data-behavior="search-term"]',showBulk:'[data-behavior="show-bulk"]'},n.prototype.triggers={'keypress [data-behavior="search-term"]':{event:"update",preventDefault:!1,stopPropagation:!1},'keyup [data-behavior="search-term"]':{event:"update",preventDefault:!1,stopPropagation:!1},'change [data-behavior="search-term"]':{event:"update",preventDefault:!1,stopPropagation:!1},'blur [data-behavior="search-term"]':{event:"blur",preventDefault:!1,stopPropagation:!1},'focus [data-behavior="search-term"]':"focus",'click [data-behavior="show-bulk"]':"showBulk"},n.prototype.initialize=function(e){return this.collectionType=e.collectionType,this.enrollmentCollection=e.enrollmentCollection,this.setupListeners()},n.prototype.setupListeners=function(){var e=this;return this.listenTo(this,"childview:clicked",function(t){var n;return e.ui.termInput.val(""),e.ui.termInput.blur(),n=e.onUpdate(),n.then(function(){return e.close()})})},n.prototype.checkCollectionLength=function(){return this.collection.length>0?this.open():this.close()},n.prototype.buildChildView=function(e,t,n){var r,i;return i=_.extend({model:e},n),i.enrollmentCollection=this.enrollmentCollection,i.vent=this.options.vent,i.collectionType=this.collectionType,r=new t(i),r},n.prototype.getTemplate=function(){return this.collection.getSearchTerm()==="email"?a:u},n.prototype.close=function(){if(this.ui.containerWrapper.is(":visible"))return this.ui.containerWrapper.hide(),this.triggerMethod("closed")},n.prototype.open=function(){if(!this.ui.containerWrapper.is(":visible"))return this.ui.containerWrapper.show(),this.triggerMethod("opened")},n.prototype.getTerm=function(){return this.ui.termInput.val().trim()},n.prototype.onFocus=function(){var e;e=this.getTerm();if(e.length>=1)return this.open()},n.prototype.onBlur=function(){return this.close(),!0},n.prototype.onUpdate=_.debounce(function(){var e,t,n,r=this;return t=$.Deferred(),t.then(function(){if(r.ui.termInput.is(":focus"))return r.open()}),n=this.getTerm(),n.length>=1?(e={},e[this.collection.getSearchTerm()]=n,this.trigger("input:changed",{value:n}),this.collection.fetch({url:""+this.collection.url+"/search",data:e,success:function(){return t.resolve()}})):(this.collection.reset(),t.resolve()),t},250),n.prototype.onShow=function(){return this.ui.containerWrapper.hide()},n}(o.CompositeView)})}.call(this),function(){define("app/helpers/cardinal",["handlebars"],function(e){return e.registerHelper("cardinal",function(e,t){var n,r;t==null&&(t=!1),r=e;if(!isNaN(e)){n=parseInt(e);switch(n){case 1:r="one";break;case 2:r="two";break;case 3:r="three";break;case 4:r="four";break;case 5:r="five";break;case 6:r="six";break;case 7:r="seven";break;case 8:r="eight";break;case 9:r="nine";break;case 10:r="ten"}}return t===!0&&_.isString(r)&&(r=r.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})),r})})}.call(this),function(){define("app/helpers/truncate",["handlebars"],function(e){return e.registerHelper("truncate",function(e,t){var n,r;if(e.length>t){r=e.substr(0,t+1);while(r.length){n=r.substr(-1),r=r.substr(0,-1);if(n===" ")break}r===""&&(r=e.substr(0,t))}else r=e;return r+"..."})})}.call(this),define("hbs!templates/admin/enrollment/confirm_invite",["hbs","handlebars","app/helpers/cardinal","app/helpers/truncate"],function(e,t){var n=t.template(function(e,t,n,r,i){function h(e,t){return"these users"}function p(e,t){return"this user\n    "}function d(e,t){return"them"}function v(e,t){return"him/her"}function m(e,t){return"Users"}function g(e,t){return"User"}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c=this;s+='<div class="alerts"><div class="alert alert-notice" style="display: block;"><aside class="alert--label"></aside>\n  <p>\n    ',a={hash:{}},s+=l((o=n.cardinal,o?o.call(t,t.contacts_count,!0,a):f.call(t,"cardinal",t.contacts_count,!0,a)))+" of the users you entered do not have a Vocat account.\n    Press the confirm button below to invite ",u=n["if"].call(t,t.multiple_contacts,{hash:{},inverse:c.program(3,p,i),fn:c.program(1,h,i)});if(u||u===0)s+=u;s+=" to Vocat and enroll ",u=n["if"].call(t,t.multiple_contacts,{hash:{},inverse:c.program(7,v,i),fn:c.program(5,d,i)});if(u||u===0)s+=u;s+=" in this course.\n  </p>\n  <p>\n    <small>The following users will be invited: ",a={hash:{}},s+=l((o=n.truncate,o?o.call(t,t.contact_emails,900,a):f.call(t,"truncate",t.contact_emails,900,a)))+'</small>\n  </p>\n  <p>\n    <a href="#" data-behavior="submit-invite-and-enroll" class="primary-button new-button">Invite New ',u=n["if"].call(t,t.multiple_contacts,{hash:{},inverse:c.program(11,g,i),fn:c.program(9,m,i)});if(u||u===0)s+=u;return s+='</a>\n    <a href="#" data-behavior="cancel-invite-and-enroll" class="secondary-button">Cancel</a>\n  </p>\n</div>\n',s});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/admin/enrollment/confirm_invite",["require","marionette","hbs!templates/admin/enrollment/confirm_invite","behaviors/global_notification"],function(e){var n,r,i,s,o;return i=e("marionette"),s=e("hbs!templates/admin/enrollment/confirm_invite"),r=e("behaviors/global_notification"),n=function(e){function n(){return o=n.__super__.constructor.apply(this,arguments),o}return t(n,e),n.prototype.template=s,n.prototype.klass="confirmInvite",n.prototype.ui={button:'[data-behavior="submit-invite-and-enroll"]'},n.prototype.triggers={'click [data-behavior="cancel-invite-and-enroll"]':"cancel",'click [data-behavior="submit-invite-and-enroll"]':"submit"},n.prototype.behaviors={globalNotification:{behaviorClass:r}},n.prototype.onCancel=function(){return Vocat.vent.trigger("notification:empty")},n.prototype.onSubmit=function(){var e,t,n,r=this;return t=new Array,_.each(this.contacts,function(e){return t.push(e.string)}),e=t.join("\n"),this.ui.button.addClass("loading"),this.collection.searchType()==="user"&&(n=this.collection.bulkUrl()),$.ajax(n,{type:"POST",dataType:"json",data:{contacts:e,invite:!0},success:function(e,t,n){return r.handleSubmitSuccess(n.responseJSON)},error:function(e,t,n){return Vocat.vent.trigger("error:add",{level:"error",lifetime:5e3,msg:e.responseJSON.errors}),r.ui.button.removeClass("loading"),r.onCancel()}})},n.prototype.handleSubmitSuccess=function(e){var t,n,r=this;return this.ui.button.removeClass("loading"),n=[],t=[],_.each(e,function(e){return e.success===!0?n.push(e):t.push(e)}),this.collection.fetch(),this.onCancel(),Vocat.vent.trigger("error:add",{level:"notice",lifetime:1e4,msg:_.pluck(n,"message")}),Vocat.vent.trigger("error:add",{level:"error",lifetime:1e4,msg:_.pluck(t,"message")})},n.prototype.initialize=function(e){return this.contacts=e.contacts,this.vent=e.vent},n.prototype.serializeData=function(){var e;return e={contact_emails:_.pluck(this.contacts,"email").join(", "),contacts_count:this.contacts.length,multiple_contacts:this.contacts.length>1,contacts:this.contacts},e},n}(i.ItemView)})}.call(this),define("hbs!templates/admin/enrollment/bulk_input",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){function l(e,t){var r="",i,s;r+='\n<div class="formgrid whole">\n	<div class="alert alert-notice">\n		<ul>\n		',s=n.each.call(e,(i=e.responseData,i==null||i===!1?i:i.successes),{hash:{},inverse:f.noop,fn:f.program(2,c,t)});if(s||s===0)r+=s;r+="\n		</ul>\n		<ul>\n			",s=n.each.call(e,(i=e.responseData,i==null||i===!1?i:i.failures),{hash:{},inverse:f.noop,fn:f.program(4,h,t)});if(s||s===0)r+=s;return r+="\n		</ul>\n	</div>\n</div>\n",r}function c(e,t){var n="";return n+="\n			<li>"+a(typeof e===u?e.apply(e):e)+"</li>\n		",n}function h(e,t){var n="";return n+="\n			<li>"+a(typeof e===u?e.apply(e):e)+"</li>\n			",n}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression,f=this;s+='<div class="formgrid whole">\n	<div data-region="confirm-invite"></div>\n	<label>Bulk Add Users (<a href="#" data-behavior="show-single">or add one user at a time</a>)</label>\n	<textarea rows="10" data-behavior="bulk-input"></textarea>\n	<small class="input-message">Enter one user per line. If LDAP is enabled and the user exists in LDAP, only the email address is required. Otherwise, enter both the name and the email address\n		in the format of "name, email" or "name &lt;email&gt;". For example, "Jane Doe &lt;jane@vocat.io&gt;" and "Jane Doe, jane@vocat.io" are both acceptable entries.</small>\n</div>\n<div class="formgrid whole">\n	<a class="primary-button new-button" href="#" data-behavior="submit">Add Users</a>\n</div>\n',o=n["if"].call(t,t.response,{hash:{},inverse:f.noop,fn:f.program(1,l,i)});if(o||o===0)s+=o;return s+="\n",s});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/admin/enrollment/bulk_input",["require","marionette","jquery_ui","vendor/plugins/ajax_chosen","views/admin/enrollment/confirm_invite","hbs!templates/admin/enrollment/bulk_input"],function(e){var n,r,i,s,o;return i=e("marionette"),e("jquery_ui"),e("vendor/plugins/ajax_chosen"),n=e("views/admin/enrollment/confirm_invite"),s=e("hbs!templates/admin/enrollment/bulk_input"),r=function(e){function r(){return o=r.__super__.constructor.apply(this,arguments),o}return t(r,e),r.prototype.ui={showSingle:'[data-behavior="show-single"]',bulkInput:'[data-behavior="bulk-input"]',submit:'[data-behavior="submit"]'},r.prototype.triggers={'click [data-behavior="show-single"]':"showSingle",'click [data-behavior="submit"]':"submit"},r.prototype.regions={confirmInvite:'[data-region="confirm-invite"]'},r.prototype.initialize=function(e){return this.vent=e.vent},r.prototype.onSubmit=function(){var e,t,n=this;return this.ui.submit.addClass("loading"),e=this.ui.bulkInput.val(),this.collection.searchType()==="user"&&(t=this.collection.bulkUrl()),$.ajax(t,{type:"POST",dataType:"json",data:{contacts:e,invite:!1},success:function(e,t,r){return n.handleSubmitSuccess(r.responseJSON)},error:function(e,t,r){return n.ui.submit.removeClass("loading"),Vocat.vent.trigger("error:add",{level:"error",lifetime:5e3,msg:e.responseJSON.errors})}})},r.prototype.showInviteMustConfirm=function(e){return Vocat.vent.trigger("notification:show",new n({collection:this.collection,contacts:e,vent:this.vent}))},r.prototype.handleSubmitSuccess=function(e){var t,n,r,i,s,o=this;return this.ui.submit.removeClass("loading"),t=[],n=[],s=[],i=[],_.each(e,function(e){return e.success===!0?s.push(e):e.success===!1&&e.reason==="must_confirm"?(i.push(e.string),t.push(e)):(i.push(e.string),n.push(e))}),Vocat.vent.trigger("error:add",{level:"notice",lifetime:1e4,msg:_.pluck(s,"message")}),Vocat.vent.trigger("error:add",{level:"error",lifetime:1e4,msg:_.pluck(n,"message")}),r=i.join("\n"),this.ui.bulkInput.val(r),t.length>0&&this.showInviteMustConfirm(t),this.collection.fetch()},r.prototype.template=s,r}(i.LayoutView)})}.call(this),define("hbs!templates/admin/enrollment/invite",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,'<div class="formgrid whole">\n	<label>Or Invite a New User</label>\n	<input data-behavior="contact" type="text">\n	<small>If LDAP is enabled and the user exists in LDAP, only the email\n		address is required. Otherwise, enter both the name and the email address in the format of "name, email" or\n		"name &lt;email&gt;". For example, "Jane Doe &lt;jane@vocat.io&gt;" and "Jane Doe, jane@vocat.io" are both acceptable\n		entries.\n	</small>\n</div>\n<div class="formgrid whole">\n	<a href="#" data-behavior="submit-invite-and-enroll" class="primary-button new-button">Invite User</a>\n</div>\n'});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/admin/enrollment/invite",["require","marionette","hbs!templates/admin/enrollment/invite"],function(e){var n,r,i,s;return r=e("marionette"),i=e("hbs!templates/admin/enrollment/invite"),n=function(e){function n(){return s=n.__super__.constructor.apply(this,arguments),s}return t(n,e),n.prototype.template=i,n.prototype.ui={button:'[data-behavior="submit-invite-and-enroll"]',input:'[data-behavior="contact"]'},n.prototype.triggers={'click [data-behavior="cancel-invite-and-enroll"]':"cancel",'click [data-behavior="submit-invite-and-enroll"]':"submit"},n.prototype.onCancel=function(){return this.ui.input.val("")},n.prototype.onSubmit=function(){var e,t,n=this;return e=this.ui.input.val(),this.ui.button.addClass("loading"),this.collection.searchType()==="user"&&(t=this.collection.bulkUrl()),$.ajax(t,{type:"POST",dataType:"json",data:{contacts:e,invite:!0},success:function(e,t,r){return n.handleSubmitSuccess(r.responseJSON)},error:function(e,t,r){return Vocat.vent.trigger("error:add",{level:"error",lifetime:5e3,msg:e.responseJSON.errors}),n.ui.button.removeClass("loading"),n.onCancel()}})},n.prototype.handleSubmitSuccess=function(e){var t,n,r=this;return this.ui.button.removeClass("loading"),n=[],t=[],_.each(e,function(e){return e.success===!0?n.push(e):t.push(e)}),Vocat.vent.trigger("error:add",{level:"notice",lifetime:1e4,msg:_.pluck(n,"message")}),Vocat.vent.trigger("error:add",{level:"error",lifetime:1e4,msg:_.pluck(t,"message")}),this.collection.fetch(),this.onCancel()},n.prototype.initialize=function(e){return this.vent=e.vent},n.prototype.serializeData=function(){var e;return e={showInput:this.showInput,contacts:this.contacts},e},n}(r.ItemView)})}.call(this),define("hbs!templates/flash/flash_messages_item",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){function l(e,t){var r="",i;r+="\n  <ul>\n    ",i=n.each.call(e,e.msg,{hash:{},inverse:f.noop,fn:f.program(2,c,t)});if(i||i===0)r+=i;return r+="\n    </ul>\n",r}function c(e,t){var n="";return n+="\n      <li>"+a(typeof e===u?e.apply(e):e)+"</li>\n    ",n}function h(e,t){var r="",i;return r+="\n  <p>\n  ",(i=n.property)?i=i.call(e,{hash:{}}):(i=e.property,i=typeof i===u?i.apply(e):i),r+=a(i)+" ",(i=n.msg)?i=i.call(e,{hash:{}}):(i=e.msg,i=typeof i===u?i.apply(e):i),r+=a(i)+"\n  </p>\n",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression,f=this;s+='<aside class="alert--label"></aside>\n',o=n["if"].call(t,t.enumerable,{hash:{},inverse:f.noop,fn:f.program(1,l,i)});if(o||o===0)s+=o;s+="\n",o=n.unless.call(t,t.enumerable,{hash:{},inverse:f.noop,fn:f.program(4,h,i)});if(o||o===0)s+=o;return s+='\n<a data-behavior="close" class="alert--close" href="#"></a>\n',s});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/flash/flash_messages_item",["marionette","hbs!templates/flash/flash_messages_item"],function(e,n){var r,i;return r=function(e){function r(){return i=r.__super__.constructor.apply(this,arguments),i}return t(r,e),r.prototype.template=n,r.prototype.lifetime=1e4,r.prototype.className=function(){return"alert alert-"+this.model.get("level")},r.prototype.triggers={'click [data-behavior="destroy"]':"destroy"},r.prototype.initialize=function(e){var t;t=parseInt(this.model.get("lifetime"));if(t>0)return this.lifetime=t},r.prototype.onDestroy=function(){return this.model.destroy()},r.prototype.onBeforeRender=function(){return this.$el.hide()},r.prototype.serializeData=function(){var e;return e=r.__super__.serializeData.call(this),_.isArray(this.model.get("msg"))||_.isObject(this.model.get("msg"))?e.enumerable=!0:e.enumerable=!1,e},r.prototype.onRender=function(){var e=this;return this.model.get("no_fade")===!0?this.$el.show():this.$el.fadeIn(),setTimeout(function(){return e.onDestroy()},this.lifetime)},r}(e.ItemView)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("collections/flash_message_collection",["backbone","models/flash_message"],function(e,n){var r,i;return r=function(e){function r(){return i=r.__super__.constructor.apply(this,arguments),i}return t(r,e),r.prototype.model=n,r.prototype.initialize=function(){},r}(e.Collection)})}.call(this),define("hbs!templates/flash/flash_messages",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,'<div data-behavior="flash-container" class="alerts"></div>'});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/abstract/abstract_flash_messages",["require","marionette","views/flash/flash_messages_item","collections/flash_message_collection","hbs!templates/flash/flash_messages"],function(e){var n,r,i,s,o,u;return s=e("marionette"),i=e("views/flash/flash_messages_item"),r=e("collections/flash_message_collection"),o=e("hbs!templates/flash/flash_messages"),n=function(e){function n(){return u=n.__super__.constructor.apply(this,arguments),u}return t(n,e),n.prototype.childView=i,n.prototype.clearOnAdd=!1,n.prototype.template=o,n.prototype.className="alerts",n.prototype.childViewContainer='[data-behavior="flash-container"]',n.prototype.initialize=function(){var e=this;return this.collection=s.getOption(this,"collection"),this.collection||(this.collection=new r([],{})),this.vent=s.getOption(this,"vent"),this.clearOnAdd=s.getOption(this,"clearOnAdd"),this.listenTo(this.vent,"error:add",function(t){return e.processMessage(t)}),this.listenTo(this.vent,"error:clear",function(t){return e.collection.reset()})},n.prototype.processMessage=function(e){var t,n,r=this;if(!_.isObject(e.msg)&&!_.isArray(e.msg))return this.addMessage(e.level,e.msg,e.property,e.lifetime);e.level!=null?t=e.level:t="notice",e.lifetime!=null?n=e.lifetime:n=null;if(!_.isArray(e.msg))return!_.isString(e.msg)&&_.isObject(e.msg)?_.each(e.msg,function(e,i){return i==="base"?r.addMessage(t,e,null,n):r.addMessage(t,""+(i.charAt(0).toUpperCase()+i.slice(1))+" "+e,null,n)}):this.addMessage(t,e.msg,null,n);if(e.msg.length>0)return this.addMessage(t,e.msg,null,n)},n.prototype.addMessage=function(e,t,n,r){var i;return e==null&&(e="notice"),t==null&&(t=""),n==null&&(n=null),r==null&&(r=!1),i={msg:t,level:e,property:n,lifetime:r},this.clearOnAdd===!0&&this.collection.reset(),this.collection.add(i)},n}(s.CollectionView)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/flash/flash_messages",["require","views/abstract/abstract_flash_messages"],function(e){var n,r,i;return n=e("views/abstract/abstract_flash_messages"),r=function(e){function n(){return i=n.__super__.constructor.apply(this,arguments),i}return t(n,e),n}(n)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/admin/enrollment_layout",["require","marionette","hbs!templates/admin/enrollment_layout","views/admin/enrollment/list","views/admin/enrollment/input","views/admin/enrollment/bulk_input","views/admin/enrollment/invite","views/flash/flash_messages"],function(e){var n,r,i,s,o,u,a,f,l;return u=e("marionette"),f=e("hbs!templates/admin/enrollment_layout"),s=e("views/admin/enrollment/list"),i=e("views/admin/enrollment/input"),r=e("views/admin/enrollment/bulk_input"),a=e("views/admin/enrollment/invite"),o=e("views/flash/flash_messages"),n=function(e){function n(){return l=n.__super__.constructor.apply(this,arguments),l}return t(n,e),n.prototype.listType="users",n.prototype.template=f,n.prototype.label="",n.prototype.ui={studentInput:'[data-behavior="student-input"]',labelContainer:'[data-behavior="label-container"]'},n.prototype.regions={input:'[data-region="input"]',list:'[data-region="list"]',invite:'[data-region="invite"]',flash:'[data-region="flash"]'},n.prototype.initialize=function(e){return this.searchCollection=this.collection.getSearchCollection(),this.searchType=this.collection.searchType(),this.enrollmentList=new s({collection:this.collection,vent:this}),this.flashView=new o({vent:this,clearOnAdd:!1})},n.prototype.showBulkEnrollAndInvite=function(){var e,t=this;return this.invite.reset(),e=new r({collection:this.collection,vent:this}),this.input.show(e),this.listenTo(e,"showSingle",function(e){return t.showSingle()}),this.input.show(e)},n.prototype.showSingleInvite=function(){var e;return e=new a({collection:this.collection,vent:this,useAltTemplate:!0}),this.invite.show(e)},n.prototype.showBulk=function(){return this.showBulkEnrollAndInvite()},n.prototype.onShow=function(){var e;e=this.$el.parent().data();if(e.hasOwnProperty("label"))return this.label=e.label,this.ui.labelContainer.html(this.label)},n.prototype.showSingle=function(){this.showSingleEnroll();if(this.searchType==="user")return this.showSingleInvite()},n.prototype.showSingleEnroll=function(){var e,t=this;return e=new i({collection:this.searchCollection,enrollmentCollection:this.collection,collectionType:this.searchType,vent:this}),this.input.show(e),this.listenTo(e,"showBulk",function(e){return t.showBulk()}),this.input.show(e)},n.prototype.onRender=function(){return this.list.show(this.enrollmentList),this.flash.show(this.flashView),this.showSingle()},n.prototype.serializeData=function(){return{label:this.label}},n}(u.LayoutView)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("models/project",["backbone"],function(e){var n,r;return n=function(e){function n(){return r=n.__super__.constructor.apply(this,arguments),r}return t(n,e),n.prototype.urlRoot="/api/v1/projects",n.prototype.hasRubric=function(){return _.isObject(this.get("rubric"))},n.prototype.evaluatable=function(){return this.get("evaluatable")},n}(e.Model)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("collections/project_collection",["backbone","models/project"],function(e,n){var r,i;return r=function(e){function r(){return i=r.__super__.constructor.apply(this,arguments),i}return t(r,e),r.prototype.model=n,r.prototype.activeModel=null,r.prototype.getActive=function(){return this.activeModel},r.prototype.setActive=function(e){var t,n;t=this.getActive(),e!=null?(n=this.get(e),n!=null?this.activeModel=n:this.activeModel=null):this.activeModel=null;if(this.activeModel!==t)return this.trigger("change:active",this.activeModel)},r}(e.Collection)})}.call(this),define("hbs!templates/course/manage/projects/projects",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,'<div class="table-wrapper">\n  <table class="table table-sortable">\n    <thead>\n    <tr>\n      <th class="row-handle"></th>\n      <th>Name</th>\n      <th>Rubric</th>\n	    <th>Type</th>\n      <th>Actions</th>\n    </tr>\n    </thead>\n    <tbody>\n    </tbody>\n  </table>\n</div>\n'});return n}),function(){define("app/helpers/if_match",["handlebars"],function(e){return e.registerHelper("if_match",function(e,t,n){return e===t?n.fn(this):n.inverse(this)})})}.call(this),define("hbs!templates/course/manage/projects/project_row",["hbs","handlebars","app/helpers/if_match"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){var r="",i;return r+='\n      <a href="projects/',(i=n.id)?i=i.call(e,{hash:{}}):(i=e.id,i=typeof i===f?i.apply(e):i),r+=l(i)+'/edit">',(i=n.name)?i=i.call(e,{hash:{}}):(i=e.name,i=typeof i===f?i.apply(e):i),r+=l(i)+" ",(i=n.listing_order_position)?i=i.call(e,{hash:{}}):(i=e.listing_order_position,i=typeof i===f?i.apply(e):i),r+=l(i)+"</a>\n    ",r}function d(e,t){var r="",i;return r+="\n      ",(i=n.name)?i=i.call(e,{hash:{}}):(i=e.name,i=typeof i===f?i.apply(e):i),r+=l(i)+"\n    ",r}function v(e,t){var r="",i;return r+="\n		  ",(i=n.rubric_name)?i=i.call(e,{hash:{}}):(i=e.rubric_name,i=typeof i===f?i.apply(e):i),r+=l(i)+"\n    ",r}function m(e,t){return"\n	    None\n	  "}function g(e,t){return"\n			User Project\n		"}function y(e,t){return"\n			Group Project\n		"}function b(e,t){return"\n			Open Project\n		"}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f="function",l=this.escapeExpression,c=this,h=n.helperMissing;s+='  <td class="row-handle"><span></span></td>\n  <th>\n    <a href="projects/',(o=n.id)?o=o.call(t,{hash:{}}):(o=t.id,o=typeof o===f?o.apply(t):o),s+=l(o)+'">\n    ',u=n["if"].call(t,(o=t.abilities,o==null||o===!1?o:o.can_update),{hash:{},inverse:c.program(3,d,i),fn:c.program(1,p,i)});if(u||u===0)s+=u;s+="\n    </a>\n  </th>\n  <td>\n	  ",u=n["if"].call(t,t.rubric_name,{hash:{},inverse:c.program(7,m,i),fn:c.program(5,v,i)});if(u||u===0)s+=u;s+="\n  </td>\n	<td>\n		",a={hash:{},inverse:c.noop,fn:c.program(9,g,i)},u=(o=n.if_match,o?o.call(t,t.type,"UserProject",a):h.call(t,"if_match",t.type,"UserProject",a));if(u||u===0)s+=u;s+="\n		",a={hash:{},inverse:c.noop,fn:c.program(11,y,i)},u=(o=n.if_match,o?o.call(t,t.type,"GroupProject",a):h.call(t,"if_match",t.type,"GroupProject",a));if(u||u===0)s+=u;s+="\n		",a={hash:{},inverse:c.noop,fn:c.program(13,b,i)},u=(o=n.if_match,o?o.call(t,t.type,"OpenProject",a):h.call(t,"if_match",t.type,"OpenProject",a));if(u||u===0)s+=u;return s+='\n\n	</td>\n  <td>\n    <a class="gentle-warning-button delete-button" href="projects/',(u=n.id)?u=u.call(t,{hash:{}}):(u=t.id,u=typeof u===f?u.apply(t):u),s+=l(u)+'" data-behavior="destroy">Delete Project</a>\n  </td>\n',s});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/course/manage/projects/project_row",["require","marionette","hbs!templates/course/manage/projects/project_row","views/modal/modal_confirm"],function(e){var n,r,i,s,o;return i=e("marionette"),s=e("hbs!templates/course/manage/projects/project_row"),n=e("views/modal/modal_confirm"),r=function(e){function r(){return o=r.__super__.constructor.apply(this,arguments),o}return t(r,e),r.prototype.template=s,r.prototype.tagName="tr",r.prototype.events={drop:"onDrop"},r.prototype.triggers={'click [data-behavior="destroy"]':"click:destroy"},r.prototype.onConfirmDestroy=function(){var e=this;return this.model.destroy({success:function(){return Vocat.vent.trigger("error:clear"),Vocat.vent.trigger("error:add",{level:"notice",lifetime:"5000",msg:"The project was successfully deleted."})},error:function(){return Vocat.vent.trigger("error:clear"),Vocat.vent.trigger("error:add",{level:"notice",msg:xhr.responseJSON.errors})}})},r.prototype.onClickDestroy=function(){return Vocat.vent.trigger("modal:open",new n({model:this.model,vent:this,headerLabel:"Are You Sure?",descriptionLabel:"Deleting this project will also delete all of its associated submissions and evaluations. Are you sure you want to do this?",confirmEvent:"confirm:destroy",dismissEvent:"dismiss:destroy"}))},r.prototype.onDrop=function(e,t){return this.trigger("update-sort",[this.model,t])},r.prototype.initialize=function(e){return console.log(this.model.attributes)},r}(Marionette.ItemView)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("behaviors/sortable_table",["require","marionette","jquery_ui"],function(e){var n,r,i;return n=e("marionette"),e("jquery_ui"),r=function(e){function n(){return i=n.__super__.constructor.apply(this,arguments),i}return t(n,e),n.prototype.defaults={},n.prototype.ui={table:"tbody"},n.prototype.initialize=function(){var e=this;return this.listenTo(this,"childview:update-sort",function(t,n){return e.updateSort(n[0],n[1])})},n.prototype.onRender=function(){var e=this;return this.ui.table.sortable({revert:!0,handle:".row-handle",items:'tr:not([data-ui-behavior="drag-disabled"])',cursor:"move",revert:175,start:function(t,n){var r,i;return r=n.item.find(".row-handle"),i=r.outerWidth(),e.ui.table.find(".row-handle").each(function(e,t){return console.log($(t).outerWidth(i))})},helper:function(e,t){var n,r;return r=t.children(),n=t.clone(),n.children().each(function(e,t){return $(t).outerWidth(r.eq(e).outerWidth())}),n},stop:function(e,t){return t.item.trigger("drop",t.item.index())}})},n.prototype.updateSort=function(e,t){var n;return n=t,this.view.collection.remove(e),e.set("listing_order_position",n),this.view.collection.add(e,{at:t}),e.save()},n}(n.Behavior)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/course/manage/projects/projects",["require","marionette","collections/project_collection","hbs!templates/course/manage/projects/projects","views/course/manage/projects/project_row","behaviors/sortable_table"],function(e){var n,r,i,s,o,u,a;return o=e("marionette"),n=e("collections/project_collection"),u=e("hbs!templates/course/manage/projects/projects"),i=e("views/course/manage/projects/project_row"),s=e("behaviors/sortable_table"),r=function(e){function n(){return a=n.__super__.constructor.apply(this,arguments),a}return t(n,e),n.prototype.template=u,n.prototype.childView=i,n.prototype.childViewContainer="tbody",n.prototype.behaviors={sortableTable:{behaviorClass:s}},n.prototype.initialize=function(e){},n}(Marionette.CompositeView)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("controllers/course_controller",["require","marionette","controllers/vocat_controller","collections/enrollment_collection","views/admin/enrollment_layout","collections/project_collection","views/course/manage/projects/projects"],function(e){var n,r,i,s,o,u,a,f;return a=e("marionette"),u=e("controllers/vocat_controller"),r=e("collections/enrollment_collection"),i=e("views/admin/enrollment_layout"),s=e("collections/project_collection"),o=e("views/course/manage/projects/projects"),n=function(e){function n(){return f=n.__super__.constructor.apply(this,arguments),f}return t(n,e),n.prototype.collections={project:new s([])},n.prototype.initialize=function(){return this.bootstrapCollections()},n.prototype.creatorEnrollment=function(e){var t;if(!_.isNaN(parseInt(e)))return Vocat.addRegions({creatorEnrollment:'[data-region="creator-enrollment"]'}),t=new i({collection:new r([],{scope:{course:e,role:"creator"}})}),Vocat.creatorEnrollment.show(t)},n.prototype.courseManageProjects=function(e){var t;if(!_.isNaN(parseInt(e))&&$('[data-region="projects"]').length>0)return Vocat.addRegions({projects:'[data-region="projects"]'}),t=new o({collection:this.collections.project}),Vocat.projects.show(t)},n}(u)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("controllers/admin_controller",["marionette","controllers/vocat_controller","collections/enrollment_collection","views/admin/enrollment_layout"],function(e,n,r,i){var s,o;return s=function(e){function n(){return o=n.__super__.constructor.apply(this,arguments),o}return t(n,e),n.prototype.collections={},n.prototype.evaluatorEnrollment=function(e){var t;if(!_.isNaN(parseInt(e)))return Vocat.addRegions({evaluatorEnrollment:'[data-region="evaluator-enrollment"]'}),t=new i({collection:new r([],{scope:{course:e,role:"evaluator"}})}),Vocat.evaluatorEnrollment.show(t)},n.prototype.assistantEnrollment=function(e){var t;if(!_.isNaN(parseInt(e)))return Vocat.addRegions({assistantEnrollment:'[data-region="assistant-enrollment"]'}),t=new i({collection:new r([],{scope:{course:e,role:"assistant"}})}),Vocat.assistantEnrollment.show(t)},n.prototype.creatorEnrollment=function(e){var t;if(!_.isNaN(parseInt(e)))return Vocat.addRegions({creatorEnrollment:'[data-region="creator-enrollment"]'}),t=new i({collection:new r([],{scope:{course:e,role:"creator"}})}),Vocat.creatorEnrollment.show(t)},n.prototype.courseEnrollment=function(e){var t;if(!_.isNaN(parseInt(e)))return Vocat.addRegions({creatorEnrollment:'[data-region="creator-enrollment"]'}),t=new i({collection:new r([],{scope:{user:e}})}),Vocat.creatorEnrollment.show(t)},n}(n)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("models/video",["backbone"],function(e){var n,r;return n=function(e){function n(){return r=n.__super__.constructor.apply(this,arguments),r}return t(n,e),n.prototype.paramRoot="video",n.prototype.urlRoot="/api/v1/videos",n.prototype.getSourceDetails=function(){switch(this.get("source")){case"youtube":return{mime:"video/youtube",key:"youtube"};case"vimeo":return{mime:"video/vimeo",key:"vimeo"};case"attachment":return{mime:"video/mp4",key:"html5"}}},n}(e.Model)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("models/score",["backbone"],function(e){var n,r;return n=function(e){function n(){return r=n.__super__.constructor.apply(this,arguments),r}return t(n,e),n.prototype.getTicks=function(){var e,t,n,r,i,s,o;t=parseInt(this.get("high")),r=parseInt(this.get("low")),r=0,s=t-r,s<0&&(o=1);if(s<10)o=s;else{e=[],n=10;while(!(n<=3))i=s%n,i===0&&s/n<10&&e.push(n),n--;o=_.max(e)}return _.range(o)},n.prototype.getTickWidth=function(){return 100/this.getTicks().length},n.prototype.initialize=function(){},n.prototype.toJSON=function(){var e;return e=n.__super__.toJSON.call(this),e.ticks=this.getTicks(),e.tickWidth=this.getTickWidth(),e},n}(e.Model)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("collections/score_collection",["backbone","models/score"],function(e,n){var r,i;return r=function(e){function r(){return i=r.__super__.constructor.apply(this,arguments),i}return t(r,e),r.prototype.model=n,r}(e.Collection)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("models/evaluation",["require","backbone","collections/score_collection"],function(e){var n,r,i,s;return n=e("backbone"),i=e("collections/score_collection"),r=function(e){function n(){return s=n.__super__.constructor.apply(this,arguments),s}return t(n,e),n.prototype.paramRoot="evaluation",n.prototype.omitAttributes=["total_points","total_percentage","total_percentage_rounded"],n.prototype.urlRoot="/api/v1/evaluations",n.prototype.takeSnapshot=function(){var e=this;return this._snapshotAttributes=_.clone(this.attributes),this._snapshotAttributes.score_details={},_.each(this.attributes.score_details,function(t,n){return e._snapshotAttributes.score_details[n]=_.clone(t)}),this._snapshotAttributes.scores=_.clone(this.attributes.scores)},n.prototype.revert=function(){return this._snapshotAttributes&&(this.set(this._snapshotAttributes,{}),this.takeSnapshot(),this.updateScoresCollection()),this.trigger("revert")},n.prototype.sync=function(e,t,n){var r,i=this;return n.attrs==null&&(r=t.toJSON(n),_.each(r,function(e,t){if(_.indexOf(i.omitAttributes,t)!==-1)return delete r[t]}),n.attrs=r),Backbone.sync(e,t,n)},n.prototype.updateScoreFromCollection=function(){var e,t,n=this;return e=this.get("score_details"),t=this.get("scores"),this.scoreCollection.each(function(n){var r;return r=n.id,t[r]=n.get("score"),e[r].score=n.get("score"),e[r].percentage=n.get("percentage")}),this.set("score_details",e),this.set("scores",t),this.updateCalculatedScoreFields()},n.prototype.initialize=function(){var e=this;return this.takeSnapshot(),this.updateCalculatedScoreFields(),this.scoreCollection=new i,this.updateScoresCollection(),this.listenTo(this,"sync",function(t){return e.updateScoresCollection(),e.takeSnapshot()}),this.listenTo(this.scoreCollection,"change",function(t){return e.updateScoreFromCollection()}),this.on("change:scores",function(){return e.updateCalculatedScoreFields()})},n.prototype.updateCalculatedScoreFields=function(){var e,t,n=this;return t=0,_.each(this.get("score_details"),function(e,n){return t+=parseInt(e.score)}),e=parseFloat(t/parseInt(this.get("points_possible")))*100,this.set("total_score",t),this.set("total_percentage",e),this.set("total_percentage_rounded",e.toFixed(0))},n.prototype.updateScoresCollection=function(){var e,t,n,r=this;return t=this.get("score_details"),e=[],_.each(t,function(t,n){var r;return r=_.clone(t),r.id=n,e.push(r)}),n=!0,this.scoreCollection.length===0&&e.length>0?n=!1:_.each(e,function(e,t){var i;i=r.scoreCollection.get(e.id);if(i!=null&&i.score!==e.score)return n=!1}),this.scoreCollection.reset(e,{silent:n})},n.prototype.scoreDetailsWithRubricDescriptions=function(e){var t;return t=this.get("score_details"),_.each(t,function(n,r){var i;return i=e.getRangeForScore(n.score),n.desc=e.getCellDescription(r,i.id),n.range=i.get("name"),t[r]=n}),t},n.prototype.getScoresCollection=function(){return this.scoreCollection},n}(Backbone.Model)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("models/asset",["backbone"],function(e){var n,r;return n=function(e){function n(){return r=n.__super__.constructor.apply(this,arguments),r}return t(n,e),n.prototype.urlRoot="/api/v1/assets",n}(e.Model)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("collections/asset_collection",["backbone","models/asset"],function(e,n){var r,i;return r=function(e){function r(){return i=r.__super__.constructor.apply(this,arguments),i}return t(r,e),r.prototype.model=n,r.prototype.comparator=function(e){return e.get("listing_order_position")},r.prototype.url="/api/v1/assets",r}(e.Collection)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("models/submission",["require","backbone","models/video","models/evaluation","models/project","collections/asset_collection"],function(e){var n,r,i,s,o,u,a;return r=e("backbone"),u=e("models/video"),i=e("models/evaluation"),s=e("models/project"),n=e("collections/asset_collection"),o=function(e){function r(){return a=r.__super__.constructor.apply(this,arguments),a}return t(r,e),r.prototype.assetCollection=null,r.prototype.urlRoot=function(){return"/api/v1/submissions"},r.prototype.updateUrl=function(){return""+this.urlRoot()+"/"+this.id},r.prototype.requestTranscoding=function(){},r.prototype.destroyVideo=function(){var e=this;return this.video.destroy({success:function(){return e.set("video",null),e.fetch({url:e.updateUrl()})}})},r.prototype.toJSON=function(){var e;return e=r.__super__.toJSON.call(this),this.video?e.video=this.video.toJSON():e.video=null,e},r.prototype.getVideoId=function(){return this.video!=null&&this.video.id!=null?this.video.id:null},r.prototype.updateVideo=function(){var e;e=this.get("video");if(e!=null)return this.video=new u(e)},r.prototype.hasVideo=function(){return this.get("video")!=null},r.prototype.publishEvaluation=function(){var e,t;return this.set("current_user_published",!0),t=_.findWhere(this.get("evaluations"),{current_user_is_evaluator:!0}),e=new i(t),e.save({published:!0})},r.prototype.unpublishEvaluation=function(){var e,t;return this.set("current_user_published",!1),t=_.findWhere(this.get("evaluations"),{current_user_is_evaluator:!0}),e=new i(t),e.save({published:!1})},r.prototype.unsetMyEvaluation=function(){return this.set("current_user_has_evaluated",!0),this.set("current_user_percentage",0),this.set("current_user_evaluation_published",!1)},r.prototype.toggleEvaluationPublish=function(){var e,t=this;return e=$.Deferred(),e.then(function(){if(t.get("current_user_published")===!0)return t.unpublishEvaluation();if(t.get("current_user_published")===!1)return t.publishEvaluation()}),this.get("serialized_state")==="partial"?this.fetch({success:function(){return e.resolve()}}):e.resolve()},r.prototype.assets=function(){return this.assetCollection},r.prototype.project=function(){return this.projectModel==null&&(this.projectModel=new s(this.get("project"))),this.projectModel},r.prototype.initialize=function(){var e=this;return this.listenTo(this,"change:video",function(){return e.updateVideo()}),this.updateVideo(),this.assetCollection=new n(this.get("assets"))},r}(r.Model)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("collections/submission_collection",["marionette","backbone","models/submission"],function(e,n,r){var i,s;return i=function(e){function n(){return s=n.__super__.constructor.apply(this,arguments),s}return t(n,e),n.prototype.model=r,n.prototype.initialize=function(e,t){return this.options=t},n.prototype.comparator=function(e){return e.get("project_name")},n}(n.Collection)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("collections/submission_for_course_collection",["require","collections/submission_collection"],function(e){var n,r,i;return n=e("collections/submission_collection"),r=function(e){function n(){return i=n.__super__.constructor.apply(this,arguments),i}return t(n,e),n.prototype.url="/api/v1/submissions/for_course",n}(n)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("models/group",["backbone"],function(e){var n,r;return n=function(e){function n(){return r=n.__super__.constructor.apply(this,arguments),r}return t(n,e),n.prototype.creatorType="Group",n.prototype.urlRoot="/api/v1/groups",n.prototype.validate=function(e,t){var n,r;return n=[],(e.name==null||e.name==="")&&n.push({level:"error",message:"Please enter a name before creating the group"}),n.length>0?r=n:r=!1,r},n.prototype.takeSnapshot=function(){return this._snapshotAttributes=_.clone(this.attributes)},n.prototype.revert=function(){if(this._snapshotAttributes)return this.set(this._snapshotAttributes,{})},n.prototype.initialize=function(){var e=this;return this.takeSnapshot(),this.on("sync",function(){return e.takeSnapshot()})},n}(e.Model)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("collections/group_collection",["backbone","models/group"],function(e,n){var r,i;return r=function(r){function s(){return i=s.__super__.constructor.apply(this,arguments),i}return t(s,r),s.prototype.model=n,s.prototype.activeModel=null,s.prototype.initialize=function(e,t){return this.options=t,this.courseId=t.courseId},s.prototype.url=function(){return"/api/v1/courses/"+this.courseId+"/groups"},s.prototype.getNextGroupName=function(){var e,t,n;e=this.length,n="Group #"+(e+1),t=0;while(t<100&&this.findWhere({name:n}))t++,n="Group #"+e++;return n},s.prototype.save=function(){var t,n,r,i=this;return t={course:{id:this.courseId,groups_attributes:this.toJSON()}},r="/api/v1/courses/"+this.courseId,n=e.sync("update",this,{url:r,contentType:"application/json",data:JSON.stringify(t)}),n.done(function(e){return i.trigger("sync"),i.each(function(e){return e.trigger("sync")})})},s.prototype.getActive=function(){return this.activeModel},s.prototype.setActive=function(e){var t,n;t=this.getActive(),e!=null?(n=this.get(e),n!=null?this.activeModel=n:this.activeModel=null):this.activeModel=null;if(this.activeModel!==t)return this.trigger("change:active",this.activeModel)},s}(e.Collection)})}.call(this),define("hbs!templates/course_map/course_map_layout",["hbs","handlebars","app/helpers/if_match"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){return'checked="checked"'}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f="function",l=this.escapeExpression,c=this,h=n.helperMissing;s+='<div data-region="flash" class="flash-fullbleed"></div>\n\n<div class="matrix-detail" style="display: none" data-region="detail"></div>\n\n\n<div class="page-section page-section-clear">\n  <div class="header-wrapper">\n    <div class="header">\n      <h1>Evaluations</h1>\n    </div>\n  </div>\n  <div class="body">\n	  <div class="matrix-warning" data-region="warning"></div>\n    <div data-behavior="hide-on-warning" class="matrix-wrapper">\n\n	    <button style="display: none;" data-behavior="matrix-slider-left" class="matrix-cells-wrapper--back"></button>\n	    <button style="display: none;" data-behavior="matrix-slider-right" class="matrix-cells-wrapper--forward"></button>\n\n	    <div class="matrix-wrapper--top" data-class="sticky-header">\n		    <div class="matrix-wrapper--top-left-cell" data-behavior="top-left-cell" data-match-height-target>\n					<form class="formgrid formgrid-tight matrix-view-toggle">\n						<div class="formgrid formgrid-whole">\n							',(o=n.creatorType)?o=o.call(t,{hash:{}}):(o=t.creatorType,o=typeof o===f?o.apply(t):o),s+=l(o)+'\n							<span class="label">Currently Viewing:</span>\n							<label class="label-inline" for="view-individuals">\n								<input ',a={hash:{},inverse:c.noop,fn:c.program(1,p,i)},u=(o=n.if_match,o?o.call(t,t.creatorType,"User",a):h.call(t,"if_match",t.creatorType,"User",a));if(u||u===0)s+=u;s+='\n								type="radio"\n								data-behavior="view-toggle"\n								id="view-individuals"\n								name="view"\n								value="individuals">\n								Individuals\n							</label>\n							<label class="label-inline" for="view-groups">\n								<input ',a={hash:{},inverse:c.noop,fn:c.program(1,p,i)},u=(o=n.if_match,o?o.call(t,t.creatorType,"Group",a):h.call(t,"if_match",t.creatorType,"Group",a));if(u||u===0)s+=u;return s+='\n								type="radio"\n								data-behavior="view-toggle"\n								id="view-groups"\n								name="view"\n								value="groups">\n								Groups\n							</labe>\n						</div>\n					</form>\n		    </div>\n		    <div class="matrix-wrapper--top-mask-left" data-match-height-target></div>\n		    <div class="matrix-wrapper--top-mask-right" data-match-height-target></div>\n		    <div class="matrix-wrapper--columns">\n			    <table class="table matrix matrix-col-headers" data-behavior="col-headers" data-region="projects">\n			    </table>\n		    </div>\n	    </div>\n\n	    <div class="matrix-wrapper--bottom">\n\n		    <div class="matrix-wrapper--left">\n			    <div class="matrix-wrapper--creators" data-vertical-headers data-region="creators"></div>\n		    </div>\n\n		    <div class="matrix-wrapper--body" data-behavior="matrix-stage">\n			    <div class="matrix-body" data-behavior="matrix-actor">\n				    <div class="matrix-wrapper--cells" >\n					    <table class="table matrix matrix-cells" data-region="matrix">\n					    </table\n				    </div>\n			    </div>\n		    </div>\n\n	    </div>\n\n    </div>\n  </div>\n</div>\n\n',s});return n}),function(){define("collections/collection_proxy",[],function(){return function(e){var t;return t=new e.constructor,t._callbacks={},t.where=function(n){var r;return _.isFunction(n)?r=e.filter(n):_.isObject(n)?r=e.where(n):r=e.models,t._currentCriteria=n,t.reset(r)},e.on("reset add remove",function(e){return t.where(t._currentCriteria)}),t}})}.call(this),define("hbs!templates/course_map/projects_item",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){function l(e,t){var r="",i;return r+='\n<a class="matrix--column-header--link" data-behavior="project-title" href="#"><span>',(i=n.name)?i=i.call(e,{hash:{}}):(i=e.name,i=typeof i===u?i.apply(e):i),r+=a(i)+"</span></a>\n",r}function c(e,t){var r="",i;return r+="\n<span>",(i=n.name)?i=i.call(e,{hash:{}}):(i=e.name,i=typeof i===u?i.apply(e):i),r+=a(i)+"</span>\n",r}function h(e,t){var r="",i;return r+='\n	    <li><a href="/courses/',(i=n.courseId)?i=i.call(e,{hash:{}}):(i=e.courseId,i=typeof i===u?i.apply(e):i),r+=a(i)+"/manage/projects/",(i=n.id)?i=i.call(e,{hash:{}}):(i=e.id,i=typeof i===u?i.apply(e):i),r+=a(i)+'/edit">Edit Project Settings</a></li>\n	    ',r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression,f=this;o=n["if"].call(t,t.userCanAdministerCourse,{hash:{},inverse:f.program(3,c,i),fn:f.program(1,l,i)});if(o||o===0)s+=o;s+='\n\n<div>\n<div class="dropdown dropdown-inline" data-behavior="dropdown">\n  <a class="dropdown--toggle" data-behavior="toggle" href="#">Options</a>\n  <div class="dropdown--options" data-behavior="dropdown-options">\n    <ul>\n      <li><a href="#" data-behavior="publish-all">Publish All Evaluations</a></li>\n      <li><a href="#" data-behavior="unpublish-all">Unpublish All Evaluations</a></li>\n	    ',o=n["if"].call(t,t.userCanAdministerCourse,{hash:{},inverse:f.noop,fn:f.program(5,h,i)});if(o||o===0)s+=o;return s+="\n    </ul>\n  </div>\n</div>\n</div>\n",s});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/course_map/projects_item",["require","marionette","hbs!templates/course_map/projects_item","views/layout/dropdown","views/modal/modal_confirm"],function(e){var n,r,i,s,o,u;return i=e("marionette"),o=e("hbs!templates/course_map/projects_item"),r=e("views/layout/dropdown"),s=e("views/modal/modal_confirm"),n=function(e){function n(){return u=n.__super__.constructor.apply(this,arguments),u}return t(n,e),n.prototype.tagName="th",n.prototype.template=o,n.prototype.attributes={"data-behavior":"navigate-project","data-match-height-source":""},n.prototype.ui={dropdowns:'[data-behavior="dropdown"]',publishAll:'[data-behavior="publish-all"]',unpublishAll:'[data-behavior="unpublish-all"]',projectTitle:'[data-behavior="project-title"]'},n.prototype.triggers={"mouseover @ui.projectTitle":"active","mouseout @ui.projectTitle":"inactive","click @ui.projectTitle":"detail","click @ui.publishAll":"click:publish","click @ui.unpublishAll":"click:unpublish"},n.prototype.serializeData=function(){var e;return e=n.__super__.serializeData.call(this),this.creatorType==="Group"&&(e.isGroup=!0,e.isUser=!1),this.creatorType==="User"&&(e.isGroup=!1,e.isUser=!0),e.courseId=this.options.courseId,e.userCanAdministerCourse=window.VocatUserCourseAdministrator,e},n.prototype.initialize=function(e){return this.creatorType=i.getOption(this,"creatorType"),this.$el.attr("data-project",this.model.id),this.vent=e.vent},n.prototype.onShow=function(){return this.ui.dropdowns.each(function(e,t){return new r({el:t,vent:Vocat.vent,allowAdjustment:!1})})},n.prototype.onClickPublish=function(){return Vocat.vent.trigger("modal:open",new s({model:this.model,vent:this,headerLabel:"Are You Sure?",descriptionLabel:'If you proceed, all of your evaluations for "'+this.model.get("name")+'" will be visible to students in the course.',confirmEvent:"confirm:publish",dismissEvent:"dismiss:publish"}))},n.prototype.onClickUnpublish=function(){return Vocat.vent.trigger("modal:open",new s({model:this.model,vent:this,headerLabel:"Are You Sure?",descriptionLabel:'If you proceed, all of your evaluations for "'+this.model.get("name")+'" will no longer be visible to students in the course.',confirmEvent:"confirm:unpublish",dismissEvent:"dismiss:unpublish"}))},n.prototype.onConfirmPublish=function(){return this.vent.triggerMethod("evaluations:publish",this.model)},n.prototype.onConfirmUnpublish=function(){return this.vent.triggerMethod("evaluations:unpublish",this.model)},n}(i.ItemView)})}.call(this),define("hbs!templates/course_map/projects_empty",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression;return s+='\n<a class="matrix--column-header--link" href="/courses/',(o=n.courseId)?o=o.call(t,{hash:{}}):(o=t.courseId,o=typeof o===u?o.apply(t):o),s+=a(o)+'/manage/projects/new">\n	<span>Create a new project</span>\n</a>\n',s});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/course_map/projects_empty",["require","marionette","hbs!templates/course_map/projects_empty"],function(e){var n,r,i,s;return r=e("marionette"),i=e("hbs!templates/course_map/projects_empty"),n=function(e){function n(){return s=n.__super__.constructor.apply(this,arguments),s}return t(n,e),n.prototype.tagName="th",n.prototype.template=i,n.prototype.attributes={"data-behavior":"navigate-project","data-match-height-source":""},n.prototype.initialize=function(e){return this.courseId=e.courseId},n.prototype.serializeData=function(){return{courseId:this.courseId}},n}(r.ItemView)})}.call(this),define("hbs!templates/course_map/projects",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,'<tr data-container="children">\n</tr>\n'});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/course_map/projects",["require","marionette","views/course_map/projects_item","views/course_map/projects_empty","hbs!templates/course_map/projects"],function(e){var n,r,i,s,o,u;return s=e("marionette"),i=e("views/course_map/projects_item"),r=e("views/course_map/projects_empty"),o=e("hbs!templates/course_map/projects"),n=function(e){function n(){return u=n.__super__.constructor.apply(this,arguments),u}return t(n,e),n.prototype.childView=i,n.prototype.emptyView=r,n.prototype.tagName="thead",n.prototype.template=o,n.prototype.ui={childContainer:'[data-container="children"]'},n.prototype.attachHtml=function(e,t,n){return e.isBuffering?e.elBuffer.appendChild(t.el):this.ui.childContainer.append(t.el)},n.prototype.attachBuffer=function(e,t){return this.ui.childContainer.append(t)},n.prototype.childViewOptions=function(){return{creatorType:this.creatorType,vent:this.vent,courseId:this.options.courseId}},n.prototype.onChildviewActive=function(e){return this.vent.triggerMethod("col:active",{project:e.model})},n.prototype.onChildviewInactive=function(e){return this.vent.triggerMethod("col:inactive",{project:e.model})},n.prototype.onChildviewDetail=function(e){return this.vent.triggerMethod("open:detail:project",{project:e.model})},n.prototype.initialize=function(e){return this.options=e||{},this.creatorType=s.getOption(this,"creatorType"),this.vent=s.getOption(this,"vent")},n.prototype.addChild=function(e,t,r){if(this.creatorType==="User"&&e.get("accepts_group_submissions")===!0)return;if(this.creatorType==="Group"&&e.get("accepts_group_submissions")===!1)return;return n.__super__.addChild.apply(this,arguments)},n.prototype.onShow=function(){},n}(s.CompositeView)})}.call(this),define("hbs!templates/course_map/creators",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,'  <tbody data-behavior="matrix-creators">\n    <!-- creators_item.hbs -->\n  </tbody>\n\n'});return n}),define("hbs!templates/course_map/creators_item",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){function l(e,t){var r="",i;return r+='\n		<a data-behavior="creator-name" href="#">',(i=n.name)?i=i.call(e,{hash:{}}):(i=e.name,i=typeof i===u?i.apply(e):i),r+=a(i)+"</a>\n	",r}function c(e,t){var r="",i;return r+="\n		",(i=n.name)?i=i.call(e,{hash:{}}):(i=e.name,i=typeof i===u?i.apply(e):i),r+=a(i)+"\n	",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression,f=this;s+="<th>\n	",o=n["if"].call(t,t.userCanAdministerCourse,{hash:{},inverse:f.program(3,c,i),fn:f.program(1,l,i)});if(o||o===0)s+=o;return s+="\n</th>\n",s});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/course_map/creators_item",["marionette","hbs!templates/course_map/creators_item"],function(e,n){var r,i;return r=function(r){function s(){return i=s.__super__.constructor.apply(this,arguments),i}return t(s,r),s.prototype.tagName="tr",s.prototype.template=n,s.prototype.triggers={'mouseover [data-behavior="creator-name"]':"active",'mouseout [data-behavior="creator-name"]':"inactive",'click [data-behavior="creator-name"]':"detail"},s.prototype.attributes={"data-behavior":"navigate-creator"},s.prototype.serializeData=function(){var e;return e=s.__super__.serializeData.call(this),this.creatorType==="Group"&&(e.isGroup=!0,e.isUser=!1),this.creatorType==="User"&&(e.isGroup=!1,e.isUser=!0),e.courseId=this.options.courseId,e.userCanAdministerCourse=window.VocatUserCourseAdministrator,e},s.prototype.onActive=function(){return this.vent.triggerMethod("row:active",{creator:this.model})},s.prototype.onInactive=function(){return this.vent.triggerMethod("row:inactive",{creator:this.model})},s.prototype.onDetail=function(){return this.vent.triggerMethod("open:detail:creator",{creator:this.model})},s.prototype.initialize=function(t){return this.options=t||{},this.vent=e.getOption(this,"vent"),this.creatorType=e.getOption(this,"creatorType"),this.creatorType==="Group"&&this.$el.addClass("matrix--group-title"),this.listenTo(this.vent,"row:active",function(e){if(e.creator===this.model)return this.$el.addClass("active")}),this.listenTo(this.vent,"row:inactive",function(e){if(e.creator===this.model)return this.$el.removeClass("active")}),this.listenTo(this.model.collection,"change:active",function(e){return e===this.model?(this.$el.addClass("selected"),this.$el.removeClass("active")):this.$el.removeClass("selected")}),this.$el.attr("data-creator",this.model.id)},s}(e.ItemView)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/course_map/creators",["marionette","hbs!templates/course_map/creators","views/course_map/creators_item"],function(e,n,r){var i,s;return i=function(i){function o(){return s=o.__super__.constructor.apply(this,arguments),s}return t(o,i),o.prototype.tagName="table",o.prototype.className="table matrix matrix-row-headers",o.prototype.template=n,o.prototype.childViewContainer="tbody",o.prototype.childView=r,o.prototype.ui={spacer:'[data-behavior="spacer"]'},o.prototype.triggers={'click [data-behavior="show-groups"]':"show:groups",'click [data-behavior="show-users"]':"show:users"},o.prototype.onShowGroups=function(){return this.vent.triggerMethod("show:groups")},o.prototype.onShowUsers=function(){return this.vent.triggerMethod("show:users")},o.prototype.childViewOptions=function(){return{courseId:this.options.courseId,creatorType:this.creatorType,vent:this.vent}},o.prototype.serializeData=function(){return{isUsers:this.creatorType==="User",isGroups:this.creatorType==="Group"}},o.prototype.onShow=function(){var e;return e=$(".matrix-cells thead th").height()},o.prototype.initialize=function(t){return this.options=t||{},this.vent=e.getOption(this,"vent"),this.creatorType=e.getOption(this,"creatorType"),this.listenTo(this.vent,"project_item:shown",function(e){return this.$el.find("thead th").height(e)})},o}(e.CompositeView)})}.call(this),function(){define("app/helpers/if_empty",["handlebars"],function(e){return e.registerHelper("if_empty",function(e,t){return e!==null?t.inverse(this):t.fn(this)})})}.call(this),function(){define("app/helpers/to_i",["handlebars"],function(e){return e.registerHelper("to_i",function(e,t){return!isNaN(e)&&e!==null?parseInt(e):0})})}.call(this),define("hbs!templates/course_map/cell",["hbs","handlebars","app/helpers/if_empty","app/helpers/to_i"],function(e,t){var n=t.template(function(e,t,n,r,i){function h(e,t){return'\n	    <b class="matrix--check"></b>\n	    '}function p(e,t){return"\n	    <b></b>\n	    "}function d(e,t){var r="",i,s,o;r+="\n		",o={hash:{},inverse:c.program(8,m,t),fn:c.program(6,v,t)},s=(i=n.if_empty,i?i.call(e,e.instructor_score_percentage,o):f.call(e,"if_empty",e.instructor_score_percentage,o));if(s||s===0)r+=s;return r+="\n	",r}function v(e,t){return'\n			<dl class="cell--score">\n				<dt>Score</dt>\n				<dd>\n					<b class="matrix--scored">&ndash;&ndash;</b>\n				</dd>\n			</dl>\n		'}function m(e,t){var r="",i,s;return r+='\n			<dl class="cell--score">\n				<dt>Average</dt>\n				<dd>\n					<b class="matrix--scored">',s={hash:{}},r+=l((i=n.to_i,i?i.call(e,e.instructor_score_percentage,s):f.call(e,"to_i",e.instructor_score_percentage,s)))+"<small>%</small></b>\n				</dd>\n			</dl>\n		",r}function g(e,t){var r="",i,s,o;r+='\n	<dl class="cell--score">\n		<dt>Score</dt>\n		<dd>\n			<b class="matrix--scored">',o={hash:{}},r+=l((i=n.to_i,i?i.call(e,e.current_user_percentage,o):f.call(e,"to_i",e.current_user_percentage,o)))+'<small>%</small></b>\n		</dd>\n	</dl>\n	<dl class="cell--published">\n			<dt>Published</dt>\n			<dd>\n	      ',s=n["if"].call(e,e.current_user_published,{hash:{},inverse:c.program(13,b,t),fn:c.program(11,y,t)});if(s||s===0)r+=s;return r+="\n      </dd>\n	</dl>\n	",r}function y(e,t){return'\n		      <b data-behavior="publish-toggle" class="matrix--checkbox checked"></b>\n	      '}function b(e,t){return'\n		      <b data-behavior="publish-toggle" class="matrix--checkbox "></b>\n	      '}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c=this;s+='<div class="cell--container">\n	<dl class="cell--media">\n    <dt>Media</dt>\n	  <dd>\n	    ',o=n["if"].call(t,t.has_video,{hash:{},inverse:c.program(3,p,i),fn:c.program(1,h,i)});if(o||o===0)s+=o;s+="\n	  </dd>\n	</dl>\n\n	",a={hash:{},inverse:c.program(10,g,i),fn:c.program(5,d,i)},u=(o=n.if_empty,o?o.call(t,t.current_user_percentage,a):f.call(t,"if_empty",t.current_user_percentage,a));if(u||u===0)s+=u;return s+="\n\n</div>\n",s});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/course_map/cell",["marionette","hbs!templates/course_map/cell","models/user","models/group","models/evaluation"],function(e,n,r,i,s){var o,u;return o=function(e){function s(){return u=s.__super__.constructor.apply(this,arguments),u}return t(s,e),s.prototype.template=n,s.prototype.tagName="td",s.prototype.className="clickable",s.prototype.triggers={click:"detail",'click [data-behavior="publish-toggle"]':"publish:toggle"},s.prototype.onDetail=function(){var e;return e={project:this.project,creator:this.creator},this.vent.triggerMethod("open:detail:creator:project",e)},s.prototype.onPublishToggle=function(){return this.model.toggleEvaluationPublish()},s.prototype.findModel=function(){this.creator instanceof r?this.creatorType="User":this.creator instanceof i&&(this.creatorType="Group"),this.model=this.submissions.findWhere({creator_type:this.creatorType,creator_id:this.creator.id,project_id:this.project.id});if(this.model!=null)return this.listenTo(this.model,"change sync",function(){return this.render()}),this.render()},s.prototype.serializeData=function(){var e;return e=s.__super__.serializeData.call(this),e.project_evaluatable=this.project.evaluatable(),e.is_active=this.isActive(),e},s.prototype.isActive=function(){return this.project.evaluatable()===!1?!0:this.model.get("current_user_has_evaluated")===!0?!0:!1},s.prototype.initialize=function(e){return this.submissions=e.submissions,this.creator=e.creator,this.vent=e.vent,this.project=this.model,this.findModel(),this.listenTo(this.submissions,"reset",function(){return this.findModel()})},s}(e.ItemView)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/course_map/row",["marionette","views/course_map/cell"],function(e,n){var r,i;return r=function(e){function r(){return i=r.__super__.constructor.apply(this,arguments),i}return t(r,e),r.prototype.tagName="tr",r.prototype.childView=n,r.prototype.triggers={mouseover:"row:active",mouseout:"row:inactive"},r.prototype.onRowActive=function(){return this.vent.triggerMethod("row:active",{creator:this.model})},r.prototype.onRowInactive=function(){return this.vent.triggerMethod("row:inactive",{creator:this.model})},r.prototype.childViewOptions=function(){return{vent:this.vent,creator:this.model,submissions:this.submissions}},r.prototype.initialize=function(e){return this.vent=e.vent,this.submissions=e.collections.submission,this.creatorType=e.creatorType,this.creatorType==="Group"&&this.$el.addClass("matrix--group-row"),this.listenTo(this.vent,"row:active",function(e){if(e.creator===this.model)return this.$el.addClass("active")}),this.listenTo(this.vent,"row:inactive",function(e){if(e.creator===this.model)return this.$el.removeClass("active")})},r}(e.CollectionView)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/course_map/matrix",["marionette","views/course_map/row"],function(e,n){var r,i;return r=function(e){function r(){return i=r.__super__.constructor.apply(this,arguments),i}return t(r,e),r.prototype.tagName="tbody",r.prototype.childView=n,r.prototype.childViewOptions=function(){return{creatorType:this.creatorType,collection:this.collections.project,collections:this.collections,courseId:this.courseId,vent:this.vent}},r.prototype.initialize=function(e){return this.collections=e.collections,this.courseId=e.courseId,this.vent=e.vent,this.creatorType=e.creatorType},r}(e.CollectionView)})}.call(this),function(){define("app/helpers/to_lower",["handlebars"],function(e){return e.registerHelper("to_lower",function(e){return e.toLowerCase()})})}.call(this),define("hbs!templates/course_map/detail_creator",["hbs","handlebars","app/helpers/to_lower","app/helpers/if_match"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){return'\n			<span class="badge">group</span>\n		'}function d(e,t){var r="",i;return r+='\n			<a href="#" data-behavior="open-group-modal">',(i=n.name)?i=i.call(e,{hash:{}}):(i=e.name,i=typeof i===f?i.apply(e):i),r+=l(i)+"\n			</a>\n		",r}function v(e,t){var r="",i;return r+="\n			",(i=n.name)?i=i.call(e,{hash:{}}):(i=e.name,i=typeof i===f?i.apply(e):i),r+=l(i)+"\n		",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f="function",l=this.escapeExpression,c=n.helperMissing,h=this;s+='<div class="page-content--heading">\n	<a class="header-link back-link" data-behavior="detail-close" href="/courses/',(o=n.courseId)?o=o.call(t,{hash:{}}):(o=t.courseId,o=typeof o===f?o.apply(t):o),s+=l(o)+"/",a={hash:{}},s+=l((o=n.to_lower,o?o.call(t,t.creatorType,a):c.call(t,"to_lower",t.creatorType,a)))+'s/evaluations">Back to Evaluations</a>\n	<h1 class="heading-primary">\n		Course Portfolio\n		',a={hash:{},inverse:h.noop,fn:h.program(1,p,i)},u=(o=n.if_match,o?o.call(t,t.creatorType,"Group",a):c.call(t,"if_match",t.creatorType,"Group",a));if(u||u===0)s+=u;s+='\n	</h1>\n	<h2 class="heading-secondary">\n		',a={hash:{},inverse:h.program(5,v,i),fn:h.program(3,d,i)},u=(o=n.if_match,o?o.call(t,t.creatorType,"Group",a):c.call(t,"if_match",t.creatorType,"Group",a));if(u||u===0)s+=u;return s+='\n	</h2>\n</div>\n\n<div class="page-section-spacing-top page-section">\n	<div class="body">\n		<div data-behavior="load-indicator"><span class="primary-button loading">Loading creator\'s portfolio...</span></div>\n		<div data-container="submission-summaries">\n		</div>\n	</div>\n</div>\n',s});return n}),define("hbs!templates/portfolio/portfolio_item_submission",["hbs","handlebars","app/helpers/to_i"],function(e,t){var n=t.template(function(e,t,n,r,i){function h(e,t){var n="",r;return n+='\n		<div class="thumb-container">\n			<a href="'+f((r=(r=e.submission,r==null||r===!1?r:r.path),typeof r===a?r.apply(e):r))+'" data-behavior="open-submission-detail">\n				<img src="'+f((r=(r=(r=e.submission,r==null||r===!1?r:r.video),r==null||r===!1?r:r.thumb),typeof r===a?r.apply(e):r))+'" />\n			</a>\n		</div>\n		',n}function p(e,t){var n="",r;return n+='\n		<div class="thumb-container-placeholder">\n			<a href="'+f((r=(r=e.submission,r==null||r===!1?r:r.path),typeof r===a?r.apply(e):r))+'">\n				<span>Awaiting Attachment Upload</span>\n			</a>\n		</div>\n		',n}function d(e,t){var n="",r;return n+="\n				Submitted "+f((r=(r=(r=e.submission,r==null||r===!1?r:r.video),r==null||r===!1?r:r.created_at),typeof r===a?r.apply(e):r))+"\n			",n}function v(e,t){return"\n				No submission has been uploaded for this project.\n			"}function m(e,t){var r="",i,s;r+="\n			",s=n["if"].call(e,(i=(i=e.submission,i==null||i===!1?i:i.project),i==null||i===!1?i:i.evaluatable_by_peers),{hash:{},inverse:c.noop,fn:c.program(10,g,t)});if(s||s===0)r+=s;r+="\n\n			",s=n["if"].call(e,(i=e.submission,i==null||i===!1?i:i.evaluated_by_instructor),{hash:{},inverse:c.program(17,E,t),fn:c.program(15,w,t)});if(s||s===0)r+=s;return r+="\n		",r}function g(e,t){var r="",i,s;r+="\n				",s=n["if"].call(e,(i=e.submission,i==null||i===!1?i:i.evaluated_by_peers),{hash:{},inverse:c.program(13,b,t),fn:c.program(11,y,t)});if(s||s===0)r+=s;return r+="\n			",r}function y(e,t){var r="",i,s;return r+='\n					<figure class="summary-box summary-box-peer">\n						<div>\n							<b style="height: ',s={hash:{}},r+=f((i=n.to_i,i?i.call(e,(i=e.submission,i==null||i===!1?i:i.peer_score_percentage),s):l.call(e,"to_i",(i=e.submission,i==null||i===!1?i:i.peer_score_percentage),s)))+'%"></b>\n							<span>',s={hash:{}},r+=f((i=n.to_i,i?i.call(e,(i=e.submission,i==null||i===!1?i:i.peer_score_percentage),s):l.call(e,"to_i",(i=e.submission,i==null||i===!1?i:i.peer_score_percentage),s)))+"%</span>\n						</div>\n						<figcaption>Average<br>Peer<br>Score</figcaption>\n					</figure>\n				",r}function b(e,t){return'\n					<figure class="summary-box summary-box-empty">\n						<div>\n							<span class="empty">Awaiting<br/>Scores</span>\n						</div>\n						<figcaption>Average<br>Peer<br>Score</figcaption>\n					</figure>\n				'}function w(e,t){var r="",i,s;return r+='\n				<figure class="summary-box summary-box-evaluator">\n					<div>\n						<b style="height: ',s={hash:{}},r+=f((i=n.to_i,i?i.call(e,(i=e.submission,i==null||i===!1?i:i.instructor_score_percentage),s):l.call(e,"to_i",(i=e.submission,i==null||i===!1?i:i.instructor_score_percentage),s)))+'%"></b>\n						<span>',s={hash:{}},r+=f((i=n.to_i,i?i.call(e,(i=e.submission,i==null||i===!1?i:i.instructor_score_percentage),s):l.call(e,"to_i",(i=e.submission,i==null||i===!1?i:i.instructor_score_percentage),s)))+"%</span>\n					</div>\n					<figcaption>Average<br>Instructor<br>Score</figcaption>\n				</figure>\n			",r}function E(e,t){return'\n				<figure class="summary-box summary-box-empty">\n					<div>\n						<span class="empty">Awaiting<br/>Scores</span>\n					</div>\n					<figcaption>Average<br>Instructor<br>Score</figcaption>\n				</figure>\n			'}function S(e,t){return"summary-box-creator"}function x(e,t){return"summary-box-empty"}function T(e,t){return'\n				<span class="badge">New</span>\n				'}function N(e,t){var r="",i,s;r+='\n		<figure class="summary-box ',s=n["if"].call(e,(i=(i=e.submission,i==null||i===!1?i:i.video),i==null||i===!1?i:i.annotations_count),{hash:{},inverse:c.program(21,x,t),fn:c.program(19,S,t)});if(s||s===0)r+=s;return r+='">\n			<div>\n				<span>'+f((i=(i=(i=e.submission,i==null||i===!1?i:i.video),i==null||i===!1?i:i.annotations_count),typeof i===a?i.apply(e):i))+"</span>\n			</div>\n			<figcaption>Annotations</figcaption>\n		</figure>\n		",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a="function",f=this.escapeExpression,l=n.helperMissing,c=this;s+='\n	<div class="portfolio-item--thumb">\n		',u=n["if"].call(t,(o=t.submission,o==null||o===!1?o:o.has_video),{hash:{},inverse:c.program(3,p,i),fn:c.program(1,h,i)});if(u||u===0)s+=u;s+='\n	</div>\n	<div class="portfolio-item--content">\n		<h3 class="heading-tertiary">\n			<a href="'+f((o=(o=t.submission,o==null||o===!1?o:o.path),typeof o===a?o.apply(t):o))+'" data-behavior="open-submission-detail">'+f((o=(o=(o=t.submission,o==null||o===!1?o:o.project),o==null||o===!1?o:o.name),typeof o===a?o.apply(t):o))+'</a>\n		</h3>\n\n		<h5 class="heading-informational">\n			',u=n["if"].call(t,(o=t.submission,o==null||o===!1?o:o.has_video),{hash:{},inverse:c.program(7,v,i),fn:c.program(5,d,i)});if(u||u===0)s+=u;s+="\n		</h5>\n\n		",u=n["if"].call(t,(o=(o=t.submission,o==null||o===!1?o:o.project),o==null||o===!1?o:o.evaluatable),{hash:{},inverse:c.noop,fn:c.program(9,m,i)});if(u||u===0)s+=u;s+='\n\n		<figure class="summary-box ',u=n["if"].call(t,(o=t.submission,o==null||o===!1?o:o.discussion_posts_count),{hash:{},inverse:c.program(21,x,i),fn:c.program(19,S,i)});if(u||u===0)s+=u;s+='">\n			<div>\n				<span>'+f((o=(o=t.submission,o==null||o===!1?o:o.discussion_posts_count),typeof o===a?o.apply(t):o))+"</span>\n			</div>\n			<figcaption>\n				Comments<br>\n				",u=n["if"].call(t,(o=t.submission,o==null||o===!1?o:o.new_posts_for_current_user),{hash:{},inverse:c.noop,fn:c.program(23,T,i)});if(u||u===0)s+=u;s+="\n			</figcaption>\n		</figure>\n\n		",u=n["if"].call(t,(o=t.submission,o==null||o===!1?o:o.has_video),{hash:{},inverse:c.noop,fn:c.program(25,N,i)});if(u||u===0)s+=u;return s+="\n	</div>\n",s});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/portfolio/portfolio_submissions_item",["require","marionette","hbs!templates/portfolio/portfolio_item_submission"],function(e){var n,r,i,s;return n=e("marionette"),i=e("hbs!templates/portfolio/portfolio_item_submission"),r=function(e){function r(){return s=r.__super__.constructor.apply(this,arguments),s}return t(r,e),r.prototype.template=i,r.prototype.className="page-section--subsection page-section--subsection-ruled portfolio-item",r.prototype.standalone=!1,r.prototype.triggers=function(){var e;return e={},this.standalone!==!0&&(e["click @ui.submissionLink"]="open:submission"),e},r.prototype.ui={submissionLink:'[data-behavior="open-submission-detail"]'},r.prototype.onOpenSubmission=function(){var e;return e={project:this.model.get("project_id"),creator:this.creator},this.vent.triggerMethod("open:detail:creator:project",e)},r.prototype.setupListeners=function(){var e=this;return this.listenTo(this.model,"change",function(){return e.render()})},r.prototype.initialize=function(e){return this.standalone=n.getOption(this,"standalone"),this.vent=n.getOption(this,"vent"),this.creator=n.getOption(this,"creator"),this.setupListeners()},r.prototype.serializeData=function(){var e,t;return e=r.__super__.serializeData.call(this),t={submission:e},t},r}(n.ItemView)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("collections/submission_for_course_user_collection",["require","collections/submission_collection"],function(e){var n,r,i;return n=e("collections/submission_collection"),r=function(e){function n(){return i=n.__super__.constructor.apply(this,arguments),i}return t(n,e),n.prototype.url="/api/v1/submissions/for_course_and_user",n}(n)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("collections/submission_for_group_collection",["require","collections/submission_collection"],function(e){var n,r,i;return n=e("collections/submission_collection"),r=function(e){function n(){return i=n.__super__.constructor.apply(this,arguments),i}return t(n,e),n.prototype.url="/api/v1/submissions/for_group",n}(n)})}.call(this),define("hbs!templates/modal/modal_group_membership",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){function l(e,t){var n="";return n+="\n		<li>"+a(typeof e===u?e.apply(e):e)+"</li>\n		",n}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression,f=this;s+='<h5 class="modal--header">Group Members</h5>\n<p>\n	<ul class="unstyled-list">\n		',o=n.each.call(t,t.members,{hash:{},inverse:f.noop,fn:f.program(1,l,i)});if(o||o===0)s+=o;return s+='\n	</ul>\n</p>\n<a href="#" class="primary-button close-button" data-behavior="dismiss">Close</a>\n',s});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/modal/modal_group_membership",["require","marionette","hbs!templates/modal/modal_group_membership","models/group"],function(e){var n,r,i,s,o;return r=e("marionette"),s=e("hbs!templates/modal/modal_group_membership"),n=e("models/group"),i=function(e){function r(){return o=r.__super__.constructor.apply(this,arguments),o}return t(r,e),r.prototype.template=s,r.prototype.triggers={'click [data-behavior="dismiss"]':"click:dismiss"},r.prototype.onKeyUp=function(e){var t;t=e.keyCode!=null?e.keyCode:e.which;if(t===27)return this.onClickDismiss()},r.prototype.onClickDismiss=function(){return Vocat.vent.trigger("modal:close")},r.prototype.onDestroy=function(){return $(window).off("keyup",this.onKeyUp)},r.prototype.initialize=function(e){var t,r=this;return _.bindAll(this,"onKeyUp"),$(window).on("keyup",this.onKeyUp),t=e.groupId,this.model=new n({id:t}),this.model.fetch({success:function(){return console.log(r.model.attributes,"attr"),r.render()}})},r}(r.ItemView)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/course_map/detail_creator",["require","marionette","hbs!templates/course_map/detail_creator","views/portfolio/portfolio_submissions_item","collections/collection_proxy","collections/submission_for_course_user_collection","collections/submission_for_group_collection","views/modal/modal_group_membership"],function(e){var n,r,i,s,o,u,a,f,l;return i=e("marionette"),f=e("hbs!templates/course_map/detail_creator"),o=e("views/portfolio/portfolio_submissions_item"),n=e("collections/collection_proxy"),u=e("collections/submission_for_course_user_collection"),a=e("collections/submission_for_group_collection"),s=e("views/modal/modal_group_membership"),r=function(e){function n(){return l=n.__super__.constructor.apply(this,arguments),l}return t(n,e),n.prototype.template=f,n.prototype.standalone=!1,n.prototype.childView=o,n.prototype.vent=Vocat.vent,n.prototype.childViewContainer='[data-container="submission-summaries"]',n.prototype.childViewOptions=function(){return{standalone:this.standalone,creator:this.model,vent:this.vent}},n.prototype.triggers=function(){var e;return e={"click @ui.openGroupModal":"open:groups:modal"},this.standalone!==!0&&(e['click [data-behavior="detail-close"]']="close"),e},n.prototype.ui={loadIndicator:'[data-behavior="load-indicator"]',openGroupModal:'[data-behavior="open-group-modal"]'},n.prototype.onExecuteRoute=function(e){var t;e.preventDefault(),t=$(e.currentTarget).attr("href");if(t)return window.Vocat.router.navigate(t,!0)},n.prototype.onOpenGroupsModal=function(){return Vocat.vent.trigger("modal:open",new s({groupId:this.model.id}))},n.prototype.onClose=function(){if(_.isFunction(this.vent.triggerMethod))return this.vent.triggerMethod("close:detail")},n.prototype.initialize=function(e){var t=this;return this.options=e||{},this.vent=i.getOption(this,"vent"),this.standalone=i.getOption(this,"standalone"),this.courseId=i.getOption(this,"courseId"),this.model.creatorType==="User"?this.collection.fetch({data:{course:this.courseId,user:this.model.id}}):this.collection.fetch({data:{group:this.model.id},success:function(){}}),this.listenTo(this.collection,"sync",function(){return t.ui.loadIndicator.hide()})},n.prototype.serializeData=function(){var e;return e=n.__super__.serializeData.call(this),e.creatorType=this.model.creatorType,e.courseId=this.courseId,e},n}(i.CompositeView)})}.call(this),define("hbs!templates/course_map/warning",["hbs","handlebars","app/helpers/to_lower","app/helpers/if_match"],function(e,t){var n=t.template(function(e,t,n,r,i){function c(e,t){var r="",i;r+="\n		",i=n["if"].call(e,e.isCreatorTypeGroup,{hash:{},inverse:f.noop,fn:f.program(2,h,t)});if(i||i===0)r+=i;r+="\n\n		",i=n["if"].call(e,e.isCreatorTypeUser,{hash:{},inverse:f.noop,fn:f.program(5,d,t)});if(i||i===0)r+=i;return r+="\n\n	",r}function h(e,t){var r="",i;r+="\n			<p>The group evaluations grid is not available because no groups have been created for this course.</p>\n			",i=n["if"].call(e,e.canUpdateCourse,{hash:{},inverse:f.noop,fn:f.program(3,p,t)});if(i||i===0)r+=i;return r+="\n		",r}function p(e,t){var r="",i;return r+='\n			<p class="small">Once you have created at least one group project and one group for the course, you will be able to access\n				group submissions.\n			</p>\n			<p class="small">\n				<a href="/courses/',(i=n.courseId)?i=i.call(e,{hash:{}}):(i=e.courseId,i=typeof i===u?i.apply(e):i),r+=a(i)+'/manage/groups" class="primary-button new-button">Manage Course Groups</a>\n				<a href="/courses/',(i=n.courseId)?i=i.call(e,{hash:{}}):(i=e.courseId,i=typeof i===u?i.apply(e):i),r+=a(i)+'/users/evaluations" class="secondary-button back-button">Show Individual Evaluations</a>\n			</p>\n			',r}function d(e,t){var r="",i;r+="\n			<p>The user evaluations grid is not available because no students have been enrolled in this course.</p>\n			",i=n["if"].call(e,e.canUpdateCourse,{hash:{},inverse:f.noop,fn:f.program(6,v,t)});if(i||i===0)r+=i;return r+="\n		",r}function v(e,t){var r="",i;return r+='\n			<p class="small">Once you have added at least one student to the course, you will be able to access\n				student submissions.\n			</p>\n			<p class="small">\n				<a href="/courses/',(i=n.courseId)?i=i.call(e,{hash:{}}):(i=e.courseId,i=typeof i===u?i.apply(e):i),r+=a(i)+'/manage/enrollment" class="primary-button new-button">Manage Course Enrollment</a>\n			</p>\n			',r}function m(e,t){var r="",i,s,o;r+="\n		<p>The ",o={hash:{}},r+=a((i=n.to_lower,i?i.call(e,e.creatorType,o):l.call(e,"to_lower",e.creatorType,o)))+" evaluations grid is not available because no ",o={hash:{}},r+=a((i=n.to_lower,i?i.call(e,e.creatorType,o):l.call(e,"to_lower",e.creatorType,o)))+" projects have been created\n		for this course.</p>\n		",s=n["if"].call(e,e.canUpdateCourse,{hash:{},inverse:f.noop,fn:f.program(9,g,t)});if(s||s===0)r+=s;return r+="\n	",r}function g(e,t){var r="",i,s,o;r+='\n		<p class="small">Once you have created at least one group project and one group for the course, you will be able to access\n			',o={hash:{}},r+=a((i=n.to_lower,i?i.call(e,e.creatorType,o):l.call(e,"to_lower",e.creatorType,o)))+' submissions.\n		</p>\n		<p class="small">\n      ',o={hash:{},inverse:f.program(12,b,t),fn:f.program(10,y,t)},s=(i=n.if_match,i?i.call(e,e.creatorType,"Group",o):l.call(e,"if_match",e.creatorType,"Group",o));if(s||s===0)r+=s;return r+="\n		</p>\n		",r}function y(e,t){var r="",i;return r+='\n	      <a href="/courses/',(i=n.courseId)?i=i.call(e,{hash:{}}):(i=e.courseId,i=typeof i===u?i.apply(e):i),r+=a(i)+'/manage/projects/new" class="primary-button new-button">Create a Group Project</a>\n      ',r}function b(e,t){var r="",i;return r+='\n	      <a href="/courses/',(i=n.courseId)?i=i.call(e,{hash:{}}):(i=e.courseId,i=typeof i===u?i.apply(e):i),r+=a(i)+'/manage/projects/new" class="primary-button new-button">Create a Individual Project</a>\n      ',r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression,f=this,l=n.helperMissing;s+='<div class="alert notice">\n	',o=n["if"].call(t,t.isCreatorWarning,{hash:{},inverse:f.noop,fn:f.program(1,c,i)});if(o||o===0)s+=o;s+="\n\n\n	",o=n["if"].call(t,t.isProjectWarning,{hash:{},inverse:f.noop,fn:f.program(8,m,i)});if(o||o===0)s+=o;return s+="\n</div>\n\n",s});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/course_map/warning",["require","hbs!templates/course_map/warning"],function(e){var n,r,i;return r=e("hbs!templates/course_map/warning"),n=function(e){function n(){return i=n.__super__.constructor.apply(this,arguments),i}return t(n,e),n.prototype.template=r,n.prototype.serializeData=function(){var e;return e={isCreatorWarning:Marionette.getOption(this,"warningType")==="Creator",isProjectWarning:Marionette.getOption(this,"warningType")==="Project",isCreatorTypeGroup:Marionette.getOption(this,"creatorType")==="Group",isCreatorTypeUser:Marionette.getOption(this,"creatorType")==="User",creatorType:Marionette.getOption(this,"creatorType"),warningType:Marionette.getOption(this,"warningType"),courseId:Marionette.getOption(this,"courseId"),canUpdateCourse:window.VocatUserCourseRole==="administrator"||window.VocatUserCourseRole==="evaluator"},e},n}(Marionette.ItemView)})}.call(this),define("hbs!templates/project/detail",["hbs","handlebars","app/helpers/if_match"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){return'selected="selected"'}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f="function",l=this.escapeExpression,c=this,h=n.helperMissing;s+='<div class="page-content--heading">\n	<a class="header-link back-link" data-behavior="detail-close" href="/courses/'+l((o=(o=t.project,o==null||o===!1?o:o.course_id),typeof o===f?o.apply(t):o))+'/users/evaluations">Back to Evaluations</a>\n	<h2 class="heading-primary">\n		'+l((o=(o=t.project,o==null||o===!1?o:o.name),typeof o===f?o.apply(t):o))+'\n	</h2>\n</div>\n\n<div class="page-section">\n	<div class="header-wrapper">\n		<div class="header">\n			<h2>Project Overview</h2>\n		</div>\n	</div>\n	<div class="body">\n		<div data-region="project-summary">\n		</div>\n	</div>\n</div>\n\n\n<div class="page-section">\n	<div class="header-wrapper">\n		<div class="header">\n			<h2>Interactive Evaluation Data</h2>\n		</div>\n	</div>\n	<div class="body">\n		<form class="formgrid page-section--subsection">\n			<div class="formgrid whole">\n				<span class="chart-label">Select the type of evaluations that you would like to visualize.</span>\n				<select data-behavior="score-set-select" style="width: 375px;">\n					<option ',a={hash:{},inverse:c.noop,fn:c.program(1,p,i)},u=(o=n.if_match,o?o.call(t,t.loadedScoresSet,"my_scores",a):h.call(t,"if_match",t.loadedScoresSet,"my_scores",a));if(u||u===0)s+=u;s+=' value="my_scores">my evaluations</option>\n					<option ',a={hash:{},inverse:c.noop,fn:c.program(1,p,i)},u=(o=n.if_match,o?o.call(t,t.loadedScoresSet,"evaluator_scores",a):h.call(t,"if_match",t.loadedScoresSet,"evaluator_scores",a));if(u||u===0)s+=u;s+=' value="evaluator_scores">instructor evaluations</option>\n					<option ',a={hash:{},inverse:c.noop,fn:c.program(1,p,i)},u=(o=n.if_match,o?o.call(t,t.loadedScoresSet,"peer_scores",a):h.call(t,"if_match",t.loadedScoresSet,"peer_scores",a));if(u||u===0)s+=u;s+=' value="peer_scores">peer evaluations</option>\n					<option ',a={hash:{},inverse:c.noop,fn:c.program(1,p,i)},u=(o=n.if_match,o?o.call(t,t.loadedScoresSet,"all_scores",a):h.call(t,"if_match",t.loadedScoresSet,"all_scores",a));if(u||u===0)s+=u;return s+=' value="all_scores">all evaluations</option>\n				</select>\n			</div>\n		</form>\n		<div class="page-section--subsection" data-region="project-crossfiltered">\n		</div>\n	</div>\n</div>\n\n\n',s});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("models/abstract_model",["backbone"],function(e){var n,r;return n=function(e){function n(){return r=n.__super__.constructor.apply(this,arguments),r}return t(n,e),n.prototype.toPositiveInt=function(e){var t;return t=~~Number(e),String(t)===e&&t>=0?t:null},n.prototype.addError=function(e,t,n){if(!e[t]||!_.isArray(e[t]))e[t]=[];return e[t].push(n)},n}(e.Model)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("models/rubric_property",["backbone"],function(e){var n,r;return n=function(e){function n(){return r=n.__super__.constructor.apply(this,arguments),r}return t(n,e),n.prototype.errorStrings={},n.prototype.idAttribute="id",n.prototype.hasErrors=function(){return this.errors.length>0?!0:!1},n.prototype.errorMessages=function(){var e,t=this;return e=new Array,_.each(this.errors,function(n,r,i){var s;return t.errorStrings[n]!=null?s=t.errorStrings[n]:s=n,e.push(s)}),e},n.prototype.initialize=function(){return this.get("id")==null&&this.set("id",this.cid.replace("c","")),this.errors=new Array},n.prototype.addError=function(e){return _.each(this.errors,function(t,n,r){if(t===e)return r.splice(n,1)}),this.errors.push(e)},n.prototype.removeError=function(e){var t,n=this;return t=_.uniq(this.errors,!1),this.errors=_.reject(t,function(t){return t===e})},n}(e.Model)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("models/field",["backbone","models/rubric_property"],function(e,n){var r,i;return r=function(e){function n(){return i=n.__super__.constructor.apply(this,arguments),i}return t(n,e),n.prototype.defaults={name:"",description:"",range_descriptions:{}},n.prototype.errorStrings={dupe:"Duplicate field names are not allowed"},n.prototype.isNew=function(){return!0},n.prototype.validate=function(e,t){if(e&&e.name.length<1)return"Criteria name must be at least one character long."},n.prototype.setDescription=function(e,t){var n;return n=_.clone(this.get("range_descriptions")),n[e.id]=t,this.set("range_descriptions",n),this.trigger("change")},n}(n)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("collections/field_collection",["backbone","models/field"],function(e,n){var r,i;return r=function(e){function r(){return i=r.__super__.constructor.apply(this,arguments),i}return t(r,e),r.prototype.model=n,r}(e.Collection)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("models/range",["backbone","models/rubric_property"],function(e,n){var r,i;return r=function(e){function n(){return i=n.__super__.constructor.apply(this,arguments),i}return t(n,e),n.prototype.errorStrings={high_gap:"There is a gap or an overlap between the high end of this range and the low end of the next range.",low_gap:"There is a gap or an overlap between the low end of this range and the high end of the previous range.",range_inverted:"The high end of this range is lower than the low end.",no_name:"All ranges must have a name.",dupe:"All ranges must have a unique name."},n.prototype.modalOpened=!1,n.prototype.isNew=function(){return!0},n.prototype.validate=function(e,t){if(e&&e.name.length<1)return"Range name must be at least one character long."},n.prototype.defaults={name:"",low:0,high:1},n}(n)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("collections/range_collection",["backbone","models/range"],function(e,n){var r,i;return r=function(e){function r(){return i=r.__super__.constructor.apply(this,arguments),i}return t(r,e),r.prototype.model=n,r}(e.Collection)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("models/cell",["backbone"],function(e){var n,r;return n=function(e){function n(){return r=n.__super__.constructor.apply(this,arguments),r}return t(n,e),n}(e.Model)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("collections/cell_collection",["backbone","models/cell"],function(e,n){var r,i;return r=function(e){function r(){return i=r.__super__.constructor.apply(this,arguments),i}return t(r,e),r.prototype.model=n,r.prototype.comparator=function(e){return e.get("low")},r}(e.Collection)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("models/rubric",["require","models/abstract_model","collections/field_collection","collections/range_collection","collections/cell_collection","models/range","models/field","models/cell"],function(e){var n,r,i,s,o,u,a,f,l;return n=e("models/abstract_model"),s=e("collections/field_collection"),u=e("collections/range_collection"),r=e("collections/cell_collection"),a=e("models/range"),o=e("models/field"),i=e("models/cell"),f=function(e){function n(){return l=n.__super__.constructor.apply(this,arguments),l}return t(n,e),n.prototype.courseId=null,n.prototype.urlRoot=function(){return"/api/v1/rubrics"},n.prototype.defaults={low:0,high:100},n.prototype.initialize=function(e){var t=this;return this.set("fields",new s(_.toArray(this.get("fields")))),this.set("ranges",new u(_.toArray(this.get("ranges")))),this.set("cells",new r(_.toArray(this.get("cells")),{})),this.listenTo(this.get("fields"),"add remove",function(e){return this.trigger("change")}),this.listenTo(this.get("ranges"),"add remove",function(e){return this.trigger("change")}),this.get("fields").bind("add",function(e){return t.get("ranges").each(function(n){var r;return r=new i({range:n.id,field:e.id}),r.fieldModel=e,r.rangeModel=n,t.get("cells").add(r)})}),this.get("fields").bind("remove",function(e){return t.get("cells").remove(t.get("cells").where({field:e.id}))}),this.get("ranges").bind("add",function(e){return t.get("fields").each(function(n){var r;return r=new i({range:e.id,field:n.id}),r.fieldModel=n,r.rangeModel=e,t.get("cells").add(r)})}),this.get("ranges").bind("remove",function(e){return t.get("cells").remove(t.get("cells").where({range:e.id}))})},n.prototype.getFieldNameById=function(e){var t;t=this.get("fields").findWhere({id:e});if(t!=null)return t.get("name")},n.prototype.getRangeString=function(){var e;return e=this.getLows(),e.push(this.getHigh()),e.join(" ")},n.prototype.canAddRange=function(){var e,t;return e=this.get("high")-this.get("low")+1,t=this.get("ranges").length,t+1<=e},n.prototype.getLows=function(){var e,t;return t=this.get("ranges"),t.length>0&&(e=t.pluck("low")),e},n.prototype.getHigh=function(){return this.get("high")},n.prototype.getLow=function(){return this.get("low")},n.prototype.getLows=function(){return this.get("ranges").pluck("low")},n.prototype.isValidLow=function(e){var t,n;return t=this.getHigh()-parseInt(e),n=t>=this.get("ranges").length-1,n},n.prototype.isValidHigh=function(e){var t;return t=parseInt(e)-this.getLow(),t>=this.get("ranges").length-1},n.prototype.setLow=function(e){return this.set("low",parseInt(e))},n.prototype.setHigh=function(e){return this.set("high",parseInt(e))},n.prototype.getRangeForScore=function(e){return this.get("ranges").find(function(t){var n;return n=parseInt(e),n>=t.get("low")&&n<=t.get("high")})},n.prototype.getDescriptionByFieldAndScore=function(e,t){var n,r;return r=this.getRangeForScore(t),n=this.getCellDescription(e,r.id),n},n.prototype.getCellDescription=function(e,t){var n;n=this.get("cells").findWhere({field:e,range:t});if(n!=null)return n.get("description")},n.prototype.parse=function(e,t){var n=this;return e!=null&&(this.get("fields")||this.set("fields",new s),this.get("ranges")||this.set("ranges",new u),this.get("cells")||this.set("cells",new r),_.each(e.ranges,function(e){return e=new a(e),n.get("ranges").add(e,{silent:!0})}),_.each(e.fields,function(e){return e=new o(e),n.get("fields").add(e,{silent:!0})}),_.each(e.cells,function(e){return e=new i(e),e.fieldModel=n.get("fields").get(e.get("field")),e.rangeModel=n.get("ranges").get(e.get("range")),n.get("cells").add(e,{silent:!0})}),delete e.ranges,delete e.fields,delete e.cells),e},n.prototype.toJSON=function(){var e;return e=_.clone(this.attributes),$.each(e,function(t,n){if(n!=null&&_(n.toJSON).isFunction())return e[t]=n.toJSON()})},n.prototype.validateName=function(e,t){return!e.name||e.name.length<1?(this.addError(this.errors,"name","cannot be empty"),!1):!0},n.prototype.validate=function(e,t){return this.errors={},this.validateName(e,t),_.size(this.errors)>0?this.errors:!1},n}(n)})}.call(this),define("hbs!templates/project/detail/summary",["hbs","handlebars","app/helpers/to_i"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a="function",f=this.escapeExpression,l=n.helperMissing;return s+='<figure class="summary-box">\n	<div>\n		<b style="height: '+f((o=(o=t.score,o==null||o===!1?o:o.average_score),typeof o===a?o.apply(t):o))+'%"></b>\n		<span>',u={hash:{}},s+=f((o=n.to_i,o?o.call(t,(o=t.score,o==null||o===!1?o:o.average_score),u):l.call(t,"to_i",(o=t.score,o==null||o===!1?o:o.average_score),u)))+'</span><small>%</small>\n	</div>\n	<figcaption>Project Average: This Class</figcaption>\n</figure>\n\n<figure class="summary-box">\n	<div>\n		<b style="height: '+f((o=(o=t.project,o==null||o===!1?o:o.rubric_avg_percentage),typeof o===a?o.apply(t):o))+'%"></b>\n		<span>',u={hash:{}},s+=f((o=n.to_i,o?o.call(t,(o=t.project,o==null||o===!1?o:o.rubric_avg_percentage),u):l.call(t,"to_i",(o=t.project,o==null||o===!1?o:o.rubric_avg_percentage),u)))+'</span><small>%</small>\n	</div>\n	<figcaption>Rubric Average: All Classes</figcaption>\n</figure>\n\n<figure class="summary-box">\n	<div>\n		<b style="height: '+f((o=(o=t.project,o==null||o===!1?o:o.video_percentage),typeof o===a?o.apply(t):o))+'%"></b>\n		<span>'+f((o=(o=t.project,o==null||o===!1?o:o.video_count),typeof o===a?o.apply(t):o))+"</span><small>/"+f((o=(o=t.project,o==null||o===!1?o:o.possible_submission_count),typeof o===a?o.apply(t):o))+'</small>\n	</div>\n	<figcaption>Videos Submitted</figcaption>\n</figure>\n<figure class="summary-box">\n	<div>\n		<span>'+f((o=(o=t.score,o==null||o===!1?o:o.count),typeof o===a?o.apply(t):o))+"</span>\n	</div>\n	<figcaption>Number of Evaluations</figcaption>\n</figure>\n",s});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/project/detail/summary",["require","marionette","hbs!templates/project/detail/summary"],function(e){var n,r,i,s;return n=e("marionette"),i=e("hbs!templates/project/detail/summary"),r=function(e){function r(){return s=r.__super__.constructor.apply(this,arguments),s}return t(r,e),r.prototype.template=i,r.prototype.initialize=function(e){return this.summary=n.getOption(this,"summary")},r.prototype.serializeData=function(){return this.summary.project.video_percentage=100*(this.summary.project.video_count/this.summary.project.possible_submission_count),this.summary},r}(n.ItemView)})}.call(this),define("hbs!templates/project/detail/crossfiltered",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){function l(e,t){var n="",r;return n+='\n		<figure class="pie">\n			<div class="pie-chart" id="pie-chart-'+a((r=e.id,typeof r===u?r.apply(e):r))+'"></div>\n			<figcaption>'+a((r=e.name,typeof r===u?r.apply(e):r))+"</figcaption>\n		</figure>\n		",n}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression,f=this;s+='<div class="page-section--subsection">\n	<aside class="chart-label" data-behavior="bar-filter-label-wrap">\n		<span data-behavior="bar-filter-label">This graph is currently displaying the overall score distribution for all project submissions.</span>\n		<span><a href="#" style="display: none" class="delete-link" data-trigger="filters-clear">Click here to clear all filters.</a></span>\n	</aside>\n	<div class="chart-container" id="bar-chart"></div>\n</div>\n\n<div class="page-section--subsection">\n	<div class="chart-label">\n		<p>\n			These pie charts are currently displaying the <strong>criteria score distribution</strong> for for all project submissions.\n			Each pie chart illustrates the score distribution for a single rubric criteria. Clicking on any slice will add it as\n			a filter to the overall score distribution bar chart. Use these filters to see how student performance on a given\n			criteria tends to impact their overall score.\n		</p>\n		<p data-trigger="filters-clear" style="display: none" >\n			<a href="#" class="delete-link" >Click here to clear all filters.</a>\n		</p>\n	</div>\n	<div class="chart-container">\n		',o=n.each.call(t,t.fields,{hash:{},inverse:f.noop,fn:f.program(1,l,i)});if(o||o===0)s+=o;return s+="\n	</div>\n</div>",s});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/project/detail/crossfiltered",["require","marionette","hbs!templates/project/detail/crossfiltered"],function(e){var n,r,i,s;return n=e("marionette"),i=e("hbs!templates/project/detail/crossfiltered"),r=function(e){function r(){return s=r.__super__.constructor.apply(this,arguments),s}return t(r,e),r.prototype.template=i,r.prototype.currentFilters={},r.prototype.barChart=null,r.prototype.pieCharts=[],r.prototype.triggers={'click [data-trigger="filters-clear"]':"filters:clear"},r.prototype.ui={filtersClear:'[data-trigger="filters-clear"]',barFilterLabel:'[data-behavior="bar-filter-label"]',barFilterLabelWrap:'[data-behavior="bar-filter-label-wrap"]'},r.prototype.initialize=function(e){return this.scores=n.getOption(this,"scores"),this.rubric=n.getOption(this,"rubric")},r.prototype.onShow=function(){return this.initializeCharts()},r.prototype.onFiltersClear=function(){return dc.filterAll("projectCharts"),dc.redrawAll("projectCharts")},r.prototype.initializeCharts=function(){var e,t,n,r=this;return this.render(),e=crossfilter(this.scores),t=e.dimension(function(e){var t;return t=0,r.rubric.get("fields").each(function(n){return t+=parseInt(e[n.get("id")])}),Math.round(t/parseInt(r.rubric.get("points_possible"))*100)}),n=t.group(),this.barChart=this.createBarChart(t,n),this.pieCharts=[],this.rubric.get("fields").each(function(t){var n,i,s;return n=e.dimension(function(e){return parseInt(e[t.get("id")])}),i=n.group(),s=r.createPieChart(t.get("id"),n,i),r.pieCharts.push(s)}),dc.renderAll("projectCharts"),this.updateFilters()},r.prototype.updateFilters=function(){var e,t,n,r,i,s=this;return t=[],e=_.clone(this.barChart.filter()),e!=null&&e.length===2&&(r=Math.round(e[0]),n=Math.round(e[1]),e="a <strong>total score between "+r+"% and "+n+"%</strong>"),_.each(this.pieCharts,function(e){var n,r,i,o;r=_.clone(e.filters()),r.sort(),n=r.length;if(n>0)return i=r.pop(),n>2?o=""+r.join(", ")+", or "+i:n===2?o=""+r.join(", ")+" or "+i:o=i,t.push("<strong>"+o+" on "+s.rubric.getFieldNameById(e.vocat_id).toLowerCase()+"</strong>")}),i={bar:"This graph is currently displaying the <strong>overall score distribution</strong>",pie:"These pie charts are currently displaying the <strong>criteria score distribution</strong>"},_.each(["bar","pie"],function(n){var r,o,u,a,f,l;a=_.clone(t),n==="pie"&&e!=null&&a.push(e),_.some(a,function(e){return e.indexOf(",")!==-1})?l="; ":l=", ",f=a.length,f>2?(u=a.pop(),r="for submissions that received a score of "+a.join(l)+l+" and "+u+"."):f>1?r="for submissions that received a score of "+a.join(" and ")+".":f===1?r="for submissions that received a score of "+a[0]+".":r="for all project submissions.",o=""+i[n]+" "+r;if(s.ui[""+n+"FilterLabel"]&&o!==s.ui[""+n+"FilterLabel"].html())return s.ui[""+n+"FilterLabelWrap"].fadeOut(200,function(){return f>0?s.ui.filtersClear.show():s.ui.filtersClear.hide(),s.ui[""+n+"FilterLabel"].html(o),s.ui[""+n+"FilterLabelWrap"].fadeIn(200)})})},r.prototype.createBarChart=function(e,t){var n,r,i,s=this;return i=this.$el.find("#bar-chart").parent().width(),r=20,n=dc.barChart("#bar-chart","projectCharts"),n.width(i),n.height(255),n.transitionDuration(500),n.margins({top:r/2,right:r,bottom:r,left:r}),n.dimension(e),n.group(t,"Evaluations"),n.elasticY(!0),n.colors(["#5f8688"]),n.y(d3.scale.linear()),n.x(d3.scale.linear().domain([0,100])),n.centerBar(!0),n.renderHorizontalGridLines(!0),n.renderVerticalGridLines(!0),n.yAxis().ticks(6).tickFormat(function(e){if(Math.floor(e)===e)return e}),n.xAxis().tickFormat(function(e){return""+e+"%"}),n.vocat_id="total",n.on("filtered",function(e,t){return dc.events.trigger(function(){return s.updateFilters()})}),n.renderlet(function(e){var t;t=e.select("svg");if($(t[0]).find(".background-custom").length===0)return e.select("svg").insert("rect","g").attr("width",i-r*2).attr("height",225).attr("transform","translate(20,10)").attr("class","background-custom")}),n},r.prototype.createPieChart=function(e,t,n){var r,i,s,o=this;return s=50,r=s*2+7,i=dc.pieChart("#pie-chart-"+e,"projectCharts"),i.width(r),i.legend(dc.legend().x(0).y(0).itemHeight(13).gap(5)),i.height(r),i.transitionDuration(500),i.colorDomain(["#232e2f"]),i.radius(s),i.innerRadius(0),i.minAngleForLabel(0),i.dimension(t),i.group(n),i.renderLabel(!0),i.vocat_id=e,i.on("filtered",function(e,t){return o.updateFilters(e,t)}),i},r.prototype.serializeData=function(){return{fields:this.rubric!=null?this.rubric.get("fields").toJSON():void 0}},r}(n.ItemView)})}.call(this),define("hbs!templates/project/detail/no_scores",["hbs","handlebars","app/helpers/if_match"],function(e,t){var n=t.template(function(e,t,n,r,i){function f(e,t){var r="",i,s,o;r+="\n\n				",o={hash:{},inverse:u.noop,fn:u.program(2,l,t)},s=(i=n.if_match,i?i.call(e,e.loadedScoresSet,"my_scores",o):a.call(e,"if_match",e.loadedScoresSet,"my_scores",o));if(s||s===0)r+=s;r+="\n\n				",o={hash:{},inverse:u.noop,fn:u.program(4,c,t)},s=(i=n.if_match,i?i.call(e,e.loadedScoresSet,"all_scores",o):a.call(e,"if_match",e.loadedScoresSet,"all_scores",o));if(s||s===0)r+=s;r+="\n\n				",o={hash:{},inverse:u.noop,fn:u.program(6,h,t)},s=(i=n.if_match,i?i.call(e,e.loadedScoresSet,"peer_scores",o):a.call(e,"if_match",e.loadedScoresSet,"peer_scores",o));if(s||s===0)r+=s;r+="\n\n				",o={hash:{},inverse:u.noop,fn:u.program(8,p,t)},s=(i=n.if_match,i?i.call(e,e.loadedScoresSet,"evaluator_scores",o):a.call(e,"if_match",e.loadedScoresSet,"evaluator_scores",o));if(s||s===0)r+=s;return r+="\n\n			",r}function l(e,t){return"\n				you have not yet\n				"}function c(e,t){return"\n				no users have\n				"}function h(e,t){return"\n				no students have\n				"}function p(e,t){return"\n				no evaluators have\n				"}function d(e,t){return"\n\n					no users have\n\n			"}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u=this,a=n.helperMissing;s+='<aside>\n	<p data-behavior="bar-filter-label-wrap">\n			Unable to display interactive data because\n\n			',o=n["if"].call(t,t.loadedScoresSet,{hash:{},inverse:u.program(10,d,i),fn:u.program(1,f,i)});if(o||o===0)s+=o;return s+="\n			scored a submission for this project.\n	</p>\n</aside>\n",s});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/project/detail/no_scores",["require","marionette","hbs!templates/project/detail/no_scores"],function(e){var n,r,i,s;return n=e("marionette"),i=e("hbs!templates/project/detail/no_scores"),r=function(e){function r(){return s=r.__super__.constructor.apply(this,arguments),s}return t(r,e),r.prototype.template=i,r.prototype.initialize=function(e){return this.loadedScoresSet=n.getOption(this,"loadedScoresSet")},r.prototype.serializeData=function(){return{loadedScoresSet:this.loadedScoresSet}},r}(n.ItemView)})}.call(this),d3=function(){function e(e){return null!=e&&!isNaN(e)}function t(e){return e.length}function n(e){for(var t=1;e*t%1;)t*=10;return t}function r(e,t){try{for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}catch(r){e.prototype=t}}function i(){}function s(){}function o(e,t,n){return function(){var r=n.apply(t,arguments);return r===t?e:r}}function u(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.substring(1);for(var n=0,r=Do.length;r>n;++n){var i=Do[n]+t;if(i in e)return i}}function a(){}function f(){}function l(e){function t(){for(var t,r=n,i=-1,s=r.length;++i<s;)(t=r[i].on)&&t.apply(this,arguments);return e}var n=[],r=new i;return t.on=function(t,i){var s,o=r.get(t);return arguments.length<2?o&&o.on:(o&&(o.on=null,n=n.slice(0,s=n.indexOf(o)).concat(n.slice(s+1)),r.remove(t)),i&&n.push(r.set(t,{on:i})),e)},t}function c(){go.event.preventDefault()}function h(){for(var e,t=go.event;e=t.sourceEvent;)t=e;return t}function p(e){for(var t=new f,n=0,r=arguments.length;++n<r;)t[arguments[n]]=l(t);return t.of=function(n,r){return function(i){try{var s=i.sourceEvent=go.event;i.target=e,go.event=i,t[i.type].apply(n,r)}finally{go.event=s}}},t}function d(e){return Ho(e,qo),e}function v(e){return"function"==typeof e?e:function(){return Bo(e,this)}}function m(e){return"function"==typeof e?e:function(){return jo(e,this)}}function g(e,t){function n(){this.removeAttribute(e)}function r(){this.removeAttributeNS(e.space,e.local)}function i(){this.setAttribute(e,t)}function s(){this.setAttributeNS(e.space,e.local,t)}function o(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}function u(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}return e=go.ns.qualify(e),null==t?e.local?r:n:"function"==typeof t?e.local?u:o:e.local?s:i}function y(e){return e.trim().replace(/\s+/g," ")}function b(e){return new RegExp("(?:^|\\s+)"+go.requote(e)+"(?:\\s+|$)","g")}function w(e,t){function n(){for(var n=-1;++n<i;)e[n](this,t)}function r(){for(var n=-1,r=t.apply(this,arguments);++n<i;)e[n](this,r)}e=e.trim().split(/\s+/).map(E);var i=e.length;return"function"==typeof t?r:n}function E(e){var t=b(e);return function(n,r){if(i=n.classList)return r?i.add(e):i.remove(e);var i=n.getAttribute("class")||"";r?(t.lastIndex=0,t.test(i)||n.setAttribute("class",y(i+" "+e))):n.setAttribute("class",y(i.replace(t," ")))}}function S(e,t,n){function r(){this.style.removeProperty(e)}function i(){this.style.setProperty(e,t,n)}function s(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}return null==t?r:"function"==typeof t?s:i}function x(e,t){function n(){delete this[e]}function r(){this[e]=t}function i(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}return null==t?n:"function"==typeof t?i:r}function T(e){return"function"==typeof e?e:(e=go.ns.qualify(e)).local?function(){return wo.createElementNS(e.space,e.local)}:function(){return wo.createElementNS(this.namespaceURI,e)}}function N(e){return{__data__:e}}function C(e){return function(){return Io(this,e)}}function k(e){return arguments.length||(e=go.ascending),function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}function L(e,t){for(var n=0,r=e.length;r>n;n++)for(var i,s=e[n],o=0,u=s.length;u>o;o++)(i=s[o])&&t(i,o,n);return e}function A(e){return Ho(e,Uo),e}function O(e){var t,n;return function(r,i,s){var o,u=e[s].update,a=u.length;for(s!=n&&(n=s,t=0),i>=t&&(t=i+1);!(o=u[t])&&++t<a;);return o}}function M(){var e=this.__transition__;e&&++e.active}function _(e,t,n){function r(){var t=this[o];t&&(this.removeEventListener(e,t,t.$),delete this[o])}function i(){var i=f(t,bo(arguments));r.call(this),this.addEventListener(e,this[o]=i,i.$=n),i._=t}function s(){var t,n=new RegExp("^__on([^.]+)"+go.requote(e)+"$");for(var r in this)if(t=r.match(n)){var i=this[r];this.removeEventListener(t[1],i,i.$),delete this[r]}}var o="__on"+e,u=e.indexOf("."),f=D;u>0&&(e=e.substring(0,u));var l=Wo.get(e);return l&&(e=l,f=P),u?t?i:r:t?a:s}function D(e,t){return function(n){var r=go.event;go.event=n,t[0]=this.__data__;try{e.apply(this,t)}finally{go.event=r}}}function P(e,t){var n=D(e,t);return function(e){var t=this,r=e.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||n.call(t,e)}}function H(){var e=".dragsuppress-"+ ++Vo,t="touchmove"+e,n="selectstart"+e,r="dragstart"+e,i="click"+e,s=go.select(So).on(t,c).on(n,c).on(r,c),o=Eo.style,u=o[Xo];return o[Xo]="none",function(t){function n(){s.on(i,null)}s.on(e,null),o[Xo]=u,t&&(s.on(i,function(){c(),n()},!0),setTimeout(n,0))}}function B(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();if(0>$o&&(So.scrollX||So.scrollY)){n=go.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var i=n[0][0].getScreenCTM();$o=!i.f&&!i.e,n.remove()}return $o?(r.x=t.pageX,r.y=t.pageY):(r.x=t.clientX,r.y=t.clientY),r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}function j(e){return e>0?1:0>e?-1:0}function F(e){return e>1?0:-1>e?Jo:Math.acos(e)}function I(e){return e>1?Jo/2:-1>e?-Jo/2:Math.asin(e)}function q(e){return(Math.exp(e)-Math.exp(-e))/2}function R(e){return(Math.exp(e)+Math.exp(-e))/2}function U(e){return q(e)/R(e)}function z(e){return(e=Math.sin(e/2))*e}function W(){}function X(e,t,n){return new V(e,t,n)}function V(e,t,n){this.h=e,this.s=t,this.l=n}function $(e,t,n){function r(e){return e>360?e-=360:0>e&&(e+=360),60>e?s+(o-s)*e/60:180>e?o:240>e?s+(o-s)*(240-e)/60:s}function i(e){return Math.round(255*r(e))}var s,o;return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)?0:0>t?0:t>1?1:t,n=0>n?0:n>1?1:n,o=.5>=n?n*(1+t):n+t-n*t,s=2*n-o,ot(i(e+120),i(e),i(e-120))}function J(e,t,n){return new K(e,t,n)}function K(e,t,n){this.h=e,this.c=t,this.l=n}function Q(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),G(n,Math.cos(e*=Go)*t,Math.sin(e)*t)}function G(e,t,n){return new Y(e,t,n)}function Y(e,t,n){this.l=e,this.a=t,this.b=n}function Z(e,t,n){var r=(e+16)/116,i=r+t/500,s=r-n/200;return i=tt(i)*au,r=tt(r)*fu,s=tt(s)*lu,ot(rt(3.2404542*i-1.5371385*r-.4985314*s),rt(-0.969266*i+1.8760108*r+.041556*s),rt(.0556434*i-.2040259*r+1.0572252*s))}function et(e,t,n){return e>0?J(Math.atan2(n,t)*Yo,Math.sqrt(t*t+n*n),e):J(0/0,0/0,e)}function tt(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function nt(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function rt(e){return Math.round(255*(.00304>=e?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function it(e){return ot(e>>16,255&e>>8,255&e)}function st(e){return it(e)+""}function ot(e,t,n){return new ut(e,t,n)}function ut(e,t,n){this.r=e,this.g=t,this.b=n}function at(e){return 16>e?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function ft(e,t,n){var r,i,s,o=0,u=0,a=0;if(r=/([a-z]+)\((.*)\)/i.exec(e))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return t(pt(i[0]),pt(i[1]),pt(i[2]))}return(s=pu.get(e))?t(s.r,s.g,s.b):(null!=e&&"#"===e.charAt(0)&&(4===e.length?(o=e.charAt(1),o+=o,u=e.charAt(2),u+=u,a=e.charAt(3),a+=a):7===e.length&&(o=e.substring(1,3),u=e.substring(3,5),a=e.substring(5,7)),o=parseInt(o,16),u=parseInt(u,16),a=parseInt(a,16)),t(o,u,a))}function lt(e,t,n){var r,i,s=Math.min(e/=255,t/=255,n/=255),o=Math.max(e,t,n),u=o-s,a=(o+s)/2;return u?(i=.5>a?u/(o+s):u/(2-o-s),r=e==o?(t-n)/u+(n>t?6:0):t==o?(n-e)/u+2:(e-t)/u+4,r*=60):(r=0/0,i=a>0&&1>a?0:r),X(r,i,a)}function ct(e,t,n){e=ht(e),t=ht(t),n=ht(n);var r=nt((.4124564*e+.3575761*t+.1804375*n)/au),i=nt((.2126729*e+.7151522*t+.072175*n)/fu),s=nt((.0193339*e+.119192*t+.9503041*n)/lu);return G(116*i-16,500*(r-i),200*(i-s))}function ht(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function pt(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}function dt(e){return"function"==typeof e?e:function(){return e}}function vt(e){return e}function mt(e){return function(t,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),gt(t,n,e,r)}}function gt(e,t,n,r){function i(){var e,t=a.status;if(!t&&a.responseText||t>=200&&300>t||304===t){try{e=n.call(s,a)}catch(r){return o.error.call(s,r),void 0}o.load.call(s,e)}else o.error.call(s,a)}var s={},o=go.dispatch("beforesend","progress","load","error"),u={},a=new XMLHttpRequest,f=null;return!So.XDomainRequest||"withCredentials"in a||!/^(http(s)?:)?\/\//.test(e)||(a=new XDomainRequest),"onload"in a?a.onload=a.onerror=i:a.onreadystatechange=function(){a.readyState>3&&i()},a.onprogress=function(e){var t=go.event;go.event=e;try{o.progress.call(s,a)}finally{go.event=t}},s.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?u[e]:(null==t?delete u[e]:u[e]=t+"",s)},s.mimeType=function(e){return arguments.length?(t=null==e?null:e+"",s):t},s.responseType=function(e){return arguments.length?(f=e,s):f},s.response=function(e){return n=e,s},["get","post"].forEach(function(e){s[e]=function(){return s.send.apply(s,[e].concat(bo(arguments)))}}),s.send=function(n,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),a.open(n,e,!0),null==t||"accept"in u||(u.accept=t+",*/*"),a.setRequestHeader)for(var l in u)a.setRequestHeader(l,u[l]);return null!=t&&a.overrideMimeType&&a.overrideMimeType(t),null!=f&&(a.responseType=f),null!=i&&s.on("error",i).on("load",function(e){i(null,e)}),o.beforesend.call(s,a),a.send(null==r?null:r),s},s.abort=function(){return a.abort(),s},go.rebind(s,o,"on"),null==r?s:s.get(yt(r))}function yt(e){return 1===e.length?function(t,n){e(null==t?n:null)}:e}function bt(){var e=Et(),t=St()-e;t>24?(isFinite(t)&&(clearTimeout(gu),gu=setTimeout(bt,t)),mu=0):(mu=1,bu(bt))}function wt(e,t,n){var r=arguments.length;2>r&&(t=0),3>r&&(n=Date.now()),yu.callback=e,yu.time=n+t}function Et(){var e=Date.now();for(yu=du;yu;)e>=yu.time&&(yu.flush=yu.callback(e-yu.time)),yu=yu.next;return e}function St(){for(var e,t=du,n=1/0;t;)t.flush?t=e?e.next=t.next:du=t.next:(t.time<n&&(n=t.time),t=(e=t).next);return vu=e,n}function xt(e,t){var n=Math.pow(10,3*Math.abs(8-t));return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}function Tt(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}function Nt(e){return e+""}function Ct(){}function kt(e,t,n){var r=n.s=e+t,i=r-e,s=r-i;n.t=e-s+(t-i)}function Lt(e,t){e&&Mu.hasOwnProperty(e.type)&&Mu[e.type](e,t)}function At(e,t,n){var r,i=-1,s=e.length-n;for(t.lineStart();++i<s;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function Ot(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)At(e[n],t,1);t.polygonEnd()}function Mt(){function e(e,t){e*=Go,t=t*Go/2+Jo/4;var n=e-r,o=Math.cos(t),u=Math.sin(t),a=s*u,f=i*o+a*Math.cos(n),l=a*Math.sin(n);Du.add(Math.atan2(l,f)),r=e,i=o,s=u}var t,n,r,i,s;Pu.point=function(o,u){Pu.point=e,r=(t=o)*Go,i=Math.cos(u=(n=u)*Go/2+Jo/4),s=Math.sin(u)},Pu.lineEnd=function(){e(t,n)}}function _t(e){var t=e[0],n=e[1],r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function Dt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Pt(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Ht(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Bt(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function jt(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Ft(e){return[Math.atan2(e[1],e[0]),I(e[2])]}function It(e,t){return Math.abs(e[0]-t[0])<Ko&&Math.abs(e[1]-t[1])<Ko}function qt(e,t){e*=Go;var n=Math.cos(t*=Go);Rt(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function Rt(e,t,n){++Hu,ju+=(e-ju)/Hu,Fu+=(t-Fu)/Hu,Iu+=(n-Iu)/Hu}function Ut(){function e(e,i){e*=Go;var s=Math.cos(i*=Go),o=s*Math.cos(e),u=s*Math.sin(e),a=Math.sin(i),f=Math.atan2(Math.sqrt((f=n*a-r*u)*f+(f=r*o-t*a)*f+(f=t*u-n*o)*f),t*o+n*u+r*a);Bu+=f,qu+=f*(t+(t=o)),Ru+=f*(n+(n=u)),Uu+=f*(r+(r=a)),Rt(t,n,r)}var t,n,r;Vu.point=function(i,s){i*=Go;var o=Math.cos(s*=Go);t=o*Math.cos(i),n=o*Math.sin(i),r=Math.sin(s),Vu.point=e,Rt(t,n,r)}}function zt(){Vu.point=qt}function Wt(){function e(e,t){e*=Go;var n=Math.cos(t*=Go),o=n*Math.cos(e),u=n*Math.sin(e),a=Math.sin(t),f=i*a-s*u,l=s*o-r*a,c=r*u-i*o,h=Math.sqrt(f*f+l*l+c*c),p=r*o+i*u+s*a,d=h&&-F(p)/h,v=Math.atan2(h,p);zu+=d*f,Wu+=d*l,Xu+=d*c,Bu+=v,qu+=v*(r+(r=o)),Ru+=v*(i+(i=u)),Uu+=v*(s+(s=a)),Rt(r,i,s)}var t,n,r,i,s;Vu.point=function(o,u){t=o,n=u,Vu.point=e,o*=Go;var a=Math.cos(u*=Go);r=a*Math.cos(o),i=a*Math.sin(o),s=Math.sin(u),Rt(r,i,s)},Vu.lineEnd=function(){e(t,n),Vu.lineEnd=zt,Vu.point=qt}}function Xt(){return!0}function Vt(e,t,n,r,i){var s=[],o=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n=e[0],r=e[t];if(It(n,r)){i.lineStart();for(var u=0;t>u;++u)i.point((n=e[u])[0],n[1]);return i.lineEnd(),void 0}var a={point:n,points:e,other:null,visited:!1,entry:!0,subject:!0},f={point:n,points:[n],other:a,visited:!1,entry:!1,subject:!1};a.other=f,s.push(a),o.push(f),a={point:r,points:[r],other:null,visited:!1,entry:!1,subject:!0},f={point:r,points:[r],other:a,visited:!1,entry:!0,subject:!1},a.other=f,s.push(a),o.push(f)}}),o.sort(t),$t(s),$t(o),s.length){if(n)for(var u=1,a=!n(o[0].point),f=o.length;f>u;++u)o[u].entry=a=!a;for(var l,c,h,p=s[0];;){for(l=p;l.visited;)if((l=l.next)===p)return;c=l.points,i.lineStart();do{if(l.visited=l.other.visited=!0,l.entry){if(l.subject)for(var u=0;u<c.length;u++)i.point((h=c[u])[0],h[1]);else r(l.point,l.next.point,1,i);l=l.next}else{if(l.subject){c=l.prev.points;for(var u=c.length;--u>=0;)i.point((h=c[u])[0],h[1])}else r(l.point,l.prev.point,-1,i);l=l.prev}l=l.other,c=l.points}while(!l.visited);i.lineEnd()}}}function $t(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.next=n=e[r],n.prev=i,i=n;i.next=n=e[0],n.prev=i}}function Jt(e,t,n,r){return function(i){function s(t,n){e(t,n)&&i.point(t,n)}function o(e,t){v.point(e,t)}function u(){m.point=o,v.lineStart()}function a(){m.point=s,v.lineEnd()}function f(e,t){y.point(e,t),d.push([e,t])}function l(){y.lineStart(),d=[]}function c(){f(d[0][0],d[0][1]),y.lineEnd();var e,t=y.clean(),n=g.buffer(),r=n.length;if(d.pop(),p.push(d),d=null,r){if(1&t){e=n[0];var s,r=e.length-1,o=-1;for(i.lineStart();++o<r;)i.point((s=e[o])[0],s[1]);return i.lineEnd(),void 0}r>1&&2&t&&n.push(n.pop().concat(n.shift())),h.push(n.filter(Kt))}}var h,p,d,v=t(i),m={point:s,lineStart:u,lineEnd:a,polygonStart:function(){m.point=f,m.lineStart=l,m.lineEnd=c,h=[],p=[],i.polygonStart()},polygonEnd:function(){m.point=s,m.lineStart=u,m.lineEnd=a,h=go.merge(h),h.length?Vt(h,Gt,null,n,i):r(p)&&(i.lineStart(),n(null,null,1,i),i.lineEnd()),i.polygonEnd(),h=p=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}},g=Qt(),y=t(g);return m}}function Kt(e){return e.length>1}function Qt(){var e,t=[];return{lineStart:function(){t.push(e=[])},point:function(t,n){e.push([t,n])},lineEnd:a,buffer:function(){var n=t;return t=[],e=null,n},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function Gt(e,t){return((e=e.point)[0]<0?e[1]-Jo/2-Ko:Jo/2-e[1])-((t=t.point)[0]<0?t[1]-Jo/2-Ko:Jo/2-t[1])}function Yt(e,t){var n=e[0],r=e[1],i=[Math.sin(n),-Math.cos(n),0],s=0,o=!1,u=!1,a=0;Du.reset();for(var f=0,l=t.length;l>f;++f){var c=t[f],h=c.length;if(h){for(var p=c[0],d=p[0],v=p[1]/2+Jo/4,m=Math.sin(v),g=Math.cos(v),y=1;;){y===h&&(y=0),e=c[y];var b=e[0],w=e[1]/2+Jo/4,E=Math.sin(w),S=Math.cos(w),x=b-d,T=Math.abs(x)>Jo,N=m*E;if(Du.add(Math.atan2(N*Math.sin(x),g*S+N*Math.cos(x))),Math.abs(w)<Ko&&(u=!0),s+=T?x+(x>=0?2:-2)*Jo:x,T^d>=n^b>=n){var C=Pt(_t(p),_t(e));jt(C);var k=Pt(i,C);jt(k);var L=(T^x>=0?-1:1)*I(k[2]);r>L&&(a+=T^x>=0?1:-1)}if(!(y++))break;d=b,m=E,g=S,p=e}Math.abs(s)>Ko&&(o=!0)}}return(!u&&!o&&0>Du||-Ko>s)^1&a}function Zt(e){var t,n=0/0,r=0/0,i=0/0;return{lineStart:function(){e.lineStart(),t=1},point:function(s,o){var u=s>0?Jo:-Jo,a=Math.abs(s-n);Math.abs(a-Jo)<Ko?(e.point(n,r=(r+o)/2>0?Jo/2:-Jo/2),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(u,r),e.point(s,r),t=0):i!==u&&a>=Jo&&(Math.abs(n-i)<Ko&&(n-=i*Ko),Math.abs(s-u)<Ko&&(s-=u*Ko),r=en(n,r,s,o),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(u,r),t=0),e.point(n=s,r=o),i=u},lineEnd:function(){e.lineEnd(),n=r=0/0},clean:function(){return 2-t}}}function en(e,t,n,r){var i,s,o=Math.sin(e-n);return Math.abs(o)>Ko?Math.atan((Math.sin(t)*(s=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(t))*Math.sin(e))/(i*s*o)):(t+r)/2}function tn(e,t,n,r){var i;if(null==e)i=n*Jo/2,r.point(-Jo,i),r.point(0,i),r.point(Jo,i),r.point(Jo,0),r.point(Jo,-i),r.point(0,-i),r.point(-Jo,-i),r.point(-Jo,0),r.point(-Jo,i);else if(Math.abs(e[0]-t[0])>Ko){var s=(e[0]<t[0]?1:-1)*Jo;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function nn(e){return Yt(Ju,e)}function rn(e){function t(e,t){return Math.cos(e)*Math.cos(t)>o}function n(e){var n,s,o,a,l;return{lineStart:function(){a=o=!1,l=1},point:function(c,h){var p,d=[c,h],v=t(c,h),m=u?v?0:i(c,h):v?i(c+(0>c?Jo:-Jo),h):0;if(!n&&(a=o=v)&&e.lineStart(),v!==o&&(p=r(n,d),(It(n,p)||It(d,p))&&(d[0]+=Ko,d[1]+=Ko,v=t(d[0],d[1]))),v!==o)l=0,v?(e.lineStart(),p=r(d,n),e.point(p[0],p[1])):(p=r(n,d),e.point(p[0],p[1]),e.lineEnd()),n=p;else if(f&&n&&u^v){var g;m&s||!(g=r(d,n,!0))||(l=0,u?(e.lineStart(),e.point(g[0][0],g[0][1]),e.point(g[1][0],g[1][1]),e.lineEnd()):(e.point(g[1][0],g[1][1]),e.lineEnd(),e.lineStart(),e.point(g[0][0],g[0][1])))}!v||n&&It(n,d)||e.point(d[0],d[1]),n=d,o=v,s=m},lineEnd:function(){o&&e.lineEnd(),n=null},clean:function(){return l|(a&&o)<<1}}}function r(e,t,n){var r=_t(e),i=_t(t),s=[1,0,0],u=Pt(r,i),a=Dt(u,u),f=u[0],l=a-f*f;if(!l)return!n&&e;var c=o*a/l,h=-o*f/l,p=Pt(s,u),d=Bt(s,c),v=Bt(u,h);Ht(d,v);var m=p,g=Dt(d,m),y=Dt(m,m),b=g*g-y*(Dt(d,d)-1);if(!(0>b)){var w=Math.sqrt(b),E=Bt(m,(-g-w)/y);if(Ht(E,d),E=Ft(E),!n)return E;var S,x=e[0],T=t[0],N=e[1],C=t[1];x>T&&(S=x,x=T,T=S);var k=T-x,L=Math.abs(k-Jo)<Ko,A=L||Ko>k;if(!L&&N>C&&(S=N,N=C,C=S),A?L?N+C>0^E[1]<(Math.abs(E[0]-x)<Ko?N:C):N<=E[1]&&E[1]<=C:k>Jo^(x<=E[0]&&E[0]<=T)){var O=Bt(m,(-g+w)/y);return Ht(O,d),[E,Ft(O)]}}}function i(t,n){var r=u?e:Jo-e,i=0;return-r>t?i|=1:t>r&&(i|=2),-r>n?i|=4:n>r&&(i|=8),i}function s(e){return Yt(a,e)}var o=Math.cos(e),u=o>0,a=[e,0],f=Math.abs(o)>Ko,l=On(e,6*Go);return Jt(t,n,l,s)}function sn(e,t,n,r){function i(r,i){return Math.abs(r[0]-e)<Ko?i>0?0:3:Math.abs(r[0]-n)<Ko?i>0?2:1:Math.abs(r[1]-t)<Ko?i>0?1:0:i>0?3:2}function s(e,t){return o(e.point,t.point)}function o(e,t){var n=i(e,1),r=i(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}function u(i,s){var o=s[0]-i[0],u=s[1]-i[1],a=[0,1];return Math.abs(o)<Ko&&Math.abs(u)<Ko?e<=i[0]&&i[0]<=n&&t<=i[1]&&i[1]<=r:on(e-i[0],o,a)&&on(i[0]-n,-o,a)&&on(t-i[1],u,a)&&on(i[1]-r,-u,a)?(a[1]<1&&(s[0]=i[0]+a[1]*o,s[1]=i[1]+a[1]*u),a[0]>0&&(i[0]+=a[0]*o,i[1]+=a[0]*u),!0):!1}return function(a){function f(s){var o=i(s,-1),u=l([0===o||3===o?e:n,o>1?r:t]);return u}function l(e){for(var t=0,n=b.length,r=e[1],i=0;n>i;++i)for(var s,o=1,u=b[i],a=u.length,f=u[0];a>o;++o)s=u[o],f[1]<=r?s[1]>r&&c(f,s,e)>0&&++t:s[1]<=r&&c(f,s,e)<0&&--t,f=s;return 0!==t}function c(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(n[0]-e[0])*(t[1]-e[1])}function h(s,u,a,f){var l=0,c=0;if(null==s||(l=i(s,a))!==(c=i(u,a))||o(s,u)<0^a>0){do f.point(0===l||3===l?e:n,l>1?r:t);while((l=(l+a+4)%4)!==c)}else f.point(u[0],u[1])}function p(i,s){return i>=e&&n>=i&&s>=t&&r>=s}function d(e,t){p(e,t)&&a.point(e,t)}function v(){O.point=g,b&&b.push(w=[]),k=!0,C=!1,T=N=0/0}function m(){y&&(g(E,S),x&&C&&A.rejoin(),y.push(A.buffer())),O.point=d,C&&a.lineEnd()}function g(e,t){e=Math.max(-Ku,Math.min(Ku,e)),t=Math.max(-Ku,Math.min(Ku,t));var n=p(e,t);if(b&&w.push([e,t]),k)E=e,S=t,x=n,k=!1,n&&(a.lineStart(),a.point(e,t));else if(n&&C)a.point(e,t);else{var r=[T,N],i=[e,t];u(r,i)?(C||(a.lineStart(),a.point(r[0],r[1])),a.point(i[0],i[1]),n||a.lineEnd()):n&&(a.lineStart(),a.point(e,t))}T=e,N=t,C=n}var y,b,w,E,S,x,T,N,C,k,L=a,A=Qt(),O={point:d,lineStart:v,lineEnd:m,polygonStart:function(){a=A,y=[],b=[]},polygonEnd:function(){a=L,(y=go.merge(y)).length?(a.polygonStart(),Vt(y,s,f,h,a),a.polygonEnd()):l([e,t])&&(a.polygonStart(),a.lineStart(),h(null,null,1,a),a.lineEnd(),a.polygonEnd()),y=b=w=null}};return O}}function on(e,t,n){if(Math.abs(t)<Ko)return 0>=e;var r=e/t;if(t>0){if(r>n[1])return!1;r>n[0]&&(n[0]=r)}else{if(r<n[0])return!1;r<n[1]&&(n[1]=r)}return!0}function un(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return n=t.invert(n,r),n&&e.invert(n[0],n[1])}),n}function an(e){var t=0,n=Jo/3,r=xn(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*Jo/180,n=e[1]*Jo/180):[180*(t/Jo),180*(n/Jo)]},i}function fn(e,t){function n(e,t){var n=Math.sqrt(s-2*i*Math.sin(t))/i;return[n*Math.sin(e*=i),o-n*Math.cos(e)]}var r=Math.sin(e),i=(r+Math.sin(t))/2,s=1+r*(2*i-r),o=Math.sqrt(s)/i;return n.invert=function(e,t){var n=o-t;return[Math.atan2(e,n)/i,I((s-(e*e+n*n)*i*i)/(2*i))]},n}function ln(){function e(e,t){Gu+=i*e-r*t,r=e,i=t}var t,n,r,i;na.point=function(s,o){na.point=e,t=r=s,n=i=o},na.lineEnd=function(){e(t,n)}}function cn(e,t){Yu>e&&(Yu=e),e>ea&&(ea=e),Zu>t&&(Zu=t),t>ta&&(ta=t)}function hn(){function e(e,t){o.push("M",e,",",t,s)}function t(e,t){o.push("M",e,",",t),u.point=n}function n(e,t){o.push("L",e,",",t)}function r(){u.point=e}function i(){o.push("Z")}var s=pn(4.5),o=[],u={point:e,lineStart:function(){u.point=t},lineEnd:r,polygonStart:function(){u.lineEnd=i},polygonEnd:function(){u.lineEnd=r,u.point=e},pointRadius:function(e){return s=pn(e),u},result:function(){if(o.length){var e=o.join("");return o=[],e}}};return u}function pn(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+ -2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function dn(e,t){ju+=e,Fu+=t,++Iu}function vn(){function e(e,r){var i=e-t,s=r-n,o=Math.sqrt(i*i+s*s);qu+=o*(t+e)/2,Ru+=o*(n+r)/2,Uu+=o,dn(t=e,n=r)}var t,n;ia.point=function(r,i){ia.point=e,dn(t=r,n=i)}}function mn(){ia.point=dn}function gn(){function e(e,t){var n=e-r,s=t-i,o=Math.sqrt(n*n+s*s);qu+=o*(r+e)/2,Ru+=o*(i+t)/2,Uu+=o,o=i*e-r*t,zu+=o*(r+e),Wu+=o*(i+t),Xu+=3*o,dn(r=e,i=t)}var t,n,r,i;ia.point=function(s,o){ia.point=e,dn(t=r=s,n=i=o)},ia.lineEnd=function(){e(t,n)}}function yn(e){function t(t,n){e.moveTo(t,n),e.arc(t,n,o,0,2*Jo)}function n(t,n){e.moveTo(t,n),u.point=r}function r(t,n){e.lineTo(t,n)}function i(){u.point=t}function s(){e.closePath()}var o=4.5,u={point:t,lineStart:function(){u.point=n},lineEnd:i,polygonStart:function(){u.lineEnd=s},polygonEnd:function(){u.lineEnd=i,u.point=t},pointRadius:function(e){return o=e,u},result:a};return u}function bn(e){function t(t){function r(n,r){n=e(n,r),t.point(n[0],n[1])}function i(){b=0/0,T.point=o,t.lineStart()}function o(r,i){var o=_t([r,i]),u=e(r,i);n(b,w,y,E,S,x,b=u[0],w=u[1],y=r,E=o[0],S=o[1],x=o[2],s,t),t.point(b,w)}function u(){T.point=r,t.lineEnd()}function a(){i(),T.point=f,T.lineEnd=l}function f(e,t){o(c=e,h=t),p=b,d=w,v=E,m=S,g=x,T.point=o}function l(){n(b,w,y,E,S,x,p,d,c,v,m,g,s,t),T.lineEnd=u,u()}var c,h,p,d,v,m,g,y,b,w,E,S,x,T={point:r,lineStart:i,lineEnd:u,polygonStart:function(){t.polygonStart(),T.lineStart=a},polygonEnd:function(){t.polygonEnd(),T.lineStart=i}};return T}function n(t,s,o,u,a,f,l,c,h,p,d,v,m,g){var y=l-t,b=c-s,w=y*y+b*b;if(w>4*r&&m--){var E=u+p,S=a+d,x=f+v,T=Math.sqrt(E*E+S*S+x*x),N=Math.asin(x/=T),C=Math.abs(Math.abs(x)-1)<Ko?(o+h)/2:Math.atan2(S,E),k=e(C,N),L=k[0],A=k[1],O=L-t,M=A-s,_=b*O-y*M;(_*_/w>r||Math.abs((y*O+b*M)/w-.5)>.3||i>u*p+a*d+f*v)&&(n(t,s,o,u,a,f,L,A,C,E/=T,S/=T,x,m,g),g.point(L,A),n(L,A,C,E,S,x,l,c,h,p,d,v,m,g))}}var r=.5,i=Math.cos(30*Go),s=16;return t.precision=function(e){return arguments.length?(s=(r=e*e)>0&&16,t):Math.sqrt(r)},t}function wn(e){this.stream=e}function En(e){var t=bn(function(t,n){return e([t*Yo,n*Yo])});return function(e){var n=new wn(e=t(e));return n.point=function(t,n){e.point(t*Go,n*Go)},n}}function Sn(e){return xn(function(){return e})()}function xn(e){function t(e){return e=u(e[0]*Go,e[1]*Go),[e[0]*h+a,f-e[1]*h]}function n(e){return e=u.invert((e[0]-a)/h,(f-e[1])/h),e&&[e[0]*Yo,e[1]*Yo]}function r(){u=un(o=Cn(g,y,b),s);var e=s(v,m);return a=p-e[0]*h,f=d+e[1]*h,i()}function i(){return l&&(l.valid=!1,l=null),t}var s,o,u,a,f,l,c=bn(function(e,t){return e=s(e,t),[e[0]*h+a,f-e[1]*h]}),h=150,p=480,d=250,v=0,m=0,g=0,y=0,b=0,w=$u,E=vt,S=null,x=null;return t.stream=function(e){return l&&(l.valid=!1),l=Tn(o,w(c(E(e)))),l.valid=!0,l},t.clipAngle=function(e){return arguments.length?(w=null==e?(S=e,$u):rn((S=+e)*Go),i()):S},t.clipExtent=function(e){return arguments.length?(x=e,E=e?sn(e[0][0],e[0][1],e[1][0],e[1][1]):vt,i()):x},t.scale=function(e){return arguments.length?(h=+e,r()):h},t.translate=function(e){return arguments.length?(p=+e[0],d=+e[1],r()):[p,d]},t.center=function(e){return arguments.length?(v=e[0]%360*Go,m=e[1]%360*Go,r()):[v*Yo,m*Yo]},t.rotate=function(e){return arguments.length?(g=e[0]%360*Go,y=e[1]%360*Go,b=e.length>2?e[2]%360*Go:0,r()):[g*Yo,y*Yo,b*Yo]},go.rebind(t,c,"precision"),function(){return s=e.apply(this,arguments),t.invert=s.invert&&n,r()}}function Tn(e,t){var n=new wn(t);return n.point=function(n,r){r=e(n*Go,r*Go),n=r[0],t.point(n>Jo?n-2*Jo:-Jo>n?n+2*Jo:n,r[1])},n}function Nn(e,t){return[e,t]}function Cn(e,t,n){return e?t||n?un(Ln(e),An(t,n)):Ln(e):t||n?An(t,n):Nn}function kn(e){return function(t,n){return t+=e,[t>Jo?t-2*Jo:-Jo>t?t+2*Jo:t,n]}}function Ln(e){var t=kn(e);return t.invert=kn(-e),t}function An(e,t){function n(e,t){var n=Math.cos(t),u=Math.cos(e)*n,a=Math.sin(e)*n,f=Math.sin(t),l=f*r+u*i;return[Math.atan2(a*s-l*o,u*r-f*i),I(l*s+a*o)]}var r=Math.cos(e),i=Math.sin(e),s=Math.cos(t),o=Math.sin(t);return n.invert=function(e,t){var n=Math.cos(t),u=Math.cos(e)*n,a=Math.sin(e)*n,f=Math.sin(t),l=f*s-a*o;return[Math.atan2(a*s+f*o,u*r+l*i),I(l*r-u*i)]},n}function On(e,t){var n=Math.cos(e),r=Math.sin(e);return function(i,s,o,u){var a=o*t;null!=i?(i=Mn(n,i),s=Mn(n,s),(o>0?s>i:i>s)&&(i+=2*o*Jo)):(i=e+2*o*Jo,s=e-.5*a);for(var f,l=i;o>0?l>s:s>l;l-=a)u.point((f=Ft([n,-r*Math.cos(l),-r*Math.sin(l)]))[0],f[1])}}function Mn(e,t){var n=_t(t);n[0]-=e,jt(n);var r=F(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Ko)%(2*Math.PI)}function _n(e,t,n){var r=go.range(e,t-Ko,n).concat(t);return function(e){return r.map(function(t){return[e,t]})}}function Dn(e,t,n){var r=go.range(e,t-Ko,n).concat(t);return function(e){return r.map(function(t){return[t,e]})}}function Pn(e){return e.source}function Hn(e){return e.target}function Bn(e,t,n,r){var i=Math.cos(t),s=Math.sin(t),o=Math.cos(r),u=Math.sin(r),a=i*Math.cos(e),f=i*Math.sin(e),l=o*Math.cos(n),c=o*Math.sin(n),h=2*Math.asin(Math.sqrt(z(r-t)+i*o*z(n-e))),p=1/Math.sin(h),d=h?function(e){var t=Math.sin(e*=h)*p,n=Math.sin(h-e)*p,r=n*a+t*l,i=n*f+t*c,o=n*s+t*u;return[Math.atan2(i,r)*Yo,Math.atan2(o,Math.sqrt(r*r+i*i))*Yo]}:function(){return[e*Yo,t*Yo]};return d.distance=h,d}function jn(){function e(e,i){var s=Math.sin(i*=Go),o=Math.cos(i),u=Math.abs((e*=Go)-t),a=Math.cos(u);sa+=Math.atan2(Math.sqrt((u=o*Math.sin(u))*u+(u=r*s-n*o*a)*u),n*s+r*o*a),t=e,n=s,r=o}var t,n,r;oa.point=function(i,s){t=i*Go,n=Math.sin(s*=Go),r=Math.cos(s),oa.point=e},oa.lineEnd=function(){oa.point=oa.lineEnd=a}}function Fn(e,t){function n(t,n){var r=Math.cos(t),i=Math.cos(n),s=e(r*i);return[s*i*Math.sin(t),s*Math.sin(n)]}return n.invert=function(e,n){var r=Math.sqrt(e*e+n*n),i=t(r),s=Math.sin(i),o=Math.cos(i);return[Math.atan2(e*s,r*o),Math.asin(r&&n*s/r)]},n}function In(e,t){function n(e,t){var n=Math.abs(Math.abs(t)-Jo/2)<Ko?0:o/Math.pow(i(t),s);return[n*Math.sin(s*e),o-n*Math.cos(s*e)]}var r=Math.cos(e),i=function(e){return Math.tan(Jo/4+e/2)},s=e===t?Math.sin(e):Math.log(r/Math.cos(t))/Math.log(i(t)/i(e)),o=r*Math.pow(i(e),s)/s;return s?(n.invert=function(e,t){var n=o-t,r=j(s)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/s,2*Math.atan(Math.pow(o/r,1/s))-Jo/2]},n):Rn}function qn(e,t){function n(e,t){var n=s-t;return[n*Math.sin(i*e),s-n*Math.cos(i*e)]}var r=Math.cos(e),i=e===t?Math.sin(e):(r-Math.cos(t))/(t-e),s=r/i+e;return Math.abs(i)<Ko?Nn:(n.invert=function(e,t){var n=s-t;return[Math.atan2(e,n)/i,s-j(i)*Math.sqrt(e*e+n*n)]},n)}function Rn(e,t){return[e,Math.log(Math.tan(Jo/4+t/2))]}function Un(e){var t,n=Sn(e),r=n.scale,i=n.translate,s=n.clipExtent;return n.scale=function(){var e=r.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.translate=function(){var e=i.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.clipExtent=function(e){var o=s.apply(n,arguments);if(o===n){if(t=null==e){var u=Jo*r(),a=i();s([[a[0]-u,a[1]-u],[a[0]+u,a[1]+u]])}}else t&&(o=null);return o},n.clipExtent(null)}function zn(e,t){var n=Math.cos(t)*Math.sin(e);return[Math.log((1+n)/(1-n))/2,Math.atan2(Math.tan(t),Math.cos(e))]}function Wn(e){function t(t){function o(){f.push("M",s(e(l),u))}for(var a,f=[],l=[],c=-1,h=t.length,p=dt(n),d=dt(r);++c<h;)i.call(this,a=t[c],c)?l.push([+p.call(this,a,c),+d.call(this,a,c)]):l.length&&(o(),l=[]);return l.length&&o(),f.length?f.join(""):null}var n=Xn,r=Vn,i=Xt,s=$n,o=s.key,u=.7;return t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t.defined=function(e){return arguments.length?(i=e,t):i},t.interpolate=function(e){return arguments.length?(o="function"==typeof e?s=e:(s=ha.get(e)||$n).key,t):o},t.tension=function(e){return arguments.length?(u=e,t):u},t}function Xn(e){return e[0]}function Vn(e){return e[1]}function $n(e){return e.join("L")}function Jn(e){return $n(e)+"Z"}function Kn(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")}function Qn(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("V",(r=e[t])[1],"H",r[0]);return i.join("")}function Gn(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r=e[t])[0],"V",r[1]);return i.join("")}function Yn(e,t){return e.length<4?$n(e):e[1]+tr(e.slice(1,e.length-1),nr(e,t))}function Zn(e,t){return e.length<3?$n(e):e[0]+tr((e.push(e[0]),e),nr([e[e.length-2]].concat(e,[e[1]]),t))}function er(e,t){return e.length<3?$n(e):e[0]+tr(e,nr(e,t))}function tr(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return $n(e);var n=e.length!=t.length,r="",i=e[0],s=e[1],o=t[0],u=o,a=1;if(n&&(r+="Q"+(s[0]-2*o[0]/3)+","+(s[1]-2*o[1]/3)+","+s[0]+","+s[1],i=e[1],a=2),t.length>1){u=t[1],s=e[a],a++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(s[0]-u[0])+","+(s[1]-u[1])+","+s[0]+","+s[1];for(var f=2;f<t.length;f++,a++)s=e[a],u=t[f],r+="S"+(s[0]-u[0])+","+(s[1]-u[1])+","+s[0]+","+s[1]}if(n){var l=e[a];r+="Q"+(s[0]+2*u[0]/3)+","+(s[1]+2*u[1]/3)+","+l[0]+","+l[1]}return r}function nr(e,t){for(var n,r=[],i=(1-t)/2,s=e[0],o=e[1],u=1,a=e.length;++u<a;)n=s,s=o,o=e[u],r.push([i*(o[0]-n[0]),i*(o[1]-n[1])]);return r}function rr(e){if(e.length<3)return $n(e);var t=1,n=e.length,r=e[0],i=r[0],s=r[1],o=[i,i,i,(r=e[1])[0]],u=[s,s,s,r[1]],a=[i,",",s,"L",ur(va,o),",",ur(va,u)];for(e.push(e[n-1]);++t<=n;)r=e[t],o.shift(),o.push(r[0]),u.shift(),u.push(r[1]),ar(a,o,u);return e.pop(),a.push("L",r),a.join("")}function ir(e){if(e.length<4)return $n(e);for(var t,n=[],r=-1,i=e.length,s=[0],o=[0];++r<3;)t=e[r],s.push(t[0]),o.push(t[1]);for(n.push(ur(va,s)+","+ur(va,o)),--r;++r<i;)t=e[r],s.shift(),s.push(t[0]),o.shift(),o.push(t[1]),ar(n,s,o);return n.join("")}function sr(e){for(var t,n,r=-1,i=e.length,s=i+4,o=[],u=[];++r<4;)n=e[r%i],o.push(n[0]),u.push(n[1]);for(t=[ur(va,o),",",ur(va,u)],--r;++r<s;)n=e[r%i],o.shift(),o.push(n[0]),u.shift(),u.push(n[1]),ar(t,o,u);return t.join("")}function or(e,t){var n=e.length-1;if(n)for(var r,i,s=e[0][0],o=e[0][1],u=e[n][0]-s,a=e[n][1]-o,f=-1;++f<=n;)r=e[f],i=f/n,r[0]=t*r[0]+(1-t)*(s+i*u),r[1]=t*r[1]+(1-t)*(o+i*a);return rr(e)}function ur(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function ar(e,t,n){e.push("C",ur(pa,t),",",ur(pa,n),",",ur(da,t),",",ur(da,n),",",ur(va,t),",",ur(va,n))}function fr(e,t){return(t[1]-e[1])/(t[0]-e[0])}function lr(e){for(var t=0,n=e.length-1,r=[],i=e[0],s=e[1],o=r[0]=fr(i,s);++t<n;)r[t]=(o+(o=fr(i=s,s=e[t+1])))/2;return r[t]=o,r}function cr(e){for(var t,n,r,i,s=[],o=lr(e),u=-1,a=e.length-1;++u<a;)t=fr(e[u],e[u+1]),Math.abs(t)<1e-6?o[u]=o[u+1]=0:(n=o[u]/t,r=o[u+1]/t,i=n*n+r*r,i>9&&(i=3*t/Math.sqrt(i),o[u]=i*n,o[u+1]=i*r));for(u=-1;++u<=a;)i=(e[Math.min(a,u+1)][0]-e[Math.max(0,u-1)][0])/(6*(1+o[u]*o[u])),s.push([i||0,o[u]*i||0]);return s}function hr(e){return e.length<3?$n(e):e[0]+tr(e,cr(e))}function pr(e,t,n,r){var i,s,o,u,a,f,l;return i=r[e],s=i[0],o=i[1],i=r[t],u=i[0],a=i[1],i=r[n],f=i[0],l=i[1],(l-o)*(u-s)-(a-o)*(f-s)>0}function dr(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function vr(e,t,n,r){var i=e[0],s=n[0],o=t[0]-i,u=r[0]-s,a=e[1],f=n[1],l=t[1]-a,c=r[1]-f,h=(u*(a-f)-c*(i-s))/(c*o-u*l);return[i+h*o,a+h*l]}function mr(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}function gr(e,t){var n={list:e.map(function(e,t){return{index:t,x:e[0],y:e[1]}}).sort(function(e,t){return e.y<t.y?-1:e.y>t.y?1:e.x<t.x?-1:e.x>t.x?1:0}),bottomSite:null},r={list:[],leftEnd:null,rightEnd:null,init:function(){r.leftEnd=r.createHalfEdge(null,"l"),r.rightEnd=r.createHalfEdge(null,"l"),r.leftEnd.r=r.rightEnd,r.rightEnd.l=r.leftEnd,r.list.unshift(r.leftEnd,r.rightEnd)},createHalfEdge:function(e,t){return{edge:e,side:t,vertex:null,l:null,r:null}},insert:function(e,t){t.l=e,t.r=e.r,e.r.l=t,e.r=t},leftBound:function(e){var t=r.leftEnd;do t=t.r;while(t!=r.rightEnd&&i.rightOf(t,e));return t=t.l},del:function(e){e.l.r=e.r,e.r.l=e.l,e.edge=null},right:function(e){return e.r},left:function(e){return e.l},leftRegion:function(e){return null==e.edge?n.bottomSite:e.edge.region[e.side]},rightRegion:function(e){return null==e.edge?n.bottomSite:e.edge.region[ga[e.side]]}},i={bisect:function(e,t){var n={region:{l:e,r:t},ep:{l:null,r:null}},r=t.x-e.x,i=t.y-e.y,s=r>0?r:-r,o=i>0?i:-i;return n.c=e.x*r+e.y*i+.5*(r*r+i*i),s>o?(n.a=1,n.b=i/r,n.c/=r):(n.b=1,n.a=r/i,n.c/=i),n},intersect:function(e,t){var n=e.edge,r=t.edge;if(!n||!r||n.region.r==r.region.r)return null;var i=n.a*r.b-n.b*r.a;if(Math.abs(i)<1e-10)return null;var s,o,u=(n.c*r.b-r.c*n.b)/i,a=(r.c*n.a-n.c*r.a)/i,f=n.region.r,l=r.region.r;f.y<l.y||f.y==l.y&&f.x<l.x?(s=e,o=n):(s=t,o=r);var c=u>=o.region.r.x;return c&&"l"===s.side||!c&&"r"===s.side?null:{x:u,y:a}},rightOf:function(e,t){var n=e.edge,r=n.region.r,i=t.x>r.x;if(i&&"l"===e.side)return 1;if(!i&&"r"===e.side)return 0;if(1===n.a){var s=t.y-r.y,o=t.x-r.x,u=0,a=0;if(!i&&n.b<0||i&&n.b>=0?a=u=s>=n.b*o:(a=t.x+t.y*n.b>n.c,n.b<0&&(a=!a),a||(u=1)),!u){var f=r.x-n.region.l.x;a=n.b*(o*o-s*s)<f*s*(1+2*o/f+n.b*n.b),n.b<0&&(a=!a)}}else{var l=n.c-n.a*t.x,c=t.y-l,h=t.x-r.x,p=l-r.y;a=c*c>h*h+p*p}return"l"===e.side?a:!a},endPoint:function(e,n,r){e.ep[n]=r,e.ep[ga[n]]&&t(e)},distance:function(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}},s={list:[],insert:function(e,t,n){e.vertex=t,e.ystar=t.y+n;for(var r=0,i=s.list,o=i.length;o>r;r++){var u=i[r];if(!(e.ystar>u.ystar||e.ystar==u.ystar&&t.x>u.vertex.x))break}i.splice(r,0,e)},del:function(e){for(var t=0,n=s.list,r=n.length;r>t&&n[t]!=e;++t);n.splice(t,1)},empty:function(){return 0===s.list.length},nextEvent:function(e){for(var t=0,n=s.list,r=n.length;r>t;++t)if(n[t]==e)return n[t+1];return null},min:function(){var e=s.list[0];return{x:e.vertex.x,y:e.ystar}},extractMin:function(){return s.list.shift()}};r.init(),n.bottomSite=n.list.shift();for(var o,u,a,f,l,c,h,p,d,v,m,g,y,b=n.list.shift();;)if(s.empty()||(o=s.min()),b&&(s.empty()||b.y<o.y||b.y==o.y&&b.x<o.x))u=r.leftBound(b),a=r.right(u),h=r.rightRegion(u),g=i.bisect(h,b),c=r.createHalfEdge(g,"l"),r.insert(u,c),v=i.intersect(u,c),v&&(s.del(u),s.insert(u,v,i.distance(v,b))),u=c,c=r.createHalfEdge(g,"r"),r.insert(u,c),v=i.intersect(c,a),v&&s.insert(c,v,i.distance(v,b)),b=n.list.shift();else{if(s.empty())break;u=s.extractMin(),f=r.left(u),a=r.right(u),l=r.right(a),h=r.leftRegion(u),p=r.rightRegion(a),m=u.vertex,i.endPoint(u.edge,u.side,m),i.endPoint(a.edge,a.side,m),r.del(u),s.del(a),r.del(a),y="l",h.y>p.y&&(d=h,h=p,p=d,y="r"),g=i.bisect(h,p),c=r.createHalfEdge(g,y),r.insert(f,c),i.endPoint(g,ga[y],m),v=i.intersect(f,c),v&&(s.del(f),s.insert(f,v,i.distance(v,h))),v=i.intersect(c,l),v&&s.insert(c,v,i.distance(v,h))}for(u=r.right(r.leftEnd);u!=r.rightEnd;u=r.right(u))t(u.edge)}function yr(e){return e.x}function br(e){return e.y}function wr(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Er(e,t,n,r,i,s){if(!e(t,n,r,i,s)){var o=.5*(n+i),u=.5*(r+s),a=t.nodes;a[0]&&Er(e,a[0],n,r,o,u),a[1]&&Er(e,a[1],o,r,i,u),a[2]&&Er(e,a[2],n,u,o,s),a[3]&&Er(e,a[3],o,u,i,s)}}function Sr(e,t){e=go.rgb(e),t=go.rgb(t);var n=e.r,r=e.g,i=e.b,s=t.r-n,o=t.g-r,u=t.b-i;return function(e){return"#"+at(Math.round(n+s*e))+at(Math.round(r+o*e))+at(Math.round(i+u*e))}}function xr(e,t){var n,r={},i={};for(n in e)n in t?r[n]=Cr(e[n],t[n]):i[n]=e[n];for(n in t)n in e||(i[n]=t[n]);return function(e){for(n in r)i[n]=r[n](e);return i}}function Tr(e,t){return t-=e=+e,function(n){return e+t*n}}function Nr(e,t){var n,r,i,s,o,u=0,a=0,f=[],l=[];for(e+="",t+="",ya.lastIndex=0,r=0;n=ya.exec(t);++r)n.index&&f.push(t.substring(u,a=n.index)),l.push({i:f.length,x:n[0]}),f.push(null),u=ya.lastIndex;for(u<t.length&&f.push(t.substring(u)),r=0,s=l.length;(n=ya.exec(e))&&s>r;++r)if(o=l[r],o.x==n[0]){if(o.i)if(null==f[o.i+1])for(f[o.i-1]+=o.x,f.splice(o.i,1),i=r+1;s>i;++i)l[i].i--;else for(f[o.i-1]+=o.x+f[o.i+1],f.splice(o.i,2),i=r+1;s>i;++i)l[i].i-=2;else if(null==f[o.i+1])f[o.i]=o.x;else for(f[o.i]=o.x+f[o.i+1],f.splice(o.i+1,1),i=r+1;s>i;++i)l[i].i--;l.splice(r,1),s--,r--}else o.x=Tr(parseFloat(n[0]),parseFloat(o.x));for(;s>r;)o=l.pop(),null==f[o.i+1]?f[o.i]=o.x:(f[o.i]=o.x+f[o.i+1],f.splice(o.i+1,1)),s--;return 1===f.length?null==f[0]?(o=l[0].x,function(e){return o(e)+""}):function(){return t}:function(e){for(r=0;s>r;++r)f[(o=l[r]).i]=o.x(e);return f.join("")}}function Cr(e,t){for(var n,r=go.interpolators.length;--r>=0&&!(n=go.interpolators[r](e,t)););return n}function kr(e,t){var n,r=[],i=[],s=e.length,o=t.length,u=Math.min(e.length,t.length);for(n=0;u>n;++n)r.push(Cr(e[n],t[n]));for(;s>n;++n)i[n]=e[n];for(;o>n;++n)i[n]=t[n];return function(e){for(n=0;u>n;++n)i[n]=r[n](e);return i}}function Lr(e){return function(t){return 0>=t?0:t>=1?1:e(t)}}function Ar(e){return function(t){return 1-e(1-t)}}function Or(e){return function(t){return.5*(.5>t?e(2*t):2-e(2-2*t))}}function Mr(e){return e*e}function _r(e){return e*e*e}function Dr(e){if(0>=e)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(.5>e?n:3*(e-t)+n-.75)}function Pr(e){return function(t){return Math.pow(t,e)}}function Hr(e){return 1-Math.cos(e*Jo/2)}function Br(e){return Math.pow(2,10*(e-1))}function jr(e){return 1-Math.sqrt(1-e*e)}function Fr(e,t){var n;return arguments.length<2&&(t=.45),arguments.length?n=t/(2*Jo)*Math.asin(1/e):(e=1,n=t/4),function(r){return 1+e*Math.pow(2,10*-r)*Math.sin(2*(r-n)*Jo/t)}}function Ir(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}}function qr(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function Rr(e,t){e=go.hcl(e),t=go.hcl(t);var n=e.h,r=e.c,i=e.l,s=t.h-n,o=t.c-r,u=t.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?t.c:r),isNaN(s)?(s=0,n=isNaN(n)?t.h:n):s>180?s-=360:-180>s&&(s+=360),function(e){return Q(n+s*e,r+o*e,i+u*e)+""}}function Ur(e,t){e=go.hsl(e),t=go.hsl(t);var n=e.h,r=e.s,i=e.l,s=t.h-n,o=t.s-r,u=t.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?t.s:r),isNaN(s)?(s=0,n=isNaN(n)?t.h:n):s>180?s-=360:-180>s&&(s+=360),function(e){return $(n+s*e,r+o*e,i+u*e)+""}}function zr(e,t){e=go.lab(e),t=go.lab(t);var n=e.l,r=e.a,i=e.b,s=t.l-n,o=t.a-r,u=t.b-i;return function(e){return Z(n+s*e,r+o*e,i+u*e)+""}}function Wr(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function Xr(e){var t=[e.a,e.b],n=[e.c,e.d],r=$r(t),i=Vr(t,n),s=$r(Jr(n,t,-i))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*Yo,this.translate=[e.e,e.f],this.scale=[r,s],this.skew=s?Math.atan2(i,s)*Yo:0}function Vr(e,t){return e[0]*t[0]+e[1]*t[1]}function $r(e){var t=Math.sqrt(Vr(e,e));return t&&(e[0]/=t,e[1]/=t),t}function Jr(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}function Kr(e,t){var n,r=[],i=[],s=go.transform(e),o=go.transform(t),u=s.translate,a=o.translate,f=s.rotate,l=o.rotate,c=s.skew,h=o.skew,p=s.scale,d=o.scale;return u[0]!=a[0]||u[1]!=a[1]?(r.push("translate(",null,",",null,")"),i.push({i:1,x:Tr(u[0],a[0])},{i:3,x:Tr(u[1],a[1])})):a[0]||a[1]?r.push("translate("+a+")"):r.push(""),f!=l?(f-l>180?l+=360:l-f>180&&(f+=360),i.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:Tr(f,l)})):l&&r.push(r.pop()+"rotate("+l+")"),c!=h?i.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:Tr(c,h)}):h&&r.push(r.pop()+"skewX("+h+")"),p[0]!=d[0]||p[1]!=d[1]?(n=r.push(r.pop()+"scale(",null,",",null,")"),i.push({i:n-4,x:Tr(p[0],d[0])},{i:n-2,x:Tr(p[1],d[1])})):(1!=d[0]||1!=d[1])&&r.push(r.pop()+"scale("+d+")"),n=i.length,function(e){for(var t,s=-1;++s<n;)r[(t=i[s]).i]=t.x(e);return r.join("")}}function Qr(e,t){return t=t-(e=+e)?1/(t-e):0,function(n){return(n-e)*t}}function Gr(e,t){return t=t-(e=+e)?1/(t-e):0,function(n){return Math.max(0,Math.min(1,(n-e)*t))}}function Yr(e){for(var t=e.source,n=e.target,r=ei(t,n),i=[t];t!==r;)t=t.parent,i.push(t);for(var s=i.length;n!==r;)i.splice(s,0,n),n=n.parent;return i}function Zr(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function ei(e,t){if(e===t)return e;for(var n=Zr(e),r=Zr(t),i=n.pop(),s=r.pop(),o=null;i===s;)o=i,i=n.pop(),s=r.pop();return o}function ti(e){e.fixed|=2}function ni(e){e.fixed&=-7}function ri(e){e.fixed|=4,e.px=e.x,e.py=e.y}function ii(e){e.fixed&=-5}function si(e,t,n){var r=0,i=0;if(e.charge=0,!e.leaf)for(var s,o=e.nodes,u=o.length,a=-1;++a<u;)s=o[a],null!=s&&(si(s,t,n),e.charge+=s.charge,r+=s.charge*s.cx,i+=s.charge*s.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var f=t*n[e.point.index];e.charge+=e.pointCharge=f,r+=f*e.point.x,i+=f*e.point.y}e.cx=r/e.charge,e.cy=i/e.charge}function oi(e,t){return go.rebind(e,t,"sort","children","value"),e.nodes=e,e.links=li,e}function ui(e){return e.children}function ai(e){return e.value}function fi(e,t){return t.value-e.value}function li(e){return go.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function ci(e){return e.x}function hi(e){return e.y}function pi(e,t,n){e.y0=t,e.y=n}function di(e){return go.range(e.length)}function vi(e){for(var t=-1,n=e[0].length,r=[];++t<n;)r[t]=0;return r}function mi(e){for(var t,n=1,r=0,i=e[0][1],s=e.length;s>n;++n)(t=e[n][1])>i&&(r=n,i=t);return r}function gi(e){return e.reduce(yi,0)}function yi(e,t){return e+t[1]}function bi(e,t){return wi(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function wi(e,t){for(var n=-1,r=+e[0],i=(e[1]-r)/t,s=[];++n<=t;)s[n]=i*n+r;return s}function Ei(e){return[go.min(e),go.max(e)]}function Si(e,t){return e.parent==t.parent?1:2}function xi(e){var t=e.children;return t&&t.length?t[0]:e._tree.thread}function Ti(e){var t,n=e.children;return n&&(t=n.length)?n[t-1]:e._tree.thread}function Ni(e,t){var n=e.children;if(n&&(i=n.length))for(var r,i,s=-1;++s<i;)t(r=Ni(n[s],t),e)>0&&(e=r);return e}function Ci(e,t){return e.x-t.x}function ki(e,t){return t.x-e.x}function Li(e,t){return e.depth-t.depth}function Ai(e,t){function n(e,r){var i=e.children;if(i&&(o=i.length))for(var s,o,u=null,a=-1;++a<o;)s=i[a],n(s,u),u=s;t(e,r)}n(e,null)}function Oi(e){for(var t,n=0,r=0,i=e.children,s=i.length;--s>=0;)t=i[s]._tree,t.prelim+=n,t.mod+=n,n+=t.shift+(r+=t.change)}function Mi(e,t,n){e=e._tree,t=t._tree;var r=n/(t.number-e.number);e.change+=r,t.change-=r,t.shift+=n,t.prelim+=n,t.mod+=n}function _i(e,t,n){return e._tree.ancestor.parent==t.parent?e._tree.ancestor:n}function Di(e,t){return e.value-t.value}function Pi(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function Hi(e,t){e._pack_next=t,t._pack_prev=e}function Bi(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r+t.r;return.999*i*i>n*n+r*r}function ji(e){function t(e){l=Math.min(e.x-e.r,l),c=Math.max(e.x+e.r,c),h=Math.min(e.y-e.r,h),p=Math.max(e.y+e.r,p)}if((n=e.children)&&(f=n.length)){var n,r,i,s,o,u,a,f,l=1/0,c=-1/0,h=1/0,p=-1/0;if(n.forEach(Fi),r=n[0],r.x=-r.r,r.y=0,t(r),f>1&&(i=n[1],i.x=i.r,i.y=0,t(i),f>2))for(s=n[2],Ri(r,i,s),t(s),Pi(r,s),r._pack_prev=s,Pi(s,i),i=r._pack_next,o=3;f>o;o++){Ri(r,i,s=n[o]);var d=0,v=1,m=1;for(u=i._pack_next;u!==i;u=u._pack_next,v++)if(Bi(u,s)){d=1;break}if(1==d)for(a=r._pack_prev;a!==u._pack_prev&&!Bi(a,s);a=a._pack_prev,m++);d?(m>v||v==m&&i.r<r.r?Hi(r,i=u):Hi(r=a,i),o--):(Pi(r,s),i=s,t(s))}var g=(l+c)/2,y=(h+p)/2,b=0;for(o=0;f>o;o++)s=n[o],s.x-=g,s.y-=y,b=Math.max(b,s.r+Math.sqrt(s.x*s.x+s.y*s.y));e.r=b,n.forEach(Ii)}}function Fi(e){e._pack_next=e._pack_prev=e}function Ii(e){delete e._pack_next,delete e._pack_prev}function qi(e,t,n,r){var i=e.children;if(e.x=t+=r*e.x,e.y=n+=r*e.y,e.r*=r,i)for(var s=-1,o=i.length;++s<o;)qi(i[s],t,n,r)}function Ri(e,t,n){var r=e.r+n.r,i=t.x-e.x,s=t.y-e.y;if(r&&(i||s)){var o=t.r+n.r,u=i*i+s*s;o*=o,r*=r;var a=.5+(r-o)/(2*u),f=Math.sqrt(Math.max(0,2*o*(r+u)-(r-=u)*r-o*o))/(2*u);n.x=e.x+a*i+f*s,n.y=e.y+a*s-f*i}else n.x=e.x+r,n.y=e.y}function Ui(e){return 1+go.max(e,function(e){return e.y})}function zi(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function Wi(e){var t=e.children;return t&&t.length?Wi(t[0]):e}function Xi(e){var t,n=e.children;return n&&(t=n.length)?Xi(n[t-1]):e}function Vi(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function $i(e,t){var n=e.x+t[3],r=e.y+t[0],i=e.dx-t[1]-t[3],s=e.dy-t[0]-t[2];return 0>i&&(n+=i/2,i=0),0>s&&(r+=s/2,s=0),{x:n,y:r,dx:i,dy:s}}function Ji(e){var t=e[0],n=e[e.length-1];return n>t?[t,n]:[n,t]}function Ki(e){return e.rangeExtent?e.rangeExtent():Ji(e.range())}function Qi(e,t,n,r){var i=n(e[0],e[1]),s=r(t[0],t[1]);return function(e){return s(i(e))}}function Gi(e,t){var n,r=0,i=e.length-1,s=e[r],o=e[i];return s>o&&(n=r,r=i,i=n,n=s,s=o,o=n),e[r]=t.floor(s),e[i]=t.ceil(o),e}function Yi(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:La}function Zi(e,t,n,r){var i=[],s=[],o=0,u=Math.min(e.length,t.length)-1;for(e[u]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<=u;)i.push(n(e[o-1],e[o])),s.push(r(t[o-1],t[o]));return function(t){var n=go.bisect(e,t,1,u)-1;return s[n](i[n](t))}}function es(e,t,n,r){function i(){var i=Math.min(e.length,t.length)>2?Zi:Qi,a=r?Gr:Qr;return o=i(e,t,a,n),u=i(t,e,a,Cr),s}function s(e){return o(e)}var o,u;return s.invert=function(e){return u(e)},s.domain=function(t){return arguments.length?(e=t.map(Number),i()):e},s.range=function(e){return arguments.length?(t=e,i()):t},s.rangeRound=function(e){return s.range(e).interpolate(Wr)},s.clamp=function(e){return arguments.length?(r=e,i()):r},s.interpolate=function(e){return arguments.length?(n=e,i()):n},s.ticks=function(t){return is(e,t)},s.tickFormat=function(t,n){return ss(e,t,n)},s.nice=function(t){return ns(e,t),i()},s.copy=function(){return es(e,t,n,r)},i()}function ts(e,t){return go.rebind(e,t,"range","rangeRound","interpolate","clamp")}function ns(e,t){return Gi(e,Yi(rs(e,t)[2]))}function rs(e,t){null==t&&(t=10);var n=Ji(e),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),s=t/r*i;return.15>=s?i*=10:.35>=s?i*=5:.75>=s&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function is(e,t){return go.range.apply(go,rs(e,t))}function ss(e,t,n){var r=-Math.floor(Math.log(rs(e,t)[2])/Math.LN10+.01);return go.format(n?n.replace(Nu,function(e,t,n,i,s,o,u,a,f,l){return[t,n,i,s,o,u,a,f||"."+(r-2*("%"===l)),l].join("")}):",."+r+"f")}function os(e,t,n,r){function i(e){return(n?Math.log(0>e?0:e):-Math.log(e>0?0:-e))/Math.log(t)}function s(e){return n?Math.pow(t,e):-Math.pow(t,-e)}function o(t){return e(i(t))}return o.invert=function(t){return s(e.invert(t))},o.domain=function(t){return arguments.length?(n=t[0]>=0,e.domain((r=t.map(Number)).map(i)),o):r},o.base=function(n){return arguments.length?(t=+n,e.domain(r.map(i)),o):t},o.nice=function(){var t=Gi(r.map(i),n?Math:Oa);return e.domain(t),r=t.map(s),o},o.ticks=function(){var e=Ji(r),o=[],u=e[0],a=e[1],f=Math.floor(i(u)),l=Math.ceil(i(a)),c=t%1?2:t;if(isFinite(l-f)){if(n){for(;l>f;f++)for(var h=1;c>h;h++)o.push(s(f)*h);o.push(s(f))}else for(o.push(s(f));f++<l;)for(var h=c-1;h>0;h--)o.push(s(f)*h);for(f=0;o[f]<u;f++);for(l=o.length;o[l-1]>a;l--);o=o.slice(f,l)}return o},o.tickFormat=function(e,t){if(!arguments.length)return Aa;arguments.length<2?t=Aa:"function"!=typeof t&&(t=go.format(t));var r,u=Math.max(.1,e/o.ticks().length),a=n?(r=1e-12,Math.ceil):(r=-1e-12,Math.floor);return function(e){return e/s(a(i(e)+r))<=u?t(e):""}},o.copy=function(){return os(e.copy(),t,n,r)},ts(o,e)}function us(e,t,n){function r(t){return e(i(t))}var i=as(t),s=as(1/t);return r.invert=function(t){return s(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain((n=t.map(Number)).map(i)),r):n},r.ticks=function(e){return is(n,e)},r.tickFormat=function(e,t){return ss(n,e,t)},r.nice=function(e){return r.domain(ns(n,e))},r.exponent=function(o){return arguments.length?(i=as(t=o),s=as(1/t),e.domain(n.map(i)),r):t},r.copy=function(){return us(e.copy(),t,n)},ts(r,e)}function as(e){return function(t){return 0>t?-Math.pow(-t,e):Math.pow(t,e)}}function fs(e,t){function n(t){return o[((s.get(t)||s.set(t,e.push(t)))-1)%o.length]}function r(t,n){return go.range(e.length).map(function(e){return t+n*e})}var s,o,u;return n.domain=function(r){if(!arguments.length)return e;e=[],s=new i;for(var o,u=-1,a=r.length;++u<a;)s.has(o=r[u])||s.set(o,e.push(o));return n[t.t].apply(n,t.a)},n.range=function(e){return arguments.length?(o=e,u=0,t={t:"range",a:arguments},n):o},n.rangePoints=function(i,s){arguments.length<2&&(s=0);var a=i[0],f=i[1],l=(f-a)/(Math.max(1,e.length-1)+s);return o=r(e.length<2?(a+f)/2:a+l*s/2,l),u=0,t={t:"rangePoints",a:arguments},n},n.rangeBands=function(i,s,a){arguments.length<2&&(s=0),arguments.length<3&&(a=s);var f=i[1]<i[0],l=i[f-0],c=i[1-f],h=(c-l)/(e.length-s+2*a);return o=r(l+h*a,h),f&&o.reverse(),u=h*(1-s),t={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(i,s,a){arguments.length<2&&(s=0),arguments.length<3&&(a=s);var f=i[1]<i[0],l=i[f-0],c=i[1-f],h=Math.floor((c-l)/(e.length-s+2*a)),p=c-l-(e.length-s)*h;return o=r(l+Math.round(p/2),h),f&&o.reverse(),u=Math.round(h*(1-s)),t={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return u},n.rangeExtent=function(){return Ji(t.a[0])},n.copy=function(){return fs(e,t)},n.domain(e)}function ls(e,t){function n(){var n=0,s=t.length;for(i=[];++n<s;)i[n-1]=go.quantile(e,n/s);return r}function r(e){return isNaN(e=+e)?void 0:t[go.bisect(i,e)]}var i;return r.domain=function(t){return arguments.length?(e=t.filter(function(e){return!isNaN(e)}).sort(go.ascending),n()):e},r.range=function(e){return arguments.length?(t=e,n()):t},r.quantiles=function(){return i},r.invertExtent=function(n){return n=t.indexOf(n),0>n?[0/0,0/0]:[n>0?i[n-1]:e[0],n<i.length?i[n]:e[e.length-1]]},r.copy=function(){return ls(e,t)},n()}function cs(e,t,n){function r(t){return n[Math.max(0,Math.min(o,Math.floor(s*(t-e))))]}function i(){return s=n.length/(t-e),o=n.length-1,r}var s,o;return r.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],i()):[e,t]},r.range=function(e){return arguments.length?(n=e,i()):n},r.invertExtent=function(t){return t=n.indexOf(t),t=0>t?0/0:t/s+e,[t,t+1/s]},r.copy=function(){return cs(e,t,n)},i()}function hs(e,t){function n(n){return n>=n?t[go.bisect(e,n)]:void 0}return n.domain=function(t){return arguments.length?(e=t,n):e},n.range=function(e){return arguments.length?(t=e,n):t},n.invertExtent=function(n){return n=t.indexOf(n),[e[n-1],e[n]]},n.copy=function(){return hs(e,t)},n}function ps(e){function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=n.map(t),t):e},t.ticks=function(t){return is(e,t)},t.tickFormat=function(t,n){return ss(e,t,n)},t.copy=function(){return ps(e)},t}function ds(e){return e.innerRadius}function vs(e){return e.outerRadius}function ms(e){return e.startAngle}function gs(e){return e.endAngle}function ys(e){for(var t,n,r,i=-1,s=e.length;++i<s;)t=e[i],n=t[0],r=t[1]+Ha,t[0]=n*Math.cos(r),t[1]=n*Math.sin(r);return e}function bs(e){function t(t){function a(){v.push("M",u(e(g),c),l,f(e(m.reverse()),c),"Z")}for(var h,p,d,v=[],m=[],g=[],y=-1,b=t.length,w=dt(n),E=dt(i),S=n===r?function(){return p}:dt(r),x=i===s?function(){return d}:dt(s);++y<b;)o.call(this,h=t[y],y)?(m.push([p=+w.call(this,h,y),d=+E.call(this,h,y)]),g.push([+S.call(this,h,y),+x.call(this,h,y)])):m.length&&(a(),m=[],g=[]);return m.length&&a(),v.length?v.join(""):null}var n=Xn,r=Xn,i=0,s=Vn,o=Xt,u=$n,a=u.key,f=u,l="L",c=.7;return t.x=function(e){return arguments.length?(n=r=e,t):r},t.x0=function(e){return arguments.length?(n=e,t):n},t.x1=function(e){return arguments.length?(r=e,t):r},t.y=function(e){return arguments.length?(i=s=e,t):s},t.y0=function(e){return arguments.length?(i=e,t):i},t.y1=function(e){return arguments.length?(s=e,t):s},t.defined=function(e){return arguments.length?(o=e,t):o},t.interpolate=function(e){return arguments.length?(a="function"==typeof e?u=e:(u=ha.get(e)||$n).key,f=u.reverse||u,l=u.closed?"M":"L",t):a},t.tension=function(e){return arguments.length?(c=e,t):c},t}function ws(e){return e.radius}function Es(e){return[e.x,e.y]}function Ss(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]+Ha;return[n*Math.cos(r),n*Math.sin(r)]}}function xs(){return 64}function Ts(){return"circle"}function Ns(e){var t=Math.sqrt(e/Jo);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+ -t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function Cs(e,t){return Ho(e,Ua),e.id=t,e}function ks(e,t,n,r){var i=e.id;return L(e,"function"==typeof n?function(e,s,o){e.__transition__[i].tween.set(t,r(n.call(e,e.__data__,s,o)))}:(n=r(n),function(e){e.__transition__[i].tween.set(t,n)}))}function Ls(e){return null==e&&(e=""),function(){this.textContent=e}}function As(e,t,n,r){var s=e.__transition__||(e.__transition__={active:0,count:0}),o=s[n];if(!o){var u=r.time;o=s[n]={tween:new i,time:u,ease:r.ease,delay:r.delay,duration:r.duration},++s.count,go.timer(function(r){function i(r){return s.active>n?f():(s.active=n,o.event&&o.event.start.call(e,l,t),o.tween.forEach(function(n,r){(r=r.call(e,l,t))&&d.push(r)}),a(r)?1:(wt(a,0,u),void 0))}function a(r){if(s.active!==n)return f();for(var i=(r-h)/p,u=c(i),a=d.length;a>0;)d[--a].call(e,u);return i>=1?(o.event&&o.event.end.call(e,l,t),f()):void 0}function f(){return--s.count?delete s[n]:delete e.__transition__,1}var l=e.__data__,c=o.ease,h=o.delay,p=o.duration,d=[];return r>=h?i(r):(wt(i,h,u),void 0)},0,u)}}function Os(e,t){e.attr("transform",function(e){return"translate("+t(e)+",0)"})}function Ms(e,t){e.attr("transform",function(e){return"translate(0,"+t(e)+")"})}function _s(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ds(e,t,n){function r(t){var n=e(t),r=s(n,1);return r-t>t-n?n:r}function i(n){return t(n=e(new Ka(n-1)),1),n}function s(e,n){return t(e=new Ka(+e),n),e}function o(e,r,s){var o=i(e),u=[];if(s>1)for(;r>o;)n(o)%s||u.push(new Date(+o)),t(o,1);else for(;r>o;)u.push(new Date(+o)),t(o,1);return u}function u(e,t,n){try{Ka=_s;var r=new _s;return r._=e,o(r,t,n)}finally{Ka=Date}}e.floor=e,e.round=r,e.ceil=i,e.offset=s,e.range=o;var a=e.utc=Ps(e);return a.floor=a,a.round=Ps(r),a.ceil=Ps(i),a.offset=Ps(s),a.range=u,e}function Ps(e){return function(t,n){try{Ka=_s;var r=new _s;return r._=t,e(r,n)._}finally{Ka=Date}}}function Hs(e){function t(t){for(var r,i,s,o=[],u=-1,a=0;++u<n;)37===e.charCodeAt(u)&&(o.push(e.substring(a,u)),null!=(i=vf[r=e.charAt(++u)])&&(r=e.charAt(++u)),(s=mf[r])&&(r=s(t,null==i?"e"===r?" ":"0":i)),o.push(r),a=u+1);return o.push(e.substring(a,u)),o.join("")}var n=e.length;return t.parse=function(t){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0},r=Bs(n,e,t,0);if(r!=t.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var i=new Ka;return"j"in n?i.setFullYear(n.y,0,n.j):"w"in n&&("W"in n||"U"in n)?(i.setFullYear(n.y,0,1),i.setFullYear(n.y,0,"W"in n?(n.w+6)%7+7*n.W-(i.getDay()+5)%7:n.w+7*n.U-(i.getDay()+6)%7)):i.setFullYear(n.y,n.m,n.d),i.setHours(n.H,n.M,n.S,n.L),i},t.toString=function(){return e},t}function Bs(e,t,n,r){for(var i,s,o,u=0,a=t.length,f=n.length;a>u;){if(r>=f)return-1;if(i=t.charCodeAt(u++),37===i){if(o=t.charAt(u++),s=gf[o in vf?t.charAt(u++):o],!s||(r=s(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function js(e){return new RegExp("^(?:"+e.map(go.requote).join("|")+")","i")}function Fs(e){for(var t=new i,n=-1,r=e.length;++n<r;)t.set(e[n].toLowerCase(),n);return t}function Is(e,t,n){var r=0>e?"-":"",i=(r?-e:e)+"",s=i.length;return r+(n>s?(new Array(n-s+1)).join(t)+i:i)}function qs(e,t,n){af.lastIndex=0;var r=af.exec(t.substring(n));return r?(e.w=ff.get(r[0].toLowerCase()),n+r[0].length):-1}function Rs(e,t,n){of.lastIndex=0;var r=of.exec(t.substring(n));return r?(e.w=uf.get(r[0].toLowerCase()),n+r[0].length):-1}function Us(e,t,n){yf.lastIndex=0;var r=yf.exec(t.substring(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function zs(e,t,n){yf.lastIndex=0;var r=yf.exec(t.substring(n));return r?(e.U=+r[0],n+r[0].length):-1}function Ws(e,t,n){yf.lastIndex=0;var r=yf.exec(t.substring(n));return r?(e.W=+r[0],n+r[0].length):-1}function Xs(e,t,n){hf.lastIndex=0;var r=hf.exec(t.substring(n));return r?(e.m=pf.get(r[0].toLowerCase()),n+r[0].length):-1}function Vs(e,t,n){lf.lastIndex=0;var r=lf.exec(t.substring(n));return r?(e.m=cf.get(r[0].toLowerCase()),n+r[0].length):-1}function $s(e,t,n){return Bs(e,mf.c.toString(),t,n)}function Js(e,t,n){return Bs(e,mf.x.toString(),t,n)}function Ks(e,t,n){return Bs(e,mf.X.toString(),t,n)}function Qs(e,t,n){yf.lastIndex=0;var r=yf.exec(t.substring(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Gs(e,t,n){yf.lastIndex=0;var r=yf.exec(t.substring(n,n+2));return r?(e.y=Ys(+r[0]),n+r[0].length):-1}function Ys(e){return e+(e>68?1900:2e3)}function Zs(e,t,n){yf.lastIndex=0;var r=yf.exec(t.substring(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function eo(e,t,n){yf.lastIndex=0;var r=yf.exec(t.substring(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function to(e,t,n){yf.lastIndex=0;var r=yf.exec(t.substring(n,n+3));return r?(e.j=+r[0],n+r[0].length):-1}function no(e,t,n){yf.lastIndex=0;var r=yf.exec(t.substring(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function ro(e,t,n){yf.lastIndex=0;var r=yf.exec(t.substring(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function io(e,t,n){yf.lastIndex=0;var r=yf.exec(t.substring(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function so(e,t,n){yf.lastIndex=0;var r=yf.exec(t.substring(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function oo(e,t,n){var r=bf.get(t.substring(n,n+=2).toLowerCase());return null==r?-1:(e.p=r,n)}function uo(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",r=~~(Math.abs(t)/60),i=Math.abs(t)%60;return n+Is(r,"0",2)+Is(i,"0",2)}function ao(e,t,n){df.lastIndex=0;var r=df.exec(t.substring(n,n+1));return r?n+r[0].length:-1}function fo(e){function t(e){try{Ka=_s;var t=new Ka;return t._=e,n(t)}finally{Ka=Date}}var n=Hs(e);return t.parse=function(e){try{Ka=_s;var t=n.parse(e);return t&&t._}finally{Ka=Date}},t.toString=n.toString,t}function lo(e){return e.toISOString()}function co(e,t,n){function r(t){return e(t)}function i(e,n){var r=e[1]-e[0],i=r/n,s=go.bisect(Ef,i);return s==Ef.length?[t.year,rs(e.map(function(e){return e/31536e6}),n)[2]]:s?t[i/Ef[s-1]<Ef[s]/i?s-1:s]:[Nf,rs(e,n)[2]]}return r.invert=function(t){return ho(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain(t),r):e.domain().map(ho)},r.nice=function(e,t){function n(n){return!isNaN(n)&&!e.range(n,ho(+n+1),t).length}var s=r.domain(),o=Ji(s),u=null==e?i(o,10):"number"==typeof e&&i(o,e);return u&&(e=u[0],t=u[1]),r.domain(Gi(s,t>1?{floor:function(t){for(;n(t=e.floor(t));)t=ho(t-1);return t},ceil:function(t){for(;n(t=e.ceil(t));)t=ho(+t+1);return t}}:e))},r.ticks=function(e,t){var n=Ji(r.domain()),s=null==e?i(n,10):"number"==typeof e?i(n,e):!e.range&&[{range:e},t];return s&&(e=s[0],t=s[1]),e.range(n[0],ho(+n[1]+1),t)},r.tickFormat=function(){return n},r.copy=function(){return co(e.copy(),t,n)},ts(r,e)}function ho(e){return new Date(e)}function po(e){return function(t){for(var n=e.length-1,r=e[n];!r[1](t);)r=e[--n];return r[0](t)}}function vo(e){return JSON.parse(e.responseText)}function mo(e){var t=wo.createRange();return t.selectNode(wo.body),t.createContextualFragment(e.responseText)}var go={version:"3.3.2"};Date.now||(Date.now=function(){return+(new Date)});var yo=[].slice,bo=function(e){return yo.call(e)},wo=document,Eo=wo.documentElement,So=window;try{bo(Eo.childNodes)[0].nodeType}catch(xo){bo=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}try{wo.createElement("div").style.setProperty("opacity",0,"")}catch(To){var No=So.Element.prototype,Co=No.setAttribute,ko=No.setAttributeNS,Lo=So.CSSStyleDeclaration.prototype,Ao=Lo.setProperty;No.setAttribute=function(e,t){Co.call(this,e,t+"")},No.setAttributeNS=function(e,t,n){ko.call(this,e,t,n+"")},Lo.setProperty=function(e,t,n){Ao.call(this,e,t+"",n)}}go.ascending=function(e,t){return t>e?-1:e>t?1:e>=t?0:0/0},go.descending=function(e,t){return e>t?-1:t>e?1:t>=e?0:0/0},go.min=function(e,t){var n,r,i=-1,s=e.length;if(1===arguments.length){for(;++i<s&&!(null!=(n=e[i])&&n>=n);)n=void 0;for(;++i<s;)null!=(r=e[i])&&n>r&&(n=r)}else{for(;++i<s&&!(null!=(n=t.call(e,e[i],i))&&n>=n);)n=void 0;for(;++i<s;)null!=(r=t.call(e,e[i],i))&&n>r&&(n=r)}return n},go.max=function(e,t){var n,r,i=-1,s=e.length;if(1===arguments.length){for(;++i<s&&!(null!=(n=e[i])&&n>=n);)n=void 0;for(;++i<s;)null!=(r=e[i])&&r>n&&(n=r)}else{for(;++i<s&&!(null!=(n=t.call(e,e[i],i))&&n>=n);)n=void 0;for(;++i<s;)null!=(r=t.call(e,e[i],i))&&r>n&&(n=r)}return n},go.extent=function(e,t){var n,r,i,s=-1,o=e.length;if(1===arguments.length){for(;++s<o&&!(null!=(n=i=e[s])&&n>=n);)n=i=void 0;for(;++s<o;)null!=(r=e[s])&&(n>r&&(n=r),r>i&&(i=r))}else{for(;++s<o&&!(null!=(n=i=t.call(e,e[s],s))&&n>=n);)n=void 0;for(;++s<o;)null!=(r=t.call(e,e[s],s))&&(n>r&&(n=r),r>i&&(i=r))}return[n,i]},go.sum=function(e,t){var n,r=0,i=e.length,s=-1;if(1===arguments.length)for(;++s<i;)isNaN(n=+e[s])||(r+=n);else for(;++s<i;)isNaN(n=+t.call(e,e[s],s))||(r+=n);return r},go.mean=function(t,n){var r,i=t.length,s=0,o=-1,u=0;if(1===arguments.length)for(;++o<i;)e(r=t[o])&&(s+=(r-s)/++u);else for(;++o<i;)e(r=n.call(t,t[o],o))&&(s+=(r-s)/++u);return u?s:void 0},go.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),i=+e[r-1],s=n-r;return s?i+s*(e[r]-i):i},go.median=function(t,n){return arguments.length>1&&(t=t.map(n)),t=t.filter(e),t.length?go.quantile(t.sort(go.ascending),.5):void 0},go.bisector=function(e){return{left:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);i>r;){var s=r+i>>>1;e.call(t,t[s],s)<n?r=s+1:i=s}return r},right:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);i>r;){var s=r+i>>>1;n<e.call(t,t[s],s)?i=s:r=s+1}return r}}};var Oo=go.bisector(function(e){return e});go.bisectLeft=Oo.left,go.bisect=go.bisectRight=Oo.right,go.shuffle=function(e){for(var t,n,r=e.length;r;)n=0|Math.random()*r--,t=e[r],e[r]=e[n],e[n]=t;return e},go.permute=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},go.pairs=function(e){for(var t,n=0,r=e.length-1,i=e[0],s=new Array(0>r?0:r);r>n;)s[n]=[t=i,i=e[++n]];return s},go.zip=function(){if(!(i=arguments.length))return[];for(var e=-1,n=go.min(arguments,t),r=new Array(n);++e<n;)for(var i,s=-1,o=r[e]=new Array(i);++s<i;)o[s]=arguments[s][e];return r},go.transpose=function(e){return go.zip.apply(go,e)},go.keys=function(e){var t=[];for(var n in e)t.push(n);return t},go.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},go.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},go.merge=function(e){return Array.prototype.concat.apply([],e)},go.range=function(e,t,r){if(arguments.length<3&&(r=1,arguments.length<2&&(t=e,e=0)),1/0===(t-e)/r)throw new Error("infinite range");var i,s=[],o=n(Math.abs(r)),u=-1;if(e*=o,t*=o,r*=o,0>r)for(;(i=e+r*++u)>t;)s.push(i/o);else for(;(i=e+r*++u)<t;)s.push(i/o);return s},go.map=function(e){var t=new i;if(e instanceof i)e.forEach(function(e,n){t.set(e,n)});else for(var n in e)t.set(n,e[n]);return t},r(i,{has:function(e){return Mo+e in this},get:function(e){return this[Mo+e]},set:function(e,t){return this[Mo+e]=t},remove:function(e){return e=Mo+e,e in this&&delete this[e]},keys:function(){var e=[];return this.forEach(function(t){e.push(t)}),e},values:function(){var e=[];return this.forEach(function(t,n){e.push(n)}),e},entries:function(){var e=[];return this.forEach(function(t,n){e.push({key:t,value:n})}),e},forEach:function(e){for(var t in this)t.charCodeAt(0)===_o&&e.call(this,t.substring(1),this[t])}});var Mo="\0",_o=Mo.charCodeAt(0);go.nest=function(){function e(t,u,a){if(a>=o.length)return r?r.call(s,u):n?u.sort(n):u;for(var f,l,c,h,p=-1,d=u.length,v=o[a++],m=new i;++p<d;)(h=m.get(f=v(l=u[p])))?h.push(l):m.set(f,[l]);return t?(l=t(),c=function(n,r){l.set(n,e(t,r,a))}):(l={},c=function(n,r){l[n]=e(t,r,a)}),m.forEach(c),l}function t(e,n){if(n>=o.length)return e;var r=[],i=u[n++];return e.forEach(function(e,i){r.push({key:e,values:t(i,n)})}),i?r.sort(function(e,t){return i(e.key,t.key)}):r}var n,r,s={},o=[],u=[];return s.map=function(t,n){return e(n,t,0)},s.entries=function(n){return t(e(go.map,n,0),0)},s.key=function(e){return o.push(e),s},s.sortKeys=function(e){return u[o.length-1]=e,s},s.sortValues=function(e){return n=e,s},s.rollup=function(e){return r=e,s},s},go.set=function(e){var t=new s;if(e)for(var n=0,r=e.length;r>n;++n)t.add(e[n]);return t},r(s,{has:function(e){return Mo+e in this},add:function(e){return this[Mo+e]=!0,e},remove:function(e){return e=Mo+e,e in this&&delete this[e]},values:function(){var e=[];return this.forEach(function(t){e.push(t)}),e},forEach:function(e){for(var t in this)t.charCodeAt(0)===_o&&e.call(this,t.substring(1))}}),go.behavior={},go.rebind=function(e,t){for(var n,r=1,i=arguments.length;++r<i;)e[n=arguments[r]]=o(e,t,t[n]);return e};var Do=["webkit","ms","moz","Moz","o","O"];go.dispatch=function(){for(var e=new f,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=l(e);return e},f.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(n>=0&&(r=e.substring(n+1),e=e.substring(0,n)),e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},go.event=null,go.requote=function(e){return e.replace(Po,"\\$&")};var Po=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Ho={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]},Bo=function(e,t){return t.querySelector(e)},jo=function(e,t){return t.querySelectorAll(e)},Fo=Eo[u(Eo,"matchesSelector")],Io=function(e,t){return Fo.call(e,t)};"function"==typeof Sizzle&&(Bo=function(e,t){return Sizzle(e,t)[0]||null},jo=function(e,t){return Sizzle.uniqueSort(Sizzle(e,t))},Io=Sizzle.matchesSelector),go.selection=function(){return zo};var qo=go.selection.prototype=[];qo.select=function(e){var t,n,r,i,s=[];e=v(e);for(var o=-1,u=this.length;++o<u;){s.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var a=-1,f=r.length;++a<f;)(i=r[a])?(t.push(n=e.call(i,i.__data__,a,o)),n&&"__data__"in i&&(n.__data__=i.__data__)):t.push(null)}return d(s)},qo.selectAll=function(e){var t,n,r=[];e=m(e);for(var i=-1,s=this.length;++i<s;)for(var o=this[i],u=-1,a=o.length;++u<a;)(n=o[u])&&(r.push(t=bo(e.call(n,n.__data__,u,i))),t.parentNode=n);return d(r)};var Ro={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};go.ns={prefix:Ro,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&(n=e.substring(0,t),e=e.substring(t+1)),Ro.hasOwnProperty(n)?{space:Ro[n],local:e}:e}},qo.attr=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node();return e=go.ns.qualify(e),e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(g(t,e[t]));return this}return this.each(g(e,t))},qo.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),r=(e=e.trim().split(/^|\s+/g)).length,i=-1;if(t=n.classList){for(;++i<r;)if(!t.contains(e[i]))return!1}else for(t=n.getAttribute("class");++i<r;)if(!b(e[i]).test(t))return!1;return!0}for(t in e)this.each(w(t,e[t]));return this}return this.each(w(e,t))},qo.style=function(e,t,n){var r=arguments.length;if(3>r){if("string"!=typeof e){2>r&&(t="");for(n in e)this.each(S(n,e[n],t));return this}if(2>r)return So.getComputedStyle(this.node(),null).getPropertyValue(e);n=""}return this.each(S(e,t,n))},qo.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(x(t,e[t]));return this}return this.each(x(e,t))},qo.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},qo.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},qo.append=function(e){return e=T(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},qo.insert=function(e,t){return e=T(e),t=v(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments))})},qo.remove=function(){return this.each(function(){var e=this.parentNode;e&&e.removeChild(this)})},qo.data=function(e,t){function n(e,n){var r,s,o,u=e.length,c=n.length,h=Math.min(u,c),p=new Array(c),d=new Array(c),v=new Array(u);if(t){var m,g=new i,y=new i,b=[];for(r=-1;++r<u;)m=t.call(s=e[r],s.__data__,r),g.has(m)?v[r]=s:g.set(m,s),b.push(m);for(r=-1;++r<c;)m=t.call(n,o=n[r],r),(s=g.get(m))?(p[r]=s,s.__data__=o):y.has(m)||(d[r]=N(o)),y.set(m,o),g.remove(m);for(r=-1;++r<u;)g.has(b[r])&&(v[r]=e[r])}else{for(r=-1;++r<h;)s=e[r],o=n[r],s?(s.__data__=o,p[r]=s):d[r]=N(o);for(;c>r;++r)d[r]=N(n[r]);for(;u>r;++r)v[r]=e[r]}d.update=p,d.parentNode=p.parentNode=v.parentNode=e.parentNode,a.push(d),f.push(p),l.push(v)}var r,s,o=-1,u=this.length;if(!arguments.length){for(e=new Array(u=(r=this[0]).length);++o<u;)(s=r[o])&&(e[o]=s.__data__);return e}var a=A([]),f=d([]),l=d([]);if("function"==typeof e)for(;++o<u;)n(r=this[o],e.call(r,r.parentNode.__data__,o));else for(;++o<u;)n(r=this[o],e);return f.enter=function(){return a},f.exit=function(){return l},f},qo.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},qo.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=C(e));for(var s=0,o=this.length;o>s;s++){i.push(t=[]),t.parentNode=(n=this[s]).parentNode;for(var u=0,a=n.length;a>u;u++)(r=n[u])&&e.call(r,r.__data__,u)&&t.push(r)}return d(i)},qo.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,r=this[e],i=r.length-1,s=r[i];--i>=0;)(n=r[i])&&(s&&s!==n.nextSibling&&s.parentNode.insertBefore(n,s),s=n);return this},qo.sort=function(e){e=k.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},qo.each=function(e){return L(this,function(t,n,r){e.call(t,t.__data__,n,r)})},qo.call=function(e){var t=bo(arguments);return e.apply(t[0]=this,t),this},qo.empty=function(){return!this.node()},qo.node=function(){for(var e=0,t=this.length;t>e;e++)for(var n=this[e],r=0,i=n.length;i>r;r++){var s=n[r];if(s)return s}return null},qo.size=function(){var e=0;return this.each(function(){++e}),e};var Uo=[];go.selection.enter=A,go.selection.enter.prototype=Uo,Uo.append=qo.append,Uo.empty=qo.empty,Uo.node=qo.node,Uo.call=qo.call,Uo.size=qo.size,Uo.select=function(e){for(var t,n,r,i,s,o=[],u=-1,a=this.length;++u<a;){r=(i=this[u]).update,o.push(t=[]),t.parentNode=i.parentNode;for(var f=-1,l=i.length;++f<l;)(s=i[f])?(t.push(r[f]=n=e.call(i.parentNode,s.__data__,f,u)),n.__data__=s.__data__):t.push(null)}return d(o)},Uo.insert=function(e,t){return arguments.length<2&&(t=O(this)),qo.insert.call(this,e,t)},qo.transition=function(){for(var e,t,n=Fa||++za,r=[],i=Ia||{time:Date.now(),ease:Dr,delay:0,duration:250},s=-1,o=this.length;++s<o;){r.push(e=[]);for(var u=this[s],a=-1,f=u.length;++a<f;)(t=u[a])&&As(t,a,n,i),e.push(t)}return Cs(r,n)},qo.interrupt=function(){return this.each(M)},go.select=function(e){var t=["string"==typeof e?Bo(e,wo):e];return t.parentNode=Eo,d([t])},go.selectAll=function(e){var t=bo("string"==typeof e?jo(e,wo):e);return t.parentNode=Eo,d([t])};var zo=go.select(Eo);qo.on=function(e,t,n){var r=arguments.length;if(3>r){if("string"!=typeof e){2>r&&(t=!1);for(n in e)this.each(_(n,e[n],t));return this}if(2>r)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(_(e,t,n))};var Wo=go.map({mouseenter:"mouseover",mouseleave:"mouseout"});Wo.forEach(function(e){"on"+e in wo&&Wo.remove(e)});var Xo=u(Eo.style,"userSelect"),Vo=0;go.mouse=function(e){return B(e,h())};var $o=/WebKit/.test(So.navigator.userAgent)?-1:0;go.touches=function(e,t){return arguments.length<2&&(t=h().touches),t?bo(t).map(function(t){var n=B(e,t);return n.identifier=t.identifier,n}):[]},go.behavior.drag=function(){function e(){this.on("mousedown.drag",o).on("touchstart.drag",u)}function t(){return go.event.changedTouches[0].identifier}function n(e,t){return go.touches(e).filter(function(e){return e.identifier===t})[0]}function r(e,t,n,r){return function(){function o(){if(!l)return u();var e=t(l,p),n=e[0]-v[0],r=e[1]-v[1];m|=n|r,v=e,c({type:"drag",x:e[0]+a[0],y:e[1]+a[1],dx:n,dy:r})}function u(){g.on(n+"."+d,null).on(r+"."+d,null),y(m&&go.event.target===h),c({type:"dragend"})}var a,f=this,l=f.parentNode,c=i.of(f,arguments),h=go.event.target,p=e(),d=null==p?"drag":"drag-"+p,v=t(l,p),m=0,g=go.select(So).on(n+"."+d,o).on(r+"."+d,u),y=H();s?(a=s.apply(f,arguments),a=[a.x-v[0],a.y-v[1]]):a=[0,0],c({type:"dragstart"})}}var i=p(e,"drag","dragstart","dragend"),s=null,o=r(a,go.mouse,"mousemove","mouseup"),u=r(t,n,"touchmove","touchend");return e.origin=function(t){return arguments.length?(s=t,e):s},go.rebind(e,i,"on")};var Jo=Math.PI,Ko=1e-6,Qo=Ko*Ko,Go=Jo/180,Yo=180/Jo,Zo=Math.SQRT2,eu=2,tu=4;go.interpolateZoom=function(e,t){function n(e){var t=e*y;if(g){var n=R(v),o=s/(eu*h)*(n*U(Zo*t+v)-q(v));return[r+o*f,i+o*l,s*n/R(Zo*t+v)]}return[r+e*f,i+e*l,s*Math.exp(Zo*t)]}var r=e[0],i=e[1],s=e[2],o=t[0],u=t[1],a=t[2],f=o-r,l=u-i,c=f*f+l*l,h=Math.sqrt(c),p=(a*a-s*s+tu*c)/(2*s*eu*h),d=(a*a-s*s-tu*c)/(2*a*eu*h),v=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(d*d+1)-d),g=m-v,y=(g||Math.log(a/s))/Zo;return n.duration=1e3*y,n},go.behavior.zoom=function(){function e(e){e.on(k,f).on(iu+".zoom",h).on(L,d).on("dblclick.zoom",v).on(O,l)}function t(e){return[(e[0]-T.x)/T.k,(e[1]-T.y)/T.k]}function n(e){return[e[0]*T.k+T.x,e[1]*T.k+T.y]}function r(e){T.k=Math.max(C[0],Math.min(C[1],e))}function i(e,t){t=n(t),T.x+=e[0]-t[0],T.y+=e[1]-t[1]}function s(){E&&E.domain(w.range().map(function(e){return(e-T.x)/T.k}).map(w.invert)),x&&x.domain(S.range().map(function(e){return(e-T.y)/T.k}).map(S.invert))}function o(e){e({type:"zoomstart"})}function u(e){s(),e({type:"zoom",scale:T.k,translate:[T.x,T.y]})}function a(e){e({type:"zoomend"})}function f(){function e(){l=1,i(go.mouse(r),h),u(s)}function n(){c.on(L,So===r?d:null).on(A,null),p(l&&go.event.target===f),a(s)}var r=this,s=P.of(r,arguments),f=go.event.target,l=0,c=go.select(So).on(L,e).on(A,n),h=t(go.mouse(r)),p=H();M.call(r),o(s)}function l(){function e(){var e=go.touches(v);return d=T.k,p={},e.forEach(function(e){p[e.identifier]=t(e)}),e}function n(){var t=Date.now(),n=e();if(1===n.length){if(500>t-b){var s=n[0],o=p[s.identifier];r(2*T.k),i(s,o),c(),u(m)}b=t}else if(n.length>1){var s=n[0],a=n[1],f=s[0]-a[0],l=s[1]-a[1];g=f*f+l*l}}function s(){var e=go.touches(v),t=e[0],n=p[t.identifier];if(s=e[1]){var s,o=p[s.identifier],a=go.event.scale;if(null==a){var f=(f=s[0]-t[0])*f+(f=s[1]-t[1])*f;a=g&&Math.sqrt(f/g)}t=[(t[0]+s[0])/2,(t[1]+s[1])/2],n=[(n[0]+o[0])/2,(n[1]+o[1])/2],r(a*d)}b=null,i(t,n),u(m)}function h(){go.event.touches.length?e():(y.on(_,null).on(D,null),w.on(k,f).on(O,l),E(),a(m))}var p,d,v=this,m=P.of(v,arguments),g=0,y=go.select(So).on(_,s).on(D,h),w=go.select(v).on(k,null).on(O,n),E=H();M.call(v),n(),o(m)}function h(){var e=P.of(this,arguments);y?clearTimeout(y):(M.call(this),o(e)),y=setTimeout(function(){y=null,a(e)},50),c();var n=g||go.mouse(this);m||(m=t(n)),r(Math.pow(2,.002*nu())*T.k),i(n,m),u(e)}function d(){m=null}function v(){var e=P.of(this,arguments),n=go.mouse(this),s=t(n),f=Math.log(T.k)/Math.LN2;o(e),r(Math.pow(2,go.event.shiftKey?Math.ceil(f)-1:Math.floor(f)+1)),i(n,s),u(e),a(e)}var m,g,y,b,w,E,S,x,T={x:0,y:0,k:1},N=[960,500],C=ru,k="mousedown.zoom",L="mousemove.zoom",A="mouseup.zoom",O="touchstart.zoom",_="touchmove.zoom",D="touchend.zoom",P=p(e,"zoomstart","zoom","zoomend");return e.event=function(e){e.each(function(){var e=P.of(this,arguments),t=T;Fa?go.select(this).transition().each("start.zoom",function(){T=this.__chart__||{x:0,y:0,k:1},o(e)}).tween("zoom:zoom",function(){var n=N[0],r=N[1],i=n/2,s=r/2,o=go.interpolateZoom([(i-T.x)/T.k,(s-T.y)/T.k,n/T.k],[(i-t.x)/t.k,(s-t.y)/t.k,n/t.k]);return function(t){var r=o(t),a=n/r[2];this.__chart__=T={x:i-r[0]*a,y:s-r[1]*a,k:a},u(e)}}).each("end.zoom",function(){a(e)}):(this.__chart__=T,o(e),u(e),a(e))})},e.translate=function(t){return arguments.length?(T={x:+t[0],y:+t[1],k:T.k},s(),e):[T.x,T.y]},e.scale=function(t){return arguments.length?(T={x:T.x,y:T.y,k:+t},s(),e):T.k},e.scaleExtent=function(t){return arguments.length?(C=null==t?ru:[+t[0],+t[1]],e):C},e.center=function(t){return arguments.length?(g=t&&[+t[0],+t[1]],e):g},e.size=function(t){return arguments.length?(N=t&&[+t[0],+t[1]],e):N},e.x=function(t){return arguments.length?(E=t,w=t.copy(),T={x:0,y:0,k:1},e):E},e.y=function(t){return arguments.length?(x=t,S=t.copy(),T={x:0,y:0,k:1},e):x},go.rebind(e,P,"on")};var nu,ru=[0,1/0],iu="onwheel"in wo?(nu=function(){return-go.event.deltaY*(go.event.deltaMode?120:1)},"wheel"):"onmousewheel"in wo?(nu=function(){return go.event.wheelDelta},"mousewheel"):(nu=function(){return-go.event.detail},"MozMousePixelScroll");W.prototype.toString=function(){return this.rgb()+""},go.hsl=function(e,t,n){return 1===arguments.length?e instanceof V?X(e.h,e.s,e.l):ft(""+e,lt,X):X(+e,+t,+n)};var su=V.prototype=new W;su.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),X(this.h,this.s,this.l/e)},su.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),X(this.h,this.s,e*this.l)},su.rgb=function(){return $(this.h,this.s,this.l)},go.hcl=function(e,t,n){return 1===arguments.length?e instanceof K?J(e.h,e.c,e.l):e instanceof Y?et(e.l,e.a,e.b):et((e=ct((e=go.rgb(e)).r,e.g,e.b)).l,e.a,e.b):J(+e,+t,+n)};var ou=K.prototype=new W;ou.brighter=function(e){return J(this.h,this.c,Math.min(100,this.l+uu*(arguments.length?e:1)))},ou.darker=function(e){return J(this.h,this.c,Math.max(0,this.l-uu*(arguments.length?e:1)))},ou.rgb=function(){return Q(this.h,this.c,this.l).rgb()},go.lab=function(e,t,n){return 1===arguments.length?e instanceof Y?G(e.l,e.a,e.b):e instanceof K?Q(e.l,e.c,e.h):ct((e=go.rgb(e)).r,e.g,e.b):G(+e,+t,+n)};var uu=18,au=.95047,fu=1,lu=1.08883,cu=Y.prototype=new W;cu.brighter=function(e){return G(Math.min(100,this.l+uu*(arguments.length?e:1)),this.a,this.b)},cu.darker=function(e){return G(Math.max(0,this.l-uu*(arguments.length?e:1)),this.a,this.b)},cu.rgb=function(){return Z(this.l,this.a,this.b)},go.rgb=function(e,t,n){return 1===arguments.length?e instanceof ut?ot(e.r,e.g,e.b):ft(""+e,ot,$):ot(~~e,~~t,~~n)};var hu=ut.prototype=new W;hu.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,i=30;return t||n||r?(t&&i>t&&(t=i),n&&i>n&&(n=i),r&&i>r&&(r=i),ot(Math.min(255,~~(t/e)),Math.min(255,~~(n/e)),Math.min(255,~~(r/e)))):ot(i,i,i)},hu.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),ot(~~(e*this.r),~~(e*this.g),~~(e*this.b))},hu.hsl=function(){return lt(this.r,this.g,this.b)},hu.toString=function(){return"#"+at(this.r)+at(this.g)+at(this.b)};var pu=go.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});pu.forEach(function(e,t){pu.set(e,it(t))}),go.functor=dt,go.xhr=mt(vt),go.dsv=function(e,t){function n(e,n,s){arguments.length<3&&(s=n,n=null);var o=go.xhr(e,t,s);return o.row=function(e){return arguments.length?o.response(null==(n=e)?r:i(e)):n},o.row(n)}function r(e){return n.parse(e.responseText)}function i(e){return function(t){return n.parse(t.responseText,e)}}function o(t){return t.map(u).join(e)}function u(e){return a.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var a=new RegExp('["'+e+"\n]"),f=e.charCodeAt(0);return n.parse=function(e,t){var r;return n.parseRows(e,function(e,n){if(r)return r(e,n-1);var i=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");r=t?function(e,n){return t(i(e),n)}:i})},n.parseRows=function(e,t){function n(){if(l>=a)return o;if(i)return i=!1,s;var t=l;if(34===e.charCodeAt(t)){for(var n=t;n++<a;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}l=n+2;var r=e.charCodeAt(n+1);return 13===r?(i=!0,10===e.charCodeAt(n+2)&&++l):10===r&&(i=!0),e.substring(t+1,n).replace(/""/g,'"')}for(;a>l;){var r=e.charCodeAt(l++),u=1;if(10===r)i=!0;else if(13===r)i=!0,10===e.charCodeAt(l)&&(++l,++u);else if(r!==f)continue;return e.substring(t,l-u)}return e.substring(t)}for(var r,i,s={},o={},u=[],a=e.length,l=0,c=0;(r=n())!==o;){for(var h=[];r!==s&&r!==o;)h.push(r),r=n();(!t||(h=t(h,c++)))&&u.push(h)}return u},n.format=function(t){if(Array.isArray(t[0]))return n.formatRows(t);var r=new s,i=[];return t.forEach(function(e){for(var t in e)r.has(t)||i.push(r.add(t))}),[i.map(u).join(e)].concat(t.map(function(t){return i.map(function(e){return u(t[e])}).join(e)})).join("\n")},n.formatRows=function(e){return e.map(o).join("\n")},n},go.csv=go.dsv(",","text/csv"),go.tsv=go.dsv("	","text/tab-separated-values");var du,vu,mu,gu,yu,bu=So[u(So,"requestAnimationFrame")]||function(e){setTimeout(e,17)};go.timer=function(e,t,n){var r=arguments.length;2>r&&(t=0),3>r&&(n=Date.now());var i=n+t,s={callback:e,time:i,next:null};vu?vu.next=s:du=s,vu=s,mu||(gu=clearTimeout(gu),mu=1,bu(bt))},go.timer.flush=function(){Et(),St()};var wu=".",Eu=",",Su=[3,3],xu="$",Tu=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(xt);go.formatPrefix=function(e,t){var n=0;return e&&(0>e&&(e*=-1),t&&(e=go.round(e,Tt(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((0>=n?n+1:n-1)/3)))),Tu[8+n/3]},go.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)},go.format=function(e){var t=Nu.exec(e),n=t[1]||" ",r=t[2]||">",i=t[3]||"",s=t[4]||"",o=t[5],u=+t[6],a=t[7],f=t[8],l=t[9],c=1,h="",p=!1;switch(f&&(f=+f.substring(1)),(o||"0"===n&&"="===r)&&(o=n="0",r="=",a&&(u-=Math.floor((u-1)/4))),l){case"n":a=!0,l="g";break;case"%":c=100,h="%",l="f";break;case"p":c=100,h="%",l="r";break;case"b":case"o":case"x":case"X":"#"===s&&(s="0"+l.toLowerCase());case"c":case"d":p=!0,f=0;break;case"s":c=-1,l="r"}"#"===s?s="":"$"===s&&(s=xu),"r"!=l||f||(l="g"),null!=f&&("g"==l?f=Math.max(1,Math.min(21,f)):("e"==l||"f"==l)&&(f=Math.max(0,Math.min(20,f)))),l=Cu.get(l)||Nt;var d=o&&a;return function(e){if(p&&e%1)return"";var t=0>e||0===e&&0>1/e?(e=-e,"-"):i;if(0>c){var v=go.formatPrefix(e,f);e=v.scale(e),h=v.symbol}else e*=c;e=l(e,f);var m=e.lastIndexOf("."),g=0>m?e:e.substring(0,m),y=0>m?"":wu+e.substring(m+1);!o&&a&&(g=ku(g));var b=s.length+g.length+y.length+(d?0:t.length),w=u>b?(new Array(b=u-b+1)).join(n):"";return d&&(g=ku(w+g)),t+=s,e=g+y,("<"===r?t+e+w:">"===r?w+t+e:"^"===r?w.substring(0,b>>=1)+t+e+w.substring(b):t+(d?e:w+e))+h}};var Nu=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Cu=go.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=go.round(e,Tt(e,t))).toFixed(Math.max(0,Math.min(20,Tt(e*(1+1e-15),t))))}}),ku=vt;if(Su){var Lu=Su.length;ku=function(e){for(var t=e.length,n=[],r=0,i=Su[0];t>0&&i>0;)n.push(e.substring(t-=i,t+i)),i=Su[r=(r+1)%Lu];return n.reverse().join(Eu)}}go.geo={},Ct.prototype={s:0,t:0,add:function(e){kt(e,this.t,Au),kt(Au.s,this.s,this),this.s?this.t+=Au.t:this.s=Au.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Au=new Ct;go.geo.stream=function(e,t){e&&Ou.hasOwnProperty(e.type)?Ou[e.type](e,t):Lt(e,t)};var Ou={Feature:function(e,t){Lt(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)Lt(n[r].geometry,t)}},Mu={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){At(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)At(n[r],t,0)},Polygon:function(e,t){Ot(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Ot(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)Lt(n[r],t)}};go.geo.area=function(e){return _u=0,go.geo.stream(e,Pu),_u};var _u,Du=new Ct,Pu={sphere:function(){_u+=4*Jo},point:a,lineStart:a,lineEnd:a,polygonStart:function(){Du.reset(),Pu.lineStart=Mt},polygonEnd:function(){var e=2*Du;_u+=0>e?4*Jo+e:e,Pu.lineStart=Pu.lineEnd=Pu.point=a}};go.geo.bounds=function(){function e(e,t){b.push(w=[l=e,h=e]),c>t&&(c=t),t>p&&(p=t)}function t(t,n){var r=_t([t*Go,n*Go]);if(g){var i=Pt(g,r),s=[i[1],-i[0],0],o=Pt(s,i);jt(o),o=Ft(o);var a=t-d,f=a>0?1:-1,v=o[0]*Yo*f,m=Math.abs(a)>180;if(m^(v>f*d&&f*t>v)){var y=o[1]*Yo;y>p&&(p=y)}else if(v=(v+360)%360-180,m^(v>f*d&&f*t>v)){var y=-o[1]*Yo;c>y&&(c=y)}else c>n&&(c=n),n>p&&(p=n);m?d>t?u(l,t)>u(l,h)&&(h=t):u(t,h)>u(l,h)&&(l=t):h>=l?(l>t&&(l=t),t>h&&(h=t)):t>d?u(l,t)>u(l,h)&&(h=t):u(t,h)>u(l,h)&&(l=t)}else e(t,n);g=r,d=t}function n(){E.point=t}function r(){w[0]=l,w[1]=h,E.point=e,g=null}function i(e,n){if(g){var r=e-d;y+=Math.abs(r)>180?r+(r>0?360:-360):r}else v=e,m=n;Pu.point(e,n),t(e,n)}function s(){Pu.lineStart()}function o(){i(v,m),Pu.lineEnd(),Math.abs(y)>Ko&&(l=-(h=180)),w[0]=l,w[1]=h,g=null}function u(e,t){return(t-=e)<0?t+360:t}function a(e,t){return e[0]-t[0]}function f(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var l,c,h,p,d,v,m,g,y,b,w,E={point:e,lineStart:n,lineEnd:r,polygonStart:function(){E.point=i,E.lineStart=s,E.lineEnd=o,y=0,Pu.polygonStart()},polygonEnd:function(){Pu.polygonEnd(),E.point=e,E.lineStart=n,E.lineEnd=r,0>Du?(l=-(h=180),c=-(p=90)):y>Ko?p=90:-Ko>y&&(c=-90),w[0]=l,w[1]=h}};return function(e){p=h=-(l=c=1/0),b=[],go.geo.stream(e,E);var t=b.length;if(t){b.sort(a);for(var n,r=1,i=b[0],s=[i];t>r;++r)n=b[r],f(n[0],i)||f(n[1],i)?(u(i[0],n[1])>u(i[0],i[1])&&(i[1]=n[1]),u(n[0],i[1])>u(i[0],i[1])&&(i[0]=n[0])):s.push(i=n);for(var o,n,d=-1/0,t=s.length-1,r=0,i=s[t];t>=r;i=n,++r)n=s[r],(o=u(i[1],n[0]))>d&&(d=o,l=n[0],h=i[1])}return b=w=null,1/0===l||1/0===c?[[0/0,0/0],[0/0,0/0]]:[[l,c],[h,p]]}}(),go.geo.centroid=function(e){Hu=Bu=ju=Fu=Iu=qu=Ru=Uu=zu=Wu=Xu=0,go.geo.stream(e,Vu);var t=zu,n=Wu,r=Xu,i=t*t+n*n+r*r;return Qo>i&&(t=qu,n=Ru,r=Uu,Ko>Bu&&(t=ju,n=Fu,r=Iu),i=t*t+n*n+r*r,Qo>i)?[0/0,0/0]:[Math.atan2(n,t)*Yo,I(r/Math.sqrt(i))*Yo]};var Hu,Bu,ju,Fu,Iu,qu,Ru,Uu,zu,Wu,Xu,Vu={sphere:a,point:qt,lineStart:Ut,lineEnd:zt,polygonStart:function(){Vu.lineStart=Wt},polygonEnd:function(){Vu.lineStart=Ut}},$u=Jt(Xt,Zt,tn,nn),Ju=[-Jo,0],Ku=1e9;go.geo.clipExtent=function(){var e,t,n,r,i,s,o={stream:function(e){return i&&(i.valid=!1),i=s(e),i.valid=!0,i},extent:function(u){return arguments.length?(s=sn(e=+u[0][0],t=+u[0][1],n=+u[1][0],r=+u[1][1]),i&&(i.valid=!1,i=null),o):[[e,t],[n,r]]}};return o.extent([[0,0],[960,500]])},(go.geo.conicEqualArea=function(){return an(fn)}).raw=fn,go.geo.albers=function(){return go.geo.conicEqualArea().rotate([96,0]).center([-0.6,38.7]).parallels([29.5,45.5]).scale(1070)},go.geo.albersUsa=function(){function e(e){var s=e[0],o=e[1];return t=null,n(s,o),t||(r(s,o),t)||i(s,o),t}var t,n,r,i,s=go.geo.albers(),o=go.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=go.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a={point:function(e,n){t=[e,n]}};return e.invert=function(e){var t=s.scale(),n=s.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(i>=.12&&.234>i&&r>=-0.425&&-0.214>r?o:i>=.166&&.234>i&&r>=-0.214&&-0.115>r?u:s).invert(e)},e.stream=function(e){var t=s.stream(e),n=o.stream(e),r=u.stream(e);return{point:function(e,i){t.point(e,i),n.point(e,i),r.point(e,i)},sphere:function(){t.sphere(),n.sphere(),r.sphere()},lineStart:function(){t.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},e.precision=function(t){return arguments.length?(s.precision(t),o.precision(t),u.precision(t),e):s.precision()},e.scale=function(t){return arguments.length?(s.scale(t),o.scale(.35*t),u.scale(t),e.translate(s.translate())):s.scale()},e.translate=function(t){if(!arguments.length)return s.translate();var f=s.scale(),l=+t[0],c=+t[1];return n=s.translate(t).clipExtent([[l-.455*f,c-.238*f],[l+.455*f,c+.238*f]]).stream(a).point,r=o.translate([l-.307*f,c+.201*f]).clipExtent([[l-.425*f+Ko,c+.12*f+Ko],[l-.214*f-Ko,c+.234*f-Ko]]).stream(a).point,i=u.translate([l-.205*f,c+.212*f]).clipExtent([[l-.214*f+Ko,c+.166*f+Ko],[l-.115*f-Ko,c+.234*f-Ko]]).stream(a).point,e},e.scale(1070)};var Qu,Gu,Yu,Zu,ea,ta,na={point:a,lineStart:a,lineEnd:a,polygonStart:function(){Gu=0,na.lineStart=ln},polygonEnd:function(){na.lineStart=na.lineEnd=na.point=a,Qu+=Math.abs(Gu/2)}},ra={point:cn,lineStart:a,lineEnd:a,polygonStart:a,polygonEnd:a},ia={point:dn,lineStart:vn,lineEnd:mn,polygonStart:function(){ia.lineStart=gn},polygonEnd:function(){ia.point=dn,ia.lineStart=vn,ia.lineEnd=mn}};go.geo.transform=function(e){return{stream:function(t){var n=new wn(t);for(var r in e)n[r]=e[r];return n}}},wn.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},go.geo.path=function(){function e(e){return e&&("function"==typeof u&&s.pointRadius(+u.apply(this,arguments)),o&&o.valid||(o=i(s)),go.geo.stream(e,o)),s.result()}function t(){return o=null,e}var n,r,i,s,o,u=4.5;return e.area=function(e){return Qu=0,go.geo.stream(e,i(na)),Qu},e.centroid=function(e){return ju=Fu=Iu=qu=Ru=Uu=zu=Wu=Xu=0,go.geo.stream(e,i(ia)),Xu?[zu/Xu,Wu/Xu]:Uu?[qu/Uu,Ru/Uu]:Iu?[ju/Iu,Fu/Iu]:[0/0,0/0]},e.bounds=function(e){return ea=ta=-(Yu=Zu=1/0),go.geo.stream(e,i(ra)),[[Yu,Zu],[ea,ta]]},e.projection=function(e){return arguments.length?(i=(n=e)?e.stream||En(e):vt,t()):n},e.context=function(e){return arguments.length?(s=null==(r=e)?new hn:new yn(e),"function"!=typeof u&&s.pointRadius(u),t()):r},e.pointRadius=function(t){return arguments.length?(u="function"==typeof t?t:(s.pointRadius(+t),+t),e):u},e.projection(go.geo.albersUsa()).context(null)},go.geo.projection=Sn,go.geo.projectionMutator=xn,(go.geo.equirectangular=function(){return Sn(Nn)}).raw=Nn.invert=Nn,go.geo.rotation=function(e){function t(t){return t=e(t[0]*Go,t[1]*Go),t[0]*=Yo,t[1]*=Yo,t}return e=Cn(e[0]%360*Go,e[1]*Go,e.length>2?e[2]*Go:0),t.invert=function(t){return t=e.invert(t[0]*Go,t[1]*Go),t[0]*=Yo,t[1]*=Yo,t},t},go.geo.circle=function(){function e(){var e="function"==typeof r?r.apply(this,arguments):r,t=Cn(-e[0]*Go,-e[1]*Go,0).invert,i=[];return n(null,null,1,{point:function(e,n){i.push(e=t(e,n)),e[0]*=Yo,e[1]*=Yo}}),{type:"Polygon",coordinates:[i]}}var t,n,r=[0,0],i=6;return e.origin=function(t){return arguments.length?(r=t,e):r},e.angle=function(r){return arguments.length?(n=On((t=+r)*Go,i*Go),e):t},e.precision=function(r){return arguments.length?(n=On(t*Go,(i=+r)*Go),e):i},e.angle(90)},go.geo.distance=function(e,t){var n,r=(t[0]-e[0])*Go,i=e[1]*Go,s=t[1]*Go,o=Math.sin(r),u=Math.cos(r),a=Math.sin(i),f=Math.cos(i),l=Math.sin(s),c=Math.cos(s);return Math.atan2(Math.sqrt((n=c*o)*n+(n=f*l-a*c*u)*n),a*l+f*c*u)},go.geo.graticule=function(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return go.range(Math.ceil(s/m)*m,i,m).map(h).concat(go.range(Math.ceil(f/g)*g,a,g).map(p)).concat(go.range(Math.ceil(r/d)*d,n,d).filter(function(e){return Math.abs(e%m)>Ko}).map(l)).concat(go.range(Math.ceil(u/v)*v,o,v).filter(function(e){return Math.abs(e%g)>Ko}).map(c))}var n,r,i,s,o,u,a,f,l,c,h,p,d=10,v=d,m=90,g=360,y=2.5;return e.lines=function(){return t().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[h(s).concat(p(a).slice(1),h(i).reverse().slice(1),p(f).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.majorExtent(t).minorExtent(t):e.minorExtent()},e.majorExtent=function(t){return arguments.length?(s=+t[0][0],i=+t[1][0],f=+t[0][1],a=+t[1][1],s>i&&(t=s,s=i,i=t),f>a&&(t=f,f=a,a=t),e.precision(y)):[[s,f],[i,a]]},e.minorExtent=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],u=+t[0][1],o=+t[1][1],r>n&&(t=r,r=n,n=t),u>o&&(t=u,u=o,o=t),e.precision(y)):[[r,u],[n,o]]},e.step=function(t){return arguments.length?e.majorStep(t).minorStep(t):e.minorStep()},e.majorStep=function(t){return arguments.length?(m=+t[0],g=+t[1],e):[m,g]},e.minorStep=function(t){return arguments.length?(d=+t[0],v=+t[1],e):[d,v]},e.precision=function(t){return arguments.length?(y=+t,l=_n(u,o,90),c=Dn(r,n,y),h=_n(f,a,90),p=Dn(s,i,y),e):y},e.majorExtent([[-180,-90+Ko],[180,90-Ko]]).minorExtent([[-180,-80-Ko],[180,80+Ko]])},go.geo.greatArc=function(){function e(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),n||i.apply(this,arguments)]}}var t,n,r=Pn,i=Hn;return e.distance=function(){return go.geo.distance(t||r.apply(this,arguments),n||i.apply(this,arguments))},e.source=function(n){return arguments.length?(r=n,t="function"==typeof n?null:n,e):r},e.target=function(t){return arguments.length?(i=t,n="function"==typeof t?null:t,e):i},e.precision=function(){return arguments.length?e:0},e},go.geo.interpolate=function(e,t){return Bn(e[0]*Go,e[1]*Go,t[0]*Go,t[1]*Go)},go.geo.length=function(e){return sa=0,go.geo.stream(e,oa),sa};var sa,oa={sphere:a,point:a,lineStart:jn,lineEnd:a,polygonStart:a,polygonEnd:a},ua=Fn(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(go.geo.azimuthalEqualArea=function(){return Sn(ua)}).raw=ua;var aa=Fn(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},vt);(go.geo.azimuthalEquidistant=function(){return Sn(aa)}).raw=aa,(go.geo.conicConformal=function(){return an(In)}).raw=In,(go.geo.conicEquidistant=function(){return an(qn)}).raw=qn;var fa=Fn(function(e){return 1/e},Math.atan);(go.geo.gnomonic=function(){return Sn(fa)}).raw=fa,Rn.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-Jo/2]},(go.geo.mercator=function(){return Un(Rn)}).raw=Rn;var la=Fn(function(){return 1},Math.asin);(go.geo.orthographic=function(){return Sn(la)}).raw=la;var ca=Fn(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(go.geo.stereographic=function(){return Sn(ca)}).raw=ca,zn.invert=function(e,t){return[Math.atan2(q(e),Math.cos(t)),I(Math.sin(t)/R(e))]},(go.geo.transverseMercator=function(){return Un(zn)}).raw=zn,go.geom={},go.svg={},go.svg.line=function(){return Wn(vt)};var ha=go.map({linear:$n,"linear-closed":Jn,step:Kn,"step-before":Qn,"step-after":Gn,basis:rr,"basis-open":ir,"basis-closed":sr,bundle:or,cardinal:er,"cardinal-open":Yn,"cardinal-closed":Zn,monotone:hr});ha.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var pa=[0,2/3,1/3,0],da=[0,1/3,2/3,0],va=[0,1/6,2/3,1/6];go.geom.hull=function(e){function t(e){if(e.length<3)return[];var t,i,s,o,u,a,f,l,c,h,p,d,v=dt(n),m=dt(r),g=e.length,y=g-1,b=[],w=[],E=0;if(v===Xn&&r===Vn)t=e;else for(s=0,t=[];g>s;++s)t.push([+v.call(this,i=e[s],s),+m.call(this,i,s)]);for(s=1;g>s;++s)(t[s][1]<t[E][1]||t[s][1]==t[E][1]&&t[s][0]<t[E][0])&&(E=s);for(s=0;g>s;++s)s!==E&&(a=t[s][1]-t[E][1],u=t[s][0]-t[E][0],b.push({angle:Math.atan2(a,u),index:s}));for(b.sort(function(e,t){return e.angle-t.angle}),p=b[0].angle,h=b[0].index,c=0,s=1;y>s;++s){if(o=b[s].index,p==b[s].angle){if(u=t[h][0]-t[E][0],a=t[h][1]-t[E][1],f=t[o][0]-t[E][0],l=t[o][1]-t[E][1],u*u+a*a>=f*f+l*l){b[s].index=-1;continue}b[c].index=-1}p=b[s].angle,c=s,h=o}for(w.push(E),s=0,o=0;2>s;++o)b[o].index>-1&&(w.push(b[o].index),s++);for(d=w.length;y>o;++o)if(!(b[o].index<0)){for(;!pr(w[d-2],w[d-1],b[o].index,t);)--d;w[d++]=b[o].index}var S=[];for(s=d-1;s>=0;--s)S.push(e[w[s]]);return S}var n=Xn,r=Vn;return arguments.length?t(e):(t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t)},go.geom.polygon=function(e){return Ho(e,ma),e};var ma=go.geom.polygon.prototype=[];ma.area=function(){for(var e,t=-1,n=this.length,r=this[n-1],i=0;++t<n;)e=r,r=this[t],i+=e[1]*r[0]-e[0]*r[1];return.5*i},ma.centroid=function(e){var t,n,r=-1,i=this.length,s=0,o=0,u=this[i-1];for(arguments.length||(e=-1/(6*this.area()));++r<i;)t=u,u=this[r],n=t[0]*u[1]-u[0]*t[1],s+=(t[0]+u[0])*n,o+=(t[1]+u[1])*n;return[s*e,o*e]},ma.clip=function(e){for(var t,n,r,i,s,o,u=mr(e),a=-1,f=this.length-mr(this),l=this[f-1];++a<f;){for(t=e.slice(),e.length=0,i=this[a],s=t[(r=t.length-u)-1],n=-1;++n<r;)o=t[n],dr(o,l,i)?(dr(s,l,i)||e.push(vr(s,o,l,i)),e.push(o)):dr(s,l,i)&&e.push(vr(s,o,l,i)),s=o;u&&e.push(e[0]),l=i}return e},go.geom.delaunay=function(e){var t=e.map(function(){return[]}),n=[];return gr(e,function(n){t[n.region.l.index].push(e[n.region.r.index])}),t.forEach(function(t,r){var i=e[r],s=i[0],o=i[1];t.forEach(function(e){e.angle=Math.atan2(e[0]-s,e[1]-o)}),t.sort(function(e,t){return e.angle-t.angle});for(var u=0,a=t.length-1;a>u;u++)n.push([i,t[u],t[u+1]])}),n},go.geom.voronoi=function(e){function t(e){var t,s,o,u=e.map(function(){return[]}),a=dt(n),f=dt(r),l=e.length,c=1e6;if(a===Xn&&f===Vn)t=e;else for(t=new Array(l),o=0;l>o;++o)t[o]=[+a.call(this,s=e[o],o),+f.call(this,s,o)];if(gr(t,function(e){var t,n,r,i,s,o;1===e.a&&e.b>=0?(t=e.ep.r,n=e.ep.l):(t=e.ep.l,n=e.ep.r),1===e.a?(s=t?t.y:-c,r=e.c-e.b*s,o=n?n.y:c,i=e.c-e.b*o):(r=t?t.x:-c,s=e.c-e.a*r,i=n?n.x:c,o=e.c-e.a*i);var a=[r,s],f=[i,o];u[e.region.l.index].push(a,f),u[e.region.r.index].push(a,f)}),u=u.map(function(e,n){var r=t[n][0],i=t[n][1],s=e.map(function(e){return Math.atan2(e[0]-r,e[1]-i)}),o=go.range(e.length).sort(function(e,t){return s[e]-s[t]});return o.filter(function(e,t){return!t||s[e]-s[o[t-1]]>Ko}).map(function(t){return e[t]})}),u.forEach(function(e,n){var r=e.length;if(!r)return e.push([-c,-c],[-c,c],[c,c],[c,-c]);if(!(r>2)){var i=t[n],s=e[0],o=e[1],u=i[0],a=i[1],f=s[0],l=s[1],h=o[0],p=o[1],d=Math.abs(h-f),v=p-l;if(Math.abs(v)<Ko){var m=l>a?-c:c;e.push([-c,m],[c,m])}else if(Ko>d){var g=f>u?-c:c;e.push([g,-c],[g,c])}else{var m=(f-u)*(p-l)>(h-f)*(l-a)?c:-c,y=Math.abs(v)-d;Math.abs(y)<Ko?e.push([0>v?m:-m,m]):(y>0&&(m*=-1),e.push([-c,m],[c,m]))}}}),i)for(o=0;l>o;++o)i.clip(u[o]);for(o=0;l>o;++o)u[o].point=e[o];return u}var n=Xn,r=Vn,i=null;return arguments.length?t(e):(t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t.clipExtent=function(e){if(!arguments.length)return i&&[i[0],i[2]];if(null==e)i=null;else{var n=+e[0][0],r=+e[0][1],s=+e[1][0],o=+e[1][1];i=go.geom.polygon([[n,r],[n,o],[s,o],[s,r]])}return t},t.size=function(e){return arguments.length?t.clipExtent(e&&[[0,0],e]):i&&i[2]},t.links=function(e){var t,i,s,o=e.map(function(){return[]}),u=[],a=dt(n),f=dt(r),l=e.length;if(a===Xn&&f===Vn)t=e;else for(t=new Array(l),s=0;l>s;++s)t[s]=[+a.call(this,i=e[s],s),+f.call(this,i,s)];return gr(t,function(t){var n=t.region.l.index,r=t.region.r.index;o[n][r]||(o[n][r]=o[r][n]=!0,u.push({source:e[n],target:e[r]}))}),u},t.triangles=function(e){if(n===Xn&&r===Vn)return go.geom.delaunay(e);for(var t,i=new Array(a),s=dt(n),o=dt(r),u=-1,a=e.length;++u<a;)(i[u]=[+s.call(this,t=e[u],u),+o.call(this,t,u)]).data=t;return go.geom.delaunay(i).map(function(e){return e.map(function(e){return e.data})})},t)};var ga={l:"r",r:"l"};go.geom.quadtree=function(e,t,n,r,i){function s(e){function s(e,t,n,r,i,s,o,u){if(!isNaN(n)&&!isNaN(r))if(e.leaf){var a=e.x,l=e.y;if(null!=a)if(Math.abs(a-n)+Math.abs(l-r)<.01)f(e,t,n,r,i,s,o,u);else{var c=e.point;e.x=e.y=e.point=null,f(e,c,a,l,i,s,o,u),f(e,t,n,r,i,s,o,u)}else e.x=n,e.y=r,e.point=t}else f(e,t,n,r,i,s,o,u)}function f(e,t,n,r,i,o,u,a){var f=.5*(i+u),l=.5*(o+a),c=n>=f,h=r>=l,p=(h<<1)+c;e.leaf=!1,e=e.nodes[p]||(e.nodes[p]=wr()),c?i=f:u=f,h?o=l:a=l,s(e,t,n,r,i,o,u,a)}var l,c,h,p,d,v,m,g,y,b=dt(u),w=dt(a);if(null!=t)v=t,m=n,g=r,y=i;else if(g=y=-(v=m=1/0),c=[],h=[],d=e.length,o)for(p=0;d>p;++p)l=e[p],l.x<v&&(v=l.x),l.y<m&&(m=l.y),l.x>g&&(g=l.x),l.y>y&&(y=l.y),c.push(l.x),h.push(l.y);else for(p=0;d>p;++p){var E=+b(l=e[p],p),S=+w(l,p);v>E&&(v=E),m>S&&(m=S),E>g&&(g=E),S>y&&(y=S),c.push(E),h.push(S)}var x=g-v,T=y-m;x>T?y=m+x:g=v+T;var N=wr();if(N.add=function(e){s(N,e,+b(e,++p),+w(e,p),v,m,g,y)},N.visit=function(e){Er(e,N,v,m,g,y)},p=-1,null==t){for(;++p<d;)s(N,e[p],c[p],h[p],v,m,g,y);--p}else e.forEach(N.add);return c=h=e=l=null,N}var o,u=Xn,a=Vn;return(o=arguments.length)?(u=yr,a=br,3===o&&(i=n,r=t,n=t=0),s(e)):(s.x=function(e){return arguments.length?(u=e,s):u},s.y=function(e){return arguments.length?(a=e,s):a},s.extent=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),s):null==t?null:[[t,n],[r,i]]},s.size=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=n=0,r=+e[0],i=+e[1]),s):null==t?null:[r-t,i-n]},s)},go.interpolateRgb=Sr,go.interpolateObject=xr,go.interpolateNumber=Tr,go.interpolateString=Nr;var ya=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;go.interpolate=Cr,go.interpolators=[function(e,t){var n=typeof t;return("string"===n?pu.has(t)||/^(#|rgb\(|hsl\()/.test(t)?Sr:Nr:t instanceof W?Sr:"object"===n?Array.isArray(t)?kr:xr:Tr)(e,t)}],go.interpolateArray=kr;var ba=function(){return vt},wa=go.map({linear:ba,poly:Pr,quad:function(){return Mr},cubic:function(){return _r},sin:function(){return Hr},exp:function(){return Br},circle:function(){return jr},elastic:Fr,back:Ir,bounce:function(){return qr}}),Ea=go.map({"in":vt,out:Ar,"in-out":Or,"out-in":function(e){return Or(Ar(e))}});go.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.substring(0,t):e,r=t>=0?e.substring(t+1):"in";return n=wa.get(n)||ba,r=Ea.get(r)||vt,Lr(r(n.apply(null,Array.prototype.slice.call(arguments,1))))},go.interpolateHcl=Rr,go.interpolateHsl=Ur,go.interpolateLab=zr,go.interpolateRound=Wr,go.transform=function(e){var t=wo.createElementNS(go.ns.prefix.svg,"g");return(go.transform=function(e){if(null!=e){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate()}return new Xr(n?n.matrix:Sa)})(e)},Xr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Sa={a:1,b:0,c:0,d:1,e:0,f:0};go.interpolateTransform=Kr,go.layout={},go.layout.bundle=function(){return function(e){for(var t=[],n=-1,r=e.length;++n<r;)t.push(Yr(e[n]));return t}},go.layout.chord=function(){function e(){var e,f,c,h,p,d={},v=[],m=go.range(s),g=[];for(n=[],r=[],e=0,h=-1;++h<s;){for(f=0,p=-1;++p<s;)f+=i[h][p];v.push(f),g.push(go.range(s)),e+=f}for(o&&m.sort(function(e,t){return o(v[e],v[t])}),u&&g.forEach(function(e,t){e.sort(function(e,n){return u(i[t][e],i[t][n])})}),e=(2*Jo-l*s)/e,f=0,h=-1;++h<s;){for(c=f,p=-1;++p<s;){var y=m[h],b=g[y][p],w=i[y][b],E=f,S=f+=w*e;d[y+"-"+b]={index:y,subindex:b,startAngle:E,endAngle:S,value:w}}r[y]={index:y,startAngle:c,endAngle:f,value:(f-c)/e},f+=l}for(h=-1;++h<s;)for(p=h-1;++p<s;){var x=d[h+"-"+p],T=d[p+"-"+h];(x.value||T.value)&&n.push(x.value<T.value?{source:T,target:x}:{source:x,target:T})}a&&t()}function t(){n.sort(function(e,t){return a((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}var n,r,i,s,o,u,a,f={},l=0;return f.matrix=function(e){return arguments.length?(s=(i=e)&&i.length,n=r=null,f):i},f.padding=function(e){return arguments.length?(l=e,n=r=null,f):l},f.sortGroups=function(e){return arguments.length?(o=e,n=r=null,f):o},f.sortSubgroups=function(e){return arguments.length?(u=e,n=null,f):u},f.sortChords=function(e){return arguments.length?(a=e,n&&t(),f):a},f.chords=function(){return n||e(),n},f.groups=function(){return r||e(),r},f},go.layout.force=function(){function e(e){return function(t,n,r,i){if(t.point!==e){var s=t.cx-e.x,o=t.cy-e.y,u=1/Math.sqrt(s*s+o*o);if(v>(i-n)*u){var a=t.charge*u*u;return e.px-=s*a,e.py-=o*a,!0}if(t.point&&isFinite(u)){var a=t.pointCharge*u*u;e.px-=s*a,e.py-=o*a}}return!t.charge}}function t(e){e.px=go.event.x,e.py=go.event.y,u.resume()}var n,r,i,s,o,u={},a=go.dispatch("start","tick","end"),f=[1,1],l=.9,c=xa,h=Ta,p=-30,d=.1,v=.8,m=[],g=[];return u.tick=function(){if((r*=.99)<.005)return a.end({type:"end",alpha:r=0}),!0;var t,n,u,c,h,v,y,b,w,E=m.length,S=g.length;for(n=0;S>n;++n)u=g[n],c=u.source,h=u.target,b=h.x-c.x,w=h.y-c.y,(v=b*b+w*w)&&(v=r*s[n]*((v=Math.sqrt(v))-i[n])/v,b*=v,w*=v,h.x-=b*(y=c.weight/(h.weight+c.weight)),h.y-=w*y,c.x+=b*(y=1-y),c.y+=w*y);if((y=r*d)&&(b=f[0]/2,w=f[1]/2,n=-1,y))for(;++n<E;)u=m[n],u.x+=(b-u.x)*y,u.y+=(w-u.y)*y;if(p)for(si(t=go.geom.quadtree(m),r,o),n=-1;++n<E;)(u=m[n]).fixed||t.visit(e(u));for(n=-1;++n<E;)u=m[n],u.fixed?(u.x=u.px,u.y=u.py):(u.x-=(u.px-(u.px=u.x))*l,u.y-=(u.py-(u.py=u.y))*l);a.tick({type:"tick",alpha:r})},u.nodes=function(e){return arguments.length?(m=e,u):m},u.links=function(e){return arguments.length?(g=e,u):g},u.size=function(e){return arguments.length?(f=e,u):f},u.linkDistance=function(e){return arguments.length?(c="function"==typeof e?e:+e,u):c},u.distance=u.linkDistance,u.linkStrength=function(e){return arguments.length?(h="function"==typeof e?e:+e,u):h},u.friction=function(e){return arguments.length?(l=+e,u):l},u.charge=function(e){return arguments.length?(p="function"==typeof e?e:+e,u):p},u.gravity=function(e){return arguments.length?(d=+e,u):d},u.theta=function(e){return arguments.length?(v=+e,u):v},u.alpha=function(e){return arguments.length?(e=+e,r?r=e>0?e:0:e>0&&(a.start({type:"start",alpha:r=e}),go.timer(u.tick)),u):r},u.start=function(){function e(e,r){for(var i,s=t(n),o=-1,u=s.length;++o<u;)if(!isNaN(i=s[o][e]))return i;return Math.random()*r}function t(){if(!a){for(a=[],r=0;d>r;++r)a[r]=[];for(r=0;v>r;++r){var e=g[r];a[e.source.index].push(e.target),a[e.target.index].push(e.source)}}return a[n]}var n,r,a,l,d=m.length,v=g.length,y=f[0],b=f[1];for(n=0;d>n;++n)(l=m[n]).index=n,l.weight=0;for(n=0;v>n;++n)l=g[n],"number"==typeof l.source&&(l.source=m[l.source]),"number"==typeof l.target&&(l.target=m[l.target]),++l.source.weight,++l.target.weight;for(n=0;d>n;++n)l=m[n],isNaN(l.x)&&(l.x=e("x",y)),isNaN(l.y)&&(l.y=e("y",b)),isNaN(l.px)&&(l.px=l.x),isNaN(l.py)&&(l.py=l.y);if(i=[],"function"==typeof c)for(n=0;v>n;++n)i[n]=+c.call(this,g[n],n);else for(n=0;v>n;++n)i[n]=c;if(s=[],"function"==typeof h)for(n=0;v>n;++n)s[n]=+h.call(this,g[n],n);else for(n=0;v>n;++n)s[n]=h;if(o=[],"function"==typeof p)for(n=0;d>n;++n)o[n]=+p.call(this,m[n],n);else for(n=0;d>n;++n)o[n]=p;return u.resume()},u.resume=function(){return u.alpha(.1)},u.stop=function(){return u.alpha(0)},u.drag=function(){return n||(n=go.behavior.drag().origin(vt).on("dragstart.force",ti).on("drag.force",t).on("dragend.force",ni)),arguments.length?(this.on("mouseover.force",ri).on("mouseout.force",ii).call(n),void 0):n},go.rebind(u,a,"on")};var xa=20,Ta=1;go.layout.hierarchy=function(){function e(t,o,u){var a=i.call(n,t,o);if(t.depth=o,u.push(t),a&&(f=a.length)){for(var f,l,c=-1,h=t.children=[],p=0,d=o+1;++c<f;)l=e(a[c],d,u),l.parent=t,h.push(l),p+=l.value;r&&h.sort(r),s&&(t.value=p)}else s&&(t.value=+s.call(n,t,o)||0);return t}function t(e,r){var i=e.children,o=0;if(i&&(u=i.length))for(var u,a=-1,f=r+1;++a<u;)o+=t(i[a],f);else s&&(o=+s.call(n,e,r)||0);return s&&(e.value=o),o}function n(t){var n=[];return e(t,0,n),n}var r=fi,i=ui,s=ai;return n.sort=function(e){return arguments.length?(r=e,n):r},n.children=function(e){return arguments.length?(i=e,n):i},n.value=function(e){return arguments.length?(s=e,n):s},n.revalue=function(e){return t(e,0),e},n},go.layout.partition=function(){function e(t,n,r,i){var s=t.children;if(t.x=n,t.y=t.depth*i,t.dx=r,t.dy=i,s&&(o=s.length)){var o,u,a,f=-1;for(r=t.value?r/t.value:0;++f<o;)e(u=s[f],n,a=u.value*r,i),n+=a}}function t(e){var n=e.children,r=0;if(n&&(i=n.length))for(var i,s=-1;++s<i;)r=Math.max(r,t(n[s]));return 1+r}function n(n,s){var o=r.call(this,n,s);return e(o[0],0,i[0],i[1]/t(o[0])),o}var r=go.layout.hierarchy(),i=[1,1];return n.size=function(e){return arguments.length?(i=e,n):i},oi(n,r)},go.layout.pie=function(){function e(s){var o=s.map(function(n,r){return+t.call(e,n,r)}),u=+("function"==typeof r?r.apply(this,arguments):r),a=(("function"==typeof i?i.apply(this,arguments):i)-u)/go.sum(o),f=go.range(s.length);null!=n&&f.sort(n===Na?function(e,t){return o[t]-o[e]}:function(e,t){return n(s[e],s[t])});var l=[];return f.forEach(function(e){var t;l[e]={data:s[e],value:t=o[e],startAngle:u,endAngle:u+=t*a}}),l}var t=Number,n=Na,r=0,i=2*Jo;return e.value=function(n){return arguments.length?(t=n,e):t},e.sort=function(t){return arguments.length?(n=t,e):n},e.startAngle=function(t){return arguments.length?(r=t,e):r},e.endAngle=function(t){return arguments.length?(i=t,e):i},e};var Na={};go.layout.stack=function(){function e(u,a){var f=u.map(function(n,r){return t.call(e,n,r)}),l=f.map(function(t){return t.map(function(t,n){return[s.call(e,t,n),o.call(e,t,n)]})}),c=n.call(e,l,a);f=go.permute(f,c),l=go.permute(l,c);var h,p,d,v=r.call(e,l,a),m=f.length,g=f[0].length;for(p=0;g>p;++p)for(i.call(e,f[0][p],d=v[p],l[0][p][1]),h=1;m>h;++h)i.call(e,f[h][p],d+=l[h-1][p][1],l[h][p][1]);return u}var t=vt,n=di,r=vi,i=pi,s=ci,o=hi;return e.values=function(n){return arguments.length?(t=n,e):t},e.order=function(t){return arguments.length?(n="function"==typeof t?t:Ca.get(t)||di,e):n},e.offset=function(t){return arguments.length?(r="function"==typeof t?t:ka.get(t)||vi,e):r},e.x=function(t){return arguments.length?(s=t,e):s},e.y=function(t){return arguments.length?(o=t,e):o},e.out=function(t){return arguments.length?(i=t,e):i},e};var Ca=go.map({"inside-out":function(e){var t,n,r=e.length,i=e.map(mi),s=e.map(gi),o=go.range(r).sort(function(e,t){return i[e]-i[t]}),u=0,a=0,f=[],l=[];for(t=0;r>t;++t)n=o[t],a>u?(u+=s[n],f.push(n)):(a+=s[n],l.push(n));return l.reverse().concat(f)},reverse:function(e){return go.range(e.length).reverse()},"default":di}),ka=go.map({silhouette:function(e){var t,n,r,i=e.length,s=e[0].length,o=[],u=0,a=[];for(n=0;s>n;++n){for(t=0,r=0;i>t;t++)r+=e[t][n][1];r>u&&(u=r),o.push(r)}for(n=0;s>n;++n)a[n]=(u-o[n])/2;return a},wiggle:function(e){var t,n,r,i,s,o,u,a,f,l=e.length,c=e[0],h=c.length,p=[];for(p[0]=a=f=0,n=1;h>n;++n){for(t=0,i=0;l>t;++t)i+=e[t][n][1];for(t=0,s=0,u=c[n][0]-c[n-1][0];l>t;++t){for(r=0,o=(e[t][n][1]-e[t][n-1][1])/(2*u);t>r;++r)o+=(e[r][n][1]-e[r][n-1][1])/u;s+=o*e[t][n][1]}p[n]=a-=i?s/i*u:0,f>a&&(f=a)}for(n=0;h>n;++n)p[n]-=f;return p},expand:function(e){var t,n,r,i=e.length,s=e[0].length,o=1/i,u=[];for(n=0;s>n;++n){for(t=0,r=0;i>t;t++)r+=e[t][n][1];if(r)for(t=0;i>t;t++)e[t][n][1]/=r;else for(t=0;i>t;t++)e[t][n][1]=o}for(n=0;s>n;++n)u[n]=0;return u},zero:vi});go.layout.histogram=function(){function e(e,s){for(var o,u,a=[],f=e.map(n,this),l=r.call(this,f,s),c=i.call(this,l,f,s),s=-1,h=f.length,p=c.length-1,d=t?1:1/h;++s<p;)o=a[s]=[],o.dx=c[s+1]-(o.x=c[s]),o.y=0;if(p>0)for(s=-1;++s<h;)u=f[s],u>=l[0]&&u<=l[1]&&(o=a[go.bisect(c,u,1,p)-1],o.y+=d,o.push(e[s]));return a}var t=!0,n=Number,r=Ei,i=bi;return e.value=function(t){return arguments.length?(n=t,e):n},e.range=function(t){return arguments.length?(r=dt(t),e):r},e.bins=function(t){return arguments.length?(i="number"==typeof t?function(e){return wi(e,t)}:dt(t),e):i},e.frequency=function(n){return arguments.length?(t=!!n,e):t},e},go.layout.tree=function(){function e(e,s){function o(e,t){var r=e.children,i=e._tree;if(r&&(s=r.length)){for(var s,u,f,l=r[0],c=l,h=-1;++h<s;)f=r[h],o(f,u),c=a(f,u,c),u=f;Oi(e);var p=.5*(l._tree.prelim+f._tree.prelim);t?(i.prelim=t._tree.prelim+n(e,t),i.mod=i.prelim-p):i.prelim=p}else t&&(i.prelim=t._tree.prelim+n(e,t))}function u(e,t){e.x=e._tree.prelim+t;var n=e.children;if(n&&(r=n.length)){var r,i=-1;for(t+=e._tree.mod;++i<r;)u(n[i],t)}}function a(e,t,r){if(t){for(var i,s=e,o=e,u=t,a=e.parent.children[0],f=s._tree.mod,l=o._tree.mod,c=u._tree.mod,h=a._tree.mod;u=Ti(u),s=xi(s),u&&s;)a=xi(a),o=Ti(o),o._tree.ancestor=e,i=u._tree.prelim+c-s._tree.prelim-f+n(u,s),i>0&&(Mi(_i(u,e,r),e,i),f+=i,l+=i),c+=u._tree.mod,f+=s._tree.mod,h+=a._tree.mod,l+=o._tree.mod;u&&!Ti(o)&&(o._tree.thread=u,o._tree.mod+=c-l),s&&!xi(a)&&(a._tree.thread=s,a._tree.mod+=f-h,r=e)}return r}var f=t.call(this,e,s),l=f[0];Ai(l,function(e,t){e._tree={ancestor:e,prelim:0,mod:0,change:0,shift:0,number:t?t._tree.number+1:0}}),o(l),u(l,-l._tree.prelim);var c=Ni(l,ki),h=Ni(l,Ci),p=Ni(l,Li),d=c.x-n(c,h)/2,v=h.x+n(h,c)/2,m=p.depth||1;return Ai(l,i?function(e){e.x*=r[0],e.y=e.depth*r[1],delete e._tree}:function(e){e.x=(e.x-d)/(v-d)*r[0],e.y=e.depth/m*r[1],delete e._tree}),f}var t=go.layout.hierarchy().sort(null).value(null),n=Si,r=[1,1],i=!1;return e.separation=function(t){return arguments.length?(n=t,e):n},e.size=function(t){return arguments.length?(i=null==(r=t),e):i?null:r},e.nodeSize=function(t){return arguments.length?(i=null!=(r=t),e):i?r:null},oi(e,t)},go.layout.pack=function(){function e(e,s){var o=n.call(this,e,s),u=o[0],a=i[0],f=i[1],l=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(u.x=u.y=0,Ai(u,function(e){e.r=+l(e.value)}),Ai(u,ji),r){var c=r*(t?1:Math.max(2*u.r/a,2*u.r/f))/2;Ai(u,function(e){e.r+=c}),Ai(u,ji),Ai(u,function(e){e.r-=c})}return qi(u,a/2,f/2,t?1:1/Math.max(2*u.r/a,2*u.r/f)),o}var t,n=go.layout.hierarchy().sort(Di),r=0,i=[1,1];return e.size=function(t){return arguments.length?(i=t,e):i},e.radius=function(n){return arguments.length?(t=null==n||"function"==typeof n?n:+n,e):t},e.padding=function(t){return arguments.length?(r=+t,e):r},oi(e,n)},go.layout.cluster=function(){function e(e,s){var o,u=t.call(this,e,s),a=u[0],f=0;Ai(a,function(e){var t=e.children;t&&t.length?(e.x=zi(t),e.y=Ui(t)):(e.x=o?f+=n(e,o):0,e.y=0,o=e)});var l=Wi(a),c=Xi(a),h=l.x-n(l,c)/2,p=c.x+n(c,l)/2;return Ai(a,i?function(e){e.x=(e.x-a.x)*r[0],e.y=(a.y-e.y)*r[1]}:function(e){e.x=(e.x-h)/(p-h)*r[0],e.y=(1-(a.y?e.y/a.y:1))*r[1]}),u}var t=go.layout.hierarchy().sort(null).value(null),n=Si,r=[1,1],i=!1;return e.separation=function(t){return arguments.length?(n=t,e):n},e.size=function(t){return arguments.length?(i=null==(r=t),e):i?null:r},e.nodeSize=function(t){return arguments.length?(i=null!=(r=t),e):i?r:null},oi(e,t)},go.layout.treemap=function(){function e(e,t){for(var n,r,i=-1,s=e.length;++i<s;)r=(n=e[i]).value*(0>t?0:t),n.area=isNaN(r)||0>=r?0:r}function t(n){var s=n.children;if(s&&s.length){var o,u,a,f=c(n),l=[],h=s.slice(),d=1/0,v="slice"===p?f.dx:"dice"===p?f.dy:"slice-dice"===p?1&n.depth?f.dy:f.dx:Math.min(f.dx,f.dy);for(e(h,f.dx*f.dy/n.value),l.area=0;(a=h.length)>0;)l.push(o=h[a-1]),l.area+=o.area,"squarify"!==p||(u=r(l,v))<=d?(h.pop(),d=u):(l.area-=l.pop().area,i(l,v,f,!1),v=Math.min(f.dx,f.dy),l.length=l.area=0,d=1/0);l.length&&(i(l,v,f,!0),l.length=l.area=0),s.forEach(t)}}function n(t){var r=t.children;if(r&&r.length){var s,o=c(t),u=r.slice(),a=[];for(e(u,o.dx*o.dy/t.value),a.area=0;s=u.pop();)a.push(s),a.area+=s.area,null!=s.z&&(i(a,s.z?o.dx:o.dy,o,!u.length),a.length=a.area=0);r.forEach(n)}}function r(e,t){for(var n,r=e.area,i=0,s=1/0,o=-1,u=e.length;++o<u;)(n=e[o].area)&&(s>n&&(s=n),n>i&&(i=n));return r*=r,t*=t,r?Math.max(t*i*d/r,r/(t*s*d)):1/0}function i(e,t,n,r){var i,s=-1,o=e.length,u=n.x,f=n.y,l=t?a(e.area/t):0;if(t==n.dx){for((r||l>n.dy)&&(l=n.dy);++s<o;)i=e[s],i.x=u,i.y=f,i.dy=l,u+=i.dx=Math.min(n.x+n.dx-u,l?a(i.area/l):0);i.z=!0,i.dx+=n.x+n.dx-u,n.y+=l,n.dy-=l}else{for((r||l>n.dx)&&(l=n.dx);++s<o;)i=e[s],i.x=u,i.y=f,i.dx=l,f+=i.dy=Math.min(n.y+n.dy-f,l?a(i.area/l):0);i.z=!1,i.dy+=n.y+n.dy-f,n.x+=l,n.dx-=l}}function s(r){var i=o||u(r),s=i[0];return s.x=0,s.y=0,s.dx=f[0],s.dy=f[1],o&&u.revalue(s),e([s],s.dx*s.dy/s.value),(o?n:t)(s),h&&(o=i),i}var o,u=go.layout.hierarchy(),a=Math.round,f=[1,1],l=null,c=Vi,h=!1,p="squarify",d=.5*(1+Math.sqrt(5));return s.size=function(e){return arguments.length?(f=e,s):f},s.padding=function(e){function t(t){var n=e.call(s,t,t.depth);return null==n?Vi(t):$i(t,"number"==typeof n?[n,n,n,n]:n)}function n(t){return $i(t,e)}if(!arguments.length)return l;var r;return c=null==(l=e)?Vi:"function"==(r=typeof e)?t:"number"===r?(e=[e,e,e,e],n):n,s},s.round=function(e){return arguments.length?(a=e?Math.round:Number,s):a!=Number},s.sticky=function(e){return arguments.length?(h=e,o=null,s):h},s.ratio=function(e){return arguments.length?(d=e,s):d},s.mode=function(e){return arguments.length?(p=e+"",s):p},oi(s,u)},go.random={normal:function(e,t){var n=arguments.length;return 2>n&&(t=1),1>n&&(e=0),function(){var n,r,i;do n=2*Math.random()-1,r=2*Math.random()-1,i=n*n+r*r;while(!i||i>1);return e+t*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var e=go.random.normal.apply(go,arguments);return function(){return Math.exp(e())}},irwinHall:function(e){return function(){for(var t=0,n=0;e>n;n++)t+=Math.random();return t/e}}},go.scale={};var La={floor:vt,ceil:vt};go.scale.linear=function(){return es([0,1],[0,1],Cr,!1)},go.scale.log=function(){return os(go.scale.linear().domain([0,1]),10,!0,[1,10])};var Aa=go.format(".0e"),Oa={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};go.scale.pow=function(){return us(go.scale.linear(),1,[0,1])},go.scale.sqrt=function(){return go.scale.pow().exponent(.5)},go.scale.ordinal=function(){return fs([],{t:"range",a:[[]]})},go.scale.category10=function(){return go.scale.ordinal().range(Ma)},go.scale.category20=function(){return go.scale.ordinal().range(_a)},go.scale.category20b=function(){return go.scale.ordinal().range(Da)},go.scale.category20c=function(){return go.scale.ordinal().range(Pa)};var Ma=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(st),_a=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(st),Da=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(st),Pa=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(st);go.scale.quantile=function(){return ls([],[])},go.scale.quantize=function(){return cs(0,1,[0,1])},go.scale.threshold=function(){return hs([.5],[0,1])},go.scale.identity=function(){return ps([0,1])},go.svg.arc=function(){function e(){var e=t.apply(this,arguments),s=n.apply(this,arguments),o=r.apply(this,arguments)+Ha,u=i.apply(this,arguments)+Ha,a=(o>u&&(a=o,o=u,u=a),u-o),f=Jo>a?"0":"1",l=Math.cos(o),c=Math.sin(o),h=Math.cos(u),p=Math.sin(u);return a>=Ba?e?"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+ -s+"A"+s+","+s+" 0 1,1 0,"+s+"M0,"+e+"A"+e+","+e+" 0 1,0 0,"+ -e+"A"+e+","+e+" 0 1,0 0,"+e+"Z":"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+ -s+"A"+s+","+s+" 0 1,1 0,"+s+"Z":e?"M"+s*l+","+s*c+"A"+s+","+s+" 0 "+f+",1 "+s*h+","+s*p+"L"+e*h+","+e*p+"A"+e+","+e+" 0 "+f+",0 "+e*l+","+e*c+"Z":"M"+s*l+","+s*c+"A"+s+","+s+" 0 "+f+",1 "+s*h+","+s*p+"L0,0"+"Z"}var t=ds,n=vs,r=ms,i=gs;return e.innerRadius=function(n){return arguments.length?(t=dt(n),e):t},e.outerRadius=function(t){return arguments.length?(n=dt(t),e):n},e.startAngle=function(t){return arguments.length?(r=dt(t),e):r},e.endAngle=function(t){return arguments.length?(i=dt(t),e):i},e.centroid=function(){var e=(t.apply(this,arguments)+n.apply(this,arguments))/2,s=(r.apply(this,arguments)+i.apply(this,arguments))/2+Ha;return[Math.cos(s)*e,Math.sin(s)*e]},e};var Ha=-Jo/2,Ba=2*Jo-1e-6;go.svg.line.radial=function(){var e=Wn(ys);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},Qn.reverse=Gn,Gn.reverse=Qn,go.svg.area=function(){return bs(vt)},go.svg.area.radial=function(){var e=bs(ys);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},go.svg.chord=function(){function e(e,u){var a=t(this,s,e,u),f=t(this,o,e,u);return"M"+a.p0+r(a.r,a.p1,a.a1-a.a0)+(n(a,f)?i(a.r,a.p1,a.r,a.p0):i(a.r,a.p1,f.r,f.p0)+r(f.r,f.p1,f.a1-f.a0)+i(f.r,f.p1,a.r,a.p0))+"Z"}function t(e,t,n,r){var i=t.call(e,n,r),s=u.call(e,i,r),o=a.call(e,i,r)+Ha,l=f.call(e,i,r)+Ha;return{r:s,a0:o,a1:l,p0:[s*Math.cos(o),s*Math.sin(o)],p1:[s*Math.cos(l),s*Math.sin(l)]}}function n(e,t){return e.a0==t.a0&&e.a1==t.a1}function r(e,t,n){return"A"+e+","+e+" 0 "+ +(n>Jo)+",1 "+t}function i(e,t,n,r){return"Q 0,0 "+r}var s=Pn,o=Hn,u=ws,a=ms,f=gs;return e.radius=function(t){return arguments.length?(u=dt(t),e):u},e.source=function(t){return arguments.length?(s=dt(t),e):s},e.target=function(t){return arguments.length?(o=dt(t),e):o},e.startAngle=function(t){return arguments.length?(a=dt(t),e):a},e.endAngle=function(t){return arguments.length?(f=dt(t),e):f},e},go.svg.diagonal=function(){function e(e,i){var s=t.call(this,e,i),o=n.call(this,e,i),u=(s.y+o.y)/2,a=[s,{x:s.x,y:u},{x:o.x,y:u},o];return a=a.map(r),"M"+a[0]+"C"+a[1]+" "+a[2]+" "+a[3]}var t=Pn,n=Hn,r=Es;return e.source=function(n){return arguments.length?(t=dt(n),e):t},e.target=function(t){return arguments.length?(n=dt(t),e):n},e.projection=function(t){return arguments.length?(r=t,e):r},e},go.svg.diagonal.radial=function(){var e=go.svg.diagonal(),t=Es,n=e.projection;return e.projection=function(e){return arguments.length?n(Ss(t=e)):t},e},go.svg.symbol=function(){function e(e,r){return(ja.get(t.call(this,e,r))||Ns)(n.call(this,e,r))}var t=Ts,n=xs;return e.type=function(n){return arguments.length?(t=dt(n),e):t},e.size=function(t){return arguments.length?(n=dt(t),e):n},e};var ja=go.map({circle:Ns,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+ -3*t+","+ -t+"H"+ -t+"V"+ -3*t+"H"+t+"V"+ -t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+ -t+"V"+t+"H"+ -3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Ra)),n=t*Ra;return"M0,"+ -t+"L"+n+",0"+" 0,"+t+" "+ -n+",0"+"Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+ -t+","+ -t+"L"+t+","+ -t+" "+t+","+t+" "+ -t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/qa),n=t*qa/2;return"M0,"+n+"L"+t+","+ -n+" "+ -t+","+ -n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/qa),n=t*qa/2;return"M0,"+ -n+"L"+t+","+n+" "+ -t+","+n+"Z"}});go.svg.symbolTypes=ja.keys();var Fa,Ia,qa=Math.sqrt(3),Ra=Math.tan(30*Go),Ua=[],za=0;Ua.call=qo.call,Ua.empty=qo.empty,Ua.node=qo.node,Ua.size=qo.size,go.transition=function(e){return arguments.length?Fa?e.transition():e:zo.transition()},go.transition.prototype=Ua,Ua.select=function(e){var t,n,r,i=this.id,s=[];e=v(e);for(var o=-1,u=this.length;++o<u;){s.push(t=[]);for(var a=this[o],f=-1,l=a.length;++f<l;)(r=a[f])&&(n=e.call(r,r.__data__,f,o))?("__data__"in r&&(n.__data__=r.__data__),As(n,f,i,r.__transition__[i]),t.push(n)):t.push(null)}return Cs(s,i)},Ua.selectAll=function(e){var t,n,r,i,s,o=this.id,u=[];e=m(e);for(var a=-1,f=this.length;++a<f;)for(var l=this[a],c=-1,h=l.length;++c<h;)if(r=l[c]){s=r.__transition__[o],n=e.call(r,r.__data__,c,a),u.push(t=[]);for(var p=-1,d=n.length;++p<d;)(i=n[p])&&As(i,p,o,s),t.push(i)}return Cs(u,o)},Ua.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=C(e));for(var s=0,o=this.length;o>s;s++){i.push(t=[]);for(var n=this[s],u=0,a=n.length;a>u;u++)(r=n[u])&&e.call(r,r.__data__,u)&&t.push(r)}return Cs(i,this.id)},Ua.tween=function(e,t){var n=this.id;return arguments.length<2?this.node().__transition__[n].tween.get(e):L(this,null==t?function(t){t.__transition__[n].tween.remove(e)}:function(r){r.__transition__[n].tween.set(e,t)})},Ua.attr=function(e,t){function n(){this.removeAttribute(u)}function r(){this.removeAttributeNS(u.space,u.local)}function i(e){return null==e?n:(e+="",function(){var t,n=this.getAttribute(u);return n!==e&&(t=o(n,e),function(e){this.setAttribute(u,t(e))})})}function s(e){return null==e?r:(e+="",function(){var t,n=this.getAttributeNS(u.space,u.local);return n!==e&&(t=o(n,e),function(e){this.setAttributeNS(u.space,u.local,t(e))})})}if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var o="transform"==e?Kr:Cr,u=go.ns.qualify(e);return ks(this,"attr."+e,t,u.local?s:i)},Ua.attrTween=function(e,t){function n(e,n){var r=t.call(this,e,n,this.getAttribute(i));return r&&function(e){this.setAttribute(i,r(e))}}function r(e,n){var r=t.call(this,e,n,this.getAttributeNS(i.space,i.local));return r&&function(e){this.setAttributeNS(i.space,i.local,r(e))}}var i=go.ns.qualify(e);return this.tween("attr."+e,i.local?r:n)},Ua.style=function(e,t,n){function r(){this.style.removeProperty(e)}function i(t){return null==t?r:(t+="",function(){var r,i=So.getComputedStyle(this,null).getPropertyValue(e);return i!==t&&(r=Cr(i,t),function(t){this.style.setProperty(e,r(t),n)})})}var s=arguments.length;if(3>s){if("string"!=typeof e){2>s&&(t="");for(n in e)this.style(n,e[n],t);return this}n=""}return ks(this,"style."+e,t,i)},Ua.styleTween=function(e,t,n){function r(r,i){var s=t.call(this,r,i,So.getComputedStyle(this,null).getPropertyValue(e));return s&&function(t){this.style.setProperty(e,s(t),n)}}return arguments.length<3&&(n=""),this.tween("style."+e,r)},Ua.text=function(e){return ks(this,"text",e,Ls)},Ua.remove=function(){return this.each("end.transition",function(){var e;this.__transition__.count<2&&(e=this.parentNode)&&e.removeChild(this)})},Ua.ease=function(e){var t=this.id;return arguments.length<1?this.node().__transition__[t].ease:("function"!=typeof e&&(e=go.ease.apply(go,arguments)),L(this,function(n){n.__transition__[t].ease=e}))},Ua.delay=function(e){var t=this.id;return L(this,"function"==typeof e?function(n,r,i){n.__transition__[t].delay=+e.call(n,n.__data__,r,i)}:(e=+e,function(n){n.__transition__[t].delay=e}))},Ua.duration=function(e){var t=this.id;return L(this,"function"==typeof e?function(n,r,i){n.__transition__[t].duration=Math.max(1,e.call(n,n.__data__,r,i))}:(e=Math.max(1,e),function(n){n.__transition__[t].duration=e}))},Ua.each=function(e,t){var n=this.id;if(arguments.length<2){var r=Ia,i=Fa;Fa=n,L(this,function(t,r,i){Ia=t.__transition__[n],e.call(t,t.__data__,r,i)}),Ia=r,Fa=i}else L(this,function(r){var i=r.__transition__[n];(i.event||(i.event=go.dispatch("start","end"))).on(e,t)});return this},Ua.transition=function(){for(var e,t,n,r,i=this.id,s=++za,o=[],u=0,a=this.length;a>u;u++){o.push(e=[]);for(var t=this[u],f=0,l=t.length;l>f;f++)(n=t[f])&&(r=Object.create(n.__transition__[i]),r.delay+=r.duration,As(n,f,s,r)),e.push(n)}return Cs(o,s)},go.svg.axis=function(){function e(e){e.each(function(){var e,f=go.select(this),l=null==a?n.ticks?n.ticks.apply(n,u):n.domain():a,c=null==t?n.tickFormat?n.tickFormat.apply(n,u):vt:t,h=f.selectAll(".tick").data(l,vt),p=h.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),d=go.transition(h.exit()).style("opacity",1e-6).remove(),v=go.transition(h).style("opacity",1),m=Ki(n),g=f.selectAll(".domain").data([0]),y=(g.enter().append("path").attr("class","domain"),go.transition(g)),b=n.copy(),w=this.__chart__||b;this.__chart__=b,p.append("line"),p.append("text");var E=p.select("line"),S=v.select("line"),x=h.select("text").text(c),T=p.select("text"),N=v.select("text");switch(r){case"bottom":e=Os,E.attr("y2",i),T.attr("y",Math.max(i,0)+o),S.attr("x2",0).attr("y2",i),N.attr("x",0).attr("y",Math.max(i,0)+o),x.attr("dy",".71em").style("text-anchor","middle"),y.attr("d","M"+m[0]+","+s+"V0H"+m[1]+"V"+s);break;case"top":e=Os,E.attr("y2",-i),T.attr("y",-(Math.max(i,0)+o)),S.attr("x2",0).attr("y2",-i),N.attr("x",0).attr("y",-(Math.max(i,0)+o)),x.attr("dy","0em").style("text-anchor","middle"),y.attr("d","M"+m[0]+","+ -s+"V0H"+m[1]+"V"+ -s);break;case"left":e=Ms,E.attr("x2",-i),T.attr("x",-(Math.max(i,0)+o)),S.attr("x2",-i).attr("y2",0),N.attr("x",-(Math.max(i,0)+o)).attr("y",0),x.attr("dy",".32em").style("text-anchor","end"),y.attr("d","M"+ -s+","+m[0]+"H0V"+m[1]+"H"+ -s);break;case"right":e=Ms,E.attr("x2",i),T.attr("x",Math.max(i,0)+o),S.attr("x2",i).attr("y2",0),N.attr("x",Math.max(i,0)+o).attr("y",0),x.attr("dy",".32em").style("text-anchor","start"),y.attr("d","M"+s+","+m[0]+"H0V"+m[1]+"H"+s)}if(n.rangeBand){var C=b.rangeBand()/2,k=function(e){return b(e)+C};p.call(e,k),v.call(e,k)}else p.call(e,w),v.call(e,b),d.call(e,b)})}var t,n=go.scale.linear(),r=Wa,i=6,s=6,o=3,u=[10],a=null;return e.scale=function(t){return arguments.length?(n=t,e):n},e.orient=function(t){return arguments.length?(r=t in Xa?t+"":Wa,e):r},e.ticks=function(){return arguments.length?(u=arguments,e):u},e.tickValues=function(t){return arguments.length?(a=t,e):a},e.tickFormat=function(n){return arguments.length?(t=n,e):t},e.tickSize=function(t){var n=arguments.length;return n?(i=+t,s=+arguments[n-1],e):i},e.innerTickSize=function(t){return arguments.length?(i=+t,e):i},e.outerTickSize=function(t){return arguments.length?(s=+t,e):s},e.tickPadding=function(t){return arguments.length?(o=+t,e):o},e.tickSubdivide=function(){return arguments.length&&e},e};var Wa="bottom",Xa={top:1,right:1,bottom:1,left:1};go.svg.brush=function(){function e(s){s.each(function(){var s=go.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",i).on("touchstart.brush",i),o=s.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),s.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var u=s.selectAll(".resize").data(m,vt);u.exit().remove(),u.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Va[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),u.style("display",e.empty()?"none":null);var l,c=go.transition(s),h=go.transition(o);a&&(l=Ki(a),h.attr("x",l[0]).attr("width",l[1]-l[0]),n(c)),f&&(l=Ki(f),h.attr("y",l[0]).attr("height",l[1]-l[0]),r(c)),t(c)})}function t(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+l[+/e$/.test(e)]+","+h[+/^s/.test(e)]+")"})}function n(e){e.select(".extent").attr("x",l[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",l[1]-l[0])}function r(e){e.select(".extent").attr("y",h[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1]-h[0])}function i(){function i(){var e=go.event.changedTouches;return e?go.touches(S,e)[0]:go.mouse(S)}function p(){32==go.event.keyCode&&(A||(w=null,M[0]-=l[1],M[1]-=h[1],A=2),c())}function m(){32==go.event.keyCode&&2==A&&(M[0]+=l[1],M[1]+=h[1],A=0,c())}function g(){var e=i(),s=!1;E&&(e[0]+=E[0],e[1]+=E[1]),A||(go.event.altKey?(w||(w=[(l[0]+l[1])/2,(h[0]+h[1])/2]),M[0]=l[+(e[0]<w[0])],M[1]=h[+(e[1]<w[1])]):w=null),k&&y(e,a,0)&&(n(N),s=!0),L&&y(e,f,1)&&(r(N),s=!0),s&&(t(N),T({type:"brush",mode:A?"move":"resize"}))}function y(e,t,n){var r,i,u=Ki(t),a=u[0],f=u[1],c=M[n],p=n?h:l,m=p[1]-p[0];return A&&(a-=c,f-=m+c),r=(n?v:d)?Math.max(a,Math.min(f,e[n])):e[n],A?i=(r+=c)+m:(w&&(c=Math.max(a,Math.min(f,2*w[n]-r))),r>c?(i=r,r=c):i=c),p[0]!=r||p[1]!=i?(n?o=null:s=null,p[0]=r,p[1]=i,!0):void 0}function b(){g(),N.style("pointer-events","all").selectAll(".resize").style("display",e.empty()?"none":null),go.select("body").style("cursor",null),_.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),O(),T({type:"brushend"})}var w,E,S=this,x=go.select(go.event.target),T=u.of(S,arguments),N=go.select(S),C=x.datum(),k=!/^(n|s)$/.test(C)&&a,L=!/^(e|w)$/.test(C)&&f,A=x.classed("extent"),O=H(),M=i(),_=go.select(So).on("keydown.brush",p).on("keyup.brush",m);if(go.event.changedTouches?_.on("touchmove.brush",g).on("touchend.brush",b):_.on("mousemove.brush",g).on("mouseup.brush",b),N.interrupt().selectAll("*").interrupt(),A)M[0]=l[0]-M[0],M[1]=h[0]-M[1];else if(C){var D=+/w$/.test(C),P=+/^n/.test(C);E=[l[1-D]-M[0],h[1-P]-M[1]],M[0]=l[D],M[1]=h[P]}else go.event.altKey&&(w=M.slice());N.style("pointer-events","none").selectAll(".resize").style("display",null),go.select("body").style("cursor",x.style("cursor")),T({type:"brushstart"}),g()}var s,o,u=p(e,"brushstart","brush","brushend"),a=null,f=null,l=[0,0],h=[0,0],d=!0,v=!0,m=$a[0];return e.event=function(e){e.each(function(){var e=u.of(this,arguments),t={x:l,y:h,i:s,j:o},n=this.__chart__||t;this.__chart__=t,Fa?go.select(this).transition().each("start.brush",function(){s=n.i,o=n.j,l=n.x,h=n.y,e({type:"brushstart"})}).tween("brush:brush",function(){var n=kr(l,t.x),r=kr(h,t.y);return s=o=null,function(i){l=t.x=n(i),h=t.y=r(i),e({type:"brush",mode:"resize"})}}).each("end.brush",function(){s=t.i,o=t.j,e({type:"brush",mode:"resize"}),e({type:"brushend"})}):(e({type:"brushstart"}),e({type:"brush",mode:"resize"}),e({type:"brushend"}))})},e.x=function(t){return arguments.length?(a=t,m=$a[!a<<1|!f],e):a},e.y=function(t){return arguments.length?(f=t,m=$a[!a<<1|!f],e):f},e.clamp=function(t){return arguments.length?(a&&f?(d=!!t[0],v=!!t[1]):a?d=!!t:f&&(v=!!t),e):a&&f?[d,v]:a?d:f?v:null},e.extent=function(t){var n,r,i,u,c;return arguments.length?(a&&(n=t[0],r=t[1],f&&(n=n[0],r=r[0]),s=[n,r],a.invert&&(n=a(n),r=a(r)),n>r&&(c=n,n=r,r=c),(n!=l[0]||r!=l[1])&&(l=[n,r])),f&&(i=t[0],u=t[1],a&&(i=i[1],u=u[1]),o=[i,u],f.invert&&(i=f(i),u=f(u)),i>u&&(c=i,i=u,u=c),(i!=h[0]||u!=h[1])&&(h=[i,u])),e):(a&&(s?(n=s[0],r=s[1]):(n=l[0],r=l[1],a.invert&&(n=a.invert(n),r=a.invert(r)),n>r&&(c=n,n=r,r=c))),f&&(o?(i=o[0],u=o[1]):(i=h[0],u=h[1],f.invert&&(i=f.invert(i),u=f.invert(u)),i>u&&(c=i,i=u,u=c))),a&&f?[[n,i],[r,u]]:a?[n,r]:f&&[i,u])},e.clear=function(){return e.empty()||(l=[0,0],h=[0,0],s=o=null),e},e.empty=function(){return!!a&&l[0]==l[1]||!!f&&h[0]==h[1]},go.rebind(e,u,"on")};var Va={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},$a=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Ja=go.time={},Ka=Date,Qa=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];_s.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Ga.setUTCDate.apply(this._,arguments)},setDay:function(){Ga.setUTCDay.apply(this._,arguments)},setFullYear:function(){Ga.setUTCFullYear.apply(this._,arguments)},setHours:function(){Ga.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Ga.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Ga.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Ga.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Ga.setUTCSeconds.apply(this._,arguments)},setTime:function(){Ga.setTime.apply(this._,arguments)}};var Ga=Date.prototype,Ya="%a %b %e %X %Y",Za="%m/%d/%Y",ef="%H:%M:%S",tf=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],nf=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],rf=["January","February","March","April","May","June","July","August","September","October","November","December"],sf=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];Ja.year=Ds(function(e){return e=Ja.day(e),e.setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),Ja.years=Ja.year.range,Ja.years.utc=Ja.year.utc.range,Ja.day=Ds(function(e){var t=new Ka(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),Ja.days=Ja.day.range,Ja.days.utc=Ja.day.utc.range,Ja.dayOfYear=function(e){var t=Ja.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},Qa.forEach(function(e,t){e=e.toLowerCase(),t=7-t;var n=Ja[e]=Ds(function(e){return(e=Ja.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e},function(e,t){e.setDate(e.getDate()+7*Math.floor(t))},function(e){var n=Ja.year(e).getDay();return Math.floor((Ja.dayOfYear(e)+(n+t)%7)/7)-(n!==t)});Ja[e+"s"]=n.range,Ja[e+"s"].utc=n.utc.range,Ja[e+"OfYear"]=function(e){var n=Ja.year(e).getDay();return Math.floor((Ja.dayOfYear(e)+(n+t)%7)/7)}}),Ja.week=Ja.sunday,Ja.weeks=Ja.sunday.range,Ja.weeks.utc=Ja.sunday.utc.range,Ja.weekOfYear=Ja.sundayOfYear,Ja.format=Hs;var of=js(tf),uf=Fs(tf),af=js(nf),ff=Fs(nf),lf=js(rf),cf=Fs(rf),hf=js(sf),pf=Fs(sf),df=/^%/,vf={"-":"",_:" ",0:"0"},mf={a:function(e){return nf[e.getDay()]},A:function(e){return tf[e.getDay()]},b:function(e){return sf[e.getMonth()]},B:function(e){return rf[e.getMonth()]},c:Hs(Ya),d:function(e,t){return Is(e.getDate(),t,2)},e:function(e,t){return Is(e.getDate(),t,2)},H:function(e,t){return Is(e.getHours(),t,2)},I:function(e,t){return Is(e.getHours()%12||12,t,2)},j:function(e,t){return Is(1+Ja.dayOfYear(e),t,3)},L:function(e,t){return Is(e.getMilliseconds(),t,3)},m:function(e,t){return Is(e.getMonth()+1,t,2)},M:function(e,t){return Is(e.getMinutes(),t,2)},p:function(e){return e.getHours()>=12?"PM":"AM"},S:function(e,t){return Is(e.getSeconds(),t,2)},U:function(e,t){return Is(Ja.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return Is(Ja.mondayOfYear(e),t,2)},x:Hs(Za),X:Hs(ef),y:function(e,t){return Is(e.getFullYear()%100,t,2)},Y:function(e,t){return Is(e.getFullYear()%1e4,t,4)},Z:uo,"%":function(){return"%"}},gf={a:qs,A:Rs,b:Xs,B:Vs,c:$s,d:eo,e:eo,H:no,I:no,j:to,L:so,m:Zs,M:ro,p:oo,S:io,U:zs,w:Us,W:Ws,x:Js,X:Ks,y:Gs,Y:Qs,"%":ao},yf=/^\s*\d+/,bf=go.map({am:0,pm:1});Hs.utc=fo;var wf=fo("%Y-%m-%dT%H:%M:%S.%LZ");Hs.iso=Date.prototype.toISOString&&+(new Date("2000-01-01T00:00:00.000Z"))?lo:wf,lo.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},lo.toString=wf.toString,Ja.second=Ds(function(e){return new Ka(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))},function(e){return e.getSeconds()}),Ja.seconds=Ja.second.range,Ja.seconds.utc=Ja.second.utc.range,Ja.minute=Ds(function(e){return new Ka(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))},function(e){return e.getMinutes()}),Ja.minutes=Ja.minute.range,Ja.minutes.utc=Ja.minute.utc.range,Ja.hour=Ds(function(e){var t=e.getTimezoneOffset()/60;return new Ka(36e5*(Math.floor(e/36e5-t)+t))},function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))},function(e){return e.getHours()}),Ja.hours=Ja.hour.range,Ja.hours.utc=Ja.hour.utc.range,Ja.month=Ds(function(e){return e=Ja.day(e),e.setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),Ja.months=Ja.month.range,Ja.months.utc=Ja.month.utc.range;var Ef=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Sf=[[Ja.second,1],[Ja.second,5],[Ja.second,15],[Ja.second,30],[Ja.minute,1],[Ja.minute,5],[Ja.minute,15],[Ja.minute,30],[Ja.hour,1],[Ja.hour,3],[Ja.hour,6],[Ja.hour,12],[Ja.day,1],[Ja.day,2],[Ja.week,1],[Ja.month,1],[Ja.month,3],[Ja.year,1]],xf=[[Hs("%Y"),Xt],[Hs("%B"),function(e){return e.getMonth()}],[Hs("%b %d"),function(e){return 1!=e.getDate()}],[Hs("%a %d"),function(e){return e.getDay()&&1!=e.getDate()}],[Hs("%I %p"),function(e){return e.getHours()}],[Hs("%I:%M"),function(e){return e.getMinutes()}],[Hs(":%S"),function(e){return e.getSeconds()}],[Hs(".%L"),function(e){return e.getMilliseconds()}]],Tf=po(xf);Sf.year=Ja.year,Ja.scale=function(){return co(go.scale.linear(),Sf,Tf)};var Nf={range:function(e,t,n){return go.range(+e,+t,n).map(ho)}},Cf=Sf.map(function(e){return[e[0].utc,e[1]]}),kf=[[fo("%Y"),Xt],[fo("%B"),function(e){return e.getUTCMonth()}],[fo("%b %d"),function(e){return 1!=e.getUTCDate()}],[fo("%a %d"),function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],[fo("%I %p"),function(e){return e.getUTCHours()}],[fo("%I:%M"),function(e){return e.getUTCMinutes()}],[fo(":%S"),function(e){return e.getUTCSeconds()}],[fo(".%L"),function(e){return e.getUTCMilliseconds()}]],Lf=po(kf);return Cf.year=Ja.year.utc,Ja.scale.utc=function(){return co(go.scale.linear(),Cf,Lf)},go.text=mt(function(e){return e.responseText}),go.json=function(e,t){return gt(e,"application/json",vo,t)},go.html=function(e,t){return gt(e,"text/html",mo,t)},go.xml=mt(function(e){return e.responseXML}),go}(),define("vendor/d3/d3",function(e){return function(){var t,n;return t||e.d3}}(this)),function(e){function t(e){return e}function n(e,t){for(var n=0,r=t.length,i=new Array(r);n<r;++n)i[n]=e[t[n]];return i}function i(e){function t(t,n,r,i){while(r<i){var s=r+i>>>1;e(t[s])<n?r=s+1:i=s}return r}function n(t,n,r,i){while(r<i){var s=r+i>>>1;n<e(t[s])?i=s:r=s+1}return r}return n.right=n,n.left=t,n}function o(e){function t(e,t,n){var i=n-t,s=(i>>>1)+1;while(--s>0)r(e,s,i,t);return e}function n(e,t,n){var i=n-t,s;while(--i>0)s=e[t],e[t]=e[t+i],e[t+i]=s,r(e,1,i,t);return e}function r(t,n,r,i){var s=t[--i+n],o=e(s),u;while((u=n<<1)<=r){u<r&&e(t[i+u])>e(t[i+u+1])&&u++;if(o<=e(t[i+u]))break;t[i+n]=t[i+u],n=u}t[i+n]=s}return t.sort=n,t}function a(e){function n(n,r,i,s){var o=new Array(s=Math.min(i-r,s)),u,a,f,l;for(a=0;a<s;++a)o[a]=n[r++];t(o,0,s);if(r<i){u=e(o[0]);do if(f=e(l=n[r])>u)o[0]=l,u=e(t(o,0,s)[0]);while(++r<i)}return o}var t=o(e);return n}function l(e){function t(t,n,r){for(var i=n+1;i<r;++i){for(var s=i,o=t[i],u=e(o);s>n&&e(t[s-1])>u;--s)t[s]=t[s-1];t[s]=o}return t}return t}function h(e){function n(e,n,i){return(i-n<p?t:r)(e,n,i)}function r(t,r,i){var s=(i-r)/6|0,o=r+s,u=i-1-s,a=r+i-1>>1,f=a-s,l=a+s,c=t[o],h=e(c),p=t[f],d=e(p),v=t[a],m=e(v),g=t[l],y=e(g),b=t[u],w=e(b),E;h>d&&(E=c,c=p,p=E,E=h,h=d,d=E),y>w&&(E=g,g=b,b=E,E=y,y=w,w=E),h>m&&(E=c,c=v,v=E,E=h,h=m,m=E),d>m&&(E=p,p=v,v=E,E=d,d=m,m=E),h>y&&(E=c,c=g,g=E,E=h,h=y,y=E),m>y&&(E=v,v=g,g=E,E=m,m=y,y=E),d>w&&(E=p,p=b,b=E,E=d,d=w,w=E),d>m&&(E=p,p=v,v=E,E=d,d=m,m=E),y>w&&(E=g,g=b,b=E,E=y,y=w,w=E);var S=p,x=d,T=g,N=y;t[o]=c,t[f]=t[r],t[a]=v,t[l]=t[i-1],t[u]=b;var C=r+1,k=i-2,L=x<=N&&x>=N;if(L)for(var A=C;A<=k;++A){var O=t[A],M=e(O);if(M<x)A!==C&&(t[A]=t[C],t[C]=O),++C;else if(M>x)for(;;){var _=e(t[k]);if(_>x){k--;continue}if(_<x){t[A]=t[C],t[C++]=t[k],t[k--]=O;break}t[A]=t[k],t[k--]=O;break}}else for(var A=C;A<=k;A++){var O=t[A],M=e(O);if(M<x)A!==C&&(t[A]=t[C],t[C]=O),++C;else if(M>N)for(;;){var _=e(t[k]);if(_>N){k--;if(k<A)break;continue}_<x?(t[A]=t[C],t[C++]=t[k],t[k--]=O):(t[A]=t[k],t[k--]=O);break}}t[r]=t[C-1],t[C-1]=S,t[i-1]=t[k+1],t[k+1]=T,n(t,r,C-1),n(t,k+2,i);if(L)return t;if(C<o&&k>u){var D,_;while((D=e(t[C]))<=x&&D>=x)++C;while((_=e(t[k]))<=N&&_>=N)--k;for(var A=C;A<=k;A++){var O=t[A],M=e(O);if(M<=x&&M>=x)A!==C&&(t[A]=t[C],t[C]=O),C++;else if(M<=N&&M>=N)for(;;){var _=e(t[k]);if(_<=N&&_>=N){k--;if(k<A)break;continue}_<x?(t[A]=t[C],t[C++]=t[k],t[k--]=O):(t[A]=t[k],t[k--]=O);break}}}return n(t,C,k+1)}var t=l(e);return n}function b(e){return new Array(e)}function w(e,t){return function(n){var r=n.length;return[e.left(n,t,0,r),e.right(n,t,0,r)]}}function E(e,t){var n=t[0],r=t[1];return function(t){var i=t.length;return[e.left(t,n,0,i),e.left(t,r,0,i)]}}function S(e){return[0,e.length]}function x(){return null}function T(){return 0}function N(e){return e+1}function C(e){return e-1}function k(e){return function(t,n){return t+ +e(n)}}function L(e){return function(t,n){return t-e(n)}}function A(){function v(t){var n=s,r=t.length;return r&&(i=i.concat(t),l=g(l,s+=r),p.forEach(function(e){e(t,n,r)})),e}function m(e){function U(t,r,i){D=t.map(e),P=H(M(i),0,i),D=n(D,P);var o=B(D),u=o[0],a=o[1],f,c;if(j)for(f=0;f<i;++f)j(D[f],c=P[f]+r)||(l[c]|=v);else{for(f=0;f<u;++f)l[P[f]+r]|=v;for(f=a;f<i;++f)l[P[f]+r]|=v}if(!r){b=D,A=P,q=u,R=a;return}var h=b,p=A,d=0,m=0;b=new Array(s),A=O(s,s);for(f=0;d<r&&m<i;++f)h[d]<D[m]?(b[f]=h[d],A[f]=p[d++]):(b[f]=D[m],A[f]=P[m++]+r);for(;d<r;++d,++f)b[f]=h[d],A[f]=p[d];for(;m<i;++m,++f)b[f]=D[m],A[f]=P[m]+r;o=B(b),q=o[0],R=o[1]}function z(e,t,n){F.forEach(function(e){e(D,P,t,n)}),D=P=null}function W(e){var t=e[0],n=e[1];if(j)return j=null,Q(function(e,r){return t<=r&&r<n}),q=t,R=n,d;var r,i,s,o=[],u=[];if(t<q)for(r=t,i=Math.min(q,n);r<i;++r)l[s=A[r]]^=v,o.push(s);else if(t>q)for(r=q,i=Math.min(t,R);r<i;++r)l[s=A[r]]^=v,u.push(s);if(n>R)for(r=Math.max(t,R),i=n;r<i;++r)l[s=A[r]]^=v,o.push(s);else if(n<R)for(r=Math.max(q,n),i=R;r<i;++r)l[s=A[r]]^=v,u.push(s);return q=t,R=n,c.forEach(function(e){e(v,o,u)}),d}function X(e){return e==null?J():Array.isArray(e)?$(e):typeof e=="function"?K(e):V(e)}function V(e){return W((B=w(r,e))(b))}function $(e){return W((B=E(r,e))(b))}function J(){return W((B=S)(b))}function K(e){return B=S,Q(j=e),q=0,R=s,d}function Q(e){var t,n,r,i=[],o=[];for(t=0;t<s;++t)!(l[n=A[t]]&v)^(r=e(b[t],n))&&(r?(l[n]&=m,i.push(n)):(l[n]|=v,o.push(n)));c.forEach(function(e){e(v,i,o)})}function G(e){var t=[],n=R,r;while(--n>=q&&e>0)l[r=A[n]]||(t.push(i[r]),--e);return t}function Y(e){var t=[],n=q,r;while(n<R&&e>0)l[r=A[n]]||(t.push(i[r]),--e),n++;return t}function Z(e){function B(t,n,o,a){function I(){++p===h&&(v=y(v,f<<=1),u=y(u,f),h=_(f))}var d=r,v=O(p,h),b=E,w=M,S=p,T=0,N=0,C,k,L,A,B,F;H&&(b=w=x),r=new Array(p),p=0,u=S>1?g(u,s):O(s,h),S&&(L=(k=d[0]).key);while(N<a&&!((A=e(t[N]))>=A))++N;while(N<a){if(k&&L<=A){B=k,F=L,v[T]=p;if(k=d[++T])L=k.key}else B={key:A,value:w()},F=A;r[p]=B;while(!(A>F)){u[C=n[N]+o]=p,l[C]&m||(B.value=b(B.value,i[C]));if(++N>=a)break;A=e(t[N])}I()}while(T<S)r[v[T]=p]=d[T++],I();if(p>T)for(T=0;T<o;++T)u[T]=v[u[T]];C=c.indexOf(D),p>1?(D=j,P=R):(p===1?(D=q,P=U):(D=x,P=x),u=null),c[C]=D}function j(e,t,n){if(e===v||H)return;var s,o,a,f;for(s=0,a=t.length;s<a;++s)l[o=t[s]]&m||(f=r[u[o]],f.value=E(f.value,i[o]));for(s=0,a=n.length;s<a;++s)(l[o=n[s]]&m)===e&&(f=r[u[o]],f.value=S(f.value,i[o]))}function q(e,t,n){if(e===v||H)return;var s,o,u,a=r[0];for(s=0,u=t.length;s<u;++s)l[o=t[s]]&m||(a.value=E(a.value,i[o]));for(s=0,u=n.length;s<u;++s)(l[o=n[s]]&m)===e&&(a.value=S(a.value,i[o]))}function R(){var e,t;for(e=0;e<p;++e)r[e].value=M();for(e=0;e<s;++e)l[e]&m||(t=r[u[e]],t.value=E(t.value,i[e]))}function U(){var e,t=r[0];t.value=M();for(e=0;e<s;++e)l[e]&m||(t.value=E(t.value,i[e]))}function z(){return H&&(P(),H=!1),r}function W(e){var t=d(z(),0,r.length,e);return w.sort(t,0,t.length)}function X(e,t,r){return E=e,S=t,M=r,H=!0,n}function V(){return X(N,C,T)}function $(e){return X(k(e),L(e),T)}function J(e){function t(t){return e(t.value)}return d=a(t),w=o(t),n}function K(){return J(t)}function Q(){return p}function G(){var e=c.indexOf(D);return e>=0&&c.splice(e,1),e=F.indexOf(B),e>=0&&F.splice(e,1),n}var n={top:W,all:z,reduce:X,reduceCount:V,reduceSum:$,order:J,orderNatural:K,size:Q,remove:G};I.push(n);var r,u,f=8,h=_(f),p=0,d,w,E,S,M,D=x,P=x,H=!0;return arguments.length<1&&(e=t),c.push(D),F.push(B),B(b,A,0,s),V().orderNatural()}function et(){var e=Z(x),t=e.all;return delete e.all,delete e.top,delete e.order,delete e.orderNatural,delete e.size,e.value=function(){return t()[0].value},e}function tt(){I.forEach(function(e){e.remove()});var e=p.indexOf(U);e>=0&&p.splice(e,1),e=p.indexOf(z),e>=0&&p.splice(e,1);for(e=0;e<s;++e)l[e]&=m;return u&=m,d}var d={filter:X,filterExact:V,filterRange:$,filterFunction:K,filterAll:J,top:G,bottom:Y,group:Z,groupAll:et,remove:tt},v=~u&-~u,m=~v,b,A,D,P,H=h(function(e){return D[e]}),B=S,j,F=[],I=[],q=0,R=0;p.unshift(U),p.push(z),u|=v;if(f>=32?!v:u&(1<<f)-1)l=y(l,f<<=1);return U(i,0,s),z(i,0,s),d}function b(){function a(e,r){var o;if(u)return;for(o=r;o<s;++o)l[o]||(t=n(t,i[o]))}function f(e,s,o){var a,f,c;if(u)return;for(a=0,c=s.length;a<c;++a)l[f=s[a]]||(t=n(t,i[f]));for(a=0,c=o.length;a<c;++a)l[f=o[a]]===e&&(t=r(t,i[f]))}function h(){var e;t=o();for(e=0;e<s;++e)l[e]||(t=n(t,i[e]))}function d(t,i,s){return n=t,r=i,o=s,u=!0,e}function v(){return d(N,C,T)}function m(e){return d(k(e),L(e),T)}function g(){return u&&(h(),u=!1),t}function y(){var t=c.indexOf(f);return t>=0&&c.splice(t),t=p.indexOf(a),t>=0&&p.splice(t),e}var e={reduce:d,reduceCount:v,reduceSum:m,value:g,remove:y},t,n,r,o,u=!0;return c.push(f),p.push(a),a(i,0,s),v()}function A(){return s}var e={add:v,dimension:m,groupAll:b,size:A},i=[],s=0,u=0,f=8,l=d(0),c=[],p=[];return arguments.length?v(arguments[0]):e}function O(e,t){return(t<257?d:t<65537?v:m)(e)}function M(e){var t=O(e,e);for(var n=-1;++n<e;)t[n]=n;return t}function _(e){return e===8?256:e===16?65536:4294967296}A.version="1.2.0",A.permute=n;var r=A.bisect=i(t);r.by=i;var s=A.heap=o(t);s.by=o;var u=A.heapselect=a(t);u.by=a;var f=A.insertionsort=l(t);f.by=l;var c=A.quicksort=h(t);c.by=h;var p=32,d=b,v=b,m=b,g=t,y=t;typeof Uint8Array!="undefined"&&(d=function(e){return new Uint8Array(e)},v=function(e){return new Uint16Array(e)},m=function(e){return new Uint32Array(e)},g=function(e,t){var n=new e.constructor(t);return n.set(e),n},y=function(e,t){var n;switch(t){case 16:n=v(e.length);break;case 32:n=m(e.length);break;default:throw new Error("invalid array width!")}return n.set(e),n}),e.crossfilter=A}(this),define("vendor/crossfilter/crossfilter",function(e){return function(){var t,n;return t||e.crossfilter}}(this)),dc=function(){var e={version:"1.6.0-dev",constants:{CHART_CLASS:"dc-chart",DEBUG_GROUP_CLASS:"debug",STACK_CLASS:"stack",DESELECTED_CLASS:"deselected",SELECTED_CLASS:"selected",NODE_INDEX_NAME:"__index__",GROUP_INDEX_NAME:"__group_index__",DEFAULT_CHART_GROUP:"__default_chart_group__",EVENT_DELAY:40,NEGLIGIBLE_NUMBER:1e-10},_renderlet:null};return e.chartRegistry=function(){function n(n){return n||(n=e.constants.DEFAULT_CHART_GROUP),t[n]||(t[n]=[]),n}var t={};return{has:function(e){for(var n in t)if(t[n].indexOf(e)>=0)return!0;return!1},register:function(e,r){r=n(r),t[r].push(e)},clear:function(){t={}},list:function(e){return e=n(e),t[e]}}}(),e.registerChart=function(t,n){e.chartRegistry.register(t,n)},e.hasChart=function(t){return e.chartRegistry.has(t)},e.deregisterAllCharts=function(){e.chartRegistry.clear()},e.filterAll=function(t){var n=e.chartRegistry.list(t);for(var r=0;r<n.length;++r)n[r].filterAll()},e.renderAll=function(t){var n=e.chartRegistry.list(t);for(var r=0;r<n.length;++r)n[r].render();e._renderlet!==null&&e._renderlet(t)},e.redrawAll=function(t){var n=e.chartRegistry.list(t);for(var r=0;r<n.length;++r)n[r].redraw();e._renderlet!==null&&e._renderlet(t)},e.transition=function(e,t,n){if(t<=0||t===undefined)return e;var r=e.transition().duration(t);return n instanceof Function&&n(r),r},e.units={},e.units.integers=function(e,t){return Math.abs(t-e)},e.units.ordinal=function(e,t,n){return n},e.units.fp={},e.units.fp.precision=function(e){var t=function(e,n){return Math.ceil(Math.abs((n-e)/t.resolution))};return t.resolution=e,t},e.round={},e.round.floor=function(e){return Math.floor(e)},e.round.ceil=function(e){return Math.ceil(e)},e.round.round=function(e){return Math.round(e)},e.override=function(e,t,n){var r=e[t];e["_"+t]=r,e[t]=n},e.renderlet=function(t){return arguments.length?(e._renderlet=t,e):e._renderlet},e.instanceOfChart=function(e){return e instanceof Object&&e.__dc_flag__},e.errors={},e.errors.Exception=function(e){var t=e!==undefined?e:"Unexpected internal error";this.message=t,this.toString=function(){return t}},e.errors.InvalidStateException=function(){e.errors.Exception.apply(this,arguments)},e.dateFormat=d3.time.format("%m/%d/%Y"),e.printers={},e.printers.filters=function(t){var n="";for(var r=0;r<t.length;++r)r>0&&(n+=", "),n+=e.printers.filter(t[r]);return n},e.printers.filter=function(t){var n="";return t&&(t instanceof Array?t.length>=2?n="["+e.utils.printSingleValue(t[0])+" -> "+e.utils.printSingleValue(t[1])+"]":t.length>=1&&(n=e.utils.printSingleValue(t[0])):n=e.utils.printSingleValue(t)),n},e.utils={},e.utils.printSingleValue=function(t){var n=""+t;return t instanceof Date?n=e.dateFormat(t):typeof t=="string"?n=t:e.utils.isFloat(t)?n=e.utils.printSingleValue.fformat(t):e.utils.isInteger(t)&&(n=Math.round(t)),n},e.utils.printSingleValue.fformat=d3.format(".2f"),e.utils.add=function(e,t){typeof t=="string"&&(t=t.replace("%",""));if(e instanceof Date){typeof t=="string"&&(t=+t);var n=new Date;return n.setTime(e.getTime()),n.setDate(e.getDate()+t),n}if(typeof t=="string"){var r=+t/100;return e>0?e*(1+r):e*(1-r)}return e+t},e.utils.subtract=function(e,t){typeof t=="string"&&(t=t.replace("%",""));if(e instanceof Date){typeof t=="string"&&(t=+t);var n=new Date;return n.setTime(e.getTime()),n.setDate(e.getDate()-t),n}if(typeof t=="string"){var r=+t/100;return e<0?e*(1+r):e*(1-r)}return e-t},e.utils.GroupStack=function(){function r(t){e[t]||(e[t]=[])}var e=[[]],t=[],n;this.setDataPoint=function(t,n,i){r(t),e[t][n]=i},this.getDataPoint=function(t,n){r(t);var i=e[t][n];return i===undefined&&(i=0),i},this.addGroup=function(e,r){return r||(r=n),t.push([e,r]),t.length-1},this.getGroupByIndex=function(e){return t[e][0]},this.getAccessorByIndex=function(e){return t[e][1]},this.size=function(){return t.length},this.clear=function(){e=[],t=[]},this.setDefaultAccessor=function(e){n=e},this.getDataLayers=function(){return e},this.toLayers=function(){var t=[];for(var n=0;n<e.length;++n){var r={index:n,points:[]},i=e[n];for(var s=0;s<i.length;++s)r.points.push(i[s]);t.push(r)}return t}},e.utils.isNumber=function(e){return e===+e},e.utils.isFloat=function(e){return e===+e&&e!==(e|0)},e.utils.isInteger=function(e){return e===+e&&e===(e|0)},e.utils.isNegligible=function(t){return t===undefined||t<e.constants.NEGLIGIBLE_NUMBER&&t>-e.constants.NEGLIGIBLE_NUMBER},e.utils.groupMax=function(t,n){var r=d3.max(t.all(),function(e){return n(e)});return e.utils.isNegligible(r)&&(r=0),r},e.utils.groupMin=function(t,n){var r=d3.min(t.all(),function(e){return n(e)});return e.utils.isNegligible(r)&&(r=0),r},e.utils.nameToId=function(e){return e.toLowerCase().replace(/[\s]/g,"_").replace(/[\.']/g,"")},e.utils.appendOrSelect=function(e,t){var n=e.select(t);return n.empty()&&(n=e.append(t)),n},e.utils.createLegendable=function(e,t,n,r){var i={name:e.getGroupName(t,r),data:t};return typeof e.colors=="function"&&(i.color=e.colors()(n)),i},e.utils.safeNumber=function(t){return e.utils.isNumber(+t)?+t:0},e.events={current:null},e.events.trigger=function(t,n){if(!n){t();return}e.events.current=t,setTimeout(function(){t==e.events.current&&t()},n)},e.cumulative={},e.cumulative.Base=function(){this._keyIndex=[],this._map={},this.sanitizeKey=function(e){return e+="",e},this.clear=function(){this._keyIndex=[],this._map={}},this.size=function(){return this._keyIndex.length},this.getValueByKey=function(e){e=this.sanitizeKey(e);var t=this._map[e];return t},this.setValueByKey=function(e,t){return e=this.sanitizeKey(e),this._map[e]=t},this.indexOfKey=function(e){return e=this.sanitizeKey(e),this._keyIndex.indexOf(e)},this.addToIndex=function(e){e=this.sanitizeKey(e),this._keyIndex.push(e)},this.getKeyByIndex=function(e){return this._keyIndex[e]}},e.cumulative.Sum=function(){e.cumulative.Base.apply(this,arguments),this.add=function(e,t){t||(t=0),this.getValueByKey(e)===undefined?(this.addToIndex(e),this.setValueByKey(e,t)):this.setValueByKey(e,this.getValueByKey(e)+t)},this.minus=function(e,t){this.setValueByKey(e,this.getValueByKey(e)-t)},this.cumulativeSum=function(e){var t=this.indexOfKey(e);if(t<0)return 0;var n=0;for(var r=0;r<=t;++r){var i=this.getKeyByIndex(r);n+=this.getValueByKey(i)}return n}},e.cumulative.Sum.prototype=new e.cumulative.Base,e.cumulative.CountUnique=function(){function t(e){var t=0,n;for(n in e)e.hasOwnProperty(n)&&t++;return t}e.cumulative.Base.apply(this,arguments),this.add=function(e,t){this.getValueByKey(e)===undefined&&(this.setValueByKey(e,{}),this.addToIndex(e)),t!==undefined&&(this.getValueByKey(e)[t]===undefined&&(this.getValueByKey(e)[t]=0),this.getValueByKey(e)[t]+=1)},this.minus=function(e,t){this.getValueByKey(e)[t]-=1,this.getValueByKey(e)[t]<=0&&delete this.getValueByKey(e)[t]},this.count=function(e){return t(this.getValueByKey(e))},this.cumulativeCount=function(e){var t=this.indexOfKey(e);if(t<0)return 0;var n=0;for(var r=0;r<=t;++r){var i=this.getKeyByIndex(r);n+=this.count(i)}return n}},e.cumulative.CountUnique.prototype=new e.cumulative.Base,e.baseChart=function(t){function N(e){var n="default";return e?e==t.valueAccessor()?n:e:n}function C(e){x.splice(x.indexOf(e),1),A(),t.invokeFilteredListener(e)}function k(e){x.push(e),A(),t.invokeFilteredListener(e)}function L(){x=[],A(),t.invokeFilteredListener(null)}function A(){if(t.dataSet()&&t.dimension().filter!==undefined){var e=T(t.dimension(),x);x=e?e:x}}function O(){for(var e=0;e<y.length;++e)y[e](t)}t.__dc_flag__=!0;var n,r,i,s,o,u=200,a=200,f=function(e){return e.key},l=function(e){return e.value},c=function(e){return e.key},h=function(e){return e.key},p=!1,d=function(e){return e.key+": "+e.value},v=!1,m=750,g=e.printers.filters,y=[],b=e.constants.DEFAULT_CHART_GROUP,w=function(e){},E={preRender:w,postRender:w,preRedraw:w,postRedraw:w,filtered:w,zoomed:w},S,x=[],T=function(e,t){return e.filter(null),t.length===0?e.filter(null):t.length===1?e.filter(t[0]):e.filterFunction(function(e){return t.indexOf(e)>=0}),t};return t.width=function(e){return arguments.length?(u=e,t):u},t.height=function(e){return arguments.length?(a=e,t):a},t.dimension=function(e){return arguments.length?(n=e,t.expireCache(),t):n},t.group=function(e,n){return arguments.length?(r=e,t.expireCache(),typeof n=="string"&&t.setGroupName(r,n),t):r},t.setGroupName=function(e,t,n){e.__names__||(e.__names__={}),e.__names__[N(n)]=t},t.getGroupName=function(e,t){return e.__names__||(e.__names__={}),e.__names__[N(t)]},t.ordering=function(e){return arguments.length?(c=e,t.expireCache(),t):c},t.computeOrderedGroups=function(e){var n=e?e:t.group().all().slice(0);if(n.length<2)return n;var r=crossfilter.quicksort.by(t.ordering());return r(n,0,n.length)},t.filterAll=function(){return t.filter(null)},t.dataSet=function(){return n!==undefined&&r!==undefined},t.select=function(e){return s.select(e)},t.selectAll=function(e){return s?s.selectAll(e):null},t.anchor=function(n,r){return arguments.length?(e.instanceOfChart(n)?(i=n.anchor(),s=n.root()):(i=n,s=d3.select(i),s.classed(e.constants.CHART_CLASS,!0),e.registerChart(t,r)),b=r,t):i},t.anchorName=function(){var e=t.anchor();return e&&e.id?e.id:e?e.replace("#",""):""},t.root=function(e){return arguments.length?(s=e,t):s},t.svg=function(e){return arguments.length?(o=e,t):o},t.resetSvg=function(){return t.select("svg").remove(),t.generateSvg()},t.generateSvg=function(){return o=t.root().append("svg").attr("width",t.width()).attr("height",t.height()),o},t.filterPrinter=function(e){return arguments.length?(g=e,t):g},t.turnOnControls=function(){return s&&(t.selectAll(".reset").style("display",null),t.selectAll(".filter").text(g(t.filters())).style("display",null)),t},t.turnOffControls=function(){return s&&(t.selectAll(".reset").style("display","none"),t.selectAll(".filter").style("display","none").text(t.filter())),t},t.transitionDuration=function(e){return arguments.length?(m=e,t):m},t.render=function(){E.preRender(t);if(n===undefined)throw new e.errors.InvalidStateException("Mandatory attribute chart.dimension is missing on chart[#"+t.anchorName()+"]");if(r===undefined)throw new e.errors.InvalidStateException("Mandatory attribute chart.group is missing on chart[#"+t.anchorName()+"]");var i=t.doRender();return S&&S.render(),t.activateRenderlets("postRender"),i},t.activateRenderlets=function(e){t.transitionDuration()>0&&o?o.transition().duration(t.transitionDuration()).each("end",function(){O(),e&&E[e](t)}):(O(),e&&E[e](t))},t.redraw=function(){E.preRedraw(t);var e=t.doRedraw();return t.activateRenderlets("postRedraw"),e},t.invokeFilteredListener=function(e){e!==undefined&&E.filtered(t,e)},t.invokeZoomedListener=function(){E.zoomed(t)},t.hasFilter=function(e){return arguments.length?x.indexOf(e)>=0:x.length>0},t.filter=function(e){return arguments.length?(e===null?L():t.hasFilter(e)?C(e):k(e),s!==null&&t.hasFilter()?t.turnOnControls():t.turnOffControls(),t):x.length>0?x[0]:null},t.filters=function(){return x},t.highlightSelected=function(t){d3.select(t).classed(e.constants.SELECTED_CLASS,!0),d3.select(t).classed(e.constants.DESELECTED_CLASS,!1)},t.fadeDeselected=function(t){d3.select(t).classed(e.constants.SELECTED_CLASS,!1),d3.select(t).classed(e.constants.DESELECTED_CLASS,!0)},t.resetHighlight=function(t){d3.select(t).classed(e.constants.SELECTED_CLASS,!1),d3.select(t).classed(e.constants.DESELECTED_CLASS,!1)},t.onClick=function(n){var r=t.keyAccessor()(n);e.events.trigger(function(){t.filter(r),e.redrawAll(t.chartGroup())})},t.filterHandler=function(e){return arguments.length?(T=e,t):T},t.doRender=function(){return t},t.doRedraw=function(){return t},t.legendables=function(){return[]},t.legendHighlight=function(e){},t.legendReset=function(e){},t.keyAccessor=function(e){return arguments.length?(f=e,t):f},t.valueAccessor=function(e){return arguments.length?(l=e,t):l},t.label=function(e){return arguments.length?(h=e,p=!0,t):h},t.renderLabel=function(e){return arguments.length?(p=e,t):p},t.title=function(e){return arguments.length?(d=e,v=!0,t):d},t.renderTitle=function(e){return arguments.length?(v=e,t):v},t.renderlet=function(e){return y.push(e),t},t.chartGroup=function(e){return arguments.length?(b=e,t):b},t.on=function(e,n){return E[e]=n,t},t.expireCache=function(){return t},t.legend=function(e){return arguments.length?(S=e,S.parent(t),t):S},t},e.marginable=function(e){var t={top:10,right:50,bottom:30,left:30};return e.margins=function(n){return arguments.length?(t=n,e):t},e.effectiveWidth=function(){return e.width()-e.margins().left-e.margins().right},e.effectiveHeight=function(){return e.height()-e.margins().top-e.margins().bottom},e},e.coordinateGridChart=function(t){function F(e){t.elasticX()&&!t.isOrdinal()?c.domain([t.xAxisMin(),t.xAxisMax()]):t.isOrdinal()&&c.domain().length===0&&c.domain(t.computeOrderedGroups().map(function(e){return e.key})),t.isOrdinal()?t.prepareOrdinalXAxis():c.range([0,t.xAxisLength()]),p=p.scale(t.x()).orient("bottom"),I(e)}function I(r){var s=r.selectAll("g."+i);if(A){s.empty()&&(s=r.insert("g",":first-child").attr("class",n+" "+i).attr("transform","translate("+t.yAxisX()+","+t.margins().top+")"));var o=p.tickValues()?p.tickValues():c.ticks(p.ticks()[0]),u=s.selectAll("line").data(o),a=u.enter().append("line").attr("x1",function(e){return c(e)}).attr("y1",t.xAxisY()-t.margins().top).attr("x2",function(e){return c(e)}).attr("y2",0).attr("opacity",0);e.transition(a,t.transitionDuration()).attr("opacity",1),e.transition(u,t.transitionDuration()).attr("x1",function(e){return c(e)}).attr("y1",t.xAxisY()-t.margins().top).attr("x2",function(e){return c(e)}).attr("y2",0),u.exit().remove()}else s.selectAll("line").remove()}function q(e){if(b===undefined||t.elasticY())b=d3.scale.linear(),b.domain([t.yAxisMin(),t.yAxisMax()]).rangeRound([t.yAxisHeight(),0]);b.range([t.yAxisHeight(),0]),w=w.scale(b).orient("left"),R(e)}function R(i){var s=i.selectAll("g."+r);if(L){var o=w.tickValues()?w.tickValues():b.ticks(w.ticks()[0]);s.empty()&&(s=i.insert("g",":first-child").attr("class",n+" "+r).attr("transform","translate("+t.yAxisX()+","+t.margins().top+")"));var u=s.selectAll("line").data(o),a=u.enter().append("line").attr("x1",1).attr("y1",function(e){return b(e)}).attr("x2",t.xAxisLength()).attr("y2",function(e){return b(e)}).attr("opacity",0);e.transition(a,t.transitionDuration()).attr("opacity",1),e.transition(u,t.transitionDuration()).attr("x1",1).attr("y1",function(e){return b(e)}).attr("x2",t.xAxisLength()).attr("y2",function(e){return b(e)}),u.exit().remove()}else s.selectAll("line").remove()}function U(){return t.xAxisY()-t.margins().top}function z(e){}function W(n){var r=t.extendBrush();t.redrawBrush(f),t.brushIsEmpty(r)?e.events.trigger(function(){t.filter(null),e.redrawAll(t.chartGroup())}):e.events.trigger(function(){t.filter(null),t.filter([r[0],r[1]]),e.redrawAll(t.chartGroup())},e.constants.EVENT_DELAY)}function X(e){}function V(){return t.anchorName()+"-clip"}function $(){var n=e.utils.appendOrSelect(a,"defs"),r=e.utils.appendOrSelect(n,"clipPath").attr("id",V()),i=j*2;e.utils.appendOrSelect(r,"rect").attr("width",t.xAxisLength()+i).attr("height",t.yAxisHeight()+i)}function J(){B&&t.root().call(d3.behavior.zoom().x(t.x()).scaleExtent(_).on("zoom",function(){t.focus(t.x().domain()),t.invokeZoomedListener(),K()}))}function K(){if(P){var n=t.x().domain();if(D){var r=P.xOriginalDomain(),i=[n[0]<r[0]?n[0]:r[0],n[1]>r[1]?n[1]:r[1]];P.focus(i)}else P.focus(n);P.filter(null),P.filter(n),e.events.trigger(function(){e.redrawAll(t.chartGroup())})}}function Q(e){return e instanceof Array&&e.length>1}var n="grid-line",r="horizontal",i="vertical",s="y-axis-label",o="x-axis-label",u=12;t=e.colorChart(e.marginable(e.baseChart(t))),t.colors(d3.scale.category10());var a,f,l,c,h,p=d3.svg.axis(),d=e.units.integers,v=0,m=!1,g,y=0,b,w=d3.svg.axis(),E=0,S=!1,x,T=0,N=d3.svg.brush(),C=!0,k,L=!1,A=!1,O=!1,M,_=[-10,100],D=!1,P,H,B=!1,j=0;return t.title(function(e){return e.data.key+": "+e.data.value}),t.rescale=function(){M=undefined,t.xUnitCount()},t.rangeChart=function(e){return arguments.length?(P=e,P.focusChart(t),t):P},t.zoomScale=function(e){return arguments.length?(_=e,t):_},t.zoomOutRestrict=function(e){return arguments.length?(D=e,t):D},t.generateG=function(e){return e===undefined?a=t.svg():a=e,f=a.append("g"),l=f.append("g").attr("class","chart-body").attr("transform","translate("+t.margins().left+", "+t.margins().top+")").attr("clip-path","url(#"+V()+")"),f},t.g=function(e){return arguments.length?(f=e,t):f},t.mouseZoomable=function(e){return arguments.length?(B=e,t):B},t.chartBodyG=function(e){return arguments.length?(l=e,t):l},t.x=function(e){return arguments.length?(c=e,h=c.domain(),t):c},t.xOriginalDomain=function(){return h},t.xUnits=function(e){return arguments.length?(d=e,t):d},t.xAxis=function(e){return arguments.length?(p=e,t):p},t.elasticX=function(e){return arguments.length?(m=e,t):m},t.xAxisPadding=function(e){return arguments.length?(v=e,t):v},t.xUnitCount=function(){if(M===undefined){var e=t.xUnits()(t.x().domain()[0],t.x().domain()[1],t.x().domain());e instanceof Array?M=e.length:M=e}return M},t.isOrdinal=function(){return t.xUnits()===e.units.ordinal},t.prepareOrdinalXAxis=function(e){e||(e=t.xUnitCount());var n=[],r=t.xAxisLength()/(e+1),i=r/2;for(var s=0;s<e;s++)n[s]=i,i+=r;c.range(n)},t.renderXAxis=function(n){var r=n.selectAll("g.x");r.empty()&&(r=n.append("g").attr("class","axis x").attr("transform","translate("+t.margins().left+","+t.xAxisY()+")"));var i=n.selectAll("text."+o);i.empty()&&t.xAxisLabel()&&(i=n.append("text").attr("transform","translate("+t.xAxisLength()/2+","+(t.height()-y)+")").attr("class",o).attr("text-anchor","middle").text(t.xAxisLabel())),t.xAxisLabel()&&i.text()!=t.xAxisLabel()&&axisYLab.text(t.xAxisLabel()),e.transition(r,t.transitionDuration()).call(p)},t.xAxisY=function(){return t.height()-t.margins().bottom},t.xAxisLength=function(){return t.effectiveWidth()},t.xAxisLabel=function(e,n){return arguments.length?(g=e,t.margins().bottom-=y,y=n===undefined?u:n,t.margins().bottom+=y,t):g},t.renderYAxis=function(n){var r=n.selectAll("g.y");r.empty()&&(r=n.append("g").attr("class","axis y").attr("transform","translate("+t.yAxisX()+","+t.margins().top+")"));var i=n.selectAll("text."+s);i.empty()&&t.yAxisLabel()&&(i=n.append("text").attr("transform","translate("+T+","+t.yAxisHeight()/2+"),rotate(-90)").attr("class",s).attr("text-anchor","middle").text(t.yAxisLabel())),t.yAxisLabel()&&i.text()!=t.yAxisLabel()&&i.text(t.yAxisLabel()),e.transition(r,t.transitionDuration()).call(w)},t.yAxisX=function(){return t.margins().left},t.yAxisLabel=function(e,n){return arguments.length?(x=e,t.margins().left-=T,T=n===undefined?u:n,t.margins().left+=T,t):x},t.y=function(e){return arguments.length?(b=e,t):b},t.yAxis=function(e){return arguments.length?(w=e,t):w},t.elasticY=function(e){return arguments.length?(S=e,t):S},t.renderHorizontalGridLines=function(e){return arguments.length?(L=e,t):L},t.renderVerticalGridLines=function(e){return arguments.length?(A=e,t):A},t.xAxisMin=function(){var n=d3.min(t.group().all(),function(e){return t.keyAccessor()(e)});return e.utils.subtract(n,v)},t.xAxisMax=function(){var n=d3.max(t.group().all(),function(e){return t.keyAccessor()(e)});return e.utils.add(n,v)},t.yAxisMin=function(){var n=d3.min(t.group().all(),function(e){return t.valueAccessor()(e)});return n=e.utils.subtract(n,E),n},t.yAxisMax=function(){var n=d3.max(t.group().all(),function(e){return t.valueAccessor()(e)});return n=e.utils.add(n,E),n},t.yAxisPadding=function(e){return arguments.length?(E=e,t):E},t.yAxisHeight=function(){return t.effectiveHeight()},t.round=function(e){return arguments.length?(k=e,t):k},e.override(t,"filter",function(e){return arguments.length?(t._filter(e),e?t.brush().extent(e):t.brush().clear(),t):t._filter()}),t.brush=function(e){return arguments.length?(N=e,t):N},t.renderBrush=function(e){t.isOrdinal()&&(C=!1);if(C){N.on("brushstart",z).on("brush",W).on("brushend",X);var n=e.append("g").attr("class","brush").attr("transform","translate("+t.margins().left+","+t.margins().top+")").call(N.x(t.x()));n.selectAll("rect").attr("height",U()),n.selectAll(".resize").append("path").attr("d",t.resizeHandlePath),t.hasFilter()&&t.redrawBrush(e)}},t.extendBrush=function(){var e=N.extent();return t.round()&&(e[0]=e.map(t.round())[0],e[1]=e.map(t.round())[1],f.select(".brush").call(N.extent(e))),e},t.brushIsEmpty=function(e){return N.empty()||!e||e[1]<=e[0]},t.redrawBrush=function(e){if(C){t.filter()&&t.brush().empty()&&t.brush().extent(t.filter());var n=e.select("g.brush");n.call(t.brush().x(t.x())),n.selectAll("rect").attr("height",U())}t.fadeDeselectedArea()},t.fadeDeselectedArea=function(){},t.resizeHandlePath=function(e){var t=+(e=="e"),n=t?1:-1,r=U()/3;return"M"+.5*n+","+r+"A6,6 0 0 "+t+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+t+" "+.5*n+","+2*r+"Z"+"M"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)},t.clipPadding=function(e){return arguments.length?(j=e,t):j},t.doRender=function(){if(c===undefined)throw new e.errors.InvalidStateException("Mandatory attribute chart.x is missing on chart[#"+t.anchorName()+"]");return t.resetSvg(),t.dataSet()&&(t.generateG(),$(),F(t.g()),q(t.g()),t.plotData(),t.renderXAxis(t.g()),t.renderYAxis(t.g()),t.renderBrush(t.g()),J()),t},t.doRedraw=function(){return F(t.g()),q(t.g()),t.plotData(),t.elasticY()&&t.renderYAxis(t.g()),(t.elasticX()||O)&&t.renderXAxis(t.g()),t.redrawBrush(t.g()),t},t.subRender=function(){return t.dataSet()&&t.plotData(),t},t.brushOn=function(e){return arguments.length?(C=e,t):C},t.getDataWithinXDomain=function(e){var n=[];return t.isOrdinal()?n=e.all():e.all().forEach(function(e){var r=t.keyAccessor()(e);r>=t.x().domain()[0]&&r<=t.x().domain()[1]&&n.push(e)}),n},t.focus=function(e){O=!0,Q(e)?t.x().domain(e):t.x().domain(t.xOriginalDomain()),t.rescale(),t.redraw(),Q(e)||(O=!1)},t.refocused=function(){return O},t.focusChart=function(n){return arguments.length?(H=n,t.on("filtered",function(t){e.events.trigger(function(){H.focus(t.filter()),H.filter(t.filter()),e.redrawAll(t.chartGroup())})}),t):H},t},e.colorChart=function(e){var t=d3.scale.category20c(),n=[0,t.range().length],r=function(r){var i=n[0],s=n[1];isNaN(r)&&(r=0);if(s===null)return t(r);var o=e.colors().range().length,u=(s-i)/o,a=Math.abs(Math.min(o-1,Math.round((r-i)/u)));return e.colors()(a)},i=function(e,t){return t};return e.colors=function(r){if(!arguments.length)return t;if(r instanceof Array){t=d3.scale.ordinal().range(r);var i=[];for(var s=0;s<r.length;++s)i.push(s);t.domain(i)}else t=r;return n=[0,t.range().length],e},e.colorCalculator=function(t){return arguments.length?(r=t,e):r},e.getColor=function(e,t){return r(i(e,t))},e.colorAccessor=function(t){return arguments.length?(i=t,e):i},e.colorDomain=function(t){return arguments.length?(n=t,e):n},e},e.stackableChart=function(t){function a(){var e=[];if(t.x()){var n=t.x().domain();t.stackLayers().forEach(function(t){t.points.forEach(function(t){t.x>=n[0]&&t.x<=n[n.length-1]&&e.push(t)})})}else t.stackLayers().forEach(function(t){e=e.concat(t.points)});return e}function f(e,n){return t.getKeyAccessorByIndex(e)(n)}function l(e,n){return t.getValueAccessorByIndex(e)(n)}function c(e,t){for(var r=0;r<e.length;++r){var i=e[r],s=f(t,i),o=l(t,i);n.setDataPoint(t,r,{data:i,x:s,y:o})}}var n=new e.utils.GroupStack,r=d3.layout.stack().offset("zero").order("default").values(function(e){return e.points}),i,s,o,u;return t.stack=function(e,r,i){return typeof r=="string"?t.setGroupName(e,r,i):typeof r=="function"&&(i=r),n.setDefaultAccessor(t.valueAccessor()),n.addGroup(e,i),t.expireCache(),t},t.expireCache=function(){return i=null,s=null,o=null,u=null,t},t.allGroups=function(){if(i===null){i=[],i.push(t.group());for(var e=0;e<n.size();++e)i.push(n.getGroupByIndex(e))}return i},t.allValueAccessors=function(){if(s===null){s=[],s.push(t.valueAccessor());for(var e=0;e<n.size();++e)s.push(n.getAccessorByIndex(e))}return s},t.getValueAccessorByIndex=function(e){return t.allValueAccessors()[e]},t.yAxisMin=function(){var n,r=a();return n=d3.min(r,function(e){return e.y+e.y0<e.y0?e.y+e.y0:e.y0}),n=e.utils.subtract(n,t.yAxisPadding()),n},t.yAxisMax=function(){var n,r=a();return n=d3.max(r,function(e){return e.y+e.y0}),n=e.utils.add(n,t.yAxisPadding()),n},t.allKeyAccessors=function(){if(o===null){o=[],o.push(t.keyAccessor());for(var e=0;e<n.size();++e)o.push(t.keyAccessor())}return o},t.getKeyAccessorByIndex=function(e){return t.allKeyAccessors()[e]},t.xAxisMin=function(){var n=null,r=t.allGroups();for(var i=0;i<r.length;++i){var s=r[i],o=e.utils.groupMin(s,t.getKeyAccessorByIndex(i));if(n===null||n>o)n=o}return e.utils.subtract(n,t.xAxisPadding())},t.xAxisMax=function(){var n=null,r=t.allGroups();for(var i=0;i<r.length;++i){var s=r[i],o=e.utils.groupMax(s,t.getKeyAccessorByIndex(i));if(n===null||n<o)n=o}return e.utils.add(n,t.xAxisPadding())},t.calculateDataPointMatrixForAll=function(){var e=t.allGroups();for(var n=0;n<e.length;++n){var r=e[n],i=r.all();c(i,n)}},t.getChartStack=function(){return n},e.override(t,"valueAccessor",function(e){return arguments.length?(t.expireCache(),t._valueAccessor(e)):t._valueAccessor()}),e.override(t,"keyAccessor",function(e){return arguments.length?(t.expireCache(),t._keyAccessor(e)):t._keyAccessor()}),t.stackLayout=function(e){return arguments.length?(r=e,t):r},t.stackLayers=function(e){if(!arguments.length)return u===null&&(t.calculateDataPointMatrixForAll(),u=t.stackLayout()(n.toLayers())),u;u=e},t.legendables=function(){var n=[];return i.forEach(function(r,i){n.push(e.utils.createLegendable(t,r,i,t.getValueAccessorByIndex(i)))}),n},t},e.abstractBubbleChart=function(t){var n=.3,r=10;t.BUBBLE_NODE_CLASS="node",t.BUBBLE_CLASS="bubble",t.MIN_RADIUS=10,t=e.colorChart(t),t.renderLabel(!0),t.renderTitle(!1);var i=d3.scale.linear().domain([0,100]),s=function(e){return e.r};t.r=function(e){return arguments.length?(i=e,t):i},t.radiusValueAccessor=function(e){return arguments.length?(s=e,t):s},t.rMin=function(){var e=d3.min(t.group().all(),function(e){return t.radiusValueAccessor()(e)});return e},t.rMax=function(){var e=d3.max(t.group().all(),function(e){return t.radiusValueAccessor()(e)});return e},t.bubbleR=function(e){var n=t.radiusValueAccessor()(e),r=t.r()(n);if(isNaN(r)||n<=0)r=0;return r};var o=function(e){return t.label()(e)},u=function(e){return t.bubbleR(e)>r?1:0};t.doRenderLabel=function(n){if(t.renderLabel()){var r=n.select("text");r.empty()&&(r=n.append("text").attr("text-anchor","middle").attr("dy",".3em").on("click",t.onClick)),r.attr("opacity",0).text(o),e.transition(r,t.transitionDuration()).attr("opacity",u)}},t.doUpdateLabels=function(n){if(t.renderLabel()){var r=n.selectAll("text").text(o);e.transition(r,t.transitionDuration()).attr("opacity",u)}};var a=function(e){return t.title()(e)};return t.doRenderTitles=function(e){if(t.renderTitle()){var n=e.select("title");n.empty()&&e.append("title").text(a)}},t.doUpdateTitles=function(e){t.renderTitle()&&e.selectAll("title").text(a)},t.minRadiusWithLabel=function(e){return arguments.length?(r=e,t):r},t.maxBubbleRelativeSize=function(e){return arguments.length?(n=e,t):n},t.initBubbleColor=function(n,r){return this[e.constants.NODE_INDEX_NAME]=r,t.getColor(n,r)},t.updateBubbleColor=function(n,r){return t.getColor(n,this[e.constants.NODE_INDEX_NAME])},t.fadeDeselectedArea=function(){t.hasFilter()?t.selectAll("g."+t.BUBBLE_NODE_CLASS).each(function(e){t.isSelectedNode(e)?t.highlightSelected(this):t.fadeDeselected(this)}):t.selectAll("g."+t.BUBBLE_NODE_CLASS).each(function(e){t.resetHighlight(this)})},t.isSelectedNode=function(e){return t.hasFilter(e.key)},t.onClick=function(n){var r=n.key;e.events.trigger(function(){t.filter(r),e.redrawAll(t.chartGroup())})},t},e.pieChart=function(t,n){function p(){if(l==Infinity)return f.computeOrderedGroups();var e=f.group().top(l);return e=f.computeOrderedGroups(e),h(e),e}function d(){if(f.dataSet()){var e=C();s=s?s:d3.min([f.width(),f.height()])/2;var t=f.buildArcs(),n=e(p());if(u){var r=u.selectAll("g."+i).data(n);v(r,t,n),w(n,t),T(r),N()}}}function v(e,t,n){var r=m(e);g(r,t),y(r),b(n,t)}function m(e){var t=e.enter().append("g").attr("class",function(e,t){return i+" _"+t});return t}function g(e,t){var n=e.append("path").attr("fill",function(e,t){return f.getColor(e,t)}).on("click",M).attr("d",function(e,n){return _(e,n,t)});n.transition().duration(f.transitionDuration()).attrTween("d",A)}function y(e){f.renderTitle()&&e.append("title").text(function(e){return f.title()(e)})}function b(t,n){if(f.renderLabel()){var r=u.selectAll("text."+i).data(t);r.exit().remove();var o=r.enter().append("text").attr("class",function(e,t){return i+" _"+t}).on("click",M);e.transition(o,f.transitionDuration()).attr("transform",function(e){e.innerRadius=f.innerRadius(),e.outerRadius=s;var t=n.centroid(e);return isNaN(t[0])||isNaN(t[1])?"translate(0,0)":"translate("+t+")"}).attr("text-anchor","middle").text(function(e){var t=e.data;return L(t)||k(e)?"":f.label()(e)})}}function w(e,t){E(e,t),S(e,t),x(e)}function E(t,n){var r=u.selectAll("g."+i).data(t).select("path").attr("d",function(e,t){return _(e,t,n)});e.transition(r,f.transitionDuration(),function(e){e.attrTween("d",A)}).attr("fill",function(e,t){return f.getColor(e,t)})}function S(t,n){if(f.renderLabel()){var r=u.selectAll("text."+i).data(t);e.transition(r,f.transitionDuration()).attr("transform",function(e){e.innerRadius=f.innerRadius(),e.outerRadius=s;var t=n.centroid(e);return isNaN(t[0])||isNaN(t[1])?"translate(0,0)":"translate("+t+")"}).attr("text-anchor","middle").text(function(e){var t=e.data;return L(t)||k(e)?"":f.label()(e)})}}function x(e){f.renderTitle()&&u.selectAll("g."+i).data(e).select("title").text(function(e){return f.title()(e)})}function T(e){e.exit().remove()}function N(){f.hasFilter()?f.selectAll("g."+i).each(function(e){f.isSelectedSlice(e)?f.highlightSelected(this):f.fadeDeselected(this)}):f.selectAll("g."+i).each(function(e){f.resetHighlight(this)})}function C(){return d3.layout.pie().sort(null).value(function(e){return f.valueAccessor()(e)})}function k(e){var t=e.endAngle-e.startAngle;return isNaN(t)||t<a}function L(e){return f.valueAccessor()(e)===0}function A(e){e.innerRadius=f.innerRadius();var t=this._current;O(t)&&(t={startAngle:0,endAngle:0});var n=d3.interpolate(t,e);return this._current=n(0),function(e){return _(n(e),0,f.buildArcs())}}function O(e){return!e||isNaN(e.startAngle)||isNaN(e.endAngle)}function M(e){e.data.others&&e.data.others.forEach(function(e){f.filter(e)}),f.onClick(e.data)}function _(e,t,n){var r=n(e,t);return r.indexOf("NaN")>=0&&(r="M0,0"),r}var r=.5,i="pie-slice",s,o=0,u,a=r,f=e.colorChart(e.baseChart({})),l=Infinity,c="Others",h=function(e){var t=d3.sum(e,f.valueAccessor()),n=f.group().all(),r=d3.sum(n,f.valueAccessor()),i=e.map(f.keyAccessor()),s=n.map(f.keyAccessor()),o=d3.set(i),u=s.filter(function(e){return!o.has(e)});e.push({others:u,key:c,value:r-t})};return f.label(function(e){return f.keyAccessor()(e.data)}),f.renderLabel(!0),f.title(function(e){return f.keyAccessor()(e.data)+": "+f.valueAccessor()(e.data)}),f.transitionDuration(350),f.doRender=function(){return f.resetSvg(),u=f.svg().append("g").attr("transform","translate("+f.cx()+","+f.cy()+")"),d(),f},f.innerRadius=function(e){return arguments.length?(o=e,f):o},f.radius=function(e){return arguments.length?(s=e,f):s},f.cx=function(){return f.width()/2},f.cy=function(){return f.height()/2},f.buildArcs=function(){return d3.svg.arc().outerRadius(s).innerRadius(o)},f.isSelectedSlice=function(e){return f.hasFilter(f.keyAccessor()(e.data))},f.doRedraw=function(){return d(),f},f.minAngleForLabel=function(e){return arguments.length?(a=e,f):a},f.slicesCap=function(e){return arguments.length?(l=e,f):l},f.othersLabel=function(e){return arguments.length?(c=e,f):c},f.othersGrouper=function(e){return arguments.length?(h=e,f):h},f.anchor(t,n)},e.barChart=function(t,n){function l(t){return e.utils.safeNumber(Math.abs(s.y()(t.y+t.y0)-s.y()(t.y0)))}function c(t,n,r){var i=t.selectAll("rect.bar").data(n.points);i.enter().append("rect").attr("class","bar").attr("fill",function(e){return s.colors()(r)}).append("title").text(s.title()),s.isOrdinal()&&i.on("click",d),e.transition(i,s.transitionDuration()).attr("x",function(t){var n=s.x()(t.x);if(u||s.isOrdinal())n-=f/2;return e.utils.safeNumber(n)}).attr("y",function(t){var n=s.y()(t.y+t.y0);return t.y<0&&(n-=l(t)),e.utils.safeNumber(n)}).attr("width",f).attr("height",function(e){return l(e)}).select("title").text(s.title()),e.transition(i.exit(),s.transitionDuration()).attr("height",0).remove()}function h(){if(f===undefined){var e=s.isOrdinal()?p()+1:p(),t=Math.floor((s.xAxisLength()-(e-1)*o)/e);if(t==Infinity||isNaN(t)||t<r)t=r;f=t}}function p(){return a===undefined&&(a=s.xUnitCount()),a}function d(e){s.onClick(e.data)}var r=1,i=2,s=e.stackableChart(e.coordinateGridChart({})),o=i,u=!1,a,f;return e.override(s,"rescale",function(){s._rescale(),a=undefined,f=undefined,p()}),s.plotData=function(){var e=s.chartBodyG().selectAll("g.stack").data(s.stackLayers());h(),e.enter().append("g").attr("class",function(e,t){return"stack _"+t}),e.each(function(e,t){var n=d3.select(this);c(n,e,t)}),s.stackLayers(null)},s.fadeDeselectedArea=function(){var t=s.chartBodyG().selectAll("rect.bar"),n=s.brush().extent();if(s.isOrdinal())s.hasFilter()?(t.classed(e.constants.SELECTED_CLASS,function(e){return s.hasFilter(s.keyAccessor()(e.data))}),t.classed(e.constants.DESELECTED_CLASS,function(e){return!s.hasFilter(s.keyAccessor()(e.data))})):(t.classed(e.constants.SELECTED_CLASS,!1),t.classed(e.constants.DESELECTED_CLASS,!1));else if(!s.brushIsEmpty(n)){var r=n[0],i=n[1];t.classed(e.constants.DESELECTED_CLASS,function(e){var t=s.keyAccessor()(e.data);return t<r||t>=i})}else t.classed(e.constants.DESELECTED_CLASS,!1)},s.centerBar=function(e){return arguments.length?(u=e,s):u},s.gap=function(e){return arguments.length?(o=e,s):o},s.extendBrush=function(){var e=s.brush().extent();return s.round()&&!u&&(e[0]=e.map(s.round())[0],e[1]=e.map(s.round())[1],s.chartBodyG().select(".brush").call(s.brush().extent(e))),e},s.legendHighlight=function(e){s.select(".chart-body").selectAll("rect.bar").filter(function(){return d3.select(this).attr("fill")==e.color}).classed("highlight",!0),s.select(".chart-body").selectAll("rect.bar").filter(function(){return d3.select(this).attr("fill")!=e.color}).classed("fadeout",!0)},s.legendReset=function(e){s.selectAll(".chart-body").selectAll("rect.bar").filter(function(){return d3.select(this).attr("fill")==e.color}).classed("highlight",!1),s.selectAll(".chart-body").selectAll("rect.bar").filter(function(){return d3.select(this).attr("fill")!=e.color}).classed("fadeout",!1)},s.anchor(t,n)},e.lineChart=function(t,n){function p(t,n){var r=d3.svg.line().x(function(e){return a.x()(e.x)}).y(function(e){return a.y()(e.y+e.y0)}).interpolate(c).tension(h);t.append("path").attr("class","line").attr("stroke",function(e,t){return a.colors()(t)}).attr("fill",function(e,t){return a.colors()(t)}),e.transition(n.select("path.line"),a.transitionDuration()).attr("d",function(e){return v(r(e.points))})}function d(t,n){if(f){var r=d3.svg.area().x(function(e){return a.x()(e.x)}).y(function(e){return a.y()(e.y+e.y0)}).y0(function(e){return a.y()(e.y0)}).interpolate(c).tension(h);t.append("path").attr("class","area").attr("fill",function(e,t){return a.colors()(t)}).attr("d",function(e){return v(r(e.points))}),e.transition(n.select("path.area"),a.transitionDuration()).attr("d",function(e){return v(r(e.points))})}}function v(e){return!e||e.indexOf("NaN")>=0?"M0,0":e}function m(t){a.brushOn()||t.each(function(t,n){var r=d3.select(this),o=r.select("g."+i);o.empty()&&(o=r.append("g").attr("class",i)),g(o);var u=o.selectAll("circle."+s).data(o.datum().points);u.enter().append("circle").attr("class",s).attr("r",l).attr("fill",function(e){return a.colors()(n)}).style("fill-opacity",1e-6).style("stroke-opacity",1e-6).on("mousemove",function(e){var t=d3.select(this);y(t),b(t,o)}).on("mouseout",function(e){var t=d3.select(this);w(t),E(o)}).append("title").text(a.title()),u.attr("cx",function(t){return e.utils.safeNumber(a.x()(t.x))}).attr("cy",function(t){return e.utils.safeNumber(a.y()(t.y+t.y0))}).select("title").text(a.title()),u.exit().remove()})}function g(e){var t=e.select("path."+o).empty()?e.append("path").attr("class",o):e.select("path."+o);t.style("display","none").attr("stroke-dasharray","5,5");var n=e.select("path."+u).empty()?e.append("path").attr("class",u):e.select("path."+u);n.style("display","none").attr("stroke-dasharray","5,5")}function y(e){return e.style("fill-opacity",.8),e.style("stroke-opacity",.8),e}function b(e,t){var n=e.attr("cx"),r=e.attr("cy");t.select("path."+o).style("display","").attr("d","M0 "+r+"L"+n+" "+r),t.select("path."+u).style("display","").attr("d","M"+n+" "+a.yAxisHeight()+"L"+n+" "+r)}function w(e){e.style("fill-opacity",1e-6).style("stroke-opacity",1e-6)}function E(e){e.select("path."+o).style("display","none"),e.select("path."+u).style("display","none")}var r=5,i="dc-tooltip",s="dot",o="yRef",u="xRef",a=e.stackableChart(e.coordinateGridChart({})),f=!1,l=r,c="linear",h=.7;return a.transitionDuration(500),a.plotData=function(){var e=a.chartBodyG().selectAll("g.stack").data(a.stackLayers()),t=e.enter().append("g").attr("class",function(e,t){return"stack _"+t});p(t,e),d(t,e),m(e),a.stackLayers(null)},a.interpolate=function(e){return arguments.length?(c=e,a):c},a.tension=function(e){return arguments.length?(h=e,a):h},a.renderArea=function(e){return arguments.length?(f=e,a):f},a.dotRadius=function(e){return arguments.length?(l=e,a):l},a.legendHighlight=function(e){a.selectAll(".chart-body").selectAll("path").filter(function(){return d3.select(this).attr("fill")==e.color}).classed("highlight",!0),a.selectAll(".chart-body").selectAll("path").filter(function(){return d3.select(this).attr("fill")!=e.color}).classed("fadeout",!0)},a.legendReset=function(e){a.selectAll(".chart-body").selectAll("path").filter(function(){return d3.select(this).attr("fill")==e.color}).classed("highlight",!1),a.selectAll(".chart-body").selectAll("path").filter(function(){return d3.select(this).attr("fill")!=e.color}).classed("fadeout",!1)},a.anchor(t,n)},e.dataCount=function(t,n){var r=d3.format(",d"),i=e.baseChart({});return i.doRender=function(){return i.selectAll(".total-count").text(r(i.dimension().size())),i.selectAll(".filter-count").text(r(i.group().value())),i},i.doRedraw=function(){return i.doRender()},i.anchor(t,n)},e.dataTable=function(t,n){function p(){var e=u.root().selectAll("tbody").data(d(),function(e){return u.keyAccessor()(e)}),t=e.enter().append("tbody");return t.append("tr").attr("class",o).append("td").attr("class",r).attr("colspan",f.length).html(function(e){return u.keyAccessor()(e)}),e.exit().remove(),t}function d(){h||(h=crossfilter.quicksort.by(l));var e=u.dimension().top(a);return d3.nest().key(u.group()).sortKeys(c).sortValues(c).entries(h(e,0,e.length))}function v(e){var t=e.order().selectAll("tr."+i).data(function(e){return e.values}),n=t.enter().append("tr").attr("class",i);for(var r=0;r<f.length;++r){var o=f[r];n.append("td").attr("class",s+" _"+r).html(function(e){return o(e)})}return t.exit().remove(),t}var r="dc-table-label",i="dc-table-row",s="dc-table-column",o="dc-table-group",u=e.baseChart({}),a=25,f=[],l=function(e){return e},c=d3.ascending,h;return u.doRender=function(){return u.selectAll("tbody").remove(),v(p()),u},u.doRedraw=function(){return u.doRender()},u.size=function(e){return arguments.length?(a=e,u):a},u.columns=function(e){return arguments.length?(f=e,u):f},u.sortBy=function(e){return arguments.length?(l=e,u):l},u.order=function(e){return arguments.length?(c=e,u):c},u.anchor(t,n)},e.bubbleChart=function(t,n){function o(t){var n=t.enter().append("g");n.attr("class",r.BUBBLE_NODE_CLASS).attr("transform",s).append("circle").attr("class",function(e,t){return r.BUBBLE_CLASS+" _"+t}).on("click",r.onClick).attr("fill",r.initBubbleColor).attr("r",0),e.transition(t,r.transitionDuration()).attr("r",function(e){return r.bubbleR(e)}).attr("opacity",function(e){return r.bubbleR(e)>0?1:0}),r.doRenderLabel(n),r.doRenderTitles(n)}function u(t){e.transition(t,r.transitionDuration()).attr("transform",s).selectAll("circle."+r.BUBBLE_CLASS).attr("fill",r.updateBubbleColor).attr("r",function(e){return r.bubbleR(e)}).attr("opacity",function(e){return r.bubbleR(e)>0?1:0}),r.doUpdateLabels(t),r.doUpdateTitles(t)}function a(e){e.exit().remove()}function f(e){var t=r.x()(r.keyAccessor()(e));return isNaN(t)&&(t=0),t}function l(e){var t=r.y()(r.valueAccessor()(e));return isNaN(t)&&(t=0),t}var r=e.abstractBubbleChart(e.coordinateGridChart({})),i=!1;r.transitionDuration(750);var s=function(e){return"translate("+f(e)+","+l(e)+")"};return r.elasticRadius=function(e){return arguments.length?(i=e,r):i},r.plotData=function(){i&&r.r().domain([r.rMin(),r.rMax()]),r.r().range([r.MIN_RADIUS,r.xAxisLength()*r.maxBubbleRelativeSize()]);var e=r.chartBodyG().selectAll("g."+r.BUBBLE_NODE_CLASS).data(r.group().all());o(e),u(e),a(e),r.fadeDeselectedArea()},r.renderBrush=function(e){},r.redrawBrush=function(e){r.fadeDeselectedArea()},r.anchor(t,n)},e.compositeChart=function(t,n){function o(e,t){e.generateG(i.g()),e.g().attr("class",r+" _"+t)}function u(){var e=[];for(var t=0;t<s.length;++t)e.push(s[t].yAxisMin());return e}function a(){var e=[];for(var t=0;t<s.length;++t)e.push(s[t].yAxisMax());return e}function f(){var e=[];for(var t=0;t<s.length;++t)e.push(s[t].xAxisMin());return e}function l(){var e=[];for(var t=0;t<s.length;++t)e.push(s[t].xAxisMax());return e}var r="sub",i=e.coordinateGridChart({}),s=[];return i.transitionDuration(500),e.override(i,"generateG",function(){var e=this._generateG();for(var t=0;t<s.length;++t){var n=s[t];o(n,t),n.dimension()===undefined&&n.dimension(i.dimension()),n.group()===undefined&&n.group(i.group()),n.chartGroup(i.chartGroup()),n.svg(i.svg()),n.xUnits(i.xUnits()),n.transitionDuration(i.transitionDuration()),n.brushOn(i.brushOn())}return e}),i.plotData=function(){for(var e=0;e<s.length;++e){var t=s[e];t.g()===undefined&&o(t,e),t.x(i.x()),t.y(i.y()),t.xAxis(i.xAxis()),t.yAxis(i.yAxis()),t.plotData(),t.activateRenderlets()}},i.fadeDeselectedArea=function(){for(var e=0;e<s.length;++e){var t=s[e];t.brush(i.brush()),t.fadeDeselectedArea()}},i.compose=function(e){s=e;for(var t=0;t<s.length;++t){var n=s[t];n.height(i.height()),n.width(i.width()),n.margins(i.margins())}return i},i.children=function(){return s},i.yAxisMin=function(){return d3.min(u())},i.yAxisMax=function(){return e.utils.add(d3.max(a()),i.yAxisPadding())},i.xAxisMin=function(){return e.utils.subtract(d3.min(f()),i.xAxisPadding())},i.xAxisMax=function(){return e.utils.add(d3.max(l()),i.xAxisPadding())},i.legendables=function(){var t=[];for(var n=0;n<s.length;++n){var r=s[n];r.allGroups().forEach(function(n,i){t.push(e.utils.createLegendable(r,n,i,r.getValueAccessorByIndex(i)))})}return t},i.legendHighlight=function(e){for(var t=0;t<s.length;++t){var n=s[t];n.legendHighlight(e)}},i.legendReset=function(e){for(var t=0;t<s.length;++t){var n=s[t];n.legendReset(e)}},i.anchor(t,n)},e.geoChoroplethChart=function(t,n){function u(t){var n=e.utils.groupMax(r.group(),r.valueAccessor()),i=a();if(f(t)){var s=l(t);m(s,t,i,n),g(s,t,i)}}function a(){var e={},t=r.group().all();for(var n=0;n<t.length;++n)e[r.keyAccessor()(t[n])]=r.valueAccessor()(t[n]);return e}function f(e){return v(e).keyAccessor}function l(t){var n=r.svg().selectAll(c(t)).classed("selected",function(e){return h(t,e)}).classed("deselected",function(e){return p(t,e)}).attr("class",function(n){var r=v(t).name,i=e.utils.nameToId(v(t).keyAccessor(n)),s=r+" "+i;return h(t,n)&&(s+=" selected"),p(t,n)&&(s+=" deselected"),s});return n}function c(e){return"g.layer"+e+" g."+v(e).name}function h(e,t){return r.hasFilter()&&r.hasFilter(d(e,t))}function p(e,t){return r.hasFilter()&&!r.hasFilter(d(e,t))}function d(e,t){return v(e).keyAccessor(t)}function v(e){return o[e]}function m(t,n,i){var s=t.select("path").attr("fill",function(e){var t=d3.select(this).attr("fill");return t?t:"none"}).on("click",function(e){return r.onClick(e,n)});e.transition(s,r.transitionDuration()).attr("fill",function(e,t){return r.getColor(i[v(n).keyAccessor(e)],t)})}function g(e,t,n){r.renderTitle()&&e.selectAll("title").text(function(e){var i=d(t,e),s=n[i];return r.title()({key:i,value:s})})}var r=e.colorChart(e.baseChart({}));r.colorAccessor(function(e,t){return e});var i=d3.geo.path(),s,o=[];return r.doRender=function(){r.resetSvg();for(var e=0;e<o.length;++e){var t=r.svg().append("g").attr("class","layer"+e),n=t.selectAll("g."+v(e).name).data(v(e).data).enter().append("g").attr("class",v(e).name);n.append("path").attr("fill","white").attr("d",i),n.append("title"),u(e)}s=!1},r.onClick=function(t,n){var i=v(n).keyAccessor(t);e.events.trigger(function(){r.filter(i),e.redrawAll(r.chartGroup())})},r.doRedraw=function(){for(var e=0;e<o.length;++e)u(e),s&&r.svg().selectAll("g."+v(e).name+" path").attr("d",i);s=!1},r.overlayGeoJson=function(e,t,n){for(var i=0;i<o.length;++i)if(o[i].name==t)return o[i].data=e,o[i].keyAccessor=n,r;return o.push({name:t,data:e,keyAccessor:n}),r},r.projection=function(e){return i.projection(e),s=!0,r},r.geoJsons=function(){return o},r.removeGeoJson=function(e){var t=[];for(var n=0;n<o.length;++n){var i=o[n];i.name!=e&&t.push(i)}return o=t,r},r.anchor(t,n)},e.bubbleOverlay=function(t,n){function f(){return u=o.select("g."+r),u.empty()&&(u=o.svg().append("g").attr("class",r)),u}function l(){var t=c();a.forEach(function(n){var r=h(n,t),i=r.select("circle."+s);i.empty()&&(i=r.append("circle").attr("class",s).attr("r",0).attr("fill",o.initBubbleColor).on("click",o.onClick)),e.transition(i,o.transitionDuration()).attr("r",function(e){return o.bubbleR(e)}),o.doRenderLabel(r),o.doRenderTitles(r)})}function c(){var e={};return o.group().all().forEach(function(t){e[o.keyAccessor()(t)]=t}),e}function h(t,n){var r=i+" "+e.utils.nameToId(t.name),s=u.select("g."+e.utils.nameToId(t.name));return s.empty()&&(s=u.append("g").attr("class",r).attr("transform","translate("+t.x+","+t.y+")")),s.datum(n[t.name]),s}function p(){var t=c();a.forEach(function(n){var r=h(n,t),i=r.select("circle."+s);e.transition(i,o.transitionDuration()).attr("r",function(e){return o.bubbleR(e)}).attr("fill",o.updateBubbleColor),o.doUpdateLabels(r),o.doUpdateTitles(r)})}var r="bubble-overlay",i="node",s="bubble",o=e.abstractBubbleChart(e.baseChart({})),u,a=[];return o.transitionDuration(750),o.radiusValueAccessor(function(e){return e.value}),o.point=function(e,t,n){return a.push({name:e,x:t,y:n}),o},o.doRender=function(){return u=f(),o.r().range([o.MIN_RADIUS,o.width()*o.maxBubbleRelativeSize()]),l(),o.fadeDeselectedArea(),o},o.doRedraw=function(){return p(),o.fadeDeselectedArea(),o},o.debug=function(t){if(t){var n=o.select("g."+e.constants.DEBUG_GROUP_CLASS);n.empty()&&(n=o.svg().append("g").attr("class",e.constants.DEBUG_GROUP_CLASS));var r=n.append("text").attr("x",10).attr("y",20);n.append("rect").attr("width",o.width()).attr("height",o.height()).on("mousemove",function(){var e=d3.mouse(n.node()),t=e[0]+", "+e[1];r.text(t)})}else o.selectAll(".debug").remove();return o},o.anchor(t,n),o},e.rowChart=function(t,n){function h(){if(!f||l){var e=d3.extent(a.group().all(),a.valueAccessor());e[0]>0&&(e[0]=0),f=d3.scale.linear().domain(e).range([0,a.effectiveWidth()]),c.scale(f)}}function p(){var t=r.select("g.axis");h(),t.empty()&&(t=r.append("g").attr("class","axis").attr("transform","translate(0, "+a.effectiveHeight()+")")),e.transition(t,a.transitionDuration()).call(c)}function d(){r.selectAll("g.tick").select("line.grid-line").remove(),r.selectAll("g.tick").append("line").attr("class","grid-line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",function(e){return-a.effectiveHeight()})}function v(){p(),d();var e=r.selectAll("g."+u).data(a.group().all());m(e),g(e),y(e)}function m(e){var t=e.enter().append("g").attr("class",function(e,t){return u+" _"+t});t.append("rect").attr("width",0),w(t),E(e)}function g(e){e.exit().remove()}function y(t){var n=x(),r=t.attr("transform",function(e,t){return"translate(0,"+((t+1)*o+t*n)+")"}).select("rect").attr("height",n).attr("fill",a.getColor).on("click",T).classed("deselected",function(e){return a.hasFilter()?!a.isSelectedRow(e):!1}).classed("selected",function(e){return a.hasFilter()?a.isSelectedRow(e):!1});e.transition(r,a.transitionDuration()).attr("width",function(e){return Math.abs(f(0)-f(a.valueAccessor()(e)))}).attr("transform",N),b(t),E(t)}function b(e){a.renderTitle()&&(e.selectAll("title").remove(),e.append("title").text(function(e){return a.title()(e)}))}function w(e){a.renderLabel()&&e.append("text").on("click",T)}function E(t){if(a.renderLabel()){var n=t.select("text").attr("x",i).attr("y",s).attr("class",function(e,t){return u+" _"+t}).text(function(e){return a.label()(e)});e.transition(n,a.transitionDuration()).attr("transform",N)}}function S(){return a.group().all().length}function x(){var e=S();return(a.effectiveHeight()-(e+1)*o)/e}function T(e){a.onClick(e)}function N(e){var t=f(a.valueAccessor()(e)),n=f(0),r=t>n?n:t;return"translate("+r+",0)"}var r,i=10,s=15,o=5,u="row",a=e.marginable(e.colorChart(e.baseChart({}))),f,l,c=d3.svg.axis().orient("bottom");return a.doRender=function(){return a.resetSvg(),r=a.svg().append("g").attr("transform","translate("+a.margins().left+","+a.margins().top+")"),p(),d(),v(),a},a.title(function(e){return a.keyAccessor()(e)+": "+a.valueAccessor()(e)}),a.label(function(e){return a.keyAccessor()(e)}),a.x=function(e){return arguments.length?(f=e,a):f},a.doRedraw=function(){return v(),a},a.xAxis=function(){return c},a.gap=function(e){return arguments.length?(o=e,a):o},a.elasticX=function(e){return arguments.length?(l=e,a):l},a.labelOffsetX=function(e){return arguments.length?(i=e,a):i},a.labelOffsetY=function(e){return arguments.length?(s=e,a):s},a.isSelectedRow=function(e){return a.hasFilter(a.keyAccessor()(e))},a.anchor(t,n)},e.legend=function(){function a(){return o+s}var e=2,t={},n,r=0,i=0,s=12,o=5,u;return t.parent=function(e){return arguments.length?(n=e,t):n},t.render=function(){u=n.svg().append("g").attr("class","dc-legend").attr("transform","translate("+r+","+i+")");var t=u.selectAll("g.dc-legend-item").data(n.legendables()).enter().append("g").attr("class","dc-legend-item").attr("transform",function(e,t){return"translate(0,"+t*a()+")"}).on("mouseover",function(e){n.legendHighlight(e)}).on("mouseout",function(e){n.legendReset(e)});t.append("rect").attr("width",s).attr("height",s).attr("fill",function(e){return e.color}),t.append("text").text(function(e){return e.name}).attr("x",s+e).attr("y",function(){return s/2+(this.clientHeight?this.clientHeight:13)/2-2})},t.x=function(e){return arguments.length?(r=e,t):r},t.y=function(e){return arguments.length?(i=e,t):i},t.gap=function(e){return arguments.length?(o=e,t):o},t.itemHeight=function(e){return arguments.length?(s=e,t):s},t},e.scatterPlot=function(t,n){var r=e.coordinateGridChart({});return r.plotData=function(){r.chartBodyG().selectAll("path.dc-symbol").data(r.group().all()).enter().append("path").attr("class","dc-symbol").attr("transform",function(e){return"translate("+r.x()(r.keyAccessor()(e))+","+r.y()(r.valueAccessor()(e))+")"}).attr("d",d3.svg.symbol())},r.anchor(t,n)},e}(),define("vendor/dc/dc",["vendor/crossfilter/crossfilter","vendor/d3/d3"],function(e){return function(){var t,n;return t||e.dc}}(this)),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/project/detail",["require","marionette","hbs!templates/project/detail","models/rubric","models/project","views/project/detail/summary","views/project/detail/crossfiltered","views/project/detail/no_scores","vendor/d3/d3","vendor/dc/dc","vendor/crossfilter/crossfilter"],function(e){var n,r,i,s,o,u,a,f,l,c,h,p;return i=e("marionette"),h=e("hbs!templates/project/detail"),u=e("models/rubric"),o=e("models/project"),a=e("views/project/detail/summary"),r=e("views/project/detail/crossfiltered"),s=e("views/project/detail/no_scores"),l=e("vendor/d3/d3"),c=e("vendor/dc/dc"),f=e("vendor/crossfilter/crossfilter"),n=function(e){function f(){return p=f.__super__.constructor.apply(this,arguments),p}var n;return t(f,e),n=null,f.prototype.template=h,f.prototype.regions={summary:'[data-region="project-summary"]',crossfiltered:'[data-region="project-crossfiltered"]'},f.prototype.triggers=function(){var e;return e={'change [data-behavior="score-set-select"]':"change:score:set"},_.isFunction(this.vent.triggerMethod)&&(e["click @ui.close"]="close"),e},f.prototype.ui={close:'[data-behavior="detail-close"]',scoreSetSelect:'[data-behavior="score-set-select"]'},f.prototype.onClose=function(){if(_.isFunction(this.vent.triggerMethod))return this.vent.triggerMethod("close:detail")},f.prototype.initialize=function(e){var t=this;return this.options=e||{},this.vent=i.getOption(this,"vent"),this.projectId=i.getOption(this,"projectId")||this.model.id,$.when(this.scoresLoaded(),this.projectAndRubricLoaded()).then(function(){return t.updateViews()}).fail(function(e){return t.handleLoadFailure(e)})},f.prototype.handleLoadFailure=function(e){return Vocat.vent.trigger("exception",e)},f.prototype.updateViews=function(){return this.render(),this.summary.show(new a({summary:this.data.summary,vent:this.vent})),this.data.scores.length===0?this.crossfiltered.show(new s({loadedScoresSet:this.loadedScoresSet,vent:this.vent})):this.crossfiltered.show(new r({scores:this.data.scores,rubric:this.rubric,vent:this.vent}))},f.prototype.onChangeScoreSet=function(){var e,t=this;return e=this.ui.scoreSetSelect.val(),$.when(this.scoresLoaded(e)).then(function(){return t.updateViews()})},f.prototype.onRender=function(){return this.ui.scoreSetSelect.chosen({disable_search_threshold:1e3})},f.prototype.projectAndRubricLoaded=function(){var e,t,n=this;return e=$.Deferred(),t=$.Deferred(),this.model!=null?e.resolve():(this.model=new o({id:this.projectId}),this.model.fetch({success:function(){return e.resolve()},error:function(){return e.reject("Unable to load project data. Perhaps this project has been deleted?")}})),e.then(function(){return n.rubric=new u({id:n.model.get("rubric_id")}),n.rubric.fetch({success:function(){return t.resolve()},error:function(){return t.reject("Unable to load project rubric. Perhaps the rubric has been deleted?")}})}),t},f.prototype.scoresLoaded=function(e){var t,n=this;return e==null&&(e="my_scores"),this.loadedScoresSet=e,t=$.Deferred(),$.ajax("/api/v1/scores/"+e,{dataType:"json",data:{project:this.projectId},success:function(e,r,i){return n.data=e,t.resolve()}}),t},f.prototype.serializeData=function(){var e,t;return t=f.__super__.serializeData.call(this),e={loadedScoresSet:this.loadedScoresSet,project:t},e},f}(i.LayoutView)})}.call(this),define("hbs!templates/submission/submission_layout",["hbs","handlebars","app/helpers/to_lower"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){return'\n	  <span class="badge">group</span>\n	  '}function d(e,t){var n="",r;return n+='\n			<a data-behavior="open-group-modal" href="#">\n				'+l((r=(r=e.creator,r==null||r===!1?r:r.name),typeof r===f?r.apply(e):r))+"\n			</a>\n	   ",n}function v(e,t){var n="",r;return n+="\n		  "+l((r=(r=e.creator,r==null||r===!1?r:r.name),typeof r===f?r.apply(e):r))+"\n	  ",n}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f="function",l=this.escapeExpression,c=n.helperMissing,h=this;s+='<div class="page-content--heading">\n  <a class="header-link back-link" style="display: none;" data-behavior="detail-close" href="/courses/',(o=n.courseId)?o=o.call(t,{hash:{}}):(o=t.courseId,o=typeof o===f?o.apply(t):o),s+=l(o)+"/",a={hash:{}},s+=l((o=n.to_lower,o?o.call(t,t.creatorType,a):c.call(t,"to_lower",t.creatorType,a)))+'s/evaluations">Back to Evaluations</a>\n  <h2 class="heading-primary">\n    '+l((o=(o=t.project,o==null||o===!1?o:o.name),typeof o===f?o.apply(t):o))+"\n	  ",u=n["if"].call(t,t.isGroupProject,{hash:{},inverse:h.noop,fn:h.program(1,p,i)});if(u||u===0)s+=u;s+='\n  </h2>\n  <h2 class="heading-secondary">\n	  ',u=n["if"].call(t,t.isGroupProject,{hash:{},inverse:h.program(5,v,i),fn:h.program(3,d,i)});if(u||u===0)s+=u;return s+='\n  </h2>\n</div>\n\n<div class="submission-section">\n	<div data-region="flash" class="flash"></div>\n	<div data-region="submission-assets"></div>\n	<div data-region="submission-evaluations"></div>\n	<div data-region="submission-discussion"></div>\n</div>\n\n',s});return n}),define("hbs!templates/partials/discussionPostInput",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression;return s+='<div class="formgrid oneline--input">\n  <div class="button-wrapper">\n    <a class="primary-button post-button" data-behavior="post-save" href="#">Post Comment </a>\n  </div>\n  <div class="input-wrapper">\n    <textarea data-parent="',(o=n.parent)?o=o.call(t,{hash:{}}):(o=t.parent,o=typeof o===u?o.apply(t):o),s+=a(o)+'" data-behavior="post-input" placeholder="Start writing a new comment..."></textarea>\n  </div>\n  <div class="button-wrapper-responsive">\n    <a class="primary-button post-button" data-behavior="post-save" href="#">Post Comment</a>\n  </div>\n</div>\n',s});return t.registerPartial("discussionPostInput",n),n}),define("hbs!templates/discussion/discussion",["hbs","handlebars","hbs!templates/partials/discussionPostInput"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials;var s="",o,u=this;s+='<div class="page-section page-section-spacing-top">\n  <div class="header-wrapper">\n    <div class="buttons">\n      <ul class="bubble">\n        <li data-behavior="post-count"></li>\n      </ul>\n    </div>\n    <div class="header">\n      <h2>Discussions</h2>\n    </div>\n  </div>\n  <div class="body">\n    <ul class="discussion-list" data-behavior="post-container">\n    </ul>\n    <div data-container="flash"></div>\n    <div data-behavior="parent-input">\n    ',o=u.invokePartial(r.discussionPostInput,"discussionPostInput",t,n,r);if(o||o===0)s+=o;return s+="\n    </div>\n  </div>\n</div>\n\n",s});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("models/discussion_post",["backbone"],function(e){var n,r;return n=function(e){function n(){return r=n.__super__.constructor.apply(this,arguments),r}return t(n,e),n.prototype.urlRoot="/api/v1/discussion_posts",n.prototype.hasParent=function(){return this.get("parent_id")!=null?!0:!1},n.prototype.validate=function(e,t){var n;n={};if(!e.body||e.body.length<1){if(!n.body||!_.isArray(n.body))n.body=[];n.body.push("cannot be empty.")}if(e.submission_id==null){if(!n.body||!_.isArray(n.body))n.body=[];n.push({name:"submission_id",message:"All posts must be associated with a submission."})}return _.size(n)>0?n:!1},n}(e.Model)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("collections/discussion_post_collection",["backbone","models/discussion_post"],function(e,n){var r,i;return r=function(e){function r(){return i=r.__super__.constructor.apply(this,arguments),i}return t(r,e),r.prototype.model=n,r.prototype.initialize=function(e,t){var n=this;return t.submissionId!=null&&(this.submissionId=t.submissionId),this.bind("remove",function(e){var t;if(e.id!=null)return t=n.where({parent_id:e.id}),_.each(t,function(e){return e.trigger("destroy",e,e.collection,{})})})},r.prototype.url="/api/v1/discussion_posts",r.prototype.getParentPosts=function(){return this.where({parent_id:null})},r.prototype.getChildPosts=function(){return this.filter(function(e){return e.get("parent_id")!==null})},r}(e.Collection)})}.call(this),define("hbs!templates/discussion/post",["hbs","handlebars","hbs!templates/partials/discussionPostInput"],function(e,t){var n=t.template(function(e,t,n,r,i){function l(e,t){var r="",i;r+='\n      <ul class="horizontal-links">\n\n        <li>\n          ',i=n["if"].call(e,e.parent_id,{hash:{},inverse:f.program(4,h,t),fn:f.program(2,c,t)});if(i||i===0)r+=i;r+="\n        </li>\n\n        ",i=n["if"].call(e,e.current_user_can_destroy,{hash:{},inverse:f.noop,fn:f.program(6,p,t)});if(i||i===0)r+=i;return r+='\n      </ul>\n\n      <div class="alert alert-warning" data-behavior="delete-confirm" style="display: none;" >\n        <aside class="alert--label" data-behavior="alert-label"></aside>\n        <p>\n          Are you sure?\n        </p>\n        <p>\n          <a data-behavior="delete" data-post="',(i=n.id)?i=i.call(e,{hash:{}}):(i=e.id,i=typeof i===u?i.apply(e):i),r+=a(i)+'" href="#">Yes. Delete this post. </a>\n        </p>\n        <p>\n           <a class="alert--close" data-behavior="toggle-delete-confirm" href="#">On second thought, no.</a>\n      </p>\n      </div>\n\n    ',r}function c(e,t){var r="",i;return r+='\n            <a class="reply-link primary-link" data-behavior="toggle-reply" data-post="',(i=n.parent_id)?i=i.call(e,{hash:{}}):(i=e.parent_id,i=typeof i===u?i.apply(e):i),r+=a(i)+'" href="#">Reply</a>\n          ',r}function h(e,t){var r="",i;return r+='\n            <a class="reply-link primary-link" data-behavior="toggle-reply" data-post="',(i=n.id)?i=i.call(e,{hash:{}}):(i=e.id,i=typeof i===u?i.apply(e):i),r+=a(i)+'" href="#">Reply</a>\n          ',r}function p(e,t){return'\n          <li>\n            <a class="delete-link secondary-link" data-behavior="toggle-delete-confirm" href="#">Delete</a>\n          </li>\n        '}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials;var s="",o,u="function",a=this.escapeExpression,f=this;s+='<div class="discussion-list--item">\n  <div class="discussion-list--avatar ">\n  	<img src="',(o=n.gravatar)?o=o.call(t,{hash:{}}):(o=t.gravatar,o=typeof o===u?o.apply(t):o),s+=a(o)+'" alt="" />\n  </div>\n  <div class="discussion-list--body">\n    <header class="discussion-list--header">\n      <h3 class="discussion-list--name">',(o=n.author_name)?o=o.call(t,{hash:{}}):(o=t.author_name,o=typeof o===u?o.apply(t):o),s+=a(o)+'</h3>\n      <time class="discussion-list--timestamp" datetime="">Posted ',(o=n.month)?o=o.call(t,{hash:{}}):(o=t.month,o=typeof o===u?o.apply(t):o),s+=a(o)+" ",(o=n.day)?o=o.call(t,{hash:{}}):(o=t.day,o=typeof o===u?o.apply(t):o),s+=a(o)+", ",(o=n.year)?o=o.call(t,{hash:{}}):(o=t.year,o=typeof o===u?o.apply(t):o),s+=a(o)+" at ",(o=n.time)?o=o.call(t,{hash:{}}):(o=t.time,o=typeof o===u?o.apply(t):o),s+=a(o)+"</time>\n    </header>\n\n    <p>",(o=n.body)?o=o.call(t,{hash:{}}):(o=t.body,o=typeof o===u?o.apply(t):o);if(o||o===0)s+=o;s+="</p>\n\n    ",o=n["if"].call(t,t.current_user_can_reply,{hash:{},inverse:f.noop,fn:f.program(1,l,i)});if(o||o===0)s+=o;s+='\n\n    <div class="discussion-list--input-container" data-behavior="input-container" style="display: none">\n      <div data-container="flash"></div>\n      ',o=f.invokePartial(r.discussionPostInput,"discussionPostInput",t,n,r);if(o||o===0)s+=o;return s+='\n    </div>\n\n    <div class="rule"></div>\n  </div> <!-- /discussion-list--body -->\n</div> <!-- /discussion-list--item -->\n\n\n<ul class="discussion-list" data-behavior="post-container">\n</ul>\n',s});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/abstract/abstract_discussion",["require","marionette","hbs!templates/discussion/discussion","collections/discussion_post_collection","models/discussion_post","views/flash/flash_messages"],function(e){var n,r,i,s,o,u,a;return o=e("marionette"),u=e("hbs!templates/discussion/discussion"),n=e("collections/discussion_post_collection"),r=e("models/discussion_post"),s=e("views/flash/flash_messages"),i=function(e){function n(){return a=n.__super__.constructor.apply(this,arguments),a}return t(n,e),n.prototype.ui={bodyInput:'[data-behavior="post-input"]',inputToggle:'[data-behavior="input-container"]',flashContainer:'[data-container="flash"]'},n.prototype.triggers={'click [data-behavior="post-save"]':"post:save",'click [data-behavior="toggle-reply"]':"reply:toggle",'click [data-behavior="toggle-delete-confirm"]':"confirm:delete:toggle",'click [data-behavior="delete"]':"post:delete"},n.prototype.childViewOptions=function(){return{allPosts:this.allPosts,submission:this.submission}},n.prototype.onRender=function(){return this.ui.flashContainer.append(this.flash.$el),this.flash.render()},n.prototype.initializeFlash=function(){return this.flash=new s({vent:this,clearOnAdd:!0})},n.prototype.onPostSave=function(){var e,t,n=this;return this.model!=null?e=this.model.id:e=null,t=new r({submission_id:this.submission.id,body:this.ui.bodyInput.val(),published:!0,parent_id:e}),this.listenTo(t,"invalid",function(e,t){return n.trigger("error:add",{level:"error",lifetime:5e3,msg:t})}),t.save({},{success:function(e){return n.collection.add(e),n.allPosts.add(e),n.resetInput()},error:function(e,t){}})},n.prototype.initialize=function(e){return this.vent=e.vent},n.prototype.onReplyClear=function(){return this.ui.bodyInput.val("")},n.prototype.resetInput=function(){return this.triggerMethod("reply:clear"),this.triggerMethod("reply:toggle")},n}(o.CompositeView)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/discussion/post",["marionette","hbs!templates/discussion/post","collections/discussion_post_collection","models/discussion_post","views/abstract/abstract_discussion"],function(e,n,r,i,s){var o,u;return o=function(e){function i(){return u=i.__super__.constructor.apply(this,arguments),u}return t(i,e),i.prototype.template=n,i.prototype.childViewContainer='[data-behavior="post-container"]',i.prototype.tagName="li",i.prototype.initialize=function(e){return this.initializeFlash(),this.allPosts=e.allPosts,this.submission=e.submission,this.vent=e.vent,this.collection=new r([],{}),this.collection.reset(this.allPosts.where({parent_id:this.model.id}))},i.prototype.onConfirmDeleteToggle=function(){return this.$el.find('[data-behavior="delete-confirm"]:first').slideToggle(150)},i.prototype.onPostDelete=function(){return this.allPosts.remove(this.model),this.model.destroy({wait:!0})},i.prototype.onReplyToggle=function(){return this.ui.inputToggle.slideToggle({duration:200})},i.prototype.handleSavePost=function(e){var t;if(e.keyCode===13)return e.preventDefault(),e.stopPropagation(),t=$(e.currentTarget),this.vent.trigger("post:save",t)},i.prototype.handleDestroyedPost=function(){var e=this;return this.$el.fadeOut(250,function(){return e.remove()})},i}(s)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/discussion/discussion",["require","marionette","hbs!templates/discussion/discussion","collections/discussion_post_collection","views/discussion/post","views/abstract/abstract_discussion","models/discussion_post"],function(e){var n,r,i,s,o,u,a,f;return o=e("marionette"),a=e("hbs!templates/discussion/discussion"),r=e("collections/discussion_post_collection"),u=e("views/discussion/post"),n=e("views/abstract/abstract_discussion"),i=e("models/discussion_post"),s=function(e){function n(){return f=n.__super__.constructor.apply(this,arguments),f}return t(n,e),n.prototype.template=a,n.prototype.childViewContainer='[data-behavior="post-container"]',n.prototype.childView=u,n.prototype.initialize=function(e){var t=this;return this.initializeFlash(),this.vent=e.vent,this.submission=e.submission,this.collection=new r([],{}),this.allPosts=new r([],{}),this.allPosts.fetch({data:{submission:this.submission.id},success:function(){return t.collection.reset(t.allPosts.where({parent_id:null}))}}),this.updateCount(),this.listenTo(this.allPosts,"add sync remove",function(e){return t.updateCount()})},n.prototype.onShow=function(){},n.prototype.updateCount=function(){var e,t;return e=this.allPosts.length,e===1?t="One Comment":t=""+e+" Comments",this.$el.find('[data-behavior="post-count"]').html(t)},n}(n)})}.call(this),define("hbs!templates/submission/evaluations/evaluations_layout",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,'<div class="page-section-spacing-top page-section">\n	<div class="header-wrapper">\n		<div class="buttons">\n			<!--\n			<a class="secondary-button show-button" href="/courses/67/manage/projects/new">Show Rubric</a>\n			<a class="secondary-button delete-button" href="/courses/67/manage/projects/new">Hide Rubric</a>\n			-->\n		</div>\n		<div class="header"><h2>Evaluations</h2></div>\n	</div>\n\n  <div class="body" data-behavior="body">\n    <div class="their-evaluations" data-region="their-evaluations"></div>\n    <div class="my-evaluations" data-region="my-evaluations"></div>\n  </div>\n</div>\n\n'});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("collections/evaluation_collection",["backbone","marionette","models/evaluation"],function(e,n,r){var i,s;return i=function(e){function i(){return s=i.__super__.constructor.apply(this,arguments),s}return t(i,e),i.prototype.model=r,i.prototype.initialize=function(e,t){return this.options=t,this.courseId=n.getOption(this,"courseId")},i.prototype.url=function(){return"/api/v1/courses/"+this.courseId+"/evaluations"},i}(e.Collection)})}.call(this),define("hbs!templates/submission/evaluations/their_evaluations",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="";return s});return n}),function(){define("app/helpers/titlecase",["handlebars"],function(e){return e.registerHelper("titlecase",function(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})})})}.call(this),define("hbs!templates/partials/range",["hbs","handlebars","app/helpers/titlecase","app/helpers/to_i"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){var r="",i;return r+='\n		  <span style="display: none;" data-behavior="range-placard" class="placard">\n				<span class="placard--header">',(i=n.placard_title)?i=i.call(e,{hash:{}}):(i=e.placard_title,i=typeof i===f?i.apply(e):i),r+=l(i)+'</span>\n			  <span class="placard--content">\n				  ',(i=n.placard_desc)?i=i.call(e,{hash:{}}):(i=e.placard_desc,i=typeof i===f?i.apply(e):i),r+=l(i)+"\n			  </span>\n		  </span>\n		  ",r}function d(e,t){var r="",i;return r+='\n	    <div class="range--handle"><b></b>',(i=n.score)?i=i.call(e,{hash:{}}):(i=e.score,i=typeof i===f?i.apply(e):i),r+=l(i)+"/",(i=n.possible)?i=i.call(e,{hash:{}}):(i=e.possible,i=typeof i===f?i.apply(e):i),r+=l(i)+"</div>\n    ",r}function v(e,t){var r="",i,s;return r+='\n	    <div class="range--handle"><b></b>',s={hash:{}},r+=l((i=n.to_i,i?i.call(e,e.percentage,s):c.call(e,"to_i",e.percentage,s)))+"%</div>\n    ",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f="function",l=this.escapeExpression,c=n.helperMissing,h=this;s+='<div data-behavior="range" class="range ',(o=n.range_class)?o=o.call(t,{hash:{}}):(o=t.range_class,o=typeof o===f?o.apply(t):o),s+=l(o)+'">\n  <h4 class="range--title">\n    ',a={hash:{}},s+=l((o=n.titlecase,o?o.call(t,t.title,a):c.call(t,"titlecase",t.title,a)))+'\n  </h4>\n  <div class="range--track">\n	  <span style="width: ',(u=n.percentage)?u=u.call(t,{hash:{}}):(u=t.percentage,u=typeof u===f?u.apply(t):u),s+=l(u)+'%" class="range--fill">\n		  ',u=n["if"].call(t,t.placard,{hash:{},inverse:h.noop,fn:h.program(1,p,i)});if(u||u===0)s+=u;s+="\n	  </span>\n    ",u=n["if"].call(t,t.score,{hash:{},inverse:h.program(5,v,i),fn:h.program(3,d,i)});if(u||u===0)s+=u;return s+="\n  </div>\n</div>\n\n\n\n",s});return t.registerPartial("range",n),n}),define("hbs!templates/submission/evaluations/their_evaluations_collection",["hbs","handlebars","hbs!templates/partials/range"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials;var s="",o,u=this;s+='<div data-behavior="toggle-children">\n',o=u.invokePartial(r.range,"range",t,n,r);if(o||o===0)s+=o;return s+='\n</div>\n<ul class="evaluation-collection--children evaluations-hidden" data-behavior="child-container">\n</ul>\n',s});return n}),function(){define("app/helpers/include",["handlebars"],function(e){return e.registerHelper("include",function(t,n){var r,i;return i=e.partials[t],r=n.hash,i(r)})})}.call(this),define("hbs!templates/submission/evaluations/their_evaluations_child",["hbs","handlebars","app/helpers/include"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){var r="",i,s,o;r+='\n  <li data-behavior="placard-trigger">\n    ',o={hash:{title:e.name,score:e.score,possible:e.high,percentage:e.percentage,placard:!0,placard_title:e.range,placard_desc:e.desc,range_class:"range-tertiary"}},s=(i=n.include,i?i.call(e,"range",o):f.call(e,"include","range",o));if(s||s===0)r+=s;return r+="\n  </li>\n  ",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f=n.helperMissing,l=this,c="function",h=this.escapeExpression;s+='<div data-behavior="toggle-children">\n',a={hash:{title:t.title,percentage:t.percentage,placard:!1,range_class:"range-secondary range-expandable"}},u=(o=n.include,o?o.call(t,"range",a):f.call(t,"include","range",a));if(u||u===0)s+=u;s+='\n</div>\n\n<ul class="evaluation-single--details evaluations-hidden" data-behavior="child-container">\n  ',u=n.each.call(t,t.score_details,{hash:{},inverse:l.noop,fn:l.program(1,p,i)});if(u||u===0)s+=u;return s+='\n	<li data-behavior="total">\n		<div class="range-tertiary range-editable range-total">\n			<div class="range--track-wrapper">\n				<h4 class="range-total--label">Total Score</h4>\n				<div class="range--handle">\n					<div class="score-wrapper">\n						<span class="score" data-container="total-score">',(u=n.total_score)?u=u.call(t,{hash:{}}):(u=t.total_score,u=typeof u===c?u.apply(t):u),s+=h(u)+'</span>\n						<span class="slash"></span>\n						<span class="possible">',(u=n.points_possible)?u=u.call(t,{hash:{}}):(u=t.points_possible,u=typeof u===c?u.apply(t):u),s+=h(u)+"</span>\n					</div>\n				</div>\n			</div>\n		</div>\n	</li>\n</ul>\n",s});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("behaviors/expandable_range",["require","marionette"],function(e){var n,r,i;return r=e("marionette"),n=function(e){function n(){return i=n.__super__.constructor.apply(this,arguments),i}return t(n,e),n.prototype.defaults={childrenVisible:!1},n.prototype.triggers={"click @ui.toggleChild":"toggle:child"},n.prototype.ui={toggleChild:'[data-behavior="toggle-children"]',childContainer:'[data-behavior="child-container"]',range:'[data-behavior="range"]:first'},n.prototype.onShow=function(){if(this.options.childrenVisible===!1)return this.ui.childContainer.hide()},n.prototype.onToggleChild=function(){if(this.ui.childContainer.length>0)return this.options.childrenVisible?(this.ui.range.removeClass("range-expandable-open"),this.ui.childContainer.slideUp(250),this.view.trigger("range:closed")):(this.ui.childContainer.slideDown(250),this.ui.range.addClass("range-expandable-open"),this.view.trigger("range:open")),this.options.childrenVisible=!this.options.childrenVisible},n}(r.Behavior)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/submission/evaluations/their_evaluations_child",["require","marionette","hbs!templates/submission/evaluations/their_evaluations_child","behaviors/expandable_range"],function(e){var n,r,i,s,o;return r=e("marionette"),s=e("hbs!templates/submission/evaluations/their_evaluations_child"),n=e("behaviors/expandable_range"),i=function(e){function r(){return o=r.__super__.constructor.apply(this,arguments),o}return t(r,e),r.prototype.tagName="li",r.prototype.className="evaluation-single",r.prototype.template=s,r.prototype.childrenVisible=!1,r.prototype.triggers={},r.prototype.events={"mouseenter @ui.placardTrigger":"showPlacard","mouseleave @ui.placardTrigger":"hidePlacard"},r.prototype.ui={placard:'[data-behavior="range-placard"]',placardTrigger:'[data-behavior="placard-trigger"]'},r.prototype.showPlacard=function(e){var t;return e.preventDefault(),e.stopPropagation(),t=$(e.target),t.find('[data-behavior="range-placard"]').fadeIn()},r.prototype.hidePlacard=function(e){return e.preventDefault(),e.stopPropagation(),this.ui.placard.hide()},r.prototype.behaviors={expandableRange:{behaviorClass:n}},r.prototype.setupEvents=function(){var e=this;return this.listenTo(this,"show:placard",function(t){return e.onShowPlacard(t)})},r.prototype.initialize=function(e){return this.rubric=e.rubric,this.setupEvents()},r.prototype.serializeData=function(){var e;return e={title:this.model.get("evaluator_name"),percentage:Math.round(this.model.get("total_percentage")),score_details:this.model.scoreDetailsWithRubricDescriptions(this.rubric),points_possible:this.model.get("points_possible"),total_score:this.model.get("total_score")},e},r}(r.ItemView)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/submission/evaluations/their_evaluations_collection",["require","marionette","hbs!templates/submission/evaluations/their_evaluations_collection","views/submission/evaluations/their_evaluations_child","behaviors/expandable_range"],function(e){var n,r,i,s,o,u;return i=e("marionette"),o=e("hbs!templates/submission/evaluations/their_evaluations_collection"),n=e("views/submission/evaluations/their_evaluations_child"),r=e("behaviors/expandable_range"),s=function(e){function i(){return u=i.__super__.constructor.apply(this,arguments),u}return t(i,e),i.prototype.template=o,i.prototype.className="evaluation-collection",i.prototype.tagName="li",i.prototype.childView=n,i.prototype.childViewContainer='[data-behavior="child-container"]:first',i.prototype.childViewOptions=function(){return{rubric:this.rubric}},i.prototype.behaviors={expandableRange:{behaviorClass:r}},i.prototype.className=function(){return"evaluation-collection evaluation-collection-"+this.model.get("evaluator_role").toLowerCase()},i.prototype.initialize=function(e){return this.collection=this.model.get("evaluations"),this.rubric=e.rubric},i.prototype.serializeData=function(){return{title:""+this.model.get("evaluator_role")+" Evaluations",percentage:this.model.averageScore(),range_class:"range-expandable"}},i}(i.CompositeView)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("models/evaluation_set",["backbone"],function(e){var n,r;return n=function(e){function n(){return r=n.__super__.constructor.apply(this,arguments),r}return t(n,e),n.prototype.averageScore=function(){var e;return e=this.get("evaluations").pluck("total_percentage"),Math.round(_.reduce(e,function(e,t){return e+t},0)/e.length)},n.prototype.toJSON=function(){var e;return e=_.clone(this.attributes),e.averageScore=this.averageScore(),e},n}(e.Model)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/submission/evaluations/their_evaluations",["require","marionette","hbs!templates/submission/evaluations/their_evaluations","views/submission/evaluations/their_evaluations_collection","collections/collection_proxy","models/evaluation_set"],function(e){var n,r,i,s,o,u,a;return i=e("marionette"),u=e("hbs!templates/submission/evaluations/their_evaluations"),o=e("views/submission/evaluations/their_evaluations_collection"),n=e("collections/collection_proxy"),r=e("models/evaluation_set"),s=function(e){function s(){return a=s.__super__.constructor.apply(this,arguments),a}return t(s,e),s.prototype.template=u,s.prototype.tagName="ul",s.prototype.className="evaluation-collections",s.prototype.childView=o,s.prototype.childViewOptions=function(){return{rubric:this.rubric}},s.prototype.initialize=function(e){var t,s=this;return this.evaluations=i.getOption(this,"evaluations"),this.rubric=e.rubric,this.collection=new Backbone.Collection,t=_.uniq(this.evaluations.pluck("evaluator_role")),_.each(t,function(e,t){var i,o;i=new n(s.evaluations),i.where(function(t){return t.get("evaluator_role")===e&&t.get("current_user_is_evaluator")!==!0});if(i.length>0)return o=new r({evaluations:i,evaluator_role:e}),s.collection.add(o)})},s}(i.CompositeView)})}.call(this),define("hbs!templates/submission/evaluations/their_evaluations_empty",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,'<div class="evaluation-empty">\n	There are no evaluations for this submission.\n</div>\n\n'});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/submission/evaluations/their_evaluations_empty",["require","marionette","hbs!templates/submission/evaluations/their_evaluations_empty"],function(e){var n,r,i,s;return n=e("marionette"),i=e("hbs!templates/submission/evaluations/their_evaluations_empty"),r=function(e){function n(){return s=n.__super__.constructor.apply(this,arguments),s}return t(n,e),n.prototype.template=i,n}(n.ItemView)})}.call(this),define("hbs!templates/submission/evaluations/my_evaluations",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){function l(e,t){return"switch-checked"}function c(e,t){return'checked="checked"'}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression,f=this;s+='\n<li data-model-id="',(o=n.id)?o=o.call(t,{hash:{}}):(o=t.id,o=typeof o===u?o.apply(t):o),s+=a(o)+'" class="evaluation-collection evaluation-collection-instructor">\n	<div data-behavior="toggle-children">\n		<div data-behavior="range" class="range range-expandable">\n			<h4 class="range--title">\n				Your Evaluation\n			</h4>\n			<div class="range--track">\n				<span data-behavior="range-fill" style="width: ',(o=n.total_percentage_rounded)?o=o.call(t,{hash:{}}):(o=t.total_percentage_rounded,o=typeof o===u?o.apply(t):o),s+=a(o)+'%" class="range--fill"></span>\n				<div class="range--handle"><b></b><span data-container="percentage">',(o=n.total_percentage_rounded)?o=o.call(t,{hash:{}}):(o=t.total_percentage_rounded,o=typeof o===u?o.apply(t):o),s+=a(o)+'</span>%</div>\n			</div>\n		</div>\n	</div>\n	<ul class="evaluation-single--details evaluations-hidden" data-behavior="child-container">\n		<!-- criteria will be inserted here -->\n		<li data-anchor="child-insert-before" data-behavior="subtotal">\n			<div class="range-tertiary range-editable range-total">\n				<div class="range--track-wrapper">\n					<h4 class="range-total--label">Rubric Total</h4>\n					<div class="range--handle">\n						<div class="score-wrapper">\n							<span class="score" data-container="subtotal-score">',(o=n.total_score)?o=o.call(t,{hash:{}}):(o=t.total_score,o=typeof o===u?o.apply(t):o),s+=a(o)+'</span>\n							<span class="slash"></span>\n							<span class="possible">',(o=n.points_possible)?o=o.call(t,{hash:{}}):(o=t.points_possible,o=typeof o===u?o.apply(t):o),s+=a(o)+'</span>\n						</div>\n					</div>\n				</div>\n			</div>\n		</li>\n		<li data-behavior="total">\n			<div class="range-tertiary range-editable range-total">\n				<div class="range--track-wrapper">\n					<h4 class="range-total--label">Weighted Score</h4>\n					<div class="range--handle">\n						<div class="score-wrapper">\n							<span class="score" data-container="total-score">',(o=n.total_score)?o=o.call(t,{hash:{}}):(o=t.total_score,o=typeof o===u?o.apply(t):o),s+=a(o)+'</span>\n							<span class="slash"></span>\n							<span class="possible">',(o=n.points_possible)?o=o.call(t,{hash:{}}):(o=t.points_possible,o=typeof o===u?o.apply(t):o),s+=a(o)+'</span>\n						</div>\n					</div>\n				</div>\n			</div>\n		</li>\n		<li>\n			<div class="range-tertiary range-editable range-total">\n				<div class="range--track-wrapper">\n					<h4 class="range-total--label">Visible To Student?</h4>\n					<div class="range-total--value">\n						<div class="switch ',o=n["if"].call(t,t.published,{hash:{},inverse:f.noop,fn:f.program(1,l,i)});if(o||o===0)s+=o;s+='">\n							<input data-behavior="publish-switch" id="checkbox-',(o=n.cid)?o=o.call(t,{hash:{}}):(o=t.cid,o=typeof o===u?o.apply(t):o),s+=a(o)+'" ',o=n["if"].call(t,t.published,{hash:{},inverse:f.noop,fn:f.program(3,c,i)});if(o||o===0)s+=o;return s+=' class="switch-checkbox" type="checkbox">\n							<label for="checkbox-',(o=n.cid)?o=o.call(t,{hash:{}}):(o=t.cid,o=typeof o===u?o.apply(t):o),s+=a(o)+'" class="switch-label" >\n						    <span class="switch-inner">\n						      <span class="switch-text switch-active">Yes</span>\n						      <span class="switch-text switch-inactive">No</span>\n						    </span>\n							</label>\n						</div>\n					</div>\n				</div>\n			</div>\n		</li>\n\n\n\n\n		<li data-behavior="utility" class="evaluation-single--utility">\n			<div>\n				<a data-behavior="evaluation-save" class="primary-button update-button" href="#">Save Evaluation</a>\n				<a data-behavior="evaluation-destroy" class="gentle-warning-button delete-button" href="#">Delete Evaluation</a>\n			</div>\n\n			<div style="margin-top: 20px; display: none" data-behavior="notice" class="alert alert-notice">\n			</div>\n\n		</li>\n	</ul>\n\n\n</li>\n',s});return n}),define("hbs!templates/submission/evaluations/score_slider",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){function l(e,t,n){var r="",i;return r+='\n        <li style="width: '+a((i=n.tickWidth,typeof i===u?i.apply(e):i))+'%"></li>\n        ',r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression,f=this;s+='<div data-behavior="range" class="range range-tertiary range-editable">\n  <h4 class="range--title">',(o=n.name)?o=o.call(t,{hash:{}}):(o=t.name,o=typeof o===u?o.apply(t):o),s+=a(o)+'</h4>\n  <div class="range--track-wrapper">\n    <div data-behavior="range-track" class="range--track">\n      <ul class="range--ticks">\n        ',o=n.each.call(t,t.ticks,{hash:{},inverse:f.noop,fn:f.programWithDepth(l,i,t)});if(o||o===0)s+=o;return s+='\n      </ul>\n      <span data-behavior="range-fill" style="width: ',(o=n.percentage)?o=o.call(t,{hash:{}}):(o=t.percentage,o=typeof o===u?o.apply(t):o),s+=a(o)+'%" class="range--fill"></span>\n      <div class="grabber-wrapper">\n        <span data-behavior="range-grabber" class="range--grabber">\n				  <span style="display: none;" data-behavior="placard" class="placard">\n						<span data-behavior="placard-header" class="placard--header">',(o=n.placard_title)?o=o.call(t,{hash:{}}):(o=t.placard_title,o=typeof o===u?o.apply(t):o),s+=a(o)+'</span>\n					  <span data-behavior="placard-content" class="placard--content">\n						  ',(o=n.placard_desc)?o=o.call(t,{hash:{}}):(o=t.placard_desc,o=typeof o===u?o.apply(t):o),s+=a(o)+'\n					  </span>\n				  </span>\n        </span>\n      </div>\n    </div>\n    <div class="range--handle">\n      <div class="score-wrapper">\n        <span class="score" data-behavior="score">',(o=n.score)?o=o.call(t,{hash:{}}):(o=t.score,o=typeof o===u?o.apply(t):o),s+=a(o)+'</span>\n	      <span class="slash"></span>\n        <span class="possible" data-behavior="possible">',(o=n.high)?o=o.call(t,{hash:{}}):(o=t.high,o=typeof o===u?o.apply(t):o),s+=a(o)+"</span>\n      </div>\n    </div>\n  </div>\n</div>\n",s});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/submission/evaluations/score_slider",["require","marionette","jquery_ui","hbs!templates/submission/evaluations/score_slider"],function(e){var n,r,i,s;return n=e("marionette"),e("jquery_ui"),i=e("hbs!templates/submission/evaluations/score_slider"),r=function(e){function n(){return s=n.__super__.constructor.apply(this,arguments),s}return t(n,e),n.prototype.template=i,n.prototype.baselineSnapDuration=500,n.prototype.lowShim=4,n.prototype.highShim=4,n.prototype.tagName="li",n.prototype.events={"drag @ui.grabber":"onDrag","mousedown @ui.grabber":"onGrabberMouseDown","dragstop @ui.grabber":"onDragStop","click @ui.track":"onTrackClick","mouseenter @ui.grabber":"showPlacard","mouseout @ui.grabber":"hidePlacard"},n.prototype.ui={grabber:'[data-behavior="range-grabber"]',fill:'[data-behavior="range-fill"]',track:'[data-behavior="range-track"]',score:'[data-behavior="score"]',placardTitle:'[data-behavior="placard-header"]',placardContent:'[data-behavior="placard-content"]',placard:'[data-behavior="placard"]'},n.prototype.showPlacard=function(e){return this.ui.placard.fadeIn()},n.prototype.forceHidePlacard=function(){return this.ui.placard.hide()},n.prototype.hidePlacard=function(e){if(!this.ui.grabber.hasClass("ui-draggable-dragging"))return this.ui.placard.hide()},n.prototype.currentPosition=function(){return this.ui.grabber.position().left},n.prototype.translatePositionToSnapPosition=function(e){var t;return t=this.translatePositionToScore(e),t<this.model.get("low")&&(t=this.model.get("low")),e=this.translateScoreToPosition(t),e},n.prototype.translateScoreToPercentage=function(e){return parseInt(e)/parseInt(this.model.get("high"))*100},n.prototype.translatePercentageToScore=function(e){return Math.round(parseInt(this.model.get("high"))*(e/100))},n.prototype.translateScoreToPosition=function(e){var t;return t=e/this.model.get("high")*100,this.translatePercentageToPosition(t)},n.prototype.translatePositionToPercentage=function(e){var t,n,r;return t=this.relativeBoundaryBox(),r=t[0],n=t[2],(e-r)/(n-r)*100},n.prototype.translatePositionToScore=function(e){var t;return t=this.translatePositionToPercentage(e),this.translatePercentageToScore(t)},n.prototype.translatePercentageToPosition=function(e){var t,n,r,i;return t=this.relativeBoundaryBox(),i=t[0],r=t[2],n=t[2]-t[0],t[0]+n*(e/100)},n.prototype.trackWidth=function(){var e;return e=this.boundaryBox(),e[2]-e[0]},n.prototype.relativeBoundaryBox=function(){var e,t,n;return e=this.absoluteBoundaryBox(),t=this.ui.track.offset(),n=[e[0]-t.left+this.lowShim,0,e[2]-t.left+this.highShim,e[3]]},n.prototype.absoluteBoundaryBox=function(){var e,t,n,r,i;return r=this.ui.track.offset(),n=this.ui.grabber.outerWidth()*.5-4,i=r.left-n,t=r.left+this.ui.track.outerWidth()-n,e=[i,0,t,0]},n.prototype.updateScore=function(e){return this.ui.score.html(e)},n.prototype.updatePlacard=function(e){var t,n;if(_.isNumber(e)&&!_.isNaN(e)){n=this.rubric.getRangeForScore(e);if(n!=null)return t=this.rubric.getCellDescription(this.model.id,n.id),this.ui.placardContent.html(t),this.ui.placardTitle.html(n.get("name"))}},n.prototype.updateBarAndGrabberPosition=function(e,t,n){return t==null&&(t=!1),n==null&&(n=!0),this.updateFillPosition(e,t,n),this.updateGrabberPosition(e,t,n)},n.prototype.updateGrabberPosition=function(e,t,n){t==null&&(t=!1),n==null&&(n=!0),t===!0?(this.forceHidePlacard(),this.ui.grabber.animate({left:""+e+"px"},250)):this.ui.grabber.css({left:""+e+"px"});if(n)return this.updateModelFromPosition(e)},n.prototype.updateModelFromPosition=function(e){return this.model.set("score",this.translatePositionToScore(e)),this.model.set("percentage",this.translatePositionToPercentage(e)),this.trigger("updated")},n.prototype.updateFillPosition=function(e,t,n){var r;return t==null&&(t=!1),n==null&&(n=!0),r=this.translatePositionToScore(e),this.updateScore(r),this.updatePlacard(r),e+=5,t===!0?(this.forceHidePlacard(),this.ui.fill.animate({width:""+e+"px"},250)):this.ui.fill.width(e)},n.prototype.onDrag=function(e,t){return this.updateFillPosition(t.position.left)},n.prototype.onTrackClick=function(e){var t,n,r;return n=e.pageX,t=n-this.ui.track.offset().left,r=this.translatePositionToSnapPosition(t),this.updateBarAndGrabberPosition(r,!0)},n.prototype.onDragStop=function(){var e;return e=this.translatePositionToSnapPosition(this.currentPosition()),this.updateBarAndGrabberPosition(e,!0)},n.prototype.onDestroy=function(){return $(window).off("resize.score_slider_"+this.cid)},n.prototype.onGrabberMouseDown=function(){return this.ui.grabber.draggable("option","containment",this.absoluteBoundaryBox())},n.prototype.initialize=function(e){var t=this;return this.vent=e.vent,this.rubric=e.rubric,this.listenTo(this.vent,"range:open",function(){return t.updatePositionFromModel()})},n.prototype.updatePositionFromModel=function(){var e;if(this.isDestroyed!==!0)return e=this.translatePercentageToPosition(this.model.get("percentage")),this.updateBarAndGrabberPosition(e,!1,!1)},n.prototype.onShow=function(){var e,t=this;return e={axis:"x"},this.ui.grabber.draggable(e),setTimeout(function(){return t.updatePositionFromModel()},0)},n.prototype.serializeData=function(){var e;return e=n.__super__.serializeData.call(this),e},n.prototype.onRender=function(){return this.onShow()},n}(n.ItemView)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/submission/evaluations/my_evaluations",["require","marionette","hbs!templates/submission/evaluations/my_evaluations","views/submission/evaluations/score_slider","behaviors/expandable_range","collections/score_collection","views/modal/modal_confirm"],function(e){var n,r,i,s,o,u,a,f;return r=e("marionette"),a=e("hbs!templates/submission/evaluations/my_evaluations"),u=e("views/submission/evaluations/score_slider"),n=e("behaviors/expandable_range"),o=e("collections/score_collection"),i=e("views/modal/modal_confirm"),s=function(e){function r(){return f=r.__super__.constructor.apply(this,arguments),f}return t(r,e),r.prototype.tagName="ul",r.prototype.template=a,r.prototype.className="evaluation-collections evaluation-editable",r.prototype.childView=u,r.prototype.ui={utility:'[data-behavior="utility"]',subtotal:'[data-behavior="subtotal"]',total:'[data-behavior="total"]',destroyButton:'[data-behavior="evaluation-destroy"]',saveButton:'[data-behavior="evaluation-save"]',percentage:'[data-container="percentage"]',totalScore:'[data-container="total-score"]',subtotalScore:'[data-container="subtotal-score"]',childInsertBefore:'[data-anchor="child-insert-before"]',publishCheckbox:'[data-behavior="publish-switch"]',rangeFill:'[data-behavior="range-fill"]',publishSwitch:".switch",notice:'[data-behavior="notice"]'},r.prototype.childViewOptions=function(){return{vent:this,rubric:this.rubric}},r.prototype.behaviors={expandableRange:{behaviorClass:n}},r.prototype.triggers={"click @ui.destroyButton":"evaluation:destroy","click @ui.saveButton":"evaluation:save",'click [data-behavior="toggle-detail"]':"detail:toggle","click @ui.publishCheckbox":{event:"evaluation:toggle",preventDefault:!1}},r.prototype.onEvaluationDestroy=function(){return Vocat.vent.trigger("modal:open",new i({model:this.model,vent:this,descriptionLabel:"Deleted evaluations cannot be recovered.",confirmEvent:"confirm:destroy",dismissEvent:"dismiss:destroy"}))},r.prototype.onEvaluationSave=function(){return this.vent.triggerMethod("evaluation:save")},r.prototype.onConfirmDestroy=function(){return this.vent.triggerMethod("evaluation:destroy")},r.prototype.onEvaluationToggle=function(){var e;return e=this.model.get("published"),e===!0?this.model.set("published",!1):this.model.set("published",!0),this.vent.triggerMethod("evaluation:dirty"),this.updatePublishedUIState()},r.prototype.updatePublishedUIState=function(){return this.model.get("published")===!0?(this.ui.publishSwitch.addClass("switch-checked"),this.ui.publishCheckbox.attr("checked",!0)):(this.ui.publishSwitch.removeClass("switch-checked"),this.ui.publishCheckbox.attr("checked",!1))},r.prototype.updateCollectionFromModel=function(){return this.model!=null?this.collection=this.model.getScoresCollection():this.collection=new o},r.prototype.showSaveSuccessNotice=function(){var e=this;return this.ui.notice.html("Your evaluation has been successfully saved."),this.ui.notice.fadeIn(),setTimeout(function(){if(e.ui.notice.length>0&&_.isFunction(e.ui.notice.slideUp))return e.ui.notice.slideUp()},5e3)},r.prototype.setupListeners=function(){var e=this;return this.listenTo(this,"childview:updated",function(){return e.vent.triggerMethod("evaluation:dirty"),e.updateTotals()}),this.listenTo(this.model,"change",function(){return e.updatePublishedUIState()}),this.listenTo(this.vent,"evaluation:save:success",function(){return e.showSaveSuccessNotice()})},r.prototype.initialize=function(e){return this.vent=e.vent,this.rubric=e.rubric,this.setupListeners(),this.updateCollectionFromModel()},r.prototype.updateTotals=function(){return this.ui.percentage.html(this.model.get("total_percentage_rounded")),this.ui.rangeFill.animate({width:""+this.model.get("total_percentage_rounded")+"%"}),this.ui.totalScore.html(this.model.get("total_score")),this.ui.subtotalScore.html(this.model.get("total_score"))},r.prototype.attachHtml=function(e,t,n){return e.isBuffering?e.elBuffer.appendChild(t.el):$(t.el).insertBefore(e.ui.childInsertBefore)},r.prototype.attachBuffer=function(e,t){return $(t).insertBefore(e.ui.childInsertBefore)},r.prototype.onRender=function(){return this.updatePublishedUIState()},r}(r.CompositeView)})}.call(this),define("hbs!templates/submission/evaluations/my_evaluations_create",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,'<div class="evaluation-create">\n	<a data-behavior="create-evaluation" href="#"><span>Add Evaluation</span></a>\n</div>\n'});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/submission/evaluations/my_evaluations_create",["require","marionette","hbs!templates/submission/evaluations/my_evaluations_create"],function(e){var n,r,i,s;return n=e("marionette"),i=e("hbs!templates/submission/evaluations/my_evaluations_create"),r=function(e){function n(){return s=n.__super__.constructor.apply(this,arguments),s}return t(n,e),n.prototype.template=i,n.prototype.triggers={'click [data-behavior="create-evaluation"]':"evaluation:new"},n.prototype.onEvaluationNew=function(){return this.vent.triggerMethod("evaluation:new")},n.prototype.initialize=function(e){return this.vent=e.vent,this.rubric=e.rubric},n}(n.ItemView)})}.call(this),define("hbs!templates/submission/evaluations/save_notify",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,'<div class="alert alert-notice">\n	<aside class="alert--label"></aside>\n	<p>\n		You have made changes to your evaluation of this submission. Would you like to save these changes?\n	<p>\n	</p>\n	<a href="#" data-trigger="save" class="primary-button" >Yes, save changes</a>\n	<a href="#" data-trigger="revert" class="warning-button cancel-button" >No, revert changes</a>\n	</p>\n</div>\n'});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/submission/evaluations/save_notify",["require","marionette","hbs!templates/submission/evaluations/save_notify","behaviors/global_notification"],function(e){var n,r,i,s,o;return i=e("marionette"),s=e("hbs!templates/submission/evaluations/save_notify"),n=e("behaviors/global_notification"),r=function(e){function r(){return o=r.__super__.constructor.apply(this,arguments),o}return t(r,e),r.prototype.template=s,r.prototype.triggers={'click [data-trigger="save"]':"click:evaluation:save",'click [data-trigger="revert"]':"click:evaluation:revert"},r.prototype.behaviors={globalNotification:{behaviorClass:n}},r.prototype.initialize=function(e){return this.vent=e.vent},r.prototype.onClickEvaluationSave=function(){return Vocat.vent.trigger("notification:empty"),this.vent.triggerMethod("evaluation:save")},r.prototype.onClickEvaluationRevert=function(){return Vocat.vent.trigger("notification:empty"),this.vent.triggerMethod("evaluation:revert")},r}(i.ItemView)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/submission/evaluations/evaluations_layout",["require","marionette","hbs!templates/submission/evaluations/evaluations_layout","collections/evaluation_collection","models/evaluation","collections/collection_proxy","views/submission/evaluations/their_evaluations","views/submission/evaluations/their_evaluations_empty","views/submission/evaluations/my_evaluations","views/submission/evaluations/my_evaluations_create","views/submission/evaluations/save_notify","models/rubric"],function(e){var n,r,i,s,o,u,a,f,l,c,h,p,d;return o=e("marionette"),p=e("hbs!templates/submission/evaluations/evaluations_layout"),i=e("collections/evaluation_collection"),r=e("models/evaluation"),n=e("collections/collection_proxy"),c=e("views/submission/evaluations/their_evaluations"),h=e("views/submission/evaluations/their_evaluations_empty"),u=e("views/submission/evaluations/my_evaluations"),a=e("views/submission/evaluations/my_evaluations_create"),l=e("views/submission/evaluations/save_notify"),f=e("models/rubric"),s=function(e){function n(){return d=n.__super__.constructor.apply(this,arguments),d}return t(n,e),n.prototype.template=p,n.prototype.regions={theirEvaluations:'[data-region="their-evaluations"]',myEvaluations:'[data-region="my-evaluations"]'},n.prototype.ui={body:'[data-behavior="body"]'},n.prototype.onEvaluationDestroy=function(){var e,t=this;return e=this.evaluations.findWhere({current_user_is_evaluator:!0}),e.destroy({wait:!0,success:function(){return t.showMyEvaluations(),Vocat.vent.trigger("notification:empty")}})},n.prototype.onEvaluationDirty=function(){var e;return e=new l({model:this.myEvaluationModel(),vent:this}),Vocat.vent.trigger("notification:show",e)},n.prototype.onEvaluationSave=function(){var e,t=this;e=this.myEvaluationModel();if(e!=null)return Vocat.vent.trigger("notification:empty"),e.save({},{success:function(){return t.trigger("evaluation:save:success"),t.model.fetch()}})},n.prototype.onEvaluationRevert=function(){var e;e=this.myEvaluationModel();if(e!=null)return e.revert()},n.prototype.onEvaluationNew=function(){var e,t=this;return e=new r({submission_id:this.model.id}),e.save({},{success:function(){return t.evaluations.add(e),t.vent.triggerMethod("evaluation:created"),t.model.unsetMyEvaluation(),t.showMyEvaluations(!0)},error:function(){return Vocat.vent.trigger("error:add",{level:"error",msg:"Unable to create evaluation. Perhaps you do not have permission to evaluate this submission."}),t.showMyEvaluations()}})},n.prototype.initialize=function(e){return this.vent=o.getOption(this,"vent"),this.courseId=o.getOption(this,"courseId"),this.rubric=new f(this.model.get("project").rubric),this.evaluations=new i(this.model.get("evaluations"),{courseId:this.courseId})},n.prototype.myEvaluationModel=function(){return this.evaluations.findWhere({current_user_is_evaluator:!0})},n.prototype.showMyEvaluations=function(e){e==null&&(e=!1);if(this.myEvaluationModel()==null)return this.myEvaluations.show(new a({evaluations:this.evaluations,rubric:this.rubric,vent:this}));this.myEvaluations.show(new u({model:this.myEvaluationModel(),rubric:this.rubric,vent:this}));if(e===!0)return this.myEvaluations.currentView.triggerMethod("toggle:child")},n.prototype.showTheirEvaluations=function(){if(!(this.myEvaluationModel()&&this.evaluations.length===1||this.evaluations.length===0))return this.theirEvaluations.$el.removeClass("evaluation-collection-empty"),this.theirEvaluations.show(new c({evaluations:this.evaluations,rubric:this.rubric}));this.theirEvaluations.$el.addClass("evaluation-collection-empty");if(this.model.get("abilities").can_evaluate===!1)return this.theirEvaluations.show(new h)},n.prototype.onRender=function(){this.showTheirEvaluations();if(this.model.get("abilities").can_evaluate===!0)return this.showMyEvaluations()},n}(o.LayoutView)})}.call(this),define("hbs!templates/assets/assets_layout",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,'<div class="page-section page-section-clear">\n	<div class="header-wrapper">\n		<div class="buttons">\n      <a href="#" data-behavior="manage-link" class="primary-button">Manage Assets</a>\n			<a href="#" data-behavior="stop-manage-link" class="secondary-button">Stop Managing Assets</a>\n		</div>\n		<div class="header">\n			<h2>Submission Assets</h2>\n		</div>\n	</div>\n	<div class="body">\n    <div data-region="asset-collection"></div>\n		<div data-region="asset-new"></div>\n	</div>\n</div>\n\n'});return n}),define("hbs!templates/assets/asset_collection",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,'<div class="page-section--component" data-behavior="collection-container"></div>\n'});return n}),define("hbs!templates/assets/asset_collection_child",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression;return s+='<div class="page-section--subsection page-section--subsection-ruled portfolio-item">\n	<div class="portfolio-item--thumb">\n		<div class="thumb-container">\n			<a href="#">\n				<img src="',(o=n.thumb)?o=o.call(t,{hash:{}}):(o=t.thumb,o=typeof o===u?o.apply(t):o),s+=a(o)+'">\n			</a>\n		</div>\n	</div>\n	<div class="portfolio-item--content">\n		<h3 class="heading-tertiary">\n			<a href="#" data-behavior="">\n        ',(o=n.name)?o=o.call(t,{hash:{}}):(o=t.name,o=typeof o===u?o.apply(t):o),s+=a(o)+" ",(o=n.listing_order_position)?o=o.call(t,{hash:{}}):(o=t.listing_order_position,o=typeof o===u?o.apply(t):o),s+=a(o)+'\n      </a>\n		</h3>\n		<a href="#" data-behavior="destroy">Delete</a>\n		<a href="#" data-behavior="move">Move</a>\n		<h5 class="heading-informational">\n			Info about the asset...\n		</h5>\n	</div>\n</div>\n\n\n\n',s});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/assets/asset_collection_child",["require","marionette","hbs!templates/assets/asset_collection_child"],function(e){var n,r,i,s;return r=e("marionette"),i=e("hbs!templates/assets/asset_collection_child"),n=function(e){function n(){return s=n.__super__.constructor.apply(this,arguments),s}return t(n,e),n.prototype.template=i,n.prototype.attributes={"data-behavior":"sortable-item"},n.prototype.events={drop:"onDrop"},n.prototype.ui={destroy:'[data-behavior="destroy"]',move:'[data-behavior="move"]'},n.prototype.triggers={"click @ui.destroy":"delete"},n.prototype.onDrop=function(e,t){return this.trigger("update:sort",[this.model,t])},n.prototype.onDelete=function(){return this.model.destroy()},n.prototype.initialize=function(e){return this.vent=r.getOption(this,"vent")},n}(r.ItemView)})}.call(this),define("hbs!templates/assets/asset_collection_empty",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,'<div class="strong centered">\n	Nothing Yet. <a href="#" data-behavior="empty-manage-link">Add some...</a>\n</div>\n'});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/assets/asset_collection_empty",["require","marionette","hbs!templates/assets/asset_collection_empty"],function(e){var n,r,i,s;return r=e("marionette"),i=e("hbs!templates/assets/asset_collection_empty"),n=function(e){function n(){return s=n.__super__.constructor.apply(this,arguments),s}return t(n,e),n.prototype.template=i,n.prototype.ui={manageLink:'[data-behavior="empty-manage-link"]'},n.prototype.triggers={"click @ui.manageLink":"show:new"},n.prototype.onShowNew=function(){return this.vent.trigger("show:new")},n.prototype.initialize=function(e){return this.vent=r.getOption(this,"vent")},n}(r.ItemView)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/assets/asset_collection",["require","marionette","hbs!templates/assets/asset_collection","views/assets/asset_collection_child","views/assets/asset_collection_empty"],function(e){var n,r,i,s,o,u;return s=e("marionette"),o=e("hbs!templates/assets/asset_collection"),r=e("views/assets/asset_collection_child"),i=e("views/assets/asset_collection_empty"),n=function(e){function n(){return u=n.__super__.constructor.apply(this,arguments),u}return t(n,e),n.prototype.childView=r,n.prototype.childViewOptions=function(){return{vent:this.vent}},n.prototype.template=o,n.prototype.childViewContainer='[data-behavior="collection-container"]',n.prototype.emptyView=i,n.prototype.triggers={'click [data-behavior="do-render"]':"forceRender"},n.prototype.onForceRender=function(){return this.render()},n.prototype.setupListeners=function(){return this.listenTo(this,"all",function(e){return console.log(e,"event")}),this.listenTo(this,"childview:update:sort",function(e,t){return this.updateSort(t[0],t[1])})},n.prototype.initialize=function(e){return this.vent=s.getOption(this,"vent"),this.setupListeners()},n.prototype.updateSort=function(e,t){var n;return console.log(e,t),n=t,this.collection.remove(e),e.set("listing_order_position",n),this.collection.add(e,{at:t}),e.save()},n.prototype.onAddChild=function(){return this.$el.sortable({revert:!0,handle:'[data-behavior="move"]',items:'[data-behavior="sortable-item"]',cursor:"move",revert:175,stop:function(e,t){return t.item.trigger("drop",t.item.index())}})},n}(s.CompositeView)})}.call(this),define("hbs!templates/assets/new_asset",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression;return s+='<div class="page-section--component-header strong centered">This Project Accepts Videos, Images, and Audio</div>\n<div class="page-section--component asset-upload">\n	<div class="page-section-one-third asset-upload--file">\n		<div class="wrapper">\n			<a href="#" data-behavior="test-new-asset" class="primary-button new-button">Select File to Upload</a>\n		</div>\n	</div>\n	<div class="page-section-one-third asset-upload--target">\n		<div class="wrapper">\n			<form data-behavior="async-upload" accept-charset="UTF-8" action="http://',(o=n.s3Bucket)?o=o.call(t,{hash:{}}):(o=t.s3Bucket,o=typeof o===u?o.apply(t):o),s+=a(o)+'.s3.amazonaws.com" data-remote="true" enctype="multipart/form-data" id="video-upload" method="post">\n        <span class="file-input-container">\n          <input type="hidden" name="AWSAccessKeyId" value="',(o=n.AWSPublicKey)?o=o.call(t,{hash:{}}):(o=t.AWSPublicKey,o=typeof o===u?o.apply(t):o),s+=a(o)+'" />\n          <input type="hidden" name="acl" value="private" />\n          <input type="hidden" name="success_action_status" value="200" />\n          <input type="hidden" name="key" />\n          <input type="hidden" name="policy" />\n          <input type="hidden" name="signature" />\n          <input  name="file" type="file" />\n          <a href="#" class="decorated upload-target" data-behavior="file-picker">Drag and Drop</a>\n        </span>\n			</form>\n		</div>\n	</div>\n	<div class="page-section-one-third asset-upload--input">\n		<div class="wrapper">\n      <div class="formgrid-input">\n	      <input type="text" placeholder="Vimeo / YouTube URL" />\n      </div>\n		</div>\n	</div>\n</div>\n<div class="centered asset-done">\n	<a href="#" data-behavior="hide-manage" class="secondary-button close-button">Done</a>\n</div>\n',s});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/assets/new_asset",["require","marionette","hbs!templates/assets/new_asset","models/asset"],function(e){var n,r,i,s,o;return r=e("marionette"),s=e("hbs!templates/assets/new_asset"),n=e("models/asset"),i=function(e){function i(){return o=i.__super__.constructor.apply(this,arguments),o}return t(i,e),i.prototype.template=s,i.prototype.ui={testNewButton:'[data-behavior="test-new-asset"]',hideManage:'[data-behavior="hide-manage"]'},i.prototype.triggers={"click @ui.testNewButton":"test:new","click @ui.hideManage":"hide:new"},i.prototype.onHideNew=function(){return this.vent.trigger("hide:new")},i.prototype.onTestNew=function(){var e;return e=new n({name:"A new asset",thumb:"http://1389blog.com/pix/happy-cat-wallpaper-thumbnail.jpg",listing_order_position:this.collection.length}),this.collection.add(e)},i.prototype.initialize=function(e){return this.vent=r.getOption(this,"vent")},i}(r.ItemView)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/assets/assets_layout",["require","marionette","hbs!templates/assets/assets_layout","views/assets/asset_collection","views/assets/new_asset"],function(e){var n,r,i,s,o,u;return i=e("marionette"),o=e("hbs!templates/assets/assets_layout"),n=e("views/assets/asset_collection"),s=e("views/assets/new_asset"),r=function(e){function r(){return u=r.__super__.constructor.apply(this,arguments),u}return t(r,e),r.prototype.template=o,r.prototype.ui={newAssetContainer:'[data-behavior="new-asset-container"]',manageLink:'[data-behavior="manage-link"]',stopManagingLink:'[data-behavior="stop-manage-link"]'},r.prototype.collectionEvents={add:"ensureVisibleCollectionView",remove:"hideEmptyCollectionViewIfNewIsVisible"},r.prototype.triggers={"click @ui.stopManagingLink":"hide:new","click @ui.manageLink":"show:new"},r.prototype.regions={assets:'[data-region="asset-collection"]',newAsset:'[data-region="asset-new"]'},r.prototype.onShowNew=function(){return this.newAsset.show(new s({collection:this.collection,model:this.model.project(),vent:this})),this.hideEmptyCollectionViewIfNewIsVisible(),this.ui.manageLink.css({display:"none"}),this.ui.stopManagingLink.css({display:"inline-block"}),this.newAsset.$el.fadeIn(200)},r.prototype.onHideNew=function(){var e=this;return this.ui.manageLink.show(),this.ui.manageLink.css({display:"inline-block"}),this.ui.stopManagingLink.css({display:"none"}),this.newAsset.$el.fadeOut(200,function(){return e.newAsset.empty(),e.ensureVisibleCollectionView()})},r.prototype.hideEmptyCollectionViewIfNewIsVisible=function(){if(this.collection.length===0&&this.newAsset.currentView!=null)return this.assets.empty()},r.prototype.ensureVisibleCollectionView=function(){this.assets.currentView==null&&this.assets.show(new n({collection:this.collection,vent:this}));if(!this.assets.$el.is(":visible"))return this.newAsset.$el.fadeIn(200)},r.prototype.onRender=function(){return this.ui.stopManagingLink.css({display:"none"}),this.ensureVisibleCollectionView(),this.onShowNew()},r.prototype.setupListeners=function(){var e=this;return this.listenTo(this,"hide:new",function(){return e.onHideNew()}),this.listenTo(this,"show:new",function(){return e.onShowNew()})},r.prototype.initialize=function(e){return this.vent=i.getOption(this,"vent"),this.setupListeners()},r}(i.LayoutView)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/submission/submission_layout",["require","marionette","hbs!templates/submission/submission_layout","views/discussion/discussion","views/submission/evaluations/evaluations_layout","views/assets/assets_layout","views/modal/modal_group_membership"],function(e){var n,r,i,s,o,u,a,f;return s=e("marionette"),a=e("hbs!templates/submission/submission_layout"),r=e("views/discussion/discussion"),i=e("views/submission/evaluations/evaluations_layout"),n=e("views/assets/assets_layout"),o=e("views/modal/modal_group_membership"),u=function(e){function u(){return f=u.__super__.constructor.apply(this,arguments),f}return t(u,e),u.prototype.template=a,u.prototype.children={},u.prototype.triggers=function(){var e;return e={"click @ui.openGroupModal":"open:groups:modal"},_.isFunction(this.vent.triggerMethod)&&(e["click @ui.close"]="close"),e},u.prototype.ui={close:'[data-behavior="detail-close"]',openGroupModal:'[data-behavior="open-group-modal"]'},u.prototype.regions={flash:'[data-region="flash"]',evaluations:'[data-region="submission-evaluations"]',discussion:'[data-region="submission-discussion"]',assets:'[data-region="submission-assets"]'},u.prototype.serializeData=function(){var e;return e={project:this.project.toJSON(),courseId:this.courseId,creator:this.creator.toJSON(),creatorType:this.submission.get("creator_type"),isGroupProject:this.submission.get("creator_type")==="Group"},e},u.prototype.onOpenGroupsModal=function(){return Vocat.vent.trigger("modal:open",new o({groupId:this.creator.id}))},u.prototype.onShow=function(){if(!this.$el.parent().data().hasOwnProperty("hideBackLink"))return this.ui.close.show()},u.prototype.onClose=function(){if(_.isFunction(this.vent.triggerMethod))return this.vent.triggerMethod("close:detail")},u.prototype.onSubmissionLoaded=function(){return this.discussion.show(new r({vent:this.vent,submission:this.submission})),this.submission.get("project").evaluatable&&this.evaluations.show(new i({vent:this.vent,rubric:this.rubric,project:this.project,model:this.submission,courseId:this.courseId})),this.assets.show(new n({vent:this.vent,collection:this.submission.assets(),model:this.submission,courseId:this.courseId}))},u.prototype.initialize=function(e){var t=this;return this.options=e||{},this.vent=e.vent!=null?e.vent:Vocat.vent,this.collections={},this.submission=this.model,this.courseId=s.getOption(this,"courseId"),this.project=s.getOption(this,"project"),this.creator=s.getOption(this,"creator"),this.submission.fetch({success:function(){return t.triggerMethod("submission:loaded")}})},u}(s.LayoutView)})}.call(this),function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},t=[].slice;(function(e,t){return typeof define=="function"&&define.amd?define("waypoints",["jquery"],function(n){return t(n,e)}):t(e.jQuery,e)})(window,function(n,r){var i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b;return i=n(r),c=e.call(r,"ontouchstart")>=0,u={horizontal:{},vertical:{}},a=1,l={},f="waypoints-context-id",d="resize.waypoints",v="scroll.waypoints",m=1,g="waypoints-waypoint-ids",y="waypoint",b="waypoints",s=function(){function e(e){var t=this;this.$element=e,this.element=e[0],this.didResize=!1,this.didScroll=!1,this.id="context"+a++,this.oldScroll={x:e.scrollLeft(),y:e.scrollTop()},this.waypoints={horizontal:{},vertical:{}},this.element[f]=this.id,l[this.id]=this,e.bind(v,function(){var e;if(!t.didScroll&&!c)return t.didScroll=!0,e=function(){return t.doScroll(),t.didScroll=!1},r.setTimeout(e,n[b].settings.scrollThrottle)}),e.bind(d,function(){var e;if(!t.didResize)return t.didResize=!0,e=function(){return n[b]("refresh"),t.didResize=!1},r.setTimeout(e,n[b].settings.resizeThrottle)})}return e.prototype.doScroll=function(){var e,t=this;return e={horizontal:{newScroll:this.$element.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.$element.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}},c&&(!e.vertical.oldScroll||!e.vertical.newScroll)&&n[b]("refresh"),n.each(e,function(e,r){var i,s,o;return o=[],s=r.newScroll>r.oldScroll,i=s?r.forward:r.backward,n.each(t.waypoints[e],function(e,t){var n,i;if(r.oldScroll<(n=t.offset)&&n<=r.newScroll)return o.push(t);if(r.newScroll<(i=t.offset)&&i<=r.oldScroll)return o.push(t)}),o.sort(function(e,t){return e.offset-t.offset}),s||o.reverse(),n.each(o,function(e,t){if(t.options.continuous||e===o.length-1)return t.trigger([i])})}),this.oldScroll={x:e.horizontal.newScroll,y:e.vertical.newScroll}},e.prototype.refresh=function(){var e,t,r,i=this;return r=n.isWindow(this.element),t=this.$element.offset(),this.doScroll(),e={horizontal:{contextOffset:r?0:t.left,contextScroll:r?0:this.oldScroll.x,contextDimension:this.$element.width(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:r?0:t.top,contextScroll:r?0:this.oldScroll.y,contextDimension:r?n[b]("viewportHeight"):this.$element.height(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}},n.each(e,function(e,t){return n.each(i.waypoints[e],function(e,r){var i,s,o,u,a;i=r.options.offset,o=r.offset,s=n.isWindow(r.element)?0:r.$element.offset()[t.offsetProp],n.isFunction(i)?i=i.apply(r.element):typeof i=="string"&&(i=parseFloat(i),r.options.offset.indexOf("%")>-1&&(i=Math.ceil(t.contextDimension*i/100))),r.offset=s-t.contextOffset+t.contextScroll-i;if(r.options.onlyOnScroll&&o!=null||!r.enabled)return;if(o!==null&&o<(u=t.oldScroll)&&u<=r.offset)return r.trigger([t.backward]);if(o!==null&&o>(a=t.oldScroll)&&a>=r.offset)return r.trigger([t.forward]);if(o===null&&t.oldScroll>=r.offset)return r.trigger([t.forward])})})},e.prototype.checkEmpty=function(){if(n.isEmptyObject(this.waypoints.horizontal)&&n.isEmptyObject(this.waypoints.vertical))return this.$element.unbind([d,v].join(" ")),delete l[this.id]},e}(),o=function(){function e(e,t,r){var i,s;r.offset==="bottom-in-view"&&(r.offset=function(){var e;return e=n[b]("viewportHeight"),n.isWindow(t.element)||(e=t.$element.height()),e-n(this).outerHeight()}),this.$element=e,this.element=e[0],this.axis=r.horizontal?"horizontal":"vertical",this.callback=r.handler,this.context=t,this.enabled=r.enabled,this.id="waypoints"+m++,this.offset=null,this.options=r,t.waypoints[this.axis][this.id]=this,u[this.axis][this.id]=this,i=(s=this.element[g])!=null?s:[],i.push(this.id),this.element[g]=i}return e.prototype.trigger=function(e){if(!this.enabled)return;this.callback!=null&&this.callback.apply(this.element,e);if(this.options.triggerOnce)return this.destroy()},e.prototype.disable=function(){return this.enabled=!1},e.prototype.enable=function(){return this.context.refresh(),this.enabled=!0},e.prototype.destroy=function(){return delete u[this.axis][this.id],delete this.context.waypoints[this.axis][this.id],this.context.checkEmpty()},e.getWaypointsByElement=function(e){var t,r;return r=e[g],r?(t=n.extend({},u.horizontal,u.vertical),n.map(r,function(e){return t[e]})):[]},e}(),p={init:function(e,t){var r;return t=n.extend({},n.fn[y].defaults,t),(r=t.handler)==null&&(t.handler=e),this.each(function(){var e,r,i,u;return e=n(this),i=(u=t.context)!=null?u:n.fn[y].defaults.context,n.isWindow(i)||(i=e.closest(i)),i=n(i),r=l[i[0][f]],r||(r=new s(i)),new o(e,r,t)}),n[b]("refresh"),this},disable:function(){return p._invoke.call(this,"disable")},enable:function(){return p._invoke.call(this,"enable")},destroy:function(){return p._invoke.call(this,"destroy")},prev:function(e,t){return p._traverse.call(this,e,t,function(e,t,n){if(t>0)return e.push(n[t-1])})},next:function(e,t){return p._traverse.call(this,e,t,function(e,t,n){if(t<n.length-1)return e.push(n[t+1])})},_traverse:function(e,t,i){var s,o;return e==null&&(e="vertical"),t==null&&(t=r),o=h.aggregate(t),s=[],this.each(function(){var t;return t=n.inArray(this,o[e]),i(s,t,o[e])}),this.pushStack(s)},_invoke:function(e){return this.each(function(){var t;return t=o.getWaypointsByElement(this),n.each(t,function(t,n){return n[e](),!0})}),this}},n.fn[y]=function(){var e,r;return r=arguments[0],e=2<=arguments.length?t.call(arguments,1):[],p[r]?p[r].apply(this,e):n.isFunction(r)?p.init.apply(this,arguments):n.isPlainObject(r)?p.init.apply(this,[null,r]):r?n.error("The "+r+" method does not exist in jQuery Waypoints."):n.error("jQuery Waypoints needs a callback function or handler option.")},n.fn[y].defaults={context:r,continuous:!0,enabled:!0,horizontal:!1,offset:0,triggerOnce:!1},h={refresh:function(){return n.each(l,function(e,t){return t.refresh()})},viewportHeight:function(){var e;return(e=r.innerHeight)!=null?e:i.height()},aggregate:function(e){var t,r,i;return t=u,e&&(t=(i=l[n(e)[0][f]])!=null?i.waypoints:void 0),t?(r={horizontal:[],vertical:[]},n.each(r,function(e,i){return n.each(t[e],function(e,t){return i.push(t)}),i.sort(function(e,t){return e.offset-t.offset}),r[e]=n.map(i,function(e){return e.element}),r[e]=n.unique(r[e])}),r):[]},above:function(e){return e==null&&(e=r),h._filter(e,"vertical",function(e,t){return t.offset<=e.oldScroll.y})},below:function(e){return e==null&&(e=r),h._filter(e,"vertical",function(e,t){return t.offset>e.oldScroll.y})},left:function(e){return e==null&&(e=r),h._filter(e,"horizontal",function(e,t){return t.offset<=e.oldScroll.x})},right:function(e){return e==null&&(e=r),h._filter(e,"horizontal",function(e,t){return t.offset>e.oldScroll.x})},enable:function(){return h._invoke("enable")},disable:function(){return h._invoke("disable")},destroy:function(){return h._invoke("destroy")},extendFn:function(e,t){return p[e]=t},_invoke:function(e){var t;return t=n.extend({},u.vertical,u.horizontal),n.each(t,function(t,n){return n[e](),!0})},_filter:function(e,t,r){var i,s;return i=l[n(e)[0][f]],i?(s=[],n.each(i.waypoints[t],function(e,t){if(r(i,t))return s.push(t)}),s.sort(function(e,t){return e.offset-t.offset}),n.map(s,function(e){return e.element})):[]}},n[b]=function(){var e,n;return n=arguments[0],e=2<=arguments.length?t.call(arguments,1):[],h[n]?h[n].apply(null,e):h.aggregate.call(null,n)},n[b].settings={resizeThrottle:100,scrollThrottle:30},i.on("load.waypoints",function(){return n[b]("refresh")})})}.call(this),function(){(function(e,t){return typeof define=="function"&&define.amd?define("waypoints_sticky",["jquery","waypoints"],t):t(e.jQuery)})(window,function(e){var t,n;return t={wrapper:'<div class="sticky-wrapper" />',stuckClass:"stuck",direction:"down right"},n=function(e,t){var n;return e.wrap(t.wrapper),n=e.parent(),n.data("isWaypointStickyWrapper",!0)},e.waypoints("extendFn","sticky",function(r){var i,s,o;return s=e.extend({},e.fn.waypoint.defaults,t,r),i=n(this,s),o=s.handler,s.handler=function(t){var n,r;n=e(this).children(":first"),r=s.direction.indexOf(t)!==-1,t=="down"?n.outerWidth(n.outerWidth()):n.outerWidth("auto"),n.toggleClass(s.stuckClass,r),i.height(r?n.outerHeight():"");if(o!=null)return o.call(this,t)},i.waypoint(s),this.data("stuckClass",s.stuckClass)}),e.waypoints("extendFn","unsticky",function(){var e;return e=this.parent(),e.data("isWaypointStickyWrapper")?(e.waypoint("destroy"),this.unwrap(),this.removeClass(this.data("stuckClass"))):this})})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/abstract/abstract_matrix",["require","marionette","waypoints_sticky","waypoints"],function(e){var n,r,i;return r=e("marionette"),e("waypoints_sticky"),e("waypoints"),n=function(e){function n(){return i=n.__super__.constructor.apply(this,arguments),i}return t(n,e),n.prototype.minWidth=200,n.prototype.maxWidth=300,n.prototype.memoizeHashCount=0,n.prototype.position=0,n.prototype.stickyHeader=!1,n.prototype.locks={forward:!1},n.prototype.ui={sliderContainer:'[data-behavior="matrix-slider"]',sliderLeft:'[data-behavior="matrix-slider-left"]',sliderRight:'[data-behavior="matrix-slider-right"]'},n.prototype.triggers={'click [data-behavior="matrix-slider-left"]':"slider:left",'click [data-behavior="matrix-slider-right"]':"slider:right"},n.prototype.parentOnShow=function(){var e=this;return this.updateSliderControls(),this.recalculateMatrix(),this.stickyHeader&&this.initializeStickyHeader(),this.listenTo(this,"recalculate",_.debounce(function(){return e.recalculateMatrix()}),250,!0),$(window).resize(function(){if(this.resizeTo)return clearTimeout(this.resizeTo),this.resizeTo=setTimeout(function(){return $(this).trigger("resize_end")})}),$(window).bind("resize_end",function(){return e.recalculateMatrix()})},n.prototype.onSliderLeft=function(){return this.slide("backward")},n.prototype.onSliderRight=function(){return this.slide("forward")},n.prototype.onBeforeClose=function(){return $(window).off("resize"),!0},n.prototype.memoizeHash=function(){return this.memoizeHashCount},n.prototype.recalculateMatrix=function(){var e=this;return this.memoizeHashCount++,setTimeout(function(){return e.adjustToCurrentPosition()},0)},n.prototype.currentLeft=function(){var e;return e=this.actor().css("left"),e==="auto"?e=0:e=parseInt(e,10),e},n.prototype.initializeStickyHeader=function(){var e;return e=this.$el.find('[data-class="sticky-header"]'),e.waypoint("sticky",{offset:$(".page-header").outerHeight(),handler:function(e){var t,n;t=$(this),n=t.children(":first"),e==="down"&&(n.outerWidth(n.outerWidth()),t.find('[data-behavior="dropdown-options"]').each(function(e,t){return $(t).trigger("stuck")}));if(e==="up")return n.css({width:"auto"})}})},n.prototype.stage=_.memoize(function(){return this.$el.find('[data-behavior="matrix-stage"]')},function(){return this.memoizeHash()}),n.prototype.colHeaders=_.memoize(function(){return this.$el.find('[data-behavior="col-headers"]')},function(){return this.memoizeHash()}),n.prototype.actor=_.memoize(function(){return this.$el.find('[data-behavior="matrix-actor"]')},function(){return this.memoizeHash()}),n.prototype.columnCount=_.memoize(function(){var e,t;return e=this.actor().find("tr:first-child td").length,t=this.colHeaders().find("tr:first-child th, tr:first-child td").length,Math.max(e,t)},function(){return this.memoizeHash()}),n.prototype.setColWidths=function(e,t){var n,r;return this.colHeaders().find("thead tr th").css({"min-width":this.minWidth}).outerWidth(e),this.colHeaders().outerWidth(t),this.actor().find("tbody tr:first-child td").css({"min-width":"min-width",minWidth:this.minWidth}).outerWidth(e),this.actor().outerWidth(t),n=this.$el.find('[data-class="sticky-header"]'),n.outerWidth(n.parent().outerWidth()),r=this.$el.find("[data-match-height-source]").outerHeight()-.4,this.$el.find("[data-match-height-target]").outerHeight(r).hide().show(0),this.adjustRowHeights()},n.prototype.adjustRowHeights=function(){var e,t=this;return e=this.actor().find("tr"),this.$el.find("[data-vertical-headers] th").each(function(t,n){var r,i,s,o;r=$(n),i=$(e[t]).find("td"),s=r.outerHeight(),o=i.outerHeight();if(s>o)return i.outerHeight(s);if(o>s)return r.outerHeight(o)})},n.prototype.widthCheckCells=_.memoize(function(){return this.actor().find("tr:first-child th, tr:first-child td")},function(){return this.memoizeHash()}),n.prototype.minimumViableColumnWidth=_.memoize(function(){var e,t,n,r;return t=this.columnCount(),this.setColWidths(this.minWidth,this.minWidth*t),e=[],this.widthCheckCells().each(function(t,n){var r,i;return r=$(n),i=r.outerWidth(),e.push(i)}),r=_.max(e),r>this.minWidth&&r<this.maxWidth?n=r:n=this.minWidth,n},function(){return this.memoizeHash()}),n.prototype.idealColumnWidth=_.memoize(function(){var e,t,n,r,i;r=this.minimumViableColumnWidth(),n=this.maxWidth,i=this.visibleWidth(),t=Math.floor(i/r),this.columnCount()<t&&(t=this.columnCount());while(r<n){e=Math.floor(i/r);if(e<=t)break;r++}return r},function(){return this.memoizeHash()}),n.prototype.visibleColumns=_.memoize(function(e){var t;return t=Math.floor(this.visibleWidth()/this.idealColumnWidth()),t===0&&(t=1),t},function(){return this.memoizeHash()}),n.prototype.visibleWidth=_.memoize(function(){return this.stageWidth()-this.handleWidth()},function(){return this.memoizeHash()}),n.prototype.columnWidths=_.memoize(function(){var e,t;return this.minimumViableColumnWidth()>this.minWidth&&this.setColWidths(this.minimumViableColumnWidth(),this.minimumViableColumnWidth()*this.visibleColumns()),this.stageWidth()>0?(e=this.visibleWidth()/this.visibleColumns(),this.setColWidths(e,e*this.columnCount()),t=_.range(this.columnCount()),_.each(t,function(n,r){return t[r]=e}),t):[]},function(){return this.memoizeHash()}),n.prototype.handleWidth=_.memoize(function(){var e,t;return this.ui.sliderLeft.is(":visible")?e=!0:e=!1,this.ui.sliderLeft.show(),t=Math.floor(this.ui.sliderLeft.outerWidth()),e===!1&&this.ui.sliderLeft.hide(),t},function(){return this.memoizeHash()}),n.prototype.stageWidth=_.memoize(function(){return this.stage().width()},function(){return this.memoizeHash()}),n.prototype.actorWidth=_.memoize(function(){return _.reduce(this.columnWidths(),function(e,t){return e+t},0)},function(){return this.memoizeHash()}),n.prototype.hiddenWidth=_.memoize(function(){return Math.floor(this.actorWidth()-this.stageWidth())},function(){return this.memoizeHash()}),n.prototype.maxAttainablePosition=_.memoize(function(){return this.columnCount()-this.visibleColumns()},function(){return this.memoizeHash()}),n.prototype.canSlideForwardFrom=function(e){return e==null&&(e=null),e===null&&(e=this.currentLeft()),e>this.hiddenWidth()*-1},n.prototype.canSlideBackwardFrom=function(e){return e==null&&(e=null),e===null&&(e=this.currentLeft()),e<0},n.prototype.updateSliderControls=function(){return this.canSlideBackwardFrom()?this.ui.sliderLeft.show():this.ui.sliderLeft.hide(),this.canSlideForwardFrom()&&this.locks.forward===!1?this.ui.sliderRight.show():this.ui.sliderRight.hide(),this.positionSliderLeft()},n.prototype.positionSliderLeft=function(){var e;return e=this.$el.find("[data-vertical-headers]").outerWidth(),this.ui.sliderLeft.css("left",e)},n.prototype.targetForPosition=function(e){var t,n;return t=this.columnWidths()[0],n=e*t*-1,n<this.hiddenWidth()*-1&&(n=this.hiddenWidth()*-1),n=Math.ceil(n),n>0&&(n=0),n},n.prototype.animate=function(e,t){var n=this;return t==null&&(t=250),this.actor().animate({left:e},t).promise().done(function(){return n.updateSliderControls()}),this.colHeaders().animate({left:e},t).promise().done(function(){return n.updateSliderControls()})},n.prototype.checkAndAdjustPosition=function(e){return e>this.maxAttainablePosition()&&(e=this.maxAttainablePosition()),e<0&&(e=0),e},n.prototype.adjustToCurrentPosition=function(){return this.animate(this.targetForPosition(this.position),0)},n.prototype.slideTo=function(e){var t=this;return e=this.checkAndAdjustPosition(e),this.position=e,this.animate(this.targetForPosition(this.position),function(){return t.locks.forward=!1,t.updateSliderControls()})},n.prototype.slideToEnd=function(){return this.locks.forward=!0,this.memoizeHashCount++,this.slideTo(this.columnCount()-1),this.updateSliderControls()},n.prototype.slide=function(e){var t,n;return t=Backbone.Wreqr.radio.channel("global"),t.vent.trigger("user:action"),n=this.checkAndAdjustPosition(this.position),e==="forward"&&this.canSlideForwardFrom()&&(n+=1),e==="backward"&&this.canSlideBackwardFrom()&&(n-=1),this.slideTo(n)},n}(r.LayoutView)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/course_map/course_map_layout",["require","hbs!templates/course_map/course_map_layout","collections/collection_proxy","views/course_map/projects","views/course_map/creators","views/course_map/matrix","views/course_map/detail_creator","views/course_map/warning","views/project/detail","views/submission/submission_layout","views/abstract/abstract_matrix","collections/submission_for_course_user_collection","collections/submission_for_group_collection"],function(e){var n,r,i,s,o,u,a,f,l,c,h,p,d,v;return d=e("hbs!templates/course_map/course_map_layout"),r=e("collections/collection_proxy"),l=e("views/course_map/projects"),i=e("views/course_map/creators"),f=e("views/course_map/matrix"),s=e("views/course_map/detail_creator"),p=e("views/course_map/warning"),u=e("views/project/detail"),o=e("views/submission/submission_layout"),n=e("views/abstract/abstract_matrix"),c=e("collections/submission_for_course_user_collection"),h=e("collections/submission_for_group_collection"),a=function(e){function n(){return v=n.__super__.constructor.apply(this,arguments),v}return t(n,e),n.prototype.children={},n.prototype.minWidth=170,n.prototype.capturedScroll=0,n.prototype.stickyHeader=!0,n.prototype.template=d,n.prototype.ui={detail:'[data-region="detail"]',sliderLeft:'[data-behavior="matrix-slider-left"]',sliderRight:'[data-behavior="matrix-slider-right"]',viewToggle:'[data-behavior="view-toggle"]',hideOnWarning:'[data-behavior="hide-on-warning"]'},n.prototype.triggers={'click [data-behavior="matrix-slider-left"]':"slider:left",'click [data-behavior="matrix-slider-right"]':"slider:right","change @ui.viewToggle":{event:"view:toggle",preventDefault:!1,stopPropagation:!1}},n.prototype.regions={detail:'[data-region="detail"]',creators:'[data-region="creators"]',projects:'[data-region="projects"]',matrix:'[data-region="matrix"]',globalFlash:'[data-region="flash"]',warning:'[data-region="warning"]'},n.prototype.onRender=function(){return this.sliderPosition=0,this.bindUIElements()},n.prototype.onShow=function(){return this.parentOnShow()},n.prototype.initialize=function(e){return this.collections=e.collections,this.courseId=e.courseId},n.prototype.showUserViews=function(){var e,t;e=this.creatorType,this.creatorType="User",t=r(this.collections.project),t.where(function(e){return e.get("type")==="UserProject"||e.get("type")==="OpenProject"});if(t.length===0)return this.showEmptyWarning("User","Project");if(this.collections.user.length===0)return this.showEmptyWarning("User","Creator");this.warning.reset();if(e!=="User")return this.creators.show(new i({collection:this.collections.user,courseId:this.courseId,vent:this,creatorType:"User"})),this.projects.show(new l({collection:t,courseId:this.courseId,vent:this})),this.matrix.show(new f({collection:this.collections.user,collections:{project:t,submission:this.collections.submission},courseId:this.courseId,creatorType:"User",vent:this})),this.recalculateMatrix()},n.prototype.showGroupViews=function(){var e,t;e=this.creatorType,this.creatorType="Group",t=r(this.collections.project),t.where(function(e){return e.get("type")==="GroupProject"||e.get("type")==="OpenProject"});if(t.length===0)return this.showEmptyWarning("Group","Project");if(this.collections.group.length===0)return this.showEmptyWarning("Group","Creator");this.warning.reset();if(e!=="Group")return this.creators.show(new i({collection:this.collections.group,courseId:this.courseId,vent:this,creatorType:"Group"})),this.projects.show(new l({collection:t,courseId:this.courseId,vent:this})),this.matrix.show(new f({collection:this.collections.group,collections:{project:t,submission:this.collections.submission},courseId:this.courseId,creatorType:"Group",vent:this})),this.recalculateMatrix()},n.prototype.showEmptyWarning=function(e,t){return this.warning.show(new p({creatorType:e,warningType:t,courseId:this.courseId})),this.ui.hideOnWarning.hide()},n.prototype.setActive=function(e){return this.collections.user.setActive(e.user!=null?e.user.id:null),this.collections.group.setActive(e.group!=null?e.group.id:null),this.collections.project.setActive(e.project!=null?e.project.id:null)},n.prototype.onShowGroups=function(){return this.showGroupViews(),this.$el.find("#view-individuals").prop("checked",!1),this.$el.find("#view-groups").prop("checked",!0),Vocat.router.navigate("courses/"+this.courseId+"/groups/evaluations")},n.prototype.onShowUsers=function(){return this.showUserViews(),this.$el.find("#view-individuals").prop("checked",!0),this.$el.find("#view-groups").prop("checked",!1),Vocat.router.navigate("courses/"+this.courseId+"/users/evaluations")},n.prototype.onViewToggle=function(){var e;e=this.$el.find('[data-behavior="view-toggle"]:checked').val();if(e==="individuals")return this.triggerMethod("show:users");if(e==="groups")return this.triggerMethod("show:groups")},n.prototype.onOpenDetailProject=function(e){if(this.creatorType==="User")return this.triggerMethod("open:detail:project:users",{project:e.project});if(this.creatorType==="Group")return this.triggerMethod("open:detail:project:groups",{project:e.project})},n.prototype.onOpenDetailCreator=function(e){var t;t=e.creator;if(t.creatorType==="User")return this.triggerMethod("open:detail:user",{user:t});if(t.creatorType==="Group")return this.triggerMethod("open:detail:group",{group:t})},n.prototype.onOpenDetailUser=function(e){var t;return this.showUserViews(),this.setActive({user:e.user}),Vocat.router.navigate("courses/"+this.courseId+"/users/evaluations/creator/"+e.user.id),t=new s({collection:new c,courseId:this.courseId,vent:this,model:e.user}),this.openDetail(t)},n.prototype.onOpenDetailGroup=function(e){var t;return this.showGroupViews(),this.setActive({group:e.group}),Vocat.router.navigate("courses/"+this.courseId+"/groups/evaluations/creator/"+e.group.id),t=new s({collection:new h,courseId:this.courseId,vent:this,model:e.group}),this.openDetail(t)},n.prototype.onOpenDetailProjectUsers=function(e){var t;return this.showUserViews(),this.setActive({project:e.project}),Vocat.router.navigate("courses/"+this.courseId+"/users/evaluations/project/"+e.project.id),t=new u({collections:{creators:this.collections.user,submissions:this.collections.submission},courseId:this.courseId,vent:this,model:e.project}),this.openDetail(t)},n.prototype.onOpenDetailProjectGroups=function(e){var t;return this.showGroupViews(),this.setActive({project:e.project}),Vocat.router.navigate("courses/"+this.courseId+"/groups/evaluations/project/"+e.project.id),t=new u({collections:{creators:this.collections.group,submissions:this.collections.submission},courseId:this.courseId,vent:this,model:e.project}),this.openDetail(t)},n.prototype.onOpenDetailCreatorProject=function(e){var t,n;return _.isObject(e.project)||(e.project=this.collections.project.get(e.project)),e.creator.creatorType==="User"?(this.showUserViews(),this.setActive({project:e.project,user:e.creator}),Vocat.router.navigate("courses/"+this.courseId+"/users/evaluations/creator/"+e.creator.id+"/project/"+e.project.id)):e.creator.creatorType==="Group"&&(this.showGroupViews(),this.setActive({project:e.project,group:e.creator}),Vocat.router.navigate("courses/"+this.courseId+"/groups/evaluations/creator/"+e.creator.id+"/project/"+e.project.id)),t=this.collections.submission.findWhere({creator_id:e.creator.id,project_id:e.project.id,creator_type:e.creator.creatorType}),n=new o({collections:{submission:this.collections.submission},courseId:this.courseId,vent:this,creator:e.creator,project:e.project,model:t}),this.openDetail(n)},n.prototype.openDetail=function(e){return this.ui.detail.show(),this.detail.show(e),this.captureScroll(),window.scrollTo(0,0)},n.prototype.captureScroll=function(){return this.capturedScroll=$(window).scrollTop()},n.prototype.restoreScroll=function(){var e=this;if(this.capturedScroll)return $(window).scrollTop(this.capturedScroll),setTimeout(function(){return $(window).scrollTop(e.capturedScroll)},100)},n.prototype.onCloseDetail=function(e){return this.ui.detail.hide(),this.detail.empty(),this.creatorType==="Group"?Vocat.router.navigate("courses/"+this.courseId+"/groups/evaluations"):this.creatorType==="User"&&Vocat.router.navigate("courses/"+this.courseId+"/users/evaluations"),this.recalculateMatrix(),this.restoreScroll()},n.prototype.onEvaluationsPublish=function(e){var t,n=this;return t=""+e.url()+"/publish_evaluations",$.ajax(t,{type:"put",dataType:"json",data:{},success:function(t,r,i){var s;return Vocat.vent.trigger("error:add",{level:"notice",lifetime:4e3,msg:"Your evaluations for "+e.get("name")+" submissions have been published"}),s=n.collections.submission.where({project_id:e.id}),_.each(s,function(e){return e.set("current_user_published",!0)})},error:function(e,t,n){return Vocat.vent.trigger("error:add",{level:"notice",lifetime:4e3,msg:"Unable to publish submissions."})}})},n.prototype.onEvaluationsUnpublish=function(e){var t,n=this;return t=""+e.url()+"/unpublish_evaluations",$.ajax(t,{type:"put",dataType:"json",data:{},success:function(t,r,i){var s;return Vocat.vent.trigger("error:add",{level:"notice",lifetime:4e3,msg:"Your evaluations for "+e.get("name")+" submissions have been unpublished"}),s=n.collections.submission.where({project_id:e.id}),_.each(s,function(e){return e.set("current_user_published",!1)})},error:function(e,t,n){return Vocat.vent.trigger("error:add",{level:"notice",lifetime:4e3,msg:"Unable to unpublish submissions."})}})},n.prototype.serializeData=function(){var e;return e={creatorType:this.creatorType},e},n.prototype.onColActive=function(e){},n.prototype.onColInactive=function(e){},n}(n)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("controllers/coursemap_controller",["require","controllers/vocat_controller","collections/user_collection","collections/project_collection","collections/submission_for_course_collection","collections/group_collection","views/course_map/course_map_layout","views/project/detail"],function(e){var n,r,i,s,o,u,a,f,l;return f=e("controllers/vocat_controller"),a=e("collections/user_collection"),s=e("collections/project_collection"),u=e("collections/submission_for_course_collection"),i=e("collections/group_collection"),n=e("views/course_map/course_map_layout"),o=e("views/project/detail"),r=function(e){function r(){return l=r.__super__.constructor.apply(this,arguments),l}return t(r,e),r.prototype.collections={user:new a([],{}),group:new i([],{}),project:new s([],{}),submission:new u([],{})},r.prototype.layoutInitialized=!1,r.prototype.initialize=function(){return this.bootstrapCollections()},r.prototype.setupCoursemap=function(e){var t,r=this;return this.courseMap?(t=$.Deferred(),t.resolve(),t):(this.collections.submission=new u,t=this.deferredCollectionFetching(this.collections.submission,{course:e},"Loading course submissions..."),$.when(t).then(function(){return r.courseMap=new n({courseId:e,collections:r.collections}),window.Vocat.main.show(r.courseMap)}),t)},r.prototype.userGrid=function(e){var t,n=this;return t=this.setupCoursemap(e),$.when(t).then(function(){return n.courseMap.triggerMethod("show:users",{}),n.courseMap.triggerMethod("close:detail",{})})},r.prototype.groupGrid=function(e){var t,n=this;return t=this.setupCoursemap(e),$.when(t).then(function(){return n.courseMap.triggerMethod("show:groups",{}),n.courseMap.triggerMethod("close:detail",{})})},r.prototype.userCreatorDetail=function(e,t){var n,r=this;return n=this.setupCoursemap(e),$.when(n).then(function(){return r.courseMap.triggerMethod("open:detail:user",{user:r.collections.user.get(t)})})},r.prototype.userProjectDetail=function(e,t){var n,r=this;return n=this.setupCoursemap(e),$.when(n).then(function(){return r.courseMap.triggerMethod("open:detail:project:users",{project:r.collections.project.get(t)})})},r.prototype.userCreatorProjectDetail=function(e,t,n){var r,i=this;return r=this.setupCoursemap(e),$.when(r).then(function(){return i.courseMap.triggerMethod("open:detail:creator:project",{creator:i.collections.user.get(t),project:i.collections.project.get(n)})})},r.prototype.standaloneUserProjectDetail=function(e,t){var n;return n=new o({courseId:e,collections:this.collections,vent:Vocat.vent,projectId:t}),window.Vocat.main.show(n)},r.prototype.groupCreatorDetail=function(e,t){var n,r=this;return n=this.setupCoursemap(e),$.when(n).then(function(){return r.courseMap.triggerMethod("open:detail:group",{group:r.collections.group.get(t)})})},r.prototype.groupProjectDetail=function(e,t){var n,r=this;return n=this.setupCoursemap(e),$.when(n).then(function(){return r.courseMap.triggerMethod("open:detail:project:groups",{project:r.collections.project.get(t)})})},r.prototype.groupCreatorProjectDetail=function(e,t,n){var r,i=this;return r=this.setupCoursemap(e),$.when(r).then(function(){return i.courseMap.triggerMethod("open:detail:creator:project",{creator:i.collections.group.get(t),project:i.collections.project.get(n)})})},r}(f)})}.call(this),define("hbs!templates/group/group_layout",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,'<div class="page-section page-section-clear">\n  <div class="header-wrapper">\n    <div class="buttons">\n      <a href="#" data-trigger="add" class="primary-button new-button">Add A Group</a>\n      <a href="#" data-trigger="assign" class="secondary-button">Auto Assign to Groups</a>\n    </div>\n    <div class="header">\n      <h1>Manage Groups</h1>\n    </div>\n  </div>\n  <div class="body">\n	  <div class="matrix-warning" data-region="warning"></div>\n    <div class="matrix-wrapper matrix-tight matrix-groups" data-behavior="hide-on-warning">\n\n	    <button style="display: none;" data-behavior="matrix-slider-left" class="matrix-cells-wrapper--back"></button>\n	    <button style="display: none;" data-behavior="matrix-slider-right" class="matrix-cells-wrapper--forward"></button>\n\n	    <div class="matrix-wrapper--top">\n		    <div class="matrix-wrapper--top-left-cell" data-behavior="top-left-cell"  data-match-height-target>\n			    <div class="matrix--column-header-instruction">\n				    &nbsp;\n			    </div>\n		    </div>\n		    <div class="matrix-wrapper--top-mask-left" data-match-height-target></div>\n		    <div class="matrix-wrapper--top-mask-right" data-match-height-target></div>\n\n		    <div class="matrix-wrapper--columns" >\n			    <table class="table matrix matrix-col-headers" data-behavior="col-headers" data-region="groups">\n			    </table>\n		    </div>\n	    </div>\n\n	    <div class="matrix-wrapper--bottom">\n\n		    <div class="matrix-wrapper--left">\n			    <div class="matrix-wrapper--creators" data-vertical-headers data-region="creators"></div>\n		    </div>\n\n		    <div class="matrix-wrapper--body" data-behavior="matrix-stage">\n			    <div class="matrix-body" data-behavior="matrix-actor">\n\n				    <div class="matrix-wrapper--cells">\n					    <table class="table matrix matrix-cells" data-region="matrix">\n					    </table\n				    </div>\n			    </div>\n		    </div>\n\n	    </div>\n\n    </div>\n  </div>\n</div>\n'});return n}),define("hbs!templates/group/creators",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,'  <tbody data-behavior="matrix-creators">\n    <!-- creators_item.hbs -->\n  </tbody>\n\n'});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/group/creators_item",["marionette","hbs!templates/course_map/creators_item"],function(e,n){var r,i;return r=function(e){function r(){return i=r.__super__.constructor.apply(this,arguments),i}return t(r,e),r.prototype.tagName="tr",r.prototype.template=n,r.prototype.triggers={"mouseover a":"active","mouseout a":"inactive","click a":"detail"},r.prototype.attributes={"data-behavior":"navigate-creator"},r.prototype.serializeData=function(){var e;return e=r.__super__.serializeData.call(this),e.courseId=this.options.courseId,e},r.prototype.initialize=function(e){return this.options=e||{},this.listenTo(this.model.collection,"change:active",function(e){return e===this.model?(this.$el.addClass("selected"),this.$el.removeClass("active")):this.$el.removeClass("selected")}),this.$el.attr("data-creator",this.model.id)},r}(e.ItemView)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/group/creators",["marionette","hbs!templates/group/creators","views/group/creators_item"],function(e,n,r){var i,s;return i=function(i){function o(){return s=o.__super__.constructor.apply(this,arguments),s}return t(o,i),o.prototype.tagName="table",o.prototype.className="table matrix matrix-row-headers",o.prototype.template=n,o.prototype.childViewContainer="tbody",o.prototype.childView=r,o.prototype.childViewOptions=function(){return{courseId:this.options.courseId}},o.prototype.onChildviewActive=function(e){return this.vent.triggerMethod("row:active",{creator:e.model.id})},o.prototype.onChildviewInactive=function(e){return this.vent.triggerMethod("row:inactive",{creator:e.model.id})},o.prototype.onChildviewDetail=function(e){return this.vent.triggerMethod("open:detail:creator",{creator:e.model.id})},o.prototype.initialize=function(t){return this.options=t||{},this.vent=e.getOption(this,"vent"),this.listenTo(this,"render",this.addSpacer)},o}(e.CompositeView)})}.call(this),define("hbs!templates/group/groups_item",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression;return s+='<div class="matrix--header-wrapper">\n<div class="matrix--padded">\n  <a class="matrix--column-header--link" href="#" data-behavior="edit">\n    <span>',(o=n.name)?o=o.call(t,{hash:{}}):(o=t.name,o=typeof o===u?o.apply(t):o),s+=a(o)+'</span><br />\n  </a>\n  <a href="#" data-behavior="destroy" class="delete-link secondary-link">Delete&nbsp;Group</a>\n</div>\n<div class="matrix--column-header-instruction">Include in Group:</div>\n</div>',s});return n}),define("hbs!templates/property_editor/short_text_input",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression;return s+='<form class="formgrid">\n  <div class="formgrid whole">\n    <p>',(o=n.label)?o=o.call(t,{hash:{}}):(o=t.label,o=typeof o===u?o.apply(t):o),s+=a(o)+'</p>\n    <input data-property="input" name="input" type="text" value="',(o=n.value)?o=o.call(t,{hash:{}}):(o=t.value,o=typeof o===u?o.apply(t):o),s+=a(o)+'" />\n    <div class="alert alert-error" data-behavior="error-container" style="display: none;"></div>\n  </div>\n  <div class="formgrid whole">\n    <button class="primary-button ',(o=n.saveClasses)?o=o.call(t,{hash:{}}):(o=t.saveClasses,o=typeof o===u?o.apply(t):o),s+=a(o)+'" data-behavior="model-save">',(o=n.saveLabel)?o=o.call(t,{hash:{}}):(o=t.saveLabel,o=typeof o===u?o.apply(t):o),s+=a(o)+'</button>\n    <button class="warning-button cancel-button" data-behavior="cancel">Cancel</button>\n  </div>\n</form>\n',s});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/property_editor/short_text_input",["require","marionette","hbs!templates/property_editor/short_text_input"],function(e){var n,r,i,s;return n=e("marionette"),i=e("hbs!templates/property_editor/short_text_input"),r=function(e){function r(){return s=r.__super__.constructor.apply(this,arguments),s}return t(r,e),r.prototype.template=i,r.prototype.ui={input:'[data-property="input"]',errorContainer:'[data-behavior="error-container"]'},r.prototype.saveModelOnSave=!1,r.prototype.onSave=null,r.prototype.inputLabel="Update Property",r.prototype.triggers={'click [data-behavior="model-save"]':"click:model:save",'click [data-behavior="cancel"]':"click:model:cancel"},r.prototype.onClickModelCancel=function(){return Vocat.vent.trigger("modal:close")},r.prototype.onClickModelSave=function(){this.save();if(_.isFunction(this.onSave))return this.onSave()},r.prototype.getValue=function(){return this.ui.input.val()},r.prototype.save=function(){var e,t;return e={},e[this.property]=this.getValue(),n.getOption(this,"saveModelOnSave")===!0?this.model.save(e,{validate:!0}):this.model.set(e,{validate:!0}),this.model.isValid()?(Vocat.vent.trigger("modal:close"),this.trigger("model:updated")):(t=this.model.validationError,this.updateError(t))},r.prototype.updateError=function(e){return this.ui.errorContainer.html(e),this.ui.errorContainer.show()},r.prototype.initialize=function(e){return this.property=e.property,this.vent=e.vent,this.onSave=n.getOption(this,"onSave")},r.prototype.serializeData=function(){return{value:this.model.get(this.property),label:n.getOption(this,"inputLabel"),saveClasses:n.getOption(this,"saveClasses"),saveLabel:n.getOption(this,"saveLabel")}},r.prototype.onRender=function(){var e;return e=this.$el.find('[data-property="input"]'),setTimeout(function(){return e.focus()},0)},r}(n.ItemView)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/group/groups_item",["require","marionette","hbs!templates/group/groups_item","views/modal/modal_confirm","views/property_editor/short_text_input"],function(e){var n,r,i,s,o,u;return r=e("marionette"),o=e("hbs!templates/group/groups_item"),i=e("views/modal/modal_confirm"),s=e("views/property_editor/short_text_input"),n=function(e){function n(){return u=n.__super__.constructor.apply(this,arguments),u}return t(n,e),n.prototype.tagName="th",n.prototype.className="matrix--fullbleed",n.prototype.template=o,n.prototype.attributes={"data-behavior":"navigate-group","data-match-height-source":""},n.prototype.triggers={'click [data-behavior="destroy"]':"click:destroy",'click [data-behavior="edit"]':"click:edit"},n.prototype.onClickEdit=function(){var e,t=this;return e=function(){return t.vent.triggerMethod("dirty")},Vocat.vent.trigger("modal:open",new s({model:this.model,vent:this.vent,onSave:e,property:"name",saveLabel:"Update group name",inputLabel:"What would you like to call this group?"}))},n.prototype.onConfirmDestroy=function(){var e=this;return this.model.destroy({success:function(){return Vocat.vent.trigger("error:clear"),Vocat.vent.trigger("error:add",{level:"notice",lifetime:"3000",msg:"The group was successfully deleted."})},error:function(){return Vocat.vent.trigger("error:clear"),Vocat.vent.trigger("error:add",{level:"notice",msg:xhr.responseJSON.errors})}})},n.prototype.onClickDestroy=function(){return Vocat.vent.trigger("modal:open",new i({model:this.model,vent:this,descriptionLabel:"Deleting this group will also delete any submissions and evaluations owned by this group.",confirmEvent:"confirm:destroy",dismissEvent:"dismiss:destroy"}))},n.prototype.serializeData=function(){var e;return e=n.__super__.serializeData.call(this),e.courseId=this.options.courseId,e},n.prototype.initialize=function(e){var t=this;return this.vent=e.vent,this.$el.attr("data-group",this.model.id),this.listenTo(this.model,"change:name",function(){return t.render(),t.vent.trigger("recalculate")})},n}(r.ItemView)})}.call(this),define("hbs!templates/group/groups",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,"<tr>\n\n</tr>"});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/group/groups",["require","marionette","views/group/groups_item","hbs!templates/group/groups"],function(e){var n,r,i,s,o;return i=e("marionette"),r=e("views/group/groups_item"),s=e("hbs!templates/group/groups"),n=function(e){function n(){return o=n.__super__.constructor.apply(this,arguments),o}return t(n,e),n.prototype.childView=r,n.prototype.tagName="thead",n.prototype.template=s,n.prototype.childViewContainer="tr",n.prototype.childViewOptions=function(){return{courseId:this.options.courseId,vent:this.vent}},n.prototype.initialize=function(e){return this.options=e||{},this.vent=i.getOption(this,"vent")},n.prototype.onAddChild=function(){return this.vent.trigger("recalculate")},n.prototype.onRemoveChild=function(){return this.vent.trigger("recalculate")},n}(i.CompositeView)})}.call(this),define("hbs!templates/group/cell",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){function l(e,t){return"switch-checked"}function c(e,t){return'checked="checked"'}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u=this,a="function",f=this.escapeExpression;s+='<div class="switch ',o=n["if"].call(t,t.enrolled,{hash:{},inverse:u.noop,fn:u.program(1,l,i)});if(o||o===0)s+=o;s+='">\n  <input id="checkbox-',(o=n.cid)?o=o.call(t,{hash:{}}):(o=t.cid,o=typeof o===a?o.apply(t):o),s+=f(o)+'" ',o=n["if"].call(t,t.enrolled,{hash:{},inverse:u.noop,fn:u.program(3,c,i)});if(o||o===0)s+=o;return s+=' class="switch-checkbox" type="checkbox">\n  <label for="checkbox-',(o=n.cid)?o=o.call(t,{hash:{}}):(o=t.cid,o=typeof o===a?o.apply(t):o),s+=f(o)+'" class="switch-label" >\n    <span class="switch-inner">\n      <span class="switch-text switch-active">Yes</span>\n      <span class="switch-text switch-inactive">No</span>\n    </span>\n  </label>\n</div>\n',s});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/group/cell",["marionette","hbs!templates/group/cell"],function(e,n){var r,i;return r=function(e){function r(){return i=r.__super__.constructor.apply(this,arguments),i}return t(r,e),r.prototype.template=n,r.prototype.tagName="td",r.prototype.ui={checkbox:"input","switch":".switch"},r.prototype.triggers={"click @ui.checkbox":{event:"click:input",preventDefault:!1}},r.prototype.onClickInput=function(){var e;return this.vent.triggerMethod("dirty"),this.isEnrolled()===!0?(e=_.clone(this.model.get("creator_ids")),e=_.without(e,this.creator.id),this.model.set("creator_ids",e)):(e=_.clone(this.model.get("creator_ids")),e.push(this.creator.id),this.model.set("creator_ids",e)),this.updateUiState()},r.prototype.serializeData=function(){return{enrolled:this.isEnrolled(),cid:this.cid,creatorId:this.creator.id}},r.prototype.isEnrolled=function(){var e;return e=_.indexOf(this.model.get("creator_ids"),this.creator.id)>-1,e},r.prototype.initialize=function(e){return this.creator=e.creator,this.vent=e.vent},r.prototype.onShow=function(){var e=this;return this.listenTo(this.model,"change:creator_ids",function(){return e.updateUiState()})},r.prototype.updateUiState=function(){var e;return e=this.isEnrolled(),this.isEnrolled()?(this.ui["switch"].addClass("switch-checked"),this.ui.checkbox.attr("checked",!0)):(this.ui["switch"].removeClass("switch-checked"),this.ui.checkbox.attr("checked",!1))},r}(e.ItemView)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/group/row",["marionette","views/group/cell"],function(e,n){var r,i;return r=function(e){function r(){return i=r.__super__.constructor.apply(this,arguments),i}return t(r,e),r.prototype.tagName="tr",r.prototype.className="matrix--row",r.prototype.childView=n,r.prototype.childViewOptions=function(){return{vent:this.vent,creator:this.model}},r.prototype.initialize=function(e){return this.vent=e.vent},r.prototype.onAddChild=function(){return this.vent.trigger("recalculate")},r.prototype.onRemoveChild=function(){return this.vent.trigger("recalculate")},r}(e.CollectionView)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/group/matrix",["marionette","views/group/row"],function(e,n){var r,i;return r=function(e){function r(){return i=r.__super__.constructor.apply(this,arguments),i}return t(r,e),r.prototype.tagName="tbody",r.prototype.childView=n,r.prototype.childViewOptions=function(){return{collection:this.collections.group,collections:this.collections,courseId:this.courseId,vent:this.vent}},r.prototype.initialize=function(e){return this.collections=e.collections,this.courseId=e.courseId,this.vent=e.vent},r}(e.CollectionView)})}.call(this),define("hbs!templates/group/save_notify",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,'<div class="alert alert-notice">\n  <aside class="alert--label"></aside>\n  <p>\n    You have made changes to group membership. Would you like to save these changes?\n  <p>\n  </p>\n    <a href="#" data-trigger="save" class="primary-button" >Yes, save changes</a>\n    <a href="#" data-trigger="revert" class="gentle-warning-button cancel-button" >No, revert changes</a>\n  </p>\n</div>\n'});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/group/save_notify",["require","marionette","hbs!templates/group/save_notify","behaviors/global_notification"],function(e){var n,r,i,s,o;return r=e("marionette"),s=e("hbs!templates/group/save_notify"),n=e("behaviors/global_notification"),i=function(e){function r(){return o=r.__super__.constructor.apply(this,arguments),o}return t(r,e),r.prototype.template=s,r.prototype.triggers={'click [data-trigger="save"]':"click:groups:save",'click [data-trigger="revert"]':"click:groups:revert"},r.prototype.behaviors={globalNotification:{behaviorClass:n}},r.prototype.onClickGroupsSave=function(){return this.collection.save(),Vocat.vent.trigger("notification:empty"),Vocat.vent.trigger("error:add",{level:"notice",lifetime:"3000",msg:"Groups have been saved."})},r.prototype.onClickGroupsRevert=function(){return this.collection.each(function(e){return e.revert()}),Vocat.vent.trigger("notification:empty")},r}(r.ItemView)})}.call(this),define("hbs!templates/group/warning",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression;return s+='<div class="alert notice">\n\n	<p>There are no students enrolled in this course.</p>\n	<p class="small">Before you can create groups, you need to add some students to this course. Click the button below\n		to enroll students.\n	</p>\n	<p class="small">\n		<a href="/courses/',(o=n.courseId)?o=o.call(t,{hash:{}}):(o=t.courseId,o=typeof o===u?o.apply(t):o),s+=a(o)+'/manage/enrollment" class="primary-button new-button">Manage Course Enrollment</a>\n	</p>\n\n</div>\n\n',s});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/group/warning",["require","hbs!templates/group/warning"],function(e){var n,r,i;return r=e("hbs!templates/group/warning"),n=function(e){function n(){return i=n.__super__.constructor.apply(this,arguments),i}return t(n,e),n.prototype.template=r,n.prototype.serializeData=function(){return{courseId:Marionette.getOption(this,"courseId")}},n}(Marionette.ItemView)})}.call(this),define("hbs!templates/group/group_warning",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,'<div class="alert notice">\n\n	<p>Create your first group for this course.</p>\n	<p class="small">Projects can be assigned to individual students or to groups of students. To create your first group\n		for this course, click the button below.\n	</p>\n	<p class="small">\n		<a href="#" data-behavior="create-group" class="primary-button new-button">Add a Group</a>\n	</p>\n\n</div>\n\n'});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/group/group_warning",["require","hbs!templates/group/group_warning"],function(e){var n,r,i;return r=e("hbs!templates/group/group_warning"),n=function(e){function n(){return i=n.__super__.constructor.apply(this,arguments),i}return t(n,e),n.prototype.template=r,n.prototype.triggers={"click @ui.createGroup":"click:group:add"},n.prototype.ui={createGroup:'[data-behavior="create-group"]'},n.prototype.onClickGroupAdd=function(){return console.log("heard"),this.vent.triggerMethod("click:group:add")},n.prototype.initialize=function(e){return this.vent=e.vent},n.prototype.serializeData=function(){return{courseId:Marionette.getOption(this,"courseId")}},n}(Marionette.ItemView)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/group/group_layout",["require","marionette","hbs!templates/group/group_layout","views/abstract/abstract_matrix","views/group/creators","views/group/groups","views/modal/modal_confirm","views/group/matrix","views/group/save_notify","views/group/warning","views/group/group_warning"],function(e){var n,r,i,s,o,u,a,f,l,c,h,p;return a=e("marionette"),h=e("hbs!templates/group/group_layout"),n=e("views/abstract/abstract_matrix"),r=e("views/group/creators"),u=e("views/group/groups"),f=e("views/modal/modal_confirm"),s=e("views/group/matrix"),l=e("views/group/save_notify"),c=e("views/group/warning"),o=e("views/group/group_warning"),i=function(e){function n(){return p=n.__super__.constructor.apply(this,arguments),p}return t(n,e),n.prototype.warningVisible=!1,n.prototype.template=h,n.prototype.children={},n.prototype.stickyHeader=!1,n.prototype.regions={creators:'[data-region="creators"]',groups:'[data-region="groups"]',matrix:'[data-region="matrix"]',warning:'[data-region="warning"]'},n.prototype.events={},n.prototype.triggers={'click [data-trigger="add"]':"click:group:add",'click [data-trigger="assign"]':"click:group:assign",'click [data-behavior="matrix-slider-left"]':"slider:left",'click [data-behavior="matrix-slider-right"]':"slider:right"},n.prototype.ui={header:".matrix--column-header",dirtyMessage:'[data-behavior="dirty-message"]',sliderContainer:'[data-behavior="matrix-slider"]',sliderLeft:'[data-behavior="matrix-slider-left"]',sliderRight:'[data-behavior="matrix-slider-right"]',hideOnWarning:'[data-behavior="hide-on-warning"]'},n.prototype.onDirty=function(){return Vocat.vent.trigger("notification:show",new l({collection:this.collections.group}))},n.prototype.onClickGroupAssign=function(){return Vocat.vent.trigger("modal:open",new f({model:this.model,vent:this,descriptionLabel:"Each student will be randomly assigned to one group. If you proceed, students will lose their current group assignments.",confirmEvent:"confirm:assign",dismissEvent:"dismiss:assign"}))},n.prototype.onConfirmAssign=function(){var e,t,n,r,i;t=_.shuffle(this.collections.creator.pluck("id")),e=t.length,n=this.collections.group.length;if(n>0)return r=Math.floor(e/n),i=e%n,this.collections.group.each(function(e){var n;return n=r,i>0&&(n++,i--),e.set("creator_ids",t.splice(0,n))}),this.onDirty()},n.prototype.onClickGroupAdd=function(){var e;return e=new this.collections.group.model({name:this.collections.group.getNextGroupName(),course_id:this.courseId}),e.save(),this.collections.group.add(e)},n.prototype.onRender=function(){return this.collections.creator.length===0&&(this.warning.show(new c({courseId:this.courseId})),this.warningVisible=!0,this.ui.hideOnWarning.hide()),this.collections.group.length===0?(this.warning.show(new o({courseId:this.courseId,vent:this})),this.ui.hideOnWarning.hide(),this.warningVisible=!0):(this.creators.show(new r({collection:this.collections.creator,courseId:this.courseId,vent:this})),this.groups.show(new u({collection:this.collections.group,courseId:this.courseId,vent:this})),this.matrix.show(new s({collection:this.collections.creator,collections:this.collections,courseId:this.courseId,vent:this})),this.warningVisible=!1)},n.prototype.onShow=function(){var e=this;return this.parentOnShow(),this.listenTo(this.collections.group,"add",function(t){var n;return n=e.collections.group.indexOf(t),e.slideToEnd()}),this.listenTo(this.collections.group,"add remove",function(){if(e.collections.group.length===0)return e.render();if(e.warningVisible===!0)return e.render()})},n.prototype.initialize=function(e){return this.collections=e.collections,this.courseId=e.courseId,this.collections.group.courseId=this.courseId},n}(n)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("controllers/group_controller",["marionette","controllers/vocat_controller","views/group/group_layout","collections/user_collection","collections/group_collection"],function(e,n,r,i,s){var o,u;return o=function(e){function n(){return u=n.__super__.constructor.apply(this,arguments),u}return t(n,e),n.prototype.collections={creator:new i([],{}),group:new s([],{})},n.prototype.index=function(e){var t;return t=new r({courseId:e,collections:this.collections}),Vocat.main.show(t)},n}(n)})}.call(this),define("hbs!templates/page/help_test",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,'<div class="shaded-bottom">\n  <header class="bar-header">\n    <h2 class="bar-header--title">Testing Help</h2>\n  </header>\n</div>\n\n<!--\n[\'nnw\', \'nne\', \'ene\', \'ese\', \'sse\', \'ssw\', \'wsw\', \'wnw\']\n-->\n\n<div class="page-content--frame double-space-bottom">\n  <a data-help="test:one" data-help-orientation="nnw" style="width: 45px" href="" class="teal-button">nnw</a>\n  <a data-help="test:one" data-help-orientation="nnw" style="width: 200px; height: 200px;" href="" class="teal-button">nnw</a>\n  <a data-help="test:one" data-help-orientation="nnw" style="width: 65px; height: 65px;" href="" class="teal-button">nnw</a>\n  <a data-help="test:one" data-help-orientation="nnw" style="width: 64px; height: 64px;" href="" class="teal-button">nnw</a>\n  <a data-help="test:one" data-help-orientation="nnw" style="width: 300px" href="" class="teal-button">nnw</a>\n  <a data-help="test:one" data-help-orientation="nnw" style="width: 45px; height: 45px;" href="" class="teal-button">nnw</a>\n  <a data-help="test:one" data-help-orientation="nnw" style="width: 44px; height: 44px;" href="" class="teal-button">nnw</a>\n</div>\n\n<div class="page-content--frame double-space-bottom">\n  <a data-help="test:one" data-help-orientation="nne" style="width: 45px" href="" class="teal-button">nne</a>\n  <a data-help="test:one" data-help-orientation="nne" style="width: 200px; height: 200px;" href="" class="teal-button">nne</a>\n  <a data-help="test:one" data-help-orientation="nne" style="width: 65px; height: 65px;" href="" class="teal-button">nne</a>\n  <a data-help="test:one" data-help-orientation="nne" style="width: 64px; height: 64px;" href="" class="teal-button">nne</a>\n  <a data-help="test:one" data-help-orientation="nne" style="width: 300px" href="" class="teal-button">nne</a>\n  <a data-help="test:one" data-help-orientation="nne" style="width: 45px; height: 45px;" href="" class="teal-button">nne</a>\n  <a data-help="test:one" data-help-orientation="nne" style="width: 44px; height: 44px;" href="" class="teal-button">nne</a>\n</div>\n\n<div class="page-content--frame double-space-bottom">\n  <a data-help="test:one" data-help-orientation="ene" style="width: 45px" href="" class="teal-button">ene</a>\n  <a data-help="test:one" data-help-orientation="ene" style="width: 200px; height: 200px;" href="" class="teal-button">ene</a>\n  <a data-help="test:one" data-help-orientation="ene" style="width: 65px; height: 65px;" href="" class="teal-button">ene</a>\n  <a data-help="test:one" data-help-orientation="ene" style="width: 64px; height: 64px;" href="" class="teal-button">ene</a>\n  <a data-help="test:one" data-help-orientation="ene" style="width: 300px" href="" class="teal-button">ene</a>\n  <a data-help="test:one" data-help-orientation="ene" style="width: 45px; height: 45px;" href="" class="teal-button">ene</a>\n  <a data-help="test:one" data-help-orientation="ene" style="width: 44px; height: 44px;" href="" class="teal-button">ene</a>\n</div>\n\n<div class="page-content--frame double-space-bottom">\n  <a data-help="test:one" data-help-orientation="ese" style="width: 45px" href="" class="teal-button">ese</a>\n  <a data-help="test:one" data-help-orientation="ese" style="width: 200px; height: 200px;" href="" class="teal-button">ese</a>\n  <a data-help="test:one" data-help-orientation="ese" style="width: 65px; height: 65px;" href="" class="teal-button">ese</a>\n  <a data-help="test:one" data-help-orientation="ese" style="width: 64px; height: 64px;" href="" class="teal-button">ese</a>\n  <a data-help="test:one" data-help-orientation="ese" style="width: 300px" href="" class="teal-button">ese</a>\n  <a data-help="test:one" data-help-orientation="ese" style="width: 45px; height: 45px;" href="" class="teal-button">ese</a>\n  <a data-help="test:one" data-help-orientation="ese" style="width: 44px; height: 44px;" href="" class="teal-button">ese</a>\n</div>\n\n<div class="page-content--frame double-space-bottom">\n  <a data-help="test:one" data-help-orientation="sse" style="width: 45px" href="" class="teal-button">sse</a>\n  <a data-help="test:one" data-help-orientation="sse" style="width: 200px; height: 200px;" href="" class="teal-button">sse</a>\n  <a data-help="test:one" data-help-orientation="sse" style="width: 65px; height: 65px;" href="" class="teal-button">sse</a>\n  <a data-help="test:one" data-help-orientation="sse" style="width: 64px; height: 64px;" href="" class="teal-button">sse</a>\n  <a data-help="test:one" data-help-orientation="sse" style="width: 300px" href="" class="teal-button">sse</a>\n  <a data-help="test:one" data-help-orientation="sse" style="width: 45px; height: 45px;" href="" class="teal-button">sse</a>\n  <a data-help="test:one" data-help-orientation="sse" style="width: 44px; height: 44px;" href="" class="teal-button">sse</a>\n</div>\n\n<div class="page-content--frame double-space-bottom">\n  <a data-help="test:one" data-help-orientation="ssw" style="width: 45px" href="" class="teal-button">ssw</a>\n  <a data-help="test:one" data-help-orientation="ssw" style="width: 200px; height: 200px;" href="" class="teal-button">ssw</a>\n  <a data-help="test:one" data-help-orientation="ssw" style="width: 65px; height: 65px;" href="" class="teal-button">ssw</a>\n  <a data-help="test:one" data-help-orientation="ssw" style="width: 64px; height: 64px;" href="" class="teal-button">ssw</a>\n  <a data-help="test:one" data-help-orientation="ssw" style="width: 300px" href="" class="teal-button">ssw</a>\n  <a data-help="test:one" data-help-orientation="ssw" style="width: 45px; height: 45px;" href="" class="teal-button">ssw</a>\n  <a data-help="test:one" data-help-orientation="ssw" style="width: 44px; height: 44px;" href="" class="teal-button">ssw</a>\n</div>\n\n<div class="page-content--frame double-space-bottom">\n  <a data-help="test:one" data-help-orientation="wsw" style="width: 45px" href="" class="teal-button">wsw</a>\n  <a data-help="test:one" data-help-orientation="wsw" style="width: 200px; height: 200px;" href="" class="teal-button">wsw</a>\n  <a data-help="test:one" data-help-orientation="wsw" style="width: 65px; height: 65px;" href="" class="teal-button">wsw</a>\n  <a data-help="test:one" data-help-orientation="wsw" style="width: 64px; height: 64px;" href="" class="teal-button">wsw</a>\n  <a data-help="test:one" data-help-orientation="wsw" style="width: 300px" href="" class="teal-button">wsw</a>\n  <a data-help="test:one" data-help-orientation="wsw" style="width: 45px; height: 45px;" href="" class="teal-button">wsw</a>\n  <a data-help="test:one" data-help-orientation="wsw" style="width: 44px; height: 44px;" href="" class="teal-button">wsw</a>\n</div>\n\n<div class="page-content--frame double-space-bottom">\n  <a data-help="test:one" data-help-orientation="wnw" style="width: 45px" href="" class="teal-button">wnw</a>\n  <a data-help="test:one" data-help-orientation="wnw" style="width: 200px; height: 200px;" href="" class="teal-button">wnw</a>\n  <a data-help="test:one" data-help-orientation="wnw" style="width: 65px; height: 65px;" href="" class="teal-button">wnw</a>\n  <a data-help="test:one" data-help-orientation="wnw" style="width: 64px; height: 64px;" href="" class="teal-button">wnw</a>\n  <a data-help="test:one" data-help-orientation="wnw" style="width: 300px" href="" class="teal-button">wnw</a>\n  <a data-help="test:one" data-help-orientation="wnw" style="width: 45px; height: 45px;" href="" class="teal-button">wnw</a>\n  <a data-help="test:one" data-help-orientation="wnw" style="width: 44px; height: 44px;" href="" class="teal-button">wnw</a>\n</div>\n\n\n\n<div style="height: 200px"></div>'});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/page/help_test",["marionette","hbs!templates/page/help_test"],function(e,n){var r,i;return r=function(e){function r(){return i=r.__super__.constructor.apply(this,arguments),i}return t(r,e),r.prototype.template=n,r.prototype.events={"mouseenter [data-help]":"onHelpShow","mouseleave [data-help]":"onHelpHide"},r.prototype.onHelpShow=function(e){var t,n;return n=$(e.currentTarget),t=n.attr("data-help-orientation"),Vocat.vent.trigger("help:show",{on:n,orientation:t,key:n.attr("data-help")})},r.prototype.onHelpHide=function(e){var t;return t=$(e.currentTarget),Vocat.vent.trigger("help:hide",{on:t,key:t.attr("data-help")})},r}(e.ItemView)})}.call(this),define("hbs!templates/property_editor/long_text_input",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression;return s+='<form class="formgrid">\n  <div class="formgrid whole">\n    <p>',(o=n.label)?o=o.call(t,{hash:{}}):(o=t.label,o=typeof o===u?o.apply(t):o),s+=a(o)+'</p>\n    <textarea rows="5" data-property="input" name="input">',(o=n.value)?o=o.call(t,{hash:{}}):(o=t.value,o=typeof o===u?o.apply(t):o),s+=a(o)+'</textarea>\n    <div class="alert alert-error" data-behavior="error-container" style="display: none;"></div>\n  </div>\n  <div class="formgrid whole">\n    <button class="primary-button ',(o=n.saveClasses)?o=o.call(t,{hash:{}}):(o=t.saveClasses,o=typeof o===u?o.apply(t):o),s+=a(o)+'" data-behavior="model-save">',(o=n.saveLabel)?o=o.call(t,{hash:{}}):(o=t.saveLabel,o=typeof o===u?o.apply(t):o),s+=a(o)+'</button>\n    <button class="warning-button cancel-button" data-behavior="cancel">Cancel</button>\n  </div>\n</form>\n\n',s});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/property_editor/long_text_input",["require","views/property_editor/short_text_input","hbs!templates/property_editor/long_text_input"],function(e){var n,r,i,s;return r=e("views/property_editor/short_text_input"),i=e("hbs!templates/property_editor/long_text_input"),n=function(e){function n(){return s=n.__super__.constructor.apply(this,arguments),s}return t(n,e),n.prototype.template=i,n}(r)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("controllers/page_controller",["marionette","controllers/vocat_controller","views/page/help_test","models/cell","views/property_editor/long_text_input"],function(e,n,r,i,s){var o,u;return o=function(e){function n(){return u=n.__super__.constructor.apply(this,arguments),u}return t(n,e),n.prototype.initialize=function(){},n.prototype.helpDev=function(){var e;return e=new r({}),Vocat.main.show(e)},n.prototype.modalDev=function(){var e;return e=new i({description:"this is the description"}),Vocat.vent.trigger("modal:open",new s({model:e,vent:Vocat.vent}))},n}(n)})}.call(this),define("hbs!templates/portfolio/portfolio",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,'<div data-region="submissions"></div>\n<div data-region="projects"></div>'});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/portfolio/portfolio",["marionette","hbs!templates/portfolio/portfolio"],function(e,n){var r,i;return r=function(e){function r(){return i=r.__super__.constructor.apply(this,arguments),i}return t(r,e),r.prototype.template=n,r.prototype.regions={submissions:'[data-region="submissions"]',projects:'[data-region="projects"]'},r}(e.LayoutView)})}.call(this),function(){define("app/helpers/invert",["handlebars"],function(e){return e.registerHelper("invert",function(e,t){return 100-parseInt(e)})})}.call(this),define("hbs!templates/partials/scoreSummary",["hbs","handlebars","app/helpers/invert","app/helpers/to_i"],function(e,t){var n=t.template(function(e,t,n,r,i){function c(e,t){var r="",i,s;r+="\n    ",s=n["if"].call(e,(i=e.submission,i==null||i===!1?i:i.current_user_has_evaluated),{hash:{},inverse:l.program(4,p,t),fn:l.program(2,h,t)});if(s||s===0)r+=s;return r+="\n  ",r}function h(e,t){var r="",i,s;return r+='\n    <li class="frame-summary--evaluated" style="padding-right: ',s={hash:{}},r+=f((i=n.invert,i?i.call(e,(i=e.submission,i==null||i===!1?i:i.current_user_percentage),s):a.call(e,"invert",(i=e.submission,i==null||i===!1?i:i.current_user_percentage),s)))+'%">\n      <h4 class="frame-summary--score--title">Self-Evaluation</h4>\n      <span class="frame-summary--score--value">',s={hash:{}},r+=f((i=n.to_i,i?i.call(e,(i=e.submission,i==null||i===!1?i:i.current_user_percentage),s):a.call(e,"to_i",(i=e.submission,i==null||i===!1?i:i.current_user_percentage),s)))+"<small>%</small></span>\n    </li>\n    ",r}function p(e,t){return'\n    <li class="frame-summary--unevaluated">\n      <h4 class="frame-summary--score--title">Self-Evaluation</h4>\n      <span class="frame-summary--score--value">&ndash;&ndash;&nbsp;&nbsp;</span>\n    </li>\n    '}function d(e,t){var r="",i,s;r+="\n    ",s=n["if"].call(e,(i=e.submission,i==null||i===!1?i:i.peer_score_percentage),{hash:{},inverse:l.program(9,m,t),fn:l.program(7,v,t)});if(s||s===0)r+=s;return r+="\n  ",r}function v(e,t){var r="",i,s;return r+='\n    <li class="frame-summary--evaluated" style="padding-right: ',s={hash:{}},r+=f((i=n.invert,i?i.call(e,(i=e.submission,i==null||i===!1?i:i.peer_score_percentage),s):a.call(e,"invert",(i=e.submission,i==null||i===!1?i:i.peer_score_percentage),s)))+'%">\n      <h4 class="frame-summary--score--title">Peer Evaluations</h4>\n      <span class="frame-summary--score--value">',s={hash:{}},r+=f((i=n.to_i,i?i.call(e,(i=e.submission,i==null||i===!1?i:i.peer_score_percentage),s):a.call(e,"to_i",(i=e.submission,i==null||i===!1?i:i.peer_score_percentage),s)))+"<small>%</small></span>\n    </li>\n    ",r}function m(e,t){return'\n    <li class="frame-summary--unevaluated">\n      <h4 class="frame-summary--score--title">Peer Evaluations</h4>\n      <span class="frame-summary--score--value">&ndash;&ndash;&nbsp;&nbsp;</span>\n    </li>\n    '}function g(e,t){var r="",i,s;return r+='\n  <li class="frame-summary--evaluated" style="padding-right: ',s={hash:{}},r+=f((i=n.invert,i?i.call(e,(i=e.submission,i==null||i===!1?i:i.instructor_score_percentage),s):a.call(e,"invert",(i=e.submission,i==null||i===!1?i:i.instructor_score_percentage),s)))+'%">\n    <h4 class="frame-summary--score--title">Instructor Evaluations</h4>\n    <span class="frame-summary--score--value">',s={hash:{}},r+=f((i=n.to_i,i?i.call(e,(i=e.submission,i==null||i===!1?i:i.instructor_score_percentage),s):a.call(e,"to_i",(i=e.submission,i==null||i===!1?i:i.instructor_score_percentage),s)))+"<small>%</small></span>\n  </li>\n  ",r}function y(e,t){return'\n  <li class="frame-summary--unevaluated">\n    <h4 class="frame-summary--score--title">Instructor Evaluations</h4>\n    <span class="frame-summary--score--value">&ndash;&ndash;&nbsp;&nbsp;</span>\n  </li>\n  '}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a=n.helperMissing,f=this.escapeExpression,l=this;s+='<ul class="frame-summary--score-list">\n\n  ',u=n["if"].call(t,(o=t.submission,o==null||o===!1?o:o.course_allows_self_evaluation),{hash:{},inverse:l.noop,fn:l.program(1,c,i)});if(u||u===0)s+=u;s+="\n\n  ",u=n["if"].call(t,(o=t.submission,o==null||o===!1?o:o.course_allows_peer_review),{hash:{},inverse:l.noop,fn:l.program(6,d,i)});if(u||u===0)s+=u;s+="\n\n  ",u=n["if"].call(t,(o=t.submission,o==null||o===!1?o:o.instructor_score_percentage),{hash:{},inverse:l.program(13,y,i),fn:l.program(11,g,i)});if(u||u===0)s+=u;return s+="\n\n\n</ul>\n",s});return t.registerPartial("scoreSummary",n),n}),define("hbs!templates/portfolio/portfolio_item_project",["hbs","handlebars","hbs!templates/partials/scoreSummary"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials;var s="",o,u,a="function",f=this.escapeExpression,l=this;s+='<figure class="frame-attachment">\n  <div class="attachment-placeholder">\n	  <span class="attachment-placeholder--message">Video not yet uploaded</span>\n  </div>\n</figure><!-- removes whitespace between columns\n--><div class="frame-summary">\n    <h2 class="frame-summary--title"><a href="/courses/'+f((o=(o=t.project,o==null||o===!1?o:o.course_id),typeof o===a?o.apply(t):o))+"/creator/"+f((o=(o=t.project,o==null||o===!1?o:o.current_user_id),typeof o===a?o.apply(t):o))+"/project/"+f((o=(o=t.project,o==null||o===!1?o:o.id),typeof o===a?o.apply(t):o))+'">'+f((o=(o=t.project,o==null||o===!1?o:o.name),typeof o===a?o.apply(t):o))+'</a></h2>\n    <h3 class="frame-summary--course"><a href="/courses/'+f((o=(o=t.project,o==null||o===!1?o:o.course_id),typeof o===a?o.apply(t):o))+"/creator/"+f((o=(o=t.project,o==null||o===!1?o:o.current_user_id),typeof o===a?o.apply(t):o))+"/project/"+f((o=(o=t.project,o==null||o===!1?o:o.id),typeof o===a?o.apply(t):o))+'"><strong>'+f((o=(o=t.project,o==null||o===!1?o:o.course_department),typeof o===a?o.apply(t):o))+f((o=(o=t.project,o==null||o===!1?o:o.course_number),typeof o===a?o.apply(t):o))+" </strong> "+f((o=(o=t.project,o==null||o===!1?o:o.course_name),typeof o===a?o.apply(t):o))+" [Section "+f((o=(o=t.project,o==null||o===!1?o:o.course_section),typeof o===a?o.apply(t):o))+"]</a></h3>\n		",u=l.invokePartial(r.scoreSummary,"scoreSummary",t,n,r);if(u||u===0)s+=u;return s+='\n    <a class="frame-summary--link" href="/courses/'+f((o=(o=t.project,o==null||o===!1?o:o.course_id),typeof o===a?o.apply(t):o))+"/creator/"+f((o=(o=t.project,o==null||o===!1?o:o.current_user_id),typeof o===a?o.apply(t):o))+"/project/"+f((o=(o=t.project,o==null||o===!1?o:o.id),typeof o===a?o.apply(t):o))+'">Submit a Video</a>\n  </div>',s});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/portfolio/portfolio_projects_item",["marionette","hbs!templates/portfolio/portfolio_item_project"],function(e,n){var r,i;return r=function(e){function r(){return i=r.__super__.constructor.apply(this,arguments),i}return t(r,e),r.prototype.template=n,r.prototype.className="portfolio-frame",r.prototype.defaults={showCourse:!0,showCreator:!0},r.prototype.initialize=function(e){return e=_.extend(this.defaults,e),this.showCourse=e.showCourse,this.showCreator=e.showCreator},r.prototype.serializeData=function(){var e;return e=r.__super__.serializeData.call(this),{project:e,showCourse:this.showCourse,showCreator:this.showCreator}},r}(e.ItemView)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/portfolio/portfolio_projects",["marionette","views/portfolio/portfolio_projects_item"],function(e,n){var r,i;return r=function(e){function r(){return i=r.__super__.constructor.apply(this,arguments),i}return t(r,e),r.prototype.childView=n,r}(e.CollectionView)})}.call(this),define("hbs!templates/portfolio/portfolio_item_empty",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="";return s});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/portfolio/portfolio_submissions_item_empty",["marionette","hbs!templates/portfolio/portfolio_item_empty"],function(e,n){var r,i;return r=function(e){function r(){return i=r.__super__.constructor.apply(this,arguments),i}return t(r,e),r.prototype.template=n,r}(e.ItemView)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/portfolio/portfolio_submissions",["marionette","views/portfolio/portfolio_submissions_item","views/portfolio/portfolio_submissions_item_empty"],function(e,n,r){var i,s;return i=function(e){function i(){return s=i.__super__.constructor.apply(this,arguments),s}return t(i,e),i.prototype.childView=n,i.prototype.emptyView=r,i.prototype.onShow=function(){},i.prototype.onRender=function(){},i}(e.CollectionView)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("collections/portfolio_unsubmitted_collection",["backbone","models/submission"],function(e,n){var r,i;return r=function(e){function r(){return i=r.__super__.constructor.apply(this,arguments),i}return t(r,e),r.prototype.model=n,r.prototype.url=function(){return"/api/v1/portfolio/unsubmitted"},r}(e.Collection)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("controllers/portfolio_controller",["marionette","controllers/vocat_controller","views/portfolio/portfolio","views/portfolio/portfolio_projects","views/portfolio/portfolio_submissions","collections/submission_collection","collections/portfolio_unsubmitted_collection"],function(e,n,r,i,s,o,u){var a,f;return a=function(e){function n(){return f=n.__super__.constructor.apply(this,arguments),f}return t(n,e),n.prototype.collections={submission:new o({}),incomplete:new u({})},n.prototype.portfolio=function(e){var t,n,o;return e==null&&(e=null),t=(new r).render(),o=new s({collection:this.collections.submission}),n=new i({collection:this.collections.incomplete}),this.collections.submission.courseId=e,this.collections.submission.fetch({url:this.collections.submission.url(),data:{brief:!0,limit:10}}),window.Vocat.main.show(t),t.submissions.show(o)},n}(n)})}.call(this),define("hbs!templates/rubric/rubric_layout",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){function l(e,t){var r="",i;r+='\n        <div class="formgrid third">\n          <label>Is this a system-wide rubric?</label>\n          <select data-field="rubric-public" >\n            <option ',i=n.unless.call(e,e["public"],{hash:{},inverse:u.noop,fn:u.program(2,c,t)});if(i||i===0)r+=i;r+=' value="false">No</option>\n            <option ',i=n["if"].call(e,e["public"],{hash:{},inverse:u.noop,fn:u.program(2,c,t)});if(i||i===0)r+=i;return r+=' value="true">Yes</option>\n          </select>\n        </div>\n        ',r}function c(e,t){return'selected="selected"'}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u=this,a="function",f=this.escapeExpression;s+='<div class="page-section">\n <div class="header-wrapper">\n    <div class="header">\n      <h2 class="heading-page-section">Rubric Properties</h2>\n    </div>\n  </div>\n  <div class="body">\n    <div style="margin-top: 0px" data-region="flash"></div>\n    <form class="formgrid">\n      <fieldset>\n        <div class="formgrid whole">\n          <label>Rubric Name</label>\n          <input type="text" value="',(o=n.name)?o=o.call(t,{hash:{}}):(o=t.name,o=typeof o===a?o.apply(t):o),s+=f(o)+'" data-behavior="rubric-name">\n        </div>\n        <div class="formgrid whole">\n          <label>Description</label>\n          <input type="text" value="',(o=n.description)?o=o.call(t,{hash:{}}):(o=t.description,o=typeof o===a?o.apply(t):o),s+=f(o)+'" data-behavior="rubric-desc">\n          <small class="input-message">Enter a brief description of your rubric.</small>\n        </div>\n        <div class="formgrid third">\n          <label>Lowest Possible Score</label>\n          <input min="0" max="100" type="number" step="1" data-behavior="rubric-low">\n          <small class="input-message">Usually, this will be 0.</small>\n        </div>\n        <div class="formgrid third">\n          <label>Highest Possible Score</label>\n          <input min="0" max="100" step="1" type="number" data-behavior="rubric-high">\n          <small class="input-message">VOCAT\'s max score is 100</small>\n        </div>\n        ',o=n["if"].call(t,t.current_user_is_admin,{hash:{},inverse:u.noop,fn:u.program(1,l,i)});if(o||o===0)s+=o;return s+='\n        <div class="formgrid whole">\n          <label>Rubric Score Ranges</label>\n          <div class="range-picker-container" data-region="range-picker"></div>\n          <small class="input-message">As you add ranges to your rubric, dividers will appear on the range above. Drag\n          these dividers to the correct locations to set the score ranges for your rubric.</small>\n        </div>\n      </fieldset>\n    </form>\n  </div>\n</div>\n\n<div class="page-section page-section-clear">\n <div class="header-wrapper">\n    <div class="header">\n      <h2 class="heading-page-section">Rubric Properties</h2>\n    </div>\n    <div class="buttons">\n      <!--\n      <a href="#" data-trigger="recalc" class="primary-button">Reclaculate Matrix</a>\n      -->\n      <a href="#" data-trigger="save" class="primary-button update-button">Save rubric</a>\n      <a href="#" data-trigger="fieldAdd" class="primary-button new-button">Add Criteria</a>\n      <a href="#" data-trigger="rangeAdd" class="primary-button new-button">Add Range</a>\n    </div>\n  </div>\n  <div class="body">\n    <div class="matrix-wrapper">\n\n	    <button style="display: none;" data-behavior="matrix-slider-left" class="matrix-cells-wrapper--back"></button>\n	    <button style="display: none;" data-behavior="matrix-slider-right" class="matrix-cells-wrapper--forward"></button>\n\n	    <div class="matrix-wrapper--top">\n		    <div class="matrix-wrapper--top-left-cell" data-behavior="top-left-cell" data-match-height-target></div>\n		    <div class="matrix-wrapper--top-mask-left" data-match-height-target></div>\n		    <div class="matrix-wrapper--top-mask-right" data-match-height-target></div>\n\n		    <div class="matrix-wrapper--columns">\n			    <table class="table matrix matrix-col-headers" data-behavior="col-headers" data-region="ranges">\n			    </table>\n		    </div>\n	    </div>\n\n	    <div class="matrix-wrapper--bottom">\n\n		    <div class="matrix-wrapper--left">\n			    <div class="matrix-wrapper--creators" data-vertical-headers data-region="fields"></div>\n		    </div>\n\n		    <div class="matrix-wrapper--body" data-behavior="matrix-stage">\n			    <div class="matrix-body" data-behavior="matrix-actor">\n				    <div class="matrix-wrapper--cells">\n					    <table class="table matrix matrix-cells" data-region="matrix">\n					    </table\n				    </div>\n			    </div>\n		    </div>\n\n	    </div>\n\n    </div>\n  </div>\n</div>\n\n\n',s});return n}),define("hbs!templates/rubric/fields",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,'<tbody data-behavior="matrix-fields">\n<!-- fields_item.hbs -->\n</tbody>\n\n'});return n}),define("hbs!templates/rubric/fields_item",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression;return s+='<th class="large">\n	<a class="matrix--column-header--link"  href="#" data-behavior="edit">',(o=n.name)?o=o.call(t,{hash:{}}):(o=t.name,o=typeof o===u?o.apply(t):o),s+=a(o)+'</a>\n	<br />\n	<a href="#" class="delete-link" data-behavior="destroy">Delete</a>\n	</a>\n</th>\n\n',s});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/rubric/fields_item",["require","marionette","hbs!templates/rubric/fields_item","views/modal/modal_confirm","views/property_editor/short_text_input"],function(e){var n,r,i,s,o,u;return r=e("marionette"),o=e("hbs!templates/rubric/fields_item"),i=e("views/modal/modal_confirm"),s=e("views/property_editor/short_text_input"),n=function(e){function n(){return u=n.__super__.constructor.apply(this,arguments),u}return t(n,e),n.prototype.template=o,n.prototype.tagName="tr",n.prototype.triggers={'click [data-behavior="destroy"]':"model:destroy",'click [data-behavior="edit"]':"click:edit"},n.prototype.events={'keyup [data-behavior="name"]':"nameKeyPressed"},n.prototype.onClickEdit=function(){return this.openModal()},n.prototype.openModal=function(){return Vocat.vent.trigger("modal:open",new s({model:this.model,property:"name",saveClasses:"update-button",saveLabel:"Update Field Name",inputLabel:"What would you like to call this criteria?",vent:this.vent}))},n.prototype.nameKeyPressed=function(e){return this.onModelNameUpdate()},n.prototype.onModelDestroy=function(){return Vocat.vent.trigger("modal:open",new i({model:this.model,vent:this,descriptionLabel:"Deleting this field will also delete all descriptions associated with this field.",confirmEvent:"confirm:model:destroy",dismissEvent:"dismiss:model:destroy"}))},n.prototype.onConfirmModelDestroy=function(){return this.model.destroy()},n.prototype.initialize=function(e){return this.vent=e.vent,this.listenTo(this.model,"change:name",this.render,this),this.listenTo(this.model,"edit",this.openModal,this)},n}(r.ItemView)})}.call(this),define("hbs!templates/rubric/fields_empty",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,'<th class="large">\n  <a href="#" data-trigger="fieldAdd" class="primary-button new-button">Add Criteria</a>\n</th>\n\n'});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/rubric/fields_empty",["require","marionette","hbs!templates/rubric/fields_empty"],function(e){var n,r,i,s;return n=e("marionette"),i=e("hbs!templates/rubric/fields_empty"),r=function(e){function n(){return s=n.__super__.constructor.apply(this,arguments),s}return t(n,e),n.prototype.template=i,n.prototype.tagName="tr",n.prototype.initialize=function(e){},n}(n.ItemView)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/rubric/fields",["require","marionette","hbs!templates/rubric/fields","views/rubric/fields_item","views/rubric/fields_empty"],function(e){var n,r,i,s,o,u;return s=e("marionette"),o=e("hbs!templates/rubric/fields"),i=e("views/rubric/fields_item"),n=e("views/rubric/fields_empty"),r=function(e){function r(){return u=r.__super__.constructor.apply(this,arguments),u}return t(r,e),r.prototype.tagName="table",r.prototype.className="table matrix matrix-row-headers",r.prototype.template=o,r.prototype.childViewContainer="tbody",r.prototype.emptyView=n,r.prototype.childView=i,r.prototype.childViewOptions=function(){return{vent:this.vent}},r.prototype.initialize=function(e){return this.vent=e.vent},r}(s.CompositeView)})}.call(this),define("hbs!templates/rubric/ranges",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,"<tr>\n\n</tr>"});return n}),define("hbs!templates/rubric/ranges_item",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression;return s+='<div class="matrix--row-header--item">\n	<a data-behavior="edit" href="#">',(o=n.name)?o=o.call(t,{hash:{}}):(o=t.name,o=typeof o===u?o.apply(t):o),s+=a(o)+'</a><br />\n	<div class="subheader">',(o=n.low)?o=o.call(t,{hash:{}}):(o=t.low,o=typeof o===u?o.apply(t):o),s+=a(o)+" - ",(o=n.high)?o=o.call(t,{hash:{}}):(o=t.high,o=typeof o===u?o.apply(t):o),s+=a(o)+'</div>\n	</div>\n	<div class="range-destroy">\n		<a href="#" class="delete-link" href="#" data-behavior="destroy">Delete</a>\n	</div>\n</div>\n',s});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/rubric/ranges_item",["require","marionette","hbs!templates/rubric/ranges_item","views/modal/modal_confirm","views/property_editor/short_text_input"],function(e){var n,r,i,s,o,u;return n=e("marionette"),o=e("hbs!templates/rubric/ranges_item"),r=e("views/modal/modal_confirm"),s=e("views/property_editor/short_text_input"),i=function(e){function n(){return u=n.__super__.constructor.apply(this,arguments),u}return t(n,e),n.prototype.template=o,n.prototype.tagName="th",n.prototype.attributes={"data-match-height-source":""},n.prototype.ui={lowRange:'[data-behavior="low"]',highRange:'[data-behavior="high"]'},n.prototype.triggers={'click [data-behavior="destroy"]':"model:destroy",'click [data-behavior="edit"]':"click:edit"},n.prototype.events={'keyup [data-behavior="name"]':"nameKeyPressed"},n.prototype.onModelDestroy=function(){return Vocat.vent.trigger("modal:open",new r({model:this.model,vent:this,descriptionLabel:"Deleting this range will also delete all descriptions associated with this range.",confirmEvent:"confirm:model:destroy",dismissEvent:"dismiss:model:destroy"}))},n.prototype.onClickEdit=function(){return this.openModal()},n.prototype.openModal=function(){return Vocat.vent.trigger("modal:open",new s({model:this.model,property:"name",saveClasses:"update-button",saveLabel:"Update Range Name",inputLabel:"What would you like to call this range?",vent:this.vent}))},n.prototype.onConfirmModelDestroy=function(){return this.collection.remove(this.model)},n.prototype.updateLowRange=function(){return this.ui.lowRange.html(this.model.get("low"))},n.prototype.updateHighRange=function(){return this.ui.highRange.html(this.model.get("high"))},n.prototype.initialize=function(e){return this.vent=e.vent,this.listenTo(this.model,"change",this.render,this),this.listenTo(this.model,"edit",this.openModal,this)},n}(n.ItemView)})}.call(this),define("hbs!templates/rubric/ranges_empty",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,'<div class="matrix--row-header--item">\n  <a href="#" data-trigger="rangeAdd" class="primary-button new-button">Add Range</a>\n</div>\n'});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/rubric/ranges_empty",["require","marionette","hbs!templates/rubric/ranges_empty"],function(e){var n,r,i,s;return n=e("marionette"),i=e("hbs!templates/rubric/ranges_empty"),r=function(e){function n(){return s=n.__super__.constructor.apply(this,arguments),s}return t(n,e),n.prototype.template=i,n.prototype.tagName="th",n.prototype.attributes={"data-match-height-source":""},n.prototype.initialize=function(e){},n}(n.ItemView)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/rubric/ranges",["require","marionette","hbs!templates/rubric/ranges","views/rubric/ranges_item","views/rubric/ranges_empty"],function(e){var n,r,i,s,o,u;return i=e("marionette"),o=e("hbs!templates/rubric/ranges"),r=e("views/rubric/ranges_item"),n=e("views/rubric/ranges_empty"),s=function(e){function i(){return u=i.__super__.constructor.apply(this,arguments),u}return t(i,e),i.prototype.tagName="thead",i.prototype.template=o,i.prototype.childViewContainer="tr",i.prototype.childView=r,i.prototype.emptyView=n,i.prototype.childViewOptions=function(){return{collection:this.collection,vent:this.vent}},i.prototype.initialize=function(e){return this.vent=e.vent},i}(i.CompositeView)})}.call(this),define("hbs!templates/rubric/cell",["hbs","handlebars","app/helpers/truncate"],function(e,t){var n=t.template(function(e,t,n,r,i){function l(e,t){var r="",i,s;return r+='\n	  <a href="#">',s={hash:{}},r+=a((i=n.truncate,i?i.call(e,e.description,100,s):u.call(e,"truncate",e.description,100,s)))+"</a>\n  ",r}function c(e,t){return'\n	  <a href="#">Enter Description</a>\n  '}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u=n.helperMissing,a=this.escapeExpression,f=this;s+='<div data-behavior="open-modal">\n  ',o=n["if"].call(t,t.description,{hash:{},inverse:f.program(3,c,i),fn:f.program(1,l,i)});if(o||o===0)s+=o;return s+="\n</div>\n",s});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/rubric/cell",["require","marionette","hbs!templates/rubric/cell","views/property_editor/long_text_input"],function(e){var n,r,i,s,o;return i=e("marionette"),s=e("hbs!templates/rubric/cell"),r=e("views/property_editor/long_text_input"),n=function(e){function n(){return o=n.__super__.constructor.apply(this,arguments),o}return t(n,e),n.prototype.template=s,n.prototype.tagName="td",n.prototype.className="wrap-cell rubric-cell",n.prototype.onShow=function(){var e=this;return this.$el.on("click",function(t){return e.triggerMethod("open:modal")})},n.prototype.initialize=function(e){this.vent=Vocat.vent,this.range=this.model,this.field=e.field,this.rubric=e.rubric,this.model=this.findModel(),this.model!=null&&this.listenTo(this.model,"change",function(){return this.render()}),this.model.rangeModel!=null&&this.listenTo(this.model.rangeModel,"change:name",this.render,this);if(this.model.fieldModel!=null)return this.listenTo(this.model.fieldModel,"change:name",this.render,this)},n.prototype.findModel=function(){var e,t;return e=this.rubric.get("cells"),t=e.findWhere({field:this.field.get("id"),range:this.range.get("id")}),t},n.prototype.serializeData=function(){var e;return e=n.__super__.serializeData.call(this),this.model.rangeModel!=null&&(e.rangeName=this.model.rangeModel.get("name")),this.model.fieldModel!=null&&(e.fieldName=this.model.fieldModel.get("name")),e},n.prototype.onOpenModal=function(){var e;return e="Description: "+this.model.rangeModel.get("name")+" "+this.model.fieldModel.get("name"),this.vent.trigger("modal:open",new r({model:this.model,inputLabel:e,saveLabel:"Update Description",saveClasses:"update-button",property:"description",vent:this.vent}))},n}(i.ItemView)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/rubric/row",["marionette","collections/collection_proxy","views/rubric/cell"],function(e,n,r){var i,s;return i=function(e){function n(){return s=n.__super__.constructor.apply(this,arguments),s}return t(n,e),n.prototype.tagName="tr",n.prototype.childView=r,n.prototype.childViewOptions=function(){return{vent:this.vent,field:this.model,rubric:this.rubric}},n.prototype.initialize=function(e){var t=this;return this.rubric=e.rubric,this.vent=e.vent,this.listenTo(this.rubric.get("ranges"),"remove",function(e){return t.render()})},n}(e.CollectionView)})}.call(this),define("hbs!templates/rubric/row_empty",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,'<td>\n  <div data-behavior="open-modal">\n    <p>\n      Add ranges and criteria to begin building your rubric.\n    </p>\n  </div>\n</td>'});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/rubric/row_empty",["require","marionette","hbs!templates/rubric/row_empty"],function(e){var n,r,i,s;return n=e("marionette"),i=e("hbs!templates/rubric/row_empty"),r=function(e){function n(){return s=n.__super__.constructor.apply(this,arguments),s}return t(n,e),n.prototype.tagName="tr",n.prototype.attributes={"data-behavior":"no-rows"},n.prototype.template=i,n}(n.ItemView)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/rubric/matrix",["require","marionette","views/rubric/row","views/rubric/row_empty"],function(e){var n,r,i,s,o;return r=e("marionette"),s=e("views/rubric/row"),n=e("views/rubric/row_empty"),i=function(e){function r(){return o=r.__super__.constructor.apply(this,arguments),o}return t(r,e),r.prototype.tagName="tbody",r.prototype.childView=s,r.prototype.emptyView=n,r.prototype.childViewOptions=function(){return{collection:this.model.get("ranges"),rubric:this.model,vent:this.vent}},r.prototype.initialize=function(e){return this.collection=this.model.get("fields"),this.vent=e.vent},r}(r.CollectionView)})}.call(this),define("hbs!templates/rubric/range_picker",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,'<div style="width: 100%" data-behavior="range-picker" border="0" class="range-picker">\n  <div class="ticks" data-container="ticks"></div>\n  <div class="handles" data-behavior="draggable-container"></div>\n</div>\n'});return n}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/rubric/range_picker",["require","hbs!templates/rubric/range_picker","jquery_ui","marionette"],function(e){var n,r,i,s,o;return s=e("hbs!templates/rubric/range_picker"),i=e("jquery_ui"),n=e("marionette"),r=function(e){function n(){return o=n.__super__.constructor.apply(this,arguments),o}return t(n,e),n.prototype.template=s,n.prototype.ui={draggableContainer:'[data-behavior="draggable-container"]',handles:"[data-handle]",rangePicker:'[data-behavior="range-picker"]',ticks:'[data-container="ticks"]'},n.prototype.fallBackWidth=922,n.prototype.snapToTick=function(e,t){var n,r,i,s,o,u,a,f,l;return t==null&&(t=null),l=this.getValues(),n=e.position().left,f=this.getScoreFromLeft(n),i="next",t!=null&&t<f&&(i="previous"),_.filter(l,function(e){return e!==f}).length<l.length-1&&(r=this.getAvailableValues(l),o=_.min(_.reject(r,function(e){return e<f})),a=_.max(_.reject(r,function(e){return e>f})),s=this.getLeftFromScore(o)-n,u=n-this.getLeftFromScore(a),s<u?f=o:f=a),this.moveTo(e,f,!0)},n.prototype.updateLabel=function(e,t){var n;return n=this.getScoreFromLeft(t),e.find(".dragger-label").html(n)},n.prototype.handlePositionChange=function(e){return this.updateLabel(e.helper,e.position.left)},n.prototype.getTickCountForRange=function(e){var t,n,r;return t=0,_.each(function(){r=[];for(var t=0;0<=e?t<=e:t>=e;0<=e?t++:t--)r.push(t);return r}.apply(this),function(n){if(e%n===0&&n<=15)return t=n}),e<=15?t===e:t<5&&(t=10),t},n.prototype.moveTo=function(e,t,n){var r,i=this;return n==null&&(n=!1),r=this.getLeftFromScore(t),n===!0?e.animate({left:r},200,function(){return i.updateCollection()}):(e.css({left:r}),this.updateCollection()),this.updateLabel(e,r)},n.prototype.updateTicks=function(){var e,t,n,r,i,s,o,u;this.ui.ticks.empty(),i=this.getPossibleTickCount(),o=this.getTickCountForRange(i),this.updateTickInc(),t=1,u=[];while(t<=o)s=i/o*t,n=s*this.tickInc,r=this.getScoreFromLeft(n),r!==this.model.get("high")&&(e='<div style="left: '+n+'px" class="mark"><span>'+r+"</span></div>",this.ui.ticks.append(e)),u.push(t++);return u},n.prototype.isPrime=function(e){var t,n;if(_.isNaN(e)||!isFinite(e)||e%1||e<2)return!1;if(e%2===0)return e===2;if(e%3===0)return e===3;n=Math.sqrt(e),t=5;while(t<=n){if(e%t===0)return!1;if(e%(t+2)===0)return!1;t+=6}return!0},n.prototype.updateTickInc=function(){return this.tickInc=this.getRangePickerWidth()/this.getPossibleValueCount()},n.prototype.getRangePickerWidth=function(){var e;return this.ui.rangePicker.is(":visible")?e=this.ui.rangePicker.width():e=this.fallBackWidth,e},n.prototype.getPossibleValueCount=function(){return this.model.get("high")-this.model.get("low")},n.prototype.getPossibleTickCount=function(){var e,t,n;n=this.getPossibleValueCount(),t=this.isPrime(n)&&n>15;if(t===!0){e=n;while(this.isPrime(e)===!0)e--;n=e}return n},n.prototype.getScoreFromLeft=function(e){var t,n;return e===0?t=this.model.get("low"):(n=e/this.tickInc,t=Math.round(n+this.model.get("low"))),t},n.prototype.getLeftFromScore=function(e){var t;return t=e-this.model.get("low"),t*this.tickInc},n.prototype.fixValues=function(e){var t,n,r,i,s,o=this;r=e.slice(0),i=function(e){var t;return t=parseInt(e)},r=_.sortBy(r,i),r.push(this.model.get("low")),r.push(this.model.get("high")),r=_.uniq(r),s=this.collection.length+1,r=_.filter(r,function(e){return e<=o.model.get("high")&&e>=o.model.get("low")}),r=_.sortBy(r,i),n=s-r.length,n<0&&r.length>2&&r.splice(1,1),r=_.uniq(r);while(n>0)t=this.guessNextValue(r),t!=null&&r.push(t),r=_.sortBy(r,i),n--;return r},n.prototype.guessNextValue=function(e){var t,n;return t=this.getLargestGapInSequence(e),n=Math.floor(_.reduce(t,function(e,t){return e+t})/2),n},n.prototype.getLargestGapInSequence=function(e){var t,n,r,i,s;return i=_.max(e)-_.min(e)+1,e.length===i?s=[_.max(e),_.max(e)]:(t=_.map(e,function(t,n){var r;return n!==0?r=t-e[n-1]-1:0}),n=_.indexOf(t,_.max(t)),r=n-1,s=[e[r],e[n]]),s},n.prototype.getAvailableValues=function(e){var t,n,r,i,s,o,u;return r=_.countBy(e,function(e){return e}),s=_.min(e),i=_.max(e),t=function(){u=[];for(var e=s;s<=i?e<=i:e>=i;s<=i?e++:e--)u.push(e);return u}.apply(this),n=_.filter(t,function(t){return _.indexOf(e,t,!0)===-1||t===i&&r[t]<=2}),n},n.prototype.getMissingFromSequence=function(e){var t,n,r,i,s,o,u;r=[];for(t=o=0,u=e.length;o<u;t=++o){i=e[t];if(e[t+1]-e[t]!==1){s=e[t+1]-e[t],n=1;while(n<s)r.push(e[t]+n),n++}}return r},n.prototype.updateCollection=function(){var e,t,n=this;if(this.collection.length>0)return t=this.getValues(),e=[],_.each(t,function(n,r){var i,s;if(r+1!==t.length)return r===0?s=n:s=n,r+1===t.length-1?i=t[r+1]:i=t[r+1]-1,e.push({low:s,high:i})}),_.each(e,function(e,t){var r;r=n.collection.at(t);if(r!=null)return r.set(e)})},n.prototype.getValues=function(){var e,t=this;return e=[],_.each(this.handles,function(n){var r,i,s;r=$(n);if(r.is(":visible"))return i=r.position().left,s=t.getScoreFromLeft(i),e.push(s)}),e=_.sortBy(e,function(e){return parseInt(e)}),e},n.prototype.getValuesFromCollection=function(e){var t;return e.length>0?(t=e.pluck("low"),t=_.sortBy(t,function(e){return parseInt(e)}),t):[]},n.prototype.initializeUi=function(){var e,t=this;return this.handles=[],this.updateTicks(),e=this.getValuesFromCollection(this.collection),e=this.fixValues(e),this.ui.draggableContainer.empty(),_.each(e,function(n,r){var i,s;return i=$('<div style="position: absolute" class="dragger" data-handle data-behavior="draggable"><div class="dragger-label"></div></div>'),t.ui.draggableContainer.append(i),t.moveTo(i,n),t.handles.push(i),r!==0&&r+1!==e.length?(s=0,i.draggable({axis:"x",containment:"parent",drag:function(e,n){return t.handlePositionChange(n)},start:function(e,n){return _.each(t.handles,function(e){return e.removeClass("dragger-active")}),n.helper.addClass("dragger-active"),s=n.helper.position()},stop:function(e,n){return t.snapToTick(n.helper,s.left),t.updateCollection()}})):r===0?i.addClass("dragger-locked dragger-low"):i.addClass("dragger-locked dragger-high")}),this.updateCollection()},n.prototype.onRender=function(){return this.initializeUi()},n.prototype.onShow=function(){if(_.isObject(this.ui.rangePicker))return this.initializeUi()},n.prototype.initialize=function(e){var t=this;return this.vent=e.vent,this.listenTo(this.model,"change:low change:high",function(){return t.render()}),this.listenTo(this.collection,"add remove",function(){return t.render()})},n}(n.ItemView)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/rubric/rubric_layout",["require","hbs!templates/rubric/rubric_layout","models/rubric","models/field","models/range","views/rubric/fields","views/rubric/ranges","views/rubric/matrix","views/rubric/range_picker","views/flash/flash_messages","views/abstract/abstract_matrix","views/property_editor/short_text_input"],function(e){var n,r,i,s,o,u,a,f,l,c,h,p,d;return p=e("hbs!templates/rubric/rubric_layout"),c=e("models/rubric"),r=e("models/field"),u=e("models/range"),i=e("views/rubric/fields"),f=e("views/rubric/ranges"),o=e("views/rubric/matrix"),a=e("views/rubric/range_picker"),s=e("views/flash/flash_messages"),n=e("views/abstract/abstract_matrix"),h=e("views/property_editor/short_text_input"),l=function(e){function n(){return d=n.__super__.constructor.apply(this,arguments),d}return t(n,e),n.prototype.template=p,n.prototype.collections={},n.prototype.views={},n.prototype.regions={fields:'[data-region="fields"]',ranges:'[data-region="ranges"]',matrix:'[data-region="matrix"]',flash:'[data-region="flash"]',rangePicker:'[data-region="range-picker"]'},n.prototype.events={'keyup [data-behavior="rubric-name"]':"handleNameChange",'keyup [data-behavior="rubric-desc"]':"handleDescChange",'change [data-behavior="rubric-low"]':"handleLowChange",'change [data-behavior="rubric-high"]':"handleHighChange",'change [data-field="rubric-public"]':"handlePublicChange",'click [data-trigger="save"]':"handleSaveClick",'click [data-trigger="rangeAdd"]':"handleRangeAdd",'click [data-trigger="fieldAdd"]':"handleFieldAdd"},n.prototype.triggers={'click [data-behavior="matrix-slider-left"]':"slider:left",'click [data-behavior="matrix-slider-right"]':"slider:right",'click [data-trigger="recalc"]':"recalculate:matrix"},n.prototype.ui={nameInput:'[data-behavior="rubric-name"]',publicInput:'[data-field="rubric-public"]',selectedPublicInput:'[data-behavior="rubric-public"]:checked',descInput:'[data-behavior="rubric-desc"]',lowInput:'[data-behavior="rubric-low"]',highInput:'[data-behavior="rubric-high"]',rangePointsInput:'[data-behavior="range-points"]',sliderLeft:'[data-behavior="matrix-slider-left"]',sliderRight:'[data-behavior="matrix-slider-right"]'},n.prototype.onRecalculateMatrix=function(){return this.recalculateMatrix()},n.prototype.handlePublicChange=function(e){return this.model.set("public",this.ui.publicInput.val())},n.prototype.handleLowChange=function(e){var t;return t=this.ui.lowInput.val(),this.model.isValidLow(t)?this.model.setLow(t):(this.ui.lowInput.val(this.model.getLow()),this.trigger("error:add",{level:"notice",msg:"Setting the lowest possible score above "+this.model.getLow()+" would make the total range too small to accomodate this rubric. Before you can increase the lowest possible score, you must remove one or more ranges from your rubric."}))},n.prototype.handleHighChange=function(e){var t;return t=this.ui.highInput.val(),this.model.isValidHigh(t)?this.model.setHigh(t):(this.ui.highInput.val(this.model.getHigh()),this.trigger("error:add",{level:"notice",msg:"Setting the highest possible score below "+this.model.getHigh()+" would make the total range too small to accomodate this rubric. Before you can reduce the highest possible score, you must remove one or more ranges from your rubric."}))},n.prototype.handleNameChange=function(e){return this.model.set("name",this.ui.nameInput.val())},n.prototype.handleDescChange=function(e){return this.model.set("description",this.ui.descInput.val())},n.prototype.handleSaveClick=function(e){var t=this;return e.preventDefault(),this.model.save({},{success:function(){return Vocat.vent.trigger("error:add",{level:"notice",msg:"Rubric has been saved"})},error:function(e,t){var n;return t.responseJSON!=null?n=t.responseJSON:n="Unable to save rubric. Be sure to add a title, and at least one range and field.",Vocat.vent.trigger("error:add",{level:"error",msg:n})}})},n.prototype.handleRangeAdd=function(e){var t,n;return e.preventDefault(),this.model.canAddRange()?(n=new u({}),t=new h({model:n,property:"name",saveClasses:"update-button",saveLabel:"Update Range",inputLabel:"What would you like to call this range?",vent:this.vent}),this.listenTo(t,"model:updated",function(e){return this.model.get("ranges").add(n)}),Vocat.vent.trigger("modal:open",t)):this.trigger("error:add",{level:"notice",msg:"Before you can add another range to this rubric, you must increase the number of available points by changing the highest possible score field, above."})},n.prototype.handleFieldAdd=function(e){var t,n;return e.preventDefault(),t=new r({}),n=new h({model:t,property:"name",saveClasses:"update-button",saveLabel:"Update Field Name",inputLabel:"What would you like to call this criteria?",vent:this.vent}),this.listenTo(n,"model:updated",function(e){return this.model.get("fields").add(t)}),Vocat.vent.trigger("modal:open",n)},n.prototype.parseRangePoints=function(e){var t;return e==null&&(e=""),t=e.split(" "),t=_.map(t,function(e){var t;t=parseInt(e);if(!_.isNaN(t))return t}),t=_.reject(t,function(e){return e==null}),t=_.uniq(t).sort(function(e,t){return e-t}),t},n.prototype.serializeData=function(){var e;return e=n.__super__.serializeData.call(this),Vocat.currentUserRole==="administrator"?e.current_user_is_admin=!0:e.current_user_is_admin=!1,e},n.prototype.initialize=function(e){var t=this;return this.model||(e.rubricId?(this.model=new c({id:e.rubricId}),this.model.fetch({success:function(e){return t.render()}})):this.model=new c({})),this.listenTo(this.model,"change",function(e){return t.recalculateMatrix()}),this.listenTo(this.model,"invalid",function(e,n){return t.trigger("error:add",{level:"error",lifetime:5e3,msg:n})})},n.prototype.onShow=function(){return this.parentOnShow(),this.chosenifySelects()},n.prototype.chosenifySelects=function(){var e=this;return setTimeout(function(){return e.ui.publicInput.chosen({disable_search_threshold:1e3})},0)},n.prototype.onRender=function(){return this.chosenifySelects(),this.views.fields=new i({collection:this.model.get("fields"),vent:this}),this.views.ranges=new f({collection:this.model.get("ranges"),vent:this}),this.views.matrix=new o({model:this.model,vent:this}),this.views.rangePicker=new a({collection:this.model.get("ranges"),model:this.model,vent:this}),this.matrix.show(this.views.matrix),this.fields.show(this.views.fields),this.ranges.show(this.views.ranges),this.flash.show(new s({vent:this,clearOnAdd:!0})),this.rangePicker.show(this.views.rangePicker),this.bindUIElements(),this.recalculateMatrix(),this.ui.highInput.val(this.model.getHigh()),this.ui.lowInput.val(this.model.getLow())},n}(n)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("controllers/rubric_controller",["marionette","controllers/vocat_controller","views/rubric/rubric_layout"],function(e,n,r){var i,s;return i=function(e){function n(){return s=n.__super__.constructor.apply(this,arguments),s}return t(n,e),n.prototype["new"]=function(e){var t;return t=new r({courseId:e}),Vocat.main.show(t)},n.prototype.editWithoutCourse=function(e){var t;return t=new r({rubricId:e}),Vocat.main.show(t)},n.prototype.edit=function(e,t){var n;return n=new r({rubricId:t}),Vocat.main.show(n)},n}(n)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("controllers/submission_controller",["require","marionette","controllers/vocat_controller","views/course_map/detail_creator","views/submission/submission_layout","collections/submission_for_course_user_collection","collections/submission_for_group_collection","collections/project_collection","collections/user_collection","collections/group_collection"],function(e){var n,r,i,s,o,u,a,f,l,c,h;return o=e("marionette"),c=e("controllers/vocat_controller"),r=e("views/course_map/detail_creator"),f=e("views/submission/submission_layout"),n=e("collections/submission_for_course_user_collection"),s=e("collections/submission_for_group_collection"),u=e("collections/project_collection"),l=e("collections/user_collection"),i=e("collections/group_collection"),a=function(e){function o(){return h=o.__super__.constructor.apply(this,arguments),h}return t(o,e),o.prototype.collections={user:new l({}),group:new i({},{courseId:null}),project:new u({})},o.prototype.creatorDetail=function(e,t){var i,s;return i=this.collections.user.first(),s=new r({courseId:e,model:i,collection:new n,standalone:!0}),window.Vocat.main.show(s)},o.prototype.groupDetail=function(e,t){var n,i;return n=this.collections.group.first(),i=new r({courseId:e,model:n,collection:new s,standalone:!0}),window.Vocat.main.show(i)},o.prototype.creatorProjectDetail=function(e,t,r){var i,s,o,u,a=this;return u=this.collections.user.first(),o=this.collections.project.first(),i=new n,s=this.deferredCollectionFetching(i,{course:e,user:t},"Loading submission..."),$.when(s).then(function(){var n,s;return n=i.findWhere({creator_type:"User",creator_id:parseInt(t),project_id:parseInt(r)}),s=new f({courseId:e,creator:u,model:n,project:o}),window.Vocat.main.show(s)})},o.prototype.groupProjectDetail=function(e,t,n){var r,i,o,u,a=this;return o=this.collections.group.first(),u=this.collections.project.first(),r=new s,i=this.deferredCollectionFetching(r,{course:e,group:t},"Loading submission..."),$.when(i).then(function(){var i,s;return i=r.findWhere({creator_type:"Group",creator_id:parseInt(t),project_id:parseInt(n)}),s=new f({courseId:e,creator:o,model:i,project:u}),window.Vocat.main.show(s)})},o}(c)})}.call(this),function(){define("app/vocat",["require","marionette","backbone","views/modal/modal_layout","views/modal/modal_confirm","views/layout/dropdown","views/layout/figures_collection","views/layout/chosen","views/layout/header_drawer","views/layout/header_drawer_trigger","views/notification/notification_layout","views/notification/notification_exception"],function(e){var t,n,r,i,s,o,u,a,f,l,c,h;return u=e("marionette"),t=e("backbone"),f=e("views/modal/modal_layout"),a=e("views/modal/modal_confirm"),r=e("views/layout/dropdown"),i=e("views/layout/figures_collection"),n=e("views/layout/chosen"),o=e("views/layout/header_drawer"),s=e("views/layout/header_drawer_trigger"),c=e("views/notification/notification_layout"),l=e("views/notification/notification_exception"),window.Vocat=h=new t.Marionette.Application,$('[data-behavior="dropdown"]').each(function(e,t){return new r({el:t,vent:h.vent})}),$('[data-behavior="header-drawer-trigger"]').each(function(e,t){return new s({el:t,vent:h.vent})}),$('[data-behavior="header-drawer"]').each(function(e,t){return new o({el:t,vent:h.vent})}),$('[data-behavior="chosen"]').each(function(e,t){return new n({el:t,vent:h.vent})}),h.routes={admin:{"admin/courses/:course/evaluators":"evaluatorEnrollment","admin/courses/:course/assistants":"assistantEnrollment","admin/courses/:course/creators":"creatorEnrollment","admin/users/:user/courses":"courseEnrollment"},course:{"courses/:course/manage/enrollment":"creatorEnrollment","courses/:course/manage/projects":"courseManageProjects"},coursemap:{"courses/:course/users/evaluations":"userGrid","courses/:course/groups/evaluations":"groupGrid","courses/:course/users/evaluations/creator/:creator":"userCreatorDetail","courses/:course/users/evaluations/project/:project":"userProjectDetail","courses/:course/users/evaluations/creator/:creator/project/:project":"userCreatorProjectDetail","courses/:course/groups/evaluations/creator/:creator":"groupCreatorDetail","courses/:course/groups/evaluations/project/:project":"groupProjectDetail","courses/:course/groups/evaluations/creator/:creator/project/:project":"groupCreatorProjectDetail","courses/:course/users/project/:project":"standaloneUserProjectDetail"},group:{"courses/:course/manage/groups":"index"},page:{"pages/help_dev":"helpDev","pages/modal_dev":"modalDev"},rubric:{"courses/:course/manage/rubrics/new":"new","admin/rubrics/new":"new","rubrics/new":"new","courses/:course/manage/rubrics/:rubric/edit":"edit","admin/rubrics/:rubric/edit":"editWithoutCourse","rubrics/:rubric/edit":"editWithoutCourse"},submission:{"courses/:course/users/creator/:creator/project/:project":"creatorProjectDetail","courses/:course/groups/creator/:creator/project/:project":"groupProjectDetail","courses/:course/view/project/:project":"creatorProjectDetail","courses/:course/groups/creator/:creator":"groupDetail","courses/:course/users/creator/:creator":"creatorDetail"}},h.addRegions({main:"#region-main",modal:'[data-region="modal"]'}),$('[data-region="global-notifications"]').length>0&&h.addRegions({notification:'[data-region="global-notifications"]'}),h.addInitializer(function(){var n,r,i,s,o,a;s=Modernizr.history,t.history.start({pushState:s}),s?r=t.history.getFragment():r=window.location.pathname.substring(1),t.history.stop(),o={},n=!1,a=new t.Router,_.each(h.routes,function(e,t){return o[t]==null&&(o[t]=[]),_.each(e,function(e,i){var s;s=a._routeToRegExp(i),o[t].push(s);if(r.match(s))return n=t})});if(n!==!1){i=function(e,n){var i;i=h.routes[n],h.router=new u.AppRouter({controller:new e,appRoutes:i}),t.history.start({pushState:s});if(s===!1)return a.navigate(r,{trigger:!0})};switch(n){case"course":return e(["controllers/course_controller"],function(e){return i(e,"course")});case"admin":return e(["controllers/admin_controller"],function(e){return i(e,"admin")});case"coursemap":return e(["controllers/coursemap_controller"],function(e){return i(e,"coursemap")});case"group":return e(["controllers/group_controller"],function(e){return i(e,"group")});case"page":return e(["controllers/page_controller"],function(e){return i(e,"page")});case"portfolio":return e(["controllers/portfolio_controller"],function(e){return i(e,"portfolio")});case"rubric":return e(["controllers/rubric_controller"],function(e){return i(e,"rubric")});case"submission":return e(["controllers/submission_controller"],function(e){return i(e,"submission")})}}}),h.on("before:start",function(){var e,n,r,i=this;return this.hasOwnProperty("notification")&&(r=new c({vent:h.vent}),h.notification.show(r)),n=new f({vent:this}),h.modal.show(n),h.listenTo(h.vent,"exception",function(e){return h.main.reset(),h.vent.trigger("notification:show",new l({msg:e}))}),$("[data-modalconfirm]").each(function(e,t){var n,r=this;return n=$(t),n.on("click",function(e){if(!n.hasClass("modal-blocked"))return e.preventDefault(),e.stopPropagation(),h.vent.trigger("modal:open",new a({vent:h,descriptionLabel:n.attr("data-modalconfirm"),confirmElement:n,dismissEvent:"dismiss:publish"}))})}),e=t.Wreqr.radio.channel("global"),$("html").bind("click",function(t){return e.vent.trigger("user:action",t)})}),h})}.call(this),function(){requirejs.config({waitSeconds:20,shim:{jquery_ujs:["jquery"],"vendor/ui/jquery_ui":["jquery_rails"],"vendor/plugins/iframe_transport":["jquery_rails"],"vendor/plugins/file_upload":["jquery_rails"],"vendor/plugins/autosize":["jquery_rails"],"vendor/plugins/waypoints":["jquery_rails"],"vendor/plugins/chosen":["jquery_rails"],"vendor/plugins/waypoints":["jquery"],"vendor/plugins/waypoints_sticky":["jquery"],"vendor/plugins/ajax_chosen":["vendor/plugins/chosen"],"vendor/dc/dc":{deps:["vendor/crossfilter/crossfilter","vendor/d3/d3"],exports:"dc"},"vendor/crossfilter/crossfilter":{exports:"crossfilter"},"vendor/d3/d3":{exports:"d3"}},hbs:{disableI18n:!0,partialsUrl:"templates/partials",helperPathCallback:function(e){return"app/helpers/"+e}},paths:{templates:"app/templates",routers:"app/routers",views:"app/views",behaviors:"app/behaviors",controllers:"app/controllers",collections:"app/collections",helpers:"app/helpers",models:"app/models",hbs:"vendor/require/hbs",cs:"vendor/require/coffee-script",jquery:"vendor/jquery/jquery",jquery_ujs:"vendor/jquery/jquery_ujs",jquery_rails:"vendor/jquery/jquery-with-rails-ujs",i18nprecompile:"vendor/hbs/i18nprecompile",json2:"vendor/hbs/json2",handlebars:"vendor/handlebars/handlebars",backbone:"vendor/backbone/backbone_1.1.2",underscore:"vendor/underscore/underscore","backbone.wreqr":"vendor/plugins/backbone.wreqr","backbone.eventbinder":"vendor/plugins/backbone.eventbinder","backbone.babysitter":"vendor/plugins/backbone.babysitter",marionette:"vendor/marionette/marionette_2.2.0",jquery_ui:"vendor/ui/jquery_ui",waypoints:"vendor/plugins/waypoints",waypoints_sticky:"vendor/plugins/waypoints_sticky"},map:{"*":{"jquery.ui.widget":"vendor/ui/jquery_ui"}}}),require(["app/vocat"],function(e){return $(function(){return e.start()})})}.call(this),define("bootstrap",function(){});